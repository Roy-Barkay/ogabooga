!function(e){e()}((function(){"use strict";var e="WebSDK v1.1+273* 2023-03-29 16:19:24 +0200 5883fc0";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */console.log.bind(console),console.error.bind(console);var t=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r]},n=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r]};function r(e,t,r,i){return new Promise((function(o,s){var a=new XMLHttpRequest;a.open(e?"POST":"GET",t),r&&r.forEach((function(e,t){a.setRequestHeader(t,e)})),a.addEventListener("load",(function(){o(a)})),a.addEventListener("error",(function(e){n("Reporter:xhr:onerror","Error occurred while loading "+t,a.status,a.statusText),s(e)})),a.send(i)}))}var i,o,s,a,c=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t)};!function(e){e[e.HTTP=0]="HTTP",e[e.INTENT=1]="INTENT",e[e.IFRAME=2]="IFRAME",e[e.TCP=3]="TCP",e[e.UDP=4]="UDP",e[e.STORAGE=5]="STORAGE",e[e.BLUETOOTH=6]="BLUETOOTH",e[e.EXTENSIONS=7]="EXTENSIONS",e[e.IPC=8]="IPC"}(i||(i={})),function(e){e[e.Mapping=0]="Mapping",e[e.SoftLaunch=1]="SoftLaunch",e[e.Enforce=2]="Enforce",e[e.KillSwitch=3]="KillSwitch"}(o||(o={})),function(e){e[e.blocked=1]="blocked",e[e.unknownDomain=2]="unknownDomain",e[e.unknownEndpoint=3]="unknownEndpoint",e[e.unknownParam=4]="unknownParam",e[e.dataViolation=5]="dataViolation",e[e.allowed=6]="allowed",e[e.anon=7]="anon",e[e.psuado=8]="psuado",e[e.structureViolation=9]="structureViolation"}(s||(s={})),function(e){e[e.NoIntervention=1]="NoIntervention",e[e.BlockEntirely=2]="BlockEntirely",e[e.ModifyRequest=3]="ModifyRequest"}(a||(a={}));var l=String(Math.round(1e9*Math.random())),u=function(){function n(i,o,s,a,u){var d=this;this.policyUrl=s,this.cb=u,this.segment=a,this.policyI=i,o?n.mode=this.policy.m:(r(!1,""+this.policyUrl+c(a)+".json?&sdkv="+e.split(" ")[1]+"&sdkm="+n.mode+"&sdkid="+l+"&group="+a,this.lastPolicyUpdate?new Map([["If-Modified-Since",this.lastPolicyUpdate]]):void 0).then((function(e){if(200==e.status)try{d.policyI=JSON.parse(e.responseText),d.lastPolicyUpdate=e.getResponseHeader("last-modified"),d.policy&&Object.keys(d.policy).length>0&&(console.log("policy downloaded + 200 status + valid"),n.mode=d.policy.m,t("WebWorkerController:start:setInterval","Policy has updated"),d.cb(d.policy))}catch(e){}})),this.listenToPolicyChange())}return Object.defineProperty(n.prototype,"policy",{get:function(){return this.policyI},enumerable:!0,configurable:!0}),n.prototype.updatePolicyUrl=function(e){this.policyUrl=e,this.t&&clearTimeout(this.t),this.listenToPolicyChange()},n.prototype.listenToPolicyChange=function(){var i=this;this.t=setTimeout((function(){r(!1,""+i.policyUrl+c(i.segment)+".json?&sdkv="+e.split(" ")[1]+"&sdkm="+n.mode+"&sdkid="+l+"&group="+i.segment,i.lastPolicyUpdate?new Map([["If-Modified-Since",i.lastPolicyUpdate]]):void 0).then((function(e){if(200==e.status)try{i.policyI=JSON.parse(e.responseText),i.lastPolicyUpdate=e.getResponseHeader("last-modified"),i.policy&&Object.keys(i.policy).length>0&&(n.mode=i.policy.m,t("WebWorkerController:start:setInterval","Policy has updated"),i.cb(i.policy))}catch(e){}})).finally((function(){i.listenToPolicyChange()}))}),3e5)},n.mode=o.KillSwitch,n}(),d={_r:/\b[023][0-9]{8}\b/g,_checkId:function(e){for(var t=0,n=0,r=0;r<9;r++)t+=(n=(e[r]-"0")*(r%2+1))>9?n-9:n;return t%10==0},set lastIndex(e){this._r.lastIndex=0},exec:function(e){var t=e.match(this._r);if(!t||!t.length||t[0].length>9)return null;for(var n=0;n<t.length;n++)if(this._checkId(t[n])){var r=Array(1);return r.input=e,r}return null}},f=function(){function e(e){this._r=e}return e.prototype._checkCreditCard=function(e){if(/[^0-9-\s]+/.test(e))return!1;for(var t=0,n=0,r=!1,i=(e=e.replace(/\D/g,"")).length-1;i>=0;i--){var o=e.charAt(i);n=parseInt(o,10);r&&(n*=2)>9&&(n-=9),t+=n,r=!r}return t%10==0},Object.defineProperty(e.prototype,"lastIndex",{set:function(e){this._r.lastIndex=0},enumerable:!0,configurable:!0}),e.prototype.exec=function(e){var t=e.match(this._r);if(!t||!t.length)return null;for(var n=0;n<t.length;n++)if(this._checkCreditCard(t[n])){var r=Array(1);return r.input=e,r}return null},e}(),p=/^\+?(972|0)(\-)?0?(([23489]{1}\d{7})|[5]{1}\d{8})\b/g,h=/^0\d([\d]{0,1})([-]{0,1})\d{7}$/g,g=new f(/^4[0-9]{12}(?:[0-9]{3})?$/g),v=new f(/\b(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}\b/g),y=new f(/\b0010(?:11|17|20|37|38|39|40|90|91|96|97|99)[0-9]{6}|3640946[0-7][0-9]{6}|364370[0-9]{8}|3655676[0-4][0-9]{6}|4580(?:06|09|16|26|29|52|79|80|86|96|99)[0-9]{10}|510046[05]2[0-9]{8}|5189(?:[89]602|(?:89|91)[0-9]{2})[0-9]{8}|53640(?:6[0156]2|7[0156]0)[0-9]{8}|5477(?:07[015]2|14[0-9]{2})[0-9]{8}|55218(?:302|400)[0-9]{8}\b/g),P=/hacker/i,m=[];var k=function(e){return function(t,n){if(n!=e.indexOf(P)||!m.length)return n!=e.indexOf(p)||w(p,t)?w(e[n],t):w(h,t);for(var r=0;r<m.length;r++)if(t.toLowerCase().includes(m[r].toLowerCase()))return!0}};function w(e,t){if(e){var n=null!=e.exec(t);return e.lastIndex=0,n}}var b={checkPrivacyViolation:k([null,g,v,d,P,y,/-----BEGIN CERTIFICATE-----((.|\n)*)-----END CERTIFICATE-----/g,/\b[A-Z]{4}[0-9]{2}\b/g,/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g,p,/(11|0011|0017|17)\\(0[0-9]{3})\\([0-9]{8}|[0-9]{5})(\s|$)/g]),checkStructureValidation:k([null,/^[0-9]+$/,/^[a-zA-Z]+$/,/^.{1,25}$/]),setRegexWords:function(e){e.forEach((function(e){m.push(e)}))}};function Q(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];n=E(n,r,i,o,t[0],7,-680876936),o=E(o,n,r,i,t[1],12,-389564586),i=E(i,o,n,r,t[2],17,606105819),r=E(r,i,o,n,t[3],22,-1044525330),n=E(n,r,i,o,t[4],7,-176418897),o=E(o,n,r,i,t[5],12,1200080426),i=E(i,o,n,r,t[6],17,-1473231341),r=E(r,i,o,n,t[7],22,-45705983),n=E(n,r,i,o,t[8],7,1770035416),o=E(o,n,r,i,t[9],12,-1958414417),i=E(i,o,n,r,t[10],17,-42063),r=E(r,i,o,n,t[11],22,-1990404162),n=E(n,r,i,o,t[12],7,1804603682),o=E(o,n,r,i,t[13],12,-40341101),i=E(i,o,n,r,t[14],17,-1502002290),n=x(n,r=E(r,i,o,n,t[15],22,1236535329),i,o,t[1],5,-165796510),o=x(o,n,r,i,t[6],9,-1069501632),i=x(i,o,n,r,t[11],14,643717713),r=x(r,i,o,n,t[0],20,-373897302),n=x(n,r,i,o,t[5],5,-701558691),o=x(o,n,r,i,t[10],9,38016083),i=x(i,o,n,r,t[15],14,-660478335),r=x(r,i,o,n,t[4],20,-405537848),n=x(n,r,i,o,t[9],5,568446438),o=x(o,n,r,i,t[14],9,-1019803690),i=x(i,o,n,r,t[3],14,-187363961),r=x(r,i,o,n,t[8],20,1163531501),n=x(n,r,i,o,t[13],5,-1444681467),o=x(o,n,r,i,t[2],9,-51403784),i=x(i,o,n,r,t[7],14,1735328473),n=M(n,r=x(r,i,o,n,t[12],20,-1926607734),i,o,t[5],4,-378558),o=M(o,n,r,i,t[8],11,-2022574463),i=M(i,o,n,r,t[11],16,1839030562),r=M(r,i,o,n,t[14],23,-35309556),n=M(n,r,i,o,t[1],4,-1530992060),o=M(o,n,r,i,t[4],11,1272893353),i=M(i,o,n,r,t[7],16,-155497632),r=M(r,i,o,n,t[10],23,-1094730640),n=M(n,r,i,o,t[13],4,681279174),o=M(o,n,r,i,t[0],11,-358537222),i=M(i,o,n,r,t[3],16,-722521979),r=M(r,i,o,n,t[6],23,76029189),n=M(n,r,i,o,t[9],4,-640364487),o=M(o,n,r,i,t[12],11,-421815835),i=M(i,o,n,r,t[15],16,530742520),n=S(n,r=M(r,i,o,n,t[2],23,-995338651),i,o,t[0],6,-198630844),o=S(o,n,r,i,t[7],10,1126891415),i=S(i,o,n,r,t[14],15,-1416354905),r=S(r,i,o,n,t[5],21,-57434055),n=S(n,r,i,o,t[12],6,1700485571),o=S(o,n,r,i,t[3],10,-1894986606),i=S(i,o,n,r,t[10],15,-1051523),r=S(r,i,o,n,t[1],21,-2054922799),n=S(n,r,i,o,t[8],6,1873313359),o=S(o,n,r,i,t[15],10,-30611744),i=S(i,o,n,r,t[6],15,-1560198380),r=S(r,i,o,n,t[13],21,1309151649),n=S(n,r,i,o,t[4],6,-145523070),o=S(o,n,r,i,t[11],10,-1120210379),i=S(i,o,n,r,t[2],15,718787259),r=S(r,i,o,n,t[9],21,-343485551),e[0]=C(n,e[0]),e[1]=C(r,e[1]),e[2]=C(i,e[2]),e[3]=C(o,e[3])}function T(e,t,n,r,i,o){return t=C(C(t,e),C(r,o)),C(t<<i|t>>>32-i,n)}function E(e,t,n,r,i,o,s){return T(t&n|~t&r,e,t,i,o,s)}function x(e,t,n,r,i,o,s){return T(t&r|n&~r,e,t,i,o,s)}function M(e,t,n,r,i,o,s){return T(t^n^r,e,t,i,o,s)}function S(e,t,n,r,i,o,s){return T(n^(t|~r),e,t,i,o,s)}function I(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var O="0123456789abcdef".split("");function R(e){for(var t="",n=0;n<4;n++)t+=O[e>>8*n+4&15]+O[e>>8*n&15];return t}function L(e){return function(e){for(var t=0;t<e.length;t++)e[t]=R(e[t]);return e.join("")}(function(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Q(r,I(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Q(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,Q(r,i),r}(e))}function C(e,t){return e+t&4294967295}function q(e,t){Object.defineProperty(window,e,{configurable:!1,set:function(){throw"QP: only availbale before qp load"},get:function(){return t}})}var B,D=["QPSegment","QPServer","QPPolicyFallback","QPWorkerPath","QPMaskWord","QPEncryptWord","QPTrustedDomains","QPLiteSDK","QPConsent","QPLogServer","QPIgnoreEvents","QPKillSwitch","QPTrustedCookieRegex","QPUniqueId","QPDomainDNS","QPIgnoreChannels","QPHostnameRegex","QPDisablePolicyFetch","QPMarketPlace","QPGuid","QPCatalogue","QPCloudMaskTypeType","QPThirdPartyEncryptType","QPThirdPartyEncryptKey","QPReportsEncryptType","QPReportsEncKey","QPPolicyVerifyType","QPPolicyVerifyKey","QPBlockedUrl","QPBLockedMessage"];if(globalThis.window){var U=window;if(null==U.QPDomainDNS&&(U.QPDomainDNS=!1),U.QPTrustedDomains||(U.QPTrustedDomains=[]),U.QPMarketPlace){var N=U.QPMarketPlace;if(!U.QPLogServer)throw new Error("QP: missing logs server");null==N.userThrottle&&(N.userThrottle=1),null==N.operatingTime&&(N.operatingTime=!1),null==U.QPIgnoreChannels&&(U.QPIgnoreChannels=[7]),U.QPDisablePolicyFetch=!0,U.QPPolicyFallback={v:"marketPlacePolicy",m:0,s:U.QPLogServer,wl:U.QPTrustedDomains}}else if(U.QPLiteSDK){if(U.QPSegment||(U.QPSegment="liteSDK"),!U.QPLogServer)throw"QP: lite sdk must provide log server";if(!U.QPLiteSDK.grayList)throw"QP: lite sdk must provide gray list";if(!U.QPLiteSDK.blackList)throw"QP: lite sdk must provide black list";if(!U.QPLiteSDK.regexList)throw"QP: lite sdk must provide regex list";U.QPPolicyFallback={v:"lightSDK",s:"",m:2,wl:[]}}else{if(!U.QPServer)throw"QP: missing required QPServer config";if(!U.QPSegment)throw"QP: missing required QPSegment config";null==U.QPIgnoreChannels&&(U.QPIgnoreChannels=[]),null==U.QPDisablePolicyFetch&&(U.QPDisablePolicyFetch=!1)}if(!U.QPKillSwitch&&(!U.QPMarketPlace||function(){var e="license_",t=U.QPMarketPlace.auth;if(!t||"object"!=typeof t||'["source","props","license"]'!=JSON.stringify(Object.keys(t)))throw new Error("QP: failed to parse auth");if(!t.license.startsWith(e)||40!=t.license.length)return console.log("QP disabled (license not valid)"),!1;var n=e+L(L(L(JSON.stringify(t.props))))==t.license;function r(e,t,n){if("object"!=typeof e[n]||"object"!=typeof t[n])e[n]=t[n];else for(var i in t[n])r(e[n],t[n],i)}for(var i in n||console.log("QP disabled (license verification failed)"),t.props)-1!=D.indexOf(i)?r(U,t.props,i):console.log("skipping unknown QP API: "+i);return n}()&&function(){var e=U.QPMarketPlace.userThrottle;if("number"!=typeof e||e<0||e>1)throw new Error("QP: invalid value for userThrottle, must be a value between 0 to 1");var t=Math.random()>e;return t||console.log("QP disabled (user throtle)"),t}()&&function(){var e=U.QPMarketPlace.operatingTime;if("boolean"==typeof e&&!e)return!0;if("object"!=typeof e||'["ignoreDays","ignoreHours","from","to","UTC"]'!=JSON.stringify(Object.keys(e)))throw new Error("QP: invalid time range config object");var t=new Date(e.from),n=new Date(e.to),r="Invalid Date";if(n.toString()==r||t.toString()==r)throw new Error("QP: invalid time range properties");var i=new Date;if(i<t||i>n)return!1;if(!Array.isArray(e.ignoreDays)||!Array.isArray(e.ignoreHours)||"boolean"!=typeof e.UTC)throw new Error("QP: bad format for ignored days/hours/UTC properties");var o=!0;return-1!=e.ignoreDays.indexOf(e.UTC?i.getUTCDay():i.getDay())&&(o=!1),-1!=e.ignoreHours.indexOf(e.UTC?i.getUTCHours():i.getHours())&&(o=!1),o||console.log("QP disabled (outside time range)"),o}())){if(!U.QPPolicyFallback)throw"QP: missing required QPPolicyFallback config";if(u.mode=U.QPPolicyFallback.m,!U.QPWorkerPath)throw"QP: missing required QPWorkerPath config";var A=localStorage.getItem("qpCookies");if(A)try{U.QPConsent.policy=JSON.parse(A)}catch(e){}if(U.QPTrustedCookieRegex||(U.QPTrustedCookieRegex=[["___so[0-9]+",""]]),U.QPBlockedUrl&&(U.QPBlockedUrl.includes("https://")||(U.QPBlockedUrl="https://"+U.QPBlockedUrl)),U.QPIgnoreEvents||(U.QPIgnoreEvents=["6","61","62","7"]),U.QPMaskType&&["none","every4","mask4skip8","mask8skip4","every8"].indexOf(U.QPMaskType)<0)throw new Error("QP: Unsupported Mask Type: "+U.QPMaskType);if(U.QPGuid){if("string"!=typeof U.QPGuid)throw new Error("QP: guid must be a string");for(var H=U.QPGuid;-1!=H.indexOf("-");)H=H.replace("-","");if(!parseInt(H,16))throw new Error("QP: guid not valid")}if(U.QPReportsEncKey&&-1==[void 0,"none","symmetric.v2","asymmetric.v2"].indexOf(U.QPReportsEncryptType))throw new Error("QP: Unsupported Log Encrypt Type: "+U.QPMaskType);if(U.QPTriggerWords&&b.setRegexWords(U.QPTriggerWords),U.QPThirdPartyEncryptType&&["unsupported"].indexOf(U.QPThirdPartyEncryptType)<0)throw new Error("QP: Unsupported Analytics Encrypt Type: "+U.QPMaskType);if(U.QPPolicyVerifyType&&["unsupported"].indexOf(U.QPPolicyVerifyType)<0)throw new Error("QP: Unsupported Policy Verify Type: "+U.QPMaskType);for(var j in D)q(D[j],U[D[j]])}}!function(e){e[e.xhr=100]="xhr",e[e.cookie=101]="cookie",e[e.postMessage=102]="postMessage",e[e.websocket=103]="websocket",e[e.sendbeacon=104]="sendbeacon",e[e.fetch=105]="fetch",e[e.location=106]="location",e[e.link=107]="link",e[e.form=108]="form",e[e.src=109]="src",e[e.href=110]="href",e[e.data=111]="data",e[e.srcset=112]="srcset",e[e.lowsrc=113]="lowsrc",e[e.worker=114]="worker",e[e.AndroidUrl=201]="AndroidUrl",e[e.AndroidIntent=202]="AndroidIntent",e[e.iOSUrl=301]="iOSUrl"}(B||(B={}));var W,F,K=function(e,t){if(this.protocol=e,"string"==typeof t){var n=new URL(t,location.origin);this.hostname=n.hostname,this.pathname=n.pathname.split("?")[0].split(";")[0]}else this.hostname=t.host,this.pathname=t.endpoint};!function(e){e[e.Web=0]="Web",e[e.Android=1]="Android",e[e.iOS=3]="iOS"}(W||(W={})),function(e){e[e.UnknownDomain=41]="UnknownDomain",e[e.UnknownEndpoint=42]="UnknownEndpoint",e[e.UnknownParam=43]="UnknownParam",e[e.DataViolationEndpoint=52]="DataViolationEndpoint",e[e.DataViolationParam=53]="DataViolationParam",e[e.Allowed=6]="Allowed",e[e.Anon=61]="Anon",e[e.Psuedo=62]="Psuedo",e[e.Blocked=7]="Blocked",e[e.StructureViolation=83]="StructureViolation",e[e.Mapping=9]="Mapping"}(F||(F={}));var _,$,V=[];function X(e){var t=!1,n=G();if(!n)return!1;n.includes("@moz-extension:")||n.includes("@safari-extension:")?t=!0:RegExp("at.*<anonymous>:[0-9]+:[0-9]+$").test(n)?(t=!0,Error.stackTraceLimit=50):V.forEach((function(e){n.includes(e)&&(t=!0)}));return t&&V.push(e),t}function G(){var e=Error.stackTraceLimit;try{Error.stackTraceLimit=1e5;var t=(new Error).stack.split("\n"),n=void 0;return t&&(n=t[t.length-1]),""==n&&(n=t[t.length-2]),Error.stackTraceLimit=e,n}catch(t){Error.stackTraceLimit=e}}!function(e){e[e.register=1]="register",e[e.process2=2]="process2",e[e.control=3]="control",e[e.report=4]="report",e[e.defineFunction=5]="defineFunction",e[e.addTrustedDomains=6]="addTrustedDomains",e[e.setIgnoreList=7]="setIgnoreList",e[e.updateSegment=8]="updateSegment",e[e.liteBlockLog=9]="liteBlockLog",e[e.setUQ=10]="setUQ",e[e.setPassword=11]="setPassword",e[e.setMaskType=12]="setMaskType",e[e.setEncryptType=13]="setEncryptType",e[e.setEncryptTypeAndUQ=14]="setEncryptTypeAndUQ",e[e.setThirdPartyEncrypt=15]="setThirdPartyEncrypt"}(_||(_={})),function(e){e[e.init=1]="init",e[e.param=2]="param"}($||($={}));var J,z,Z;!function(e){e[e.start=1]="start",e[e.end=2]="end",e[e.param=3]="param"}(J||(J={})),function(e){e[e.mask=1]="mask",e[e.encrypt=2]="encrypt"}(z||(z={})),function(e){e[e.start=1]="start",e[e.flush=2]="flush"}(Z||(Z={}));var Y,ee=window,te=function(){function e(){this.done=!1,this.v=new Array,this.x=new Array}return e.prototype.resolve=function(e){if(this.done)throw"already resolved";this.res=e,this.done=!0,this.v.forEach((function(t){t(e)}))},e.prototype.reject=function(e){if(this.done)throw"already resolved";this.err=e,this.done=!0,this.x.forEach((function(t){t(e)}))},e.prototype.then=function(e){return this.done?this.res&&e(this.res):this.v.push(e),this},e.prototype.catch=function(e){return this.done?this.err&&e(this.err):this.x.push(e),this},e}(),ne=function(){function t(){this.promiseMap=new Map}return t.prototype.post=function(e){this.worker.postMessage(e)},t.prototype.start=function(){var t=this;this.worker=new Worker(URL.createObjectURL(new Blob(["importScripts('"+ee.QPWorkerPath+"')"]))),console.log("worker loaded"),this.worker.onmessage=this.onMessage.bind(this),ee.QPMaskType?this.post({type:ee.QPMaskType,qp_action:_.setMaskType}):ee.QPMaskWord&&this.post({qp_action:_.defineFunction,functionName:z.mask,serializedFunction:ee.QPMaskWord.toString()}),ee.QPReportsEncKey&&ee.QPReportsEncryptType&&"asymmetric.v2"!==ee.QPReportsEncryptType?this.post({qp_action:_.setEncryptType,type:ee.QPReportsEncryptType,encKey:ee.QPReportsEncKey||ee.QPGuid}):(ee.QPGuid&&this.post({qp_action:_.setPassword,pass:ee.QPGuid.toString()}),ee.QPEncryptWord&&this.post({qp_action:_.defineFunction,functionName:z.encrypt,serializedFunction:ee.QPEncryptWord.toString()})),ee.QPReportsEncKey&&ee.QPReportsEncryptType&&"asymmetric.v2"==ee.QPReportsEncryptType?this.post({qp_action:_.setEncryptTypeAndUQ,type:ee.QPReportsEncryptType,encKey:ee.QPReportsEncKey||ee.QPGuid,baseUQ:ee.QPUniqueId}):ee.QPUniqueId&&"asymmetric.v2"!==ee.QPReportsEncryptType&&this.post({qp_action:_.setUQ,uq:ee.QPUniqueId}),ee.QPGuid&&this.post({qp_action:_.setThirdPartyEncrypt,type:ee.QPThirdPartyEncryptType,encKey:ee.QPGuid}),ee.QPTrustedDomains&&this.post({qp_action:_.addTrustedDomains,trusted:ee.QPTrustedDomains}),ee.QPIgnoreEvents&&this.post({qp_action:_.setIgnoreList,ignored:ee.QPIgnoreEvents}),ee.QPSdkVersion=function(){return e},this.post({id:Math.random(),qp_action:_.register,policy:ee.QPPolicyFallback,server:ee.QPServer,referrer:location.href,segment:ee.QPSegment,consentMangment:ee.QPConsent,liteSDK:ee.QPLiteSDK,reportIP:ee.QPDomainDNS,disablePolicyFetch:ee.QPDisablePolicyFetch,domainRegex:ee.QPHostnameRegex,regexForUnknown:ee.QPRegexForUnknown,trustedParamExpression:ee.QPTrustedParamExpression,regexWords:ee.QPTriggerWords}),Object.defineProperty(window,"QPchangeSegment",{value:function(e){ee.QPDisablePolicyFetch||t.post({qp_action:_.updateSegment,segment:e})}})},t.prototype.startProcess=function(e,t,n,r,i,o){var s=new te;return this.promiseMap.set(e,{init:s,params:new Array}),this.post({qp_action:_.process2,id:e,action:J.start,channel:t,host:n,endPoint:r,source:i,caller:o}),s},t.prototype.end=function(e){this.post({id:e,qp_action:_.process2,action:J.end}),this.promiseMap.delete(e)},t.prototype.sendParam=function(e,t,n){var r,i=new te,o=null===(r=this.promiseMap.get(e))||void 0===r?void 0:r.params.push(i);if(!o)throw"calling sendParam before startProcess";return this.post({qp_action:_.process2,action:J.param,id:e,index:o,key:t,val:n}),i},t.prototype.control=function(e){this.post({id:Math.random(),qp_action:_.control,eventsReporter:e})},t.prototype.sendLiteLogs=function(e,t,n){this.post({qp_action:_.liteBlockLog,eom:n,eu:t,ppr:e})},t.prototype.onMessage=function(e){var t=e.data,n=t.qp_id,r=t.data,i=t.error,o=t.type;if(n)if(199==n)u.mode=e.data.data;else{var s=this.promiseMap.get(n);if(!s)throw"missing promise for id"+n;switch(o){case $.init:return i?s.init.reject(i):s.init.resolve(r);case $.param:var a=r,c=a.res,l=a.val,d=a.index,f=s.params[d-1];if(!f)throw"missing promise for index";i?f.reject(i):f.resolve({res:c,val:l})}}},t}(),re=function(){function e(t,n,r){this.channel=t,this.source=r,this.firePromise=new Array,this.url=new K(r,n),this.id=Math.random(),3!=t||o.Mapping==u.mode?this.initPromise=e.init(this.id,this.channel,this.url.hostname,this.url.pathname,this.source,this.parseCaller()):this.initPromise=new te}return e.prototype.parseCaller=function(){if(o.Mapping==u.mode)try{var e=G();if(!e)return;e.includes("(")&&e.includes(")")&&(e=e.substring(e.lastIndexOf("(")+1,e.indexOf(")"))),e.includes("at ")&&(e=e.substring(e.indexOf("at ")+3)),e.includes("@")&&(e=e.substring(e.indexOf("@")+1));var t=new URL(e,location.origin);return t.pathname.includes(":")&&(t.pathname=t.pathname.substring(0,t.pathname.indexOf(":"))),t.search.includes(":")&&(t.search=t.search.substring(0,t.search.indexOf(":"))),t.href}catch(e){}},e.prototype.fire=function(n,r){t("Trigger2:fire",this.source,this.url.hostname,this.url.pathname,r);var i=this.id,o=new Promise((function(t,o){if(r instanceof Blob){var s=new FileReader;s.onload=function(){e.fire(i,n,s.result).then(t).catch(o)},s.onerror=function(e){o(e)},s.readAsText(r,"utf-8")}else if(r instanceof ReadableStream){var a="",c=r.getReader();!function r(){c.read().then((function(s){if(a+=new TextDecoder("utf-8").decode(s.value),!s.done)return r();e.fire(i,n,a).then(t).catch(o)})).catch((function(e){o(e)}))}()}else e.fire(i,n,r).then(t).catch(o)}));return this.firePromise.push(o),o},e.prototype.end=function(){3==this.channel&&o.Mapping!=u.mode||e.end(this.id)},e.prototype.done=function(){var e=this;return new Promise((function(t,n){Promise.all(e.firePromise).then((function(e){return t()})).catch(n)}))},e}(),ie=Array(),oe=["httponly","max-age","expires","domain","secure","samesite","path"],se=[];function ae(e,t){if(!e)return Y.Trusted;var n="string"==typeof e?new URL(e,location.origin):e;if(!n.hostname)return Y.Trusted;if(n.hostname.endsWith(location.hostname))return Y.Trusted;var r=window;if(r.QPTrustedDomains&&r.QPTrustedDomains.length)for(var i in r.QPTrustedDomains)if(n.hostname.endsWith(r.QPTrustedDomains[i]))return Y.Trusted;if(!r.QPLiteSDK)return Y.Continue;for(var o=r.QPLiteSDK,a=r.QPConsent,l=0;l<o.grayList.length;l++){var u=ce(o.grayList[l],!0,!1);if(RegExp(u[0],u[1]).test(n.hostname)){if(!le(l,a.domainGroup,a.policy))return Y.Continue;var d={origValue:{param:""},code:s.blocked};d.domainIndex=l+1,d.endpointIndex=0;var f=new K(t,""),p={s:c(r.QPSegment),l:location.href,m:2,v:"1"};return re.liteLogs(d,f,p),Y.Block}}for(var i in o.blackList){u=ce(o.blackList[i],!0,!1);if(RegExp(u[0],u[1]).test(n.hostname)){var h={origValue:{param:""},code:s.blocked};h.domainIndex=o.grayList.length+parseInt(i)+1,h.endpointIndex=0;var g=new K(t,""),v={s:c(r.QPSegment),l:location.href,m:2,v:"1"};return re.liteLogs(h,g,v),Y.Block}}var y={origValue:{param:""},code:s.unknownDomain},P=new K(t,{host:n.hostname,endpoint:""}),m={s:c(r.QPSegment),l:location.href,m:2,v:"1"};return re.liteLogs(y,P,m),Y.Block}function ce(e,t,n){var r=e.split(/\{(?:.-.)(?:,(?:.,.))?\}/g);r=r.map((function(e){return e.replace(/([\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$1").replace(/\\\*/g,".*").replace(/\\\?/g,".")}));var i=[];if(e.matchAll(/\{(.-.)(?:,(.,.))?\}/g)[0]&&(i=(i=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(e.matchAll(/\{(.-.)(?:,(.,.))?\}/g))).map((function(e){return e[2]?"["+e[1]+"]{"+e[2]+"}":"["+e[1]+"]"}))),0==r.length)return["",""];if(1==r.length)return[r[0],""];if(r.length-1!=i.length)throw new Error("Why splitter length is not N-1?");for(var o="",s=0;s<r.length-1;s++)o+=r[s]+i[s];return o+=r[r.length-1],n||(o="\\b"+o+"\\b"),[o,t?"i":""]}function le(e,t,n){var r=null;if(t){for(var i=0;i<t.length;i++)for(var o=t[i].keys,s=0;s<o.length;s++)o[s]==e&&(r=t[i].group);if(null!=r)return n?n[r]:0!=r}return!1}!function(e){e[e.Continue=1]="Continue",e[e.Trusted=2]="Trusted",e[e.Block=3]="Block"}(Y||(Y={}));var ue="https://policy.invalid";var de=["src","href","data","srcset","lowsrc"],fe=["HTMLAreaElement","HTMLBaseElement","HTMLEmbedElement","HTMLFrameElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLLinkElement","HTMLObjectElement","HTMLScriptElement","HTMLSourceElement","HTMLTrackElement"],pe=["AREA","BASE","EMBED","FRAME","IFRAME","IMG","INPUT","LINK","OBJECT","SCRIPT","SOURCE","TRACK"];var he=window.addEventListener,ge=Array();window.addEventListener=function(e,t){"message"!==e?he(e,t):ge.push(t)},he("message",(function(e){ge.forEach((function(t){return t(new Proxy(e,{get:function(t,n){if("source"==n){var r=ve.indexOf(e.source);return-1!==r?ye[r]:Pe(e.source,e.origin)}var i=t[n];return"function"==typeof i?function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.apply(t,e)}:i}}))}))}));var ve=Array(),ye=Array();function Pe(e,t){var n="string"==typeof t?t:t.toString(),r=ve.indexOf(e);return-1==r&&(ve.push(e),r=ve.length-1,ye.push(new Proxy(e,{get:function(t,r){if("postMessage"===r)return function(t,r,o){var s=X(n)?i.EXTENSIONS:i.HTTP,c=new re(s,n,B.postMessage);c.initPromise.then((function(n){if(n.trusted||n.block)return n.block&&c.end(),void(n.trusted&&e.postMessage(t,r,o));c.fire(void 0,t).then((function(n){switch(n.res){case a.BlockEntirely:case a.ModifyRequest:e.postMessage(n.val,r,o);break;case a.NoIntervention:e.postMessage(t,r,o)}c.end()}))}))};var o=t[r];return"function"==typeof o?function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.apply(t,e)}:o},set:function(e,t,n){if("location"===t){var r=new URL(n,location.origin);switch(ae(r,B.postMessage)){case Y.Trusted:e[t]=n;case Y.Block:e[t]=ue;case Y.Continue:var o=new re(i.HTTP,n,B.location);o.initPromise.then((function(i){if(i.trusted||i.block)i.trusted&&(e[t]=n),o.end();else{var s=r.search.substring(1);s&&o.fire(void 0,s).then((function(i){switch(i.res){case a.NoIntervention:e[t]=n;break;case a.BlockEntirely:case a.ModifyRequest:r.search=i.val,e[t]=r.href}})),n.includes(";")&&o.fire(void 0,n.substring(n.indexOf(";"))).then((function(i){switch(i.res){case a.NoIntervention:e[t]=n;break;case a.BlockEntirely:case a.ModifyRequest:r.pathname=n.substring(0,n.indexOf(";"))+i.val,e[t]=r.href}}))}}))}}else e[t]=n;return!0}}))),ye[r]}function me(e){var t=document.createElement("div");t.innerHTML='<div style="position: fixed;width: 100vw;height: 100vh;opacity: 1;visibility: visible;top: 0;left: 0;display: flex;align-items: center;justify-content: center;">\n        <div style="position: absolute;background: black;opacity:0.5;width: 100%;height: 100%;"></div>\n        <div style="border-radius: 10px;background: #fff;position: relative;padding: 30px;">\n            <h2>'+e+'</h2>\n            <button style="position: absolute;right: 10px;top: 5px;outline: none;appearance: none;color: red;background: none;border: 0px;font-weight: bold;cursor: pointer;">X</button>\n        </div>\n    </div>',document.body.appendChild(t);var n=setTimeout((function(){document.body.removeChild(t)}),3e3);t.onclick=function(){document.body.removeChild(t),clearTimeout(n)}}function ke(e){void 0===e&&(e=window);var t=!1;e.document.addEventListener("click",(function(n){if(t)t=!1;else{var r=function(e){for(;null!=e;){if("A"==e.tagName)return e;e=e.parentElement}}(n.target);if(r){switch(ae(r,B.link)){case Y.Trusted:return;case Y.Block:return void(r.href=ue);case Y.Continue:}n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation();var o,s=r.href;return(o=s,new Promise((function(e,t){var n="";o.includes("#")&&(n=o.substring(o.indexOf("#")),o=o.substring(0,o.indexOf("#")));var r=X(o)?i.EXTENSIONS:i.IFRAME,s=new re(r,o,B.link),c=new URL(o,location.origin);s.initPromise.then((function(t){if(t.trusted||t.block)return t.block&&s.end(),e((t.block?ue:o)+n);var r,i=c.search.substring(1);i&&s.fire(void 0,i).then((function(e){switch(e.res){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:i=e.val}}));var l=c.pathname;l.includes(";")&&s.fire(void 0,l.substring(l.indexOf(";"))).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:r=n}})),s.done().then((function(){null!=i&&(c.search=i),null!=r&&(c.pathname=l.substring(0,l.indexOf(";"))+r),e(c.href+n),s.end()}))}))}))).then((function(i){i!=s&&(r.href=i),i==ue?"string"==typeof e.QPBlockedMessage?e.QPBlockedMessage&&me(e.QPBlockedMessage):me("URL is blocked by QP policy"):(t=!0,n.target.click())})),!1}}}))}var we="<h5>Manage Cookies</h5>",be='\n<button class="QPaccordion">$0</button>\n<label class="QPswitch">\n<input type="checkbox" onclick="qpCheck(this,\'$1\')">\n<span class="QPslider round"></span>\n</label>\n<div class="QPpanel">\n  <p>$2</p>\n</div>\n',Qe='\n<button class="QPaccordion">$0</button>\n<label class="QPswitch">\n<input type="checkbox" onclick="qpCheck(this,\'$1\')" checked>\n<span class="QPslider round"></span>\n</label>\n<div class="QPpanel">\n  <p>$2</p>\n</div>\n',Te=[{name:"Essential",desc:"description is currently missing"},{name:"Marketing",desc:"description is currently missing"},{name:"Analytics",desc:"description is currently missing"},{name:"Banner",desc:"description is currently missing"},{name:"Other",desc:"description is currently missing"}];if(localStorage.getItem("qpCookies"))var Ee=JSON.parse(localStorage.getItem("qpCookies"));else{Ee=[];for(var xe=0;xe<Te.length;xe++)Ee[xe]=!0;Ee[0]=!1}we+='\n<button class="QPaccordion">Essential</button>\n<small>Mandatory</small>\n<div class="QPpanel">\n  <p>$2</p>\n</div>';for(xe=1;xe<Te.length;xe++)Ee[xe]?we+=be.replace("$0",Te[xe].name).replace("$1",Te[xe].name).replace("$2",Te[xe].desc):we+=Qe.replace("$0",Te[xe].name).replace("$1",Te[xe].name).replace("$2",Te[xe].desc);we+='<div class="QPDoneButton">\n<button onclick="qpSavePreferences()">done</button>\n</div>';window.onload=function(){if(window.QPShouldDisplayCMP){var e=document.createElement("div");e.dir="ltr",e.id="QPCMP",e.classList.add("QPmodal");var t=document.createElement("style");t.innerHTML='\n.QPaccordion {\nwidth: 76%;\n  color: #444;\n  cursor: pointer;\n  padding: 18px;\n  border: none;\n  text-align: left;\n  outline: none;\n  font-size: 15px;\n  transition: 0.4s;\n}\n.QPDoneButton{\n  text-align: center;\n  border: none;\n}\n.QPinline {\n    padding: 18px;\n    border: none;\n    font-size: 15px;\n}\n.QPmodal {\n    text-align: left;\n    padding: 18px;\n    background-color: #eee;\n    position: absolute;\n    bottom: 0;\n    margin-bottom: 23px;\n    margin-right: 23px;\n    width: 300px;\n    border-radius: 9px;\n    box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n}\n\n.QPactive, .QPaccordion:hover {\n  background-color: #ccc; \n}\n\n.QPpanel {\n  padding: 0 18px;\n  display: none;\n  background-color: white;\n  overflow: hidden;\n}\n\n.QPswitch {\n    position: relative;\n    display: inline-block;\n    width: 60px;\n    height: 20px;\n  }\n  \n  .QPswitch input { \n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n  \n  .QPslider {\n    width: 20px;\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    -webkit-transition: .4s;\n    transition: .4s;\n       border-radius: 34px;\n  \n  }\n  \n  .QPslider:before {\n    position: absolute;\n    content: "";\n    height: 10Px;\n    width: 10px;\n    left: 2px;\n    bottom: 4px;\n    background-color: white;\n    -webkit-transition: .4s;\n    transition: .4s;\n  }\n  \n  input:checked + .QPslider {\n    background-color: #2196F3;\n  }\n  \n  input:focus + .QPslider {\n    box-shadow: 0 0 1px #2196F3;\n  }\n  \n  input:checked + .QPslider:before {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }\n  \n  /* Rounded sliders */\n  .QPslider.round {\n    border-radius: 34px;\n    padding: 10px;\n  }\n  \n  .QPslider.round:before {\n    border-radius: 50%;\n  }\n',e.innerHTML=we,document.body.appendChild(e),document.head.appendChild(t);var n,r=document.getElementsByClassName("QPaccordion");for(n=0;n<r.length;n++)r[n].addEventListener("click",(function(){this.classList.toggle("active");var e=this.nextElementSibling.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}))}},window.qpCheck=function(e,t){for(var n=0;n<Te.length;n++)Te[n].name==t&&(e.checked?Ee[n]=!1:Ee[n]=!0)},window.qpSavePreferences=function(){localStorage.setItem("qpCookies",JSON.stringify(Ee)),document.getElementById("QPCMP").style.display="none"};var Me=window;if(Me.QPCheckRegex=function(e,t){if(!t)return!1;e&&0!=e.length||(e=[1,2,3,4,5,6,7,8,9,10]);for(var n=0;n<e.length;n++)if(b.checkPrivacyViolation(t,e[n]))return!0;return!1},!Me.QPKillSwitch){var Se=new ne;u.mode!==o.KillSwitch&&(Se.start(),console.log("sdk loaded "+e),re.fire=function(e,t,n){return Se.sendParam(e,t,n)},re.init=function(e,t,n,r,i,o){if(-1!=Me.QPIgnoreChannels.indexOf(t)){var s=new te;return s.resolve({block:!1,trusted:!0}),s}return Se.startProcess(e,t,n,r,i,o)},re.end=function(e){Se.end(e)},re.liteLogs=function(e,t,n){Se.sendLiteLogs(e,t,n)},function e(r){void 0===r&&(r=Me),r.trapsSetup=!0,function(e){var t=e.XMLHttpRequest.prototype.open,r=e.XMLHttpRequest.prototype.send,s=e.XMLHttpRequest.prototype.setRequestHeader;e.XMLHttpRequest.prototype.open=function(e,r,s,c,l){var d=this;if(s=!(0==s),u.mode==o.KillSwitch)return t.call(this,e,r,s,c,l);var f=new URL(r,location.origin);switch(ae(f,B.xhr)){case Y.Trusted:return t.call(this,e,r,s,c,l);case Y.Block:return t.call(this,e,ue,s,c,l);case Y.Continue:}if(!s)return n("leak through sync xhr",r),t.call(this,e,r,s,c,l);var p=X(r)?i.EXTENSIONS:i.HTTP;this.trigger=new re(p,r,B.xhr),this.trigger.initPromise.then((function(i){if(i.trusted)return t.call(d,e,r,s,c,l);var o=f.search.substring(1),u=f.pathname;o?d.trigger.fire(void 0,o).then((function(n){switch(n.res){case a.NoIntervention:t.call(d,e,r,s,c,l);break;case a.BlockEntirely:break;case a.ModifyRequest:f.search=n.val,t.call(d,e,f.href,s,c,l)}})).catch((function(e){n("error1 ",e)})):u.includes(";")?d.trigger.fire(void 0,u.substring(u.indexOf(";"))).then((function(n){switch(n.res){case a.NoIntervention:t.call(d,e,r,s,c,l);break;case a.BlockEntirely:case a.ModifyRequest:f.pathname=u.substring(0,u.indexOf(";"))+n.val,t.call(d,e,f.href,s,c,l)}})).catch((function(e){n("error2",e)})):t.call(d,e,i.block?ue:r,s,i.block?null:c,i.block?null:l)}))},e.XMLHttpRequest.prototype.setRequestHeader=function(e,t){var r=this;if(!this.trigger)return s.call(this,e,t);this.trigger.initPromise.then((function(i){if(i.trusted)return s.call(r,e,t);r.trigger.fire(e,t).then((function(n){switch(n.res){case a.NoIntervention:s.call(r,e,t);break;case a.BlockEntirely:return;case a.ModifyRequest:s.call(r,e,n.val)}})).catch((function(e){n("fire error",e)}))})).catch((function(e){n("init error",e)}))},e.XMLHttpRequest.prototype.send=function(e){var t=this;if(!this.trigger)return r.call(this,e);this.trigger.initPromise.then((function(i){if(i.trusted)return delete t.trigger,r.call(t,e);e&&t.trigger.fire(void 0,String(e)).then((function(t){switch(t.res){case a.NoIntervention:break;case a.BlockEntirely:e=null;break;case a.ModifyRequest:e=t.val}})),t.trigger.done().then((function(){t.trigger.end(),delete t.trigger,r.call(t,e)})).catch((function(e){n("done error",e)}))})).catch((function(e){n("init error",e)}))}}(r),function(e){void 0===e&&(e=window);var n=e.fetch;e.fetch?e.fetch=function(t,r){if(u.mode==o.KillSwitch)return n.call(e,t,r);var s="string"==typeof t?t:t.url,c=new URL(s,location.origin);switch(ae(c,B.fetch)){case Y.Trusted:return n.call(e,t,r);case Y.Block:return n.call(e,ue,r);case Y.Continue:}return new Promise((function(o,l){var u=X(s)?i.EXTENSIONS:i.HTTP,d=new re(u,s,B.fetch);d.initPromise.then((function(i){if(i.trusted)return n.call(e,i.block?ue:s).then(o).catch(l);var u,f=c.search.substring(1);f&&d.fire(void 0,f).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:f=n}}));var p,h,g=c.pathname;if(g.includes(";")&&d.fire(void 0,g.substring(g.indexOf(";"))).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:u=n}})),t instanceof Request&&t.headers){var v=t.headers;v.forEach((function(e,t){e&&d.fire(t,e).then((function(e){var n=e.res,r=e.val;switch(n){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:v.set(t,r)}}))}))}if(r&&r.headers){var y=r.headers;if(y instanceof Headers){var P=y;P.forEach((function(e,t){e&&d.fire(t,e).then((function(e){var n=e.res,r=e.val;switch(n){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:P.set(t,r)}}))}))}else if(y instanceof Array)y.forEach((function(e,t){var n=e[0],r=e[1];r&&d.fire(n,r).then((function(t){var n=t.res,r=t.val;switch(n){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:e[1]=r}}))}));else{var m=y;Object.keys(m).forEach((function(e){var t=m[e];t&&d.fire(e,t).then((function(t){var n=t.res,r=t.val;switch(n){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:m[e]=r}}))}))}}if(t instanceof Request&&t.bodyUsed&&t.text().then((function(e){e&&d.fire(void 0,e).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:p=n}}))})),r&&r.body){var k=r.body.toString();k&&d.fire(void 0,k).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:h=n}}))}d.done().then((function(){null!=f&&(c.search=f),null!=u&&(c.pathname=g.substring(0,g.indexOf(";"))+u),t instanceof Request?(t.url=c.href,p&&(t.body=p)):t=c.href,null!=h&&r&&r.body&&(r.body=h),i.block||n.call(e,t,r).then(o).catch(l),d.end()}))}))}))}:t("FetchTrap:setup","Fetch not supported skipping")}(r),function(e){void 0===e&&(e=window);var n=e.Element.prototype.setAttribute,r=e.Element.prototype.getAttribute;function o(e,t,r){delete e["qptemp-"+t],n.call(e,t,r)}function s(t,n){var r=X(t)?i.EXTENSIONS:i.HTTP;return new Promise((function(i,o){var s=new re(r,t,n),c=new URL(t,location.origin);s.initPromise.then((function(n){if(n.trusted||n.block)return n.block&&s.end(),i(n.block?e.QPBlockedUrl?e.QPBlockedUrl:ue:t);var r,o=c.search.substring(1);o&&s.fire(void 0,o).then((function(e){switch(e.res){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:o=e.val}}));var l=c.pathname;l.includes(";")&&s.fire(void 0,l.substring(l.indexOf(";"))).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:r=n}})),s.done().then((function(){null!=o&&(c.search=o),null!=r&&(c.pathname=l.substring(0,l.indexOf(";"))+r),i(c.href),s.end()}))}))}))}e.Element.prototype.setAttribute=function(n,i){var a=this;if(!i||-1==pe.indexOf(this.tagName)||-1==de.indexOf(n.toLowerCase()))return o(this,n,i);if("string"!=typeof i&&t("convert trsuted script to string",i+=""),this["qptemp-"+n]=i,"srcset"===n.toLowerCase())i.split(",").forEach((function(t){var i=t.split(" ")[0];switch(ae(i,B.srcset)){case Y.Trusted:var c=r.call(a,n);return o(a,n,(c?c+",":"")+t);case Y.Block:return c=r.call(a,n),o(a,n,(c?c+",":"")+(e.QPBlockedUrl?e.QPBlockedUrl:ue));case Y.Continue:}s(i,B.srcset).then((function(e){var i=r.call(a,n);i&&(e=i+","+e);var s=t[1];s&&(e+=" "+s),o(a,n,e)}))}));else{switch(ae(i,B.src+de.indexOf(n))){case Y.Trusted:return o(this,n,i);case Y.Block:return o(this,n,e.QPBlockedUrl?e.QPBlockedUrl:ue);case Y.Continue:}s(i,B.src+de.indexOf(n)).then((function(e){o(a,n,e)}))}},e.Element.prototype.getAttribute=function(e){return this["qptemp-"+e]?this["qptemp-"+e]:r.call(this,e)},fe.forEach((function(n){var r=e[n];de.forEach((function(n){if(r&&r.prototype.hasOwnProperty(n)){var i=e.Object.getOwnPropertyDescriptor(r.prototype,n).get,o=e.Object.getOwnPropertyDescriptor(r.prototype,n).set;e.Object.defineProperty(r.prototype,n,{configurable:!0,get:function(){return this["qptemp-"+n]?this["qptemp-"+n]:i.call(this)},set:function(r){var o=this;if(!r)return a(this,r);"string"!=typeof r&&t("convert trsuted script to string",r+=""),this["qptemp-"+n]=r;var c=1;if(this["qpIndex-"+n]&&(c=this["qpIndex-"+n],c++),this["qpIndex-"+n]=c,"srcset"!==n){switch(ae(r,B.src+de.indexOf(n))){case Y.Trusted:return a(this,r);case Y.Block:return a(this,e.QPBlockedUrl?e.QPBlockedUrl:ue);case Y.Continue:}return s(r,B.src+de.indexOf(n)).then((function(e){o["qpIndex-"+n]==c&&a(o,e)})),r}r.split(",").forEach((function(t){var n=t.split(" ")[0];if(n){switch(ae(n,B.srcset)){case Y.Trusted:var c=i.call(o);return a(o,(c?c+",":"")+t);case Y.Block:return c=i.call(o),a(o,(c?c+",":"")+(e.QPBlockedUrl?e.QPBlockedUrl:ue));case Y.Continue:}return s(n,B.srcset).then((function(e){var n=i.call(o);n&&(e=n+","+e);var r=t[1];r&&(e+=" "+r),a(o,e)})),r}}))}})}function a(e,t){return delete e["qptemp-"+n],o.call(e,t)}}))}))}(r),function(e,t){function n(e){var n=EventTarget.prototype.addEventListener;e.addEventListener=function(e,t,r){var i=this;if("load"!=e)return n.call(this,e,t,r);this.parentElement?n.call(this,e,t,r):setTimeout((function(){n.call(i,e,t,r)}),0)};var r=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onload").set;Object.defineProperty(e,"onload",{configurable:!0,set:function(e){var t=this;this.parentElement?r.call(this,e):setTimeout((function(){r.call(t,e)}),0)}});var i=Object.getOwnPropertyDescriptor(e,"contentWindow").get;Object.defineProperty(e,"contentWindow",{configurable:!0,get:function(){var e=i.call(this),n=this.src;try{return e&&!e.trapsSetup&&t(e),e}catch(t){return Pe(e,n)}}})}n(e.HTMLIFrameElement.prototype),n(e.HTMLFrameElement.prototype);var r=Object.getOwnPropertyDescriptor(e,"frames").get;Object.defineProperty(e,"frames",{configurable:!0,get:function(){var e=r.call(this);try{return e&&!e.trapsSetup&&(t(e),e.trapsSetup=!0),e}catch(t){return new Proxy(e,{get:function(e,t){var n=parseInt(t);return isNaN(n)?e[t]:e[t].postMessage?Pe(e[t],"//frame_"+n):e[t]}})}}});var i=Object.getOwnPropertyDescriptor(e,"globalThis");Object.defineProperty(e,"globalThis",{get:function(){var t=i.value;return t==e?t:Pe(t,"//globalThis")}});var o=Object.getOwnPropertyDescriptor(e,"parent").get;Object.defineProperty(e,"parent",{configurable:!0,get:function(){var t=o.call(this);if(t==e)return t;try{return Pe(t,t.location.href)}catch(e){}return Pe(t,"//parent")}});var s=e.open;e.open=function(t,n,r){var i=s.call(e,t,n,r);return t?Pe(i,t):i};var a=e.opener;a&&(e.opener=Pe(a,"//opener"))}(r,e),function(e){void 0===e&&(e=window);for(var t=window,n=0;n<t.QPTrustedCookieRegex.length;n++)ie.push(RegExp(t.QPTrustedCookieRegex[n][0],t.QPTrustedCookieRegex[n][1]));var r=e.Document.prototype,s=e.Object.getOwnPropertyDescriptor(r,"cookie").get,c=e.Object.getOwnPropertyDescriptor(r,"cookie").set;e.Object.defineProperty(r,"cookie",{configurable:!0,get:function(){var e=s.call(this);return se.forEach((function(t){e&&""!=e||(e=t),e+="; "+t})),e},set:function(e){var t=this;if(u.mode==o.KillSwitch||!e)return c.call(this,e);var n=function(e){return e.split(";").reduce((function(e,t){if(!t)return e;var n=t.split("=");return e[n[0].trim()]=n[1]?n[1].trim():"",e}),{})}(e),r=Object.keys(n);if(ie.length)for(var s=0,l=r;s<l.length;s++)for(var d=l[s],f=0,p=ie;f<p.length;f++)if(p[f].test(d))return c.call(this,e);var h=e.split(";")&&e.split(";").length?e.split(";")[0]:e;if(h.split("=")&&h.split("=").length){d=h.split("=")[0];for(var g=!1,v=0;v<se.length;v++){var y=se[v];(y.split("=")&&y.split("=").length?y.split("=")[0]:y)==d&&(se[v]=h,g=!0)}g||se.push(h)}else h&&se.push(""+h);var P=new re(i.HTTP,"//COOKIE",B.cookie);return P.initPromise.then((function(i){if(i.trusted||i.block)return i.trusted?c.call(t,e):P.end(),void se.splice(se.indexOf(h),1);r.forEach((function(i){if(-1==oe.indexOf(i.toLowerCase())||u.mode==o.Mapping){var s=i;-1!=oe.indexOf(i.toLowerCase())&&(s=r[0]+"["+i+"]"),n[i]&&P.fire(s,n[i]).then((function(n){switch(n.res){case a.BlockEntirely:case a.ModifyRequest:var r=i+"="+n.val;c.call(t,r),se.splice(se.indexOf(r),1);break;case a.NoIntervention:c.call(t,e),se.splice(se.indexOf(h),1)}}))}else c.call(t,e)})),P.done().then((function(){P.end()}))})),e}})}(r),function(e){void 0===e&&(e=window);var t=e.Navigator.prototype.sendBeacon;e.navigator.sendBeacon=function(n,r){if(u.mode==o.KillSwitch)return t.call(e.navigator,n,r);var s=new URL(n,location.origin);switch(ae(s,B.sendbeacon)){case Y.Trusted:return t.call(e.navigator,n,r);case Y.Block:return t.call(e.navigator,ue,r);case Y.Continue:}var c=X(n)?i.EXTENSIONS:i.HTTP,l=new re(c,n,B.sendbeacon);return l.initPromise.then((function(i){if(i.trusted||i.block)return i.block&&l.end(),t.call(e.navigator,i.block?ue:n,i.block?null:r);var o,c=s.search.substring(1);c&&l.fire(void 0,c).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:c=n}}));var u=s.pathname;if(u.includes(";")&&l.fire(void 0,u.substring(u.indexOf(";"))).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:o=n}})),"string"==typeof r)r&&l.fire(void 0,r).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:r=n}}));else if(r instanceof FormData||r instanceof URLSearchParams)r.forEach((function(e,t){e&&l.fire(t,e).then((function(e){var n=e.res,i=e.val;switch(n){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:r.set(t,i)}}))}));else if(r instanceof Blob||r instanceof ReadableStream)l.fire(void 0,r).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:r="";break;case a.ModifyRequest:r=n}}));else if(r)try{r&&l.fire(void 0,new TextDecoder("utf-8").decode(r)).then((function(e){var t=e.res,n=e.val;switch(t){case a.NoIntervention:break;case a.BlockEntirely:case a.ModifyRequest:r=n}}))}catch(e){}l.done().then((function(){null!=c&&(s.search=c),null!=o&&(s.pathname=u.substring(0,u.indexOf(";"))+o),t.call(e.navigator,s.href,r),l.end()}))})),!0}}(r),ke(r),function(e){void 0===e&&(e=window);var t=e.Worker,n=e.SharedWorker;if(e.navigator.serviceWorker){var r=e.navigator.serviceWorker.register;e.navigator.serviceWorker.register=function(e,t){if(e){switch(ae(e,B.worker)){case Y.Trusted:return r.call(this,e,t);case Y.Block:case Y.Continue:}var n=new re(i.TCP,e.toString(),132);n.initPromise.then((function(e){n.done().then((function(){return n.end()}))}))}return r.call(this,e,t)}}e.SharedWorker=function(e,t){if(e){switch(ae(e,B.worker)){case Y.Trusted:return new n(e,t);case Y.Block:case Y.Continue:}var r=new re(i.TCP,e.toString(),132);r.initPromise.then((function(e){r.done().then((function(){return r.end()}))}))}return new n(e,t)},e.Worker=function(e,n){if(e){switch(ae(e,B.worker)){case Y.Trusted:return new t(e,n);case Y.Block:case Y.Continue:}var r=new re(i.TCP,e.toString(),132);r.initPromise.then((function(e){r.done().then((function(){return r.end()}))}))}return new t(e,n)}}(r),function(e){var t=e.WebSocket;e.WebSocket.prototype.constructor=function(e,n){switch(ae(e,B.websocket)){case Y.Trusted:return new t(e,n);case Y.Block:return new t(ue,n);case Y.Continue:}var r=new re(i.TCP,e,B.websocket);return r.initPromise.then((function(e){r.done().then((function(){return r.end()}))})),new t(e,n)}}(r)}(),window.ononline=function(){return Se.control(Z.start)},t("WebSDK 2.0:start","Loaded SDK!"))}}));
