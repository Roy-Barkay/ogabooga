function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});function runFixel(a,b){function c(a,b){var c=document.createElement("script");c.setAttribute("src",a),document.head.appendChild(c),c.addEventListener("load",b)}if(!a)return void console.log("Attempted to run Fixel with no installation code.");var d=new XMLHttpRequest,e="https://script.fixel.ai";d.open("GET",e+"/config/"+a+".json",!0),d.setRequestHeader("Content-type","application/json"),d.send(),d.onerror=function(){console.log("Failed to fetch fixel code.")},d.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var f=JSON.parse(d.response);if(window.fxlConfig=f,f.code!=a)return void console.log("Attempted to run Fixel with mismatching code.");if(f.disabled)return void console.log("Attempted to run a disabled Fixel segment");if(runFXLCore(a,f||b),f.conversions){c(e+"/conversions/fxl_conversions.js",function(){fixelConversions(a)})}if(f.domEvents)for(var g=0;g<f.domEvents.length;g++)c(e+"/custom/"+f.domEvents[g])}403==this.status&&runFXLCore(a,b)}}function runFXLCore(a,b){function c(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()}function d(a){var b={},c=[{name:"utm_source",code:"s_us",check:"u_u"},{name:"utm_medium",code:"s_um",check:"u_u"},{name:"utm_campaign",code:"s_uca",check:"u_u"},{name:"utm_term",code:"s_ut",check:"u_u"},{name:"utm_content",code:"s_uco",check:"u_u"},{name:"gclid",code:"s_gc",isBoolean:!0},{name:"fbclid",code:"s_fb",isBoolean:!0}];for(var d in a)for(var g,h=0;h<c.length;h++)if(g=c[h],g.name===d){b[g.code]=!!g.isBoolean||a[d],g.check&&(b[g.check]=!0);break}b.u_p=location.pathname.split("/")[1],b.u_pf=location.pathname,b.u_h=location.host,b.n_d=f(),b.s_r=document.referrer,b.n_l=navigator.language,b.n_ig=window.innerHeight,b.n_ir=window.innerWidth,b.n_l=navigator.language,b.d_d=new Date().toISOString(),b.d_w=new Date().getDay(),b.d_h=new Date().getHours(),b.n_ua=e(),b.lp_t=document.title;var i=document.getElementsByTagName("h1");return 0<i.length&&(b.lp_h=i[0].innerText||i[0].textContent),b}function e(){var a={firefox:"undefined"!=typeof InstallTrigger,opera:!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),safari:/constructor/i.test(window.HTMLElement)||function(a){return"[object SafariRemoteNotification]"===a.toString()}(!window.safari||"undefined"!=typeof safari&&safari.pushNotification),IE:!!document.documentMode,edge:!!window.StyleMedia,chrome:!!window.chrome&&!!window.chrome.csi};for(var b in a)if(a[b])return b;return"failed to detect"}function f(){return 767>=window.innerWidth?"mobile":1024>=window.innerWidth?"tablet":"desktop"}function g(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this;if("object"!=_typeof(a))return!1;if(!a)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function h(){return new Date(Date.now()-1e3*(60*new Date().getTimezoneOffset())).toISOString()}function i(){return window.location.search.substr(1).split("&").reduce(function(a,b){var c=b.split("="),d=c[0],e=c[1];return a[d]=e,a},{})}function j(){var a=i(),b=d(a);o.restartSessionStorage(),n.currentSequence=1,n.previousSequence=1,k=new p(o,b)}dataLayer=window.dataLayer||[],b=b||{};var k,l,m={possible_integrations:["li","ga","fb","ob","tb","gtag","gtm"],active_integrations:["fxl"],init:function e(){if(!b.disable_dl){this.active_integrations.push("gtm");for(var a,c=0;c<dataLayer.length;c++){if(a=dataLayer[c],a.length&&"config"===a[0]&&a[1].toLowerCase().includes("ua")){this.active_integrations.push("gtag");break}if(15<=c)break}}if(b.integrations)this.active_integrations=this.active_integrations.concat(b.integrations);else for(var d in b)this.possible_integrations.includes(d)&&(d.active||"object"!=_typeof(d)&&b[d])&&this.active_integrations.push(d)}},n={DEFAULT_TAG:b.defaultTag||"api",send:function d(){if(!o.isHalted()){this.endpoint||this.initEndpoint();var b=new XMLHttpRequest,c=this.endpoint+"/api/v2/grade/"+a;b.open("POST",c,!0),b.setRequestHeader("Content-type","text/plain"),b.send(k.getPayload()),o.setAttributesSent(!0),b.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var a=JSON.parse(b.response);if(a.deactivated)return o.setHalted(!0);k.setGrade(a.value||0,a.class),k.setSample(a.sample),k.Fire()}else if(403===this.status)return console.log("Unauthorized Code."),o.setHalted(!0)}}},initEndpoint:function b(){var a=o.getEnvironmentTag();a||(a=this.createEnvironmentTag()),this.endpoint="https://"+a+".fixelapp.com"},sequence:function c(){if(o.isHalted())return console.log("Fixel disabled.");var a=this,b=this.currentSequence;this.currentSequence+=this.previousSequence,this.previousSequence=b,setTimeout(function(){var b=o.getMostRecentSequence();(!b||a.currentSequence>o.getMostRecentSequence())&&(o.setMostRecentSequence(a.currentSequence),a.send()),a.sequence()},1e3*this.currentSequence)},createEnvironmentTag:function c(){if(b.environmentRatio&&b.environment){var a=Math.random()<=b.environmentRatio?b.environment:this.DEFAULT_TAG;return o.setEnvironmentTag(a),a}return!b.default_tag&&b.environment?this.DEFAULT_TAG:b.extensions?b.extensions.sub:this.DEFAULT_TAG},init:function b(){this.initEndpoint();var a=o.getMostRecentSequence();a&&5<a?(this.previousSequence=Math.round(a/1.618),this.currentSequence=a):(this.previousSequence=1,this.currentSequence=1),o.isHalted()||(this.send(),this.sequence())},validate:function i(b){var c={X:"<span style=\"border-radius: 150%; height: 30px; width: 30px; padding: 4px 7px; color: black; background-color: #f1c232; font-size: 20px; margin-right: 5px;\"> &#10007;</span>",V:"<span style=\"border-radius: 150%; height: 30px; width: 30px; padding: 4px 7px; color: white; background-color: #4caf50;; font-size: 20px; margin-right: 5px;\"> &#10003;</span>"},d=b===a,e=d?c.V:c.X,f=d?"The Fixel Segment has been properly installed on this page.":"The Fixel Segment you are trying to verify does not match <br><br> the one installed on this page.",g=new XMLHttpRequest,h=this.endpoint+"/api/validate/"+b;g.open("GET",h,!0),g.send(),g.onreadystatechange=function(){if(4===this.readyState&&(200===this.status||403===this.status)){var a=JSON.parse(g.response);403===this.status&&(a.img="X",a.message="Your segment is invalid.");var b="<div style=\"direction:ltr;background-color:#3c3c3c; width:auto;color:white;padding:10px;font-family:sans-serif;"+"position:fixed;left:20px;top:20px;z-index:1000000;box-shadow: 0 4px 2px 0 rgba(0, 0, 0, .7), 0 2px 6px 0 rgba(0, 0, 0, .7);\">"+e+f+" <br><br>"+c[a.img]+"<span style=\"margin-bottom: 1rem;\">"+a.message+"</span><br>"+"<br><span style=\"margin-top: 30px;\"></span><a style=\"color:#ffbe11\" "+"href=\"https://docs.fixel.ai/docs/getting-started/why-does-fixel-take-a-few-days-to-run/\">"+"learn more</a><br></div>";document.body.innerHTML+=b}}}},o={actionMap:{button_click:"fxl_ob",general_click:"fxl_gc",link_click:"fxl_lc",scroll:"fxl_sc",total_scroll:"fxl_ts",submit:"fxl_su",keypress:"fxl_se",video_played:"fxl_vp",pageview:"fxl_pa_v"},eventFireMap:{High:"HighFired",Med:"MedFired",Basic:"BasicFired"},init:function b(){this.incrementPageAmount();var a=+this.getItem("fxl_la")||0;Date.now()-a>1e3*(10*60)&&j()},restartSessionStorage:function c(){for(var a in this.actionMap)a.toLowerCase().includes("total")||this.deleteItem([this.actionMap[a]]);for(var b in this.eventFireMap)this.deleteItem([this.eventFireMap[b]]);this.restartSessionID(),this.deleteItem("fxl_m_r_sq"),this.deleteItem("fxl_is_sample"),this.deleteItem("fxl_sessionTime"),this.deleteItem("fxl_op_a"),this.deleteItem("fxl_attr_sent"),this.deleteItem("fxl_l_g"),this.deleteItem("fxl_s_t")},isSample:function a(){return"true"===this.getItem("fxl_is_sample")},setSample:function b(a){this.setItem("fxl_is_sample",a)},setEnvironmentTag:function b(a){this.setItem("fxl_s_t",a)},getEnvironmentTag:function a(){return this.getItem("fxl_s_t")},wereAttributesSent:function a(){return"true"===this.getItem("fxl_attr_sent")},setAttributesSent:function b(a){this.setItem("fxl_attr_sent",a)},incrementPageAmount:function b(){var a=this.getItem("fxl_po_a")||0;0>a&&(a=0),this.setItem("fxl_po_a",++a)},setFired:function b(a){this.setItem(this.eventFireMap[a],!0)},setGrade:function b(a){this.setItem("fxl_l_g",a)},getGrade:function a(){return+this.getItem("fxl_l_g")},setClass:function b(a){this.setItem("fxl_c",a)},getClass:function a(){return this.getItem("fxl_c")},isFired:function b(a){return"true"===this.getItem(this.eventFireMap[a])},setMostRecentSequence:function b(a){this.setItem("fxl_m_r_sq",a)},getMostRecentSequence:function a(){return+this.getItem("fxl_m_r_sq")||0},incrementAction:function d(a){var b=Date.now();30<this.getSessionTime()&&b-+this.getItem("fxl_la")>1e3*(10*60)&&j();var c=+this.getItem(this.actionMap[a]);return this.setItem(this.actionMap[a],++c),this.setItem("fxl_la",Date.now()),c},getAction:function b(a){return+this.getItem(this.actionMap[a])},setMostRecentServerRequest:function b(a){this.setItem("fxl_m_r_sr_rq",a)},getMostRecentServerRequest:function a(){return+this.getItem("fxl_m_r_sr_rq")},incrementTimer:function d(){var a=Date.now();if(!(990>a-+this.getItem("fxl_lud"))){this.setItem("fxl_lud",a);var b=+this.getItem("fxl_sessionTime");this.setItem("fxl_sessionTime",++b);var c=+this.getItem("fxl_totalTime");this.setItem("fxl_totalTime",++c)}},isHalted:function a(){return"true"===this.getItem("fxl_halt")},setHalted:function b(a){a="true"===a||!0===a,this.setItem("fxl_halt",a)},PermanentID:function b(){var a=this.getItem("fxl_permUser");return a||(a=c(),this.setItem("fxl_permUser",a)),a},restartSessionID:function b(){var a=c();return this.setItem("fxl_user",a),a},getSessionID:function b(){var a=this.getItem("fxl_user");return a||(a=c(),this.setItem("fxl_user",a)),a},getSessionTime:function a(){return+this.getItem("fxl_sessionTime")||0},getTotalTime:function a(){return+this.getItem("fxl_totalTime")||0},deleteItem:function c(b){delete localStorage[b+"-"+a]},setItem:function d(b,c){localStorage.setItem(b+"-"+a,c)},getItem:function d(b){var c=localStorage.getItem(b+"-"+a);return"null"===c?void 0:c},exists:function c(b){return null!==localStorage.getItem(b+"-"+a)}},p=function(){function c(a,b){_classCallCheck(this,c),this.storage=a,this.sessionTimer=this.storage.getSessionTime()||0,this.totalTimer=this.storage.getTotalTime()||0,this.pageScrolls=this.storage.getAction("scroll"),this.totalScrolls=this.storage.getAction("totalScroll"),this.buttonClicks=this.storage.getAction("button_click"),this.formSubmittions=this.storage.getAction("submit"),this.keyPresses=this.storage.getAction("keypress"),this.pageClicks=this.storage.getAction("general_click"),this.linkClicks=this.storage.getAction("link_click"),this.storage.incrementAction("pageview"),this.attributes=b,o.exists("fxl_is_sample")&&this.setSample(o.isSample()),this.registerEvents(),this.storage.setItem("fxl_la",Date.now());setTimeout(this.registerEvents,6e3);setInterval(this.registerEvents,15e3)}return _createClass(c,[{key:"setTimer",value:function c(a,b){this.sessionTimer=a,this.totalTimer=b}},{key:"setSample",value:function b(a){this.isSample="true"===a||!0===a,this.storage.setSample(this.isSample)}},{key:"setGrade",value:function c(a,b){this.storage.setClass(b),this.storage.setGrade(a)}},{key:"getGrade",value:function a(){return this.storage.getGrade()||0}},{key:"getClass",value:function a(){return this.storage.getClass()}},{key:"initializeTimer",value:function b(){var a=this;setInterval(function(){o.incrementTimer(),a.setTimer(o.getSessionTime(),o.getTotalTime())},1e3)}},{key:"prettify",value:function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this;for(var b in a)"object"===_typeof(a[b])&&this.prettify(a[b]),a[b]||delete a[b],"object"===_typeof(a[b])&&g(a[b])&&delete a[b];return a}},{key:"getPayload",value:function c(){var b=this.prettify({grade:this.getGrade(),attr:this.storage.wereAttributesSent()?null:this.attributes,code:a,isMobile:"mobile"===f(),datetime:h(),actions:{gc:this.storage.getAction("general_click"),sc:this.storage.getAction("scroll"),ts:this.storage.getAction("total_scroll"),su:this.storage.getAction("submit"),ob:this.storage.getAction("button_click"),se:this.storage.getAction("keypress"),lc:this.storage.getAction("link_click"),vp:this.storage.getAction("video_played"),t:this.storage.getSessionTime(),tt:this.storage.getTotalTime(),pv:this.storage.getAction("pageview")},user:o.getSessionID(),permUser:o.PermanentID(),clientVersion:"3.55",conversion:this.conversion});return b.actions||(b.actions={}),b.isSample=this.isSample,JSON.stringify(b)}},{key:"registerEvents",value:function l(){function a(a,b,c){a.fxl_registered=!0,a.addEventListener(b,function(){o.incrementAction(c)})}this;document.fxl_registered||(a(document,"click","general_click"),a(document,"wheel","scroll"),a(document,"wheel","total_scroll"),a(document,"touchmove","scroll"),a(document,"touchmove","total_scroll"));for(var b,c=[document.getElementsByClassName("button"),document.getElementsByTagName("button"),document.getElementsByClassName("btn"),document.getElementsByTagName("submit")],d=0;d<c.length;d++){b=c[d];for(var e,f=0;f<b.length;f++)e=b[f],e.fxl_registered||(e.fxl_registered=!0,"submit"===e.type&&a(e,"click","submit"),a(e,"click","button_click"))}for(var g=document.getElementsByTagName("input"),d=0;d<g.length;d++)g[d].fxl_registered||a(g[d],"keypress","keypress");for(var h=document.getElementsByTagName("a"),d=0;d<h.length;d++)h[d].fxl_registered||a(h[d],"click","link_click");for(var k=document.getElementsByTagName("video"),d=0;d<k.length;d++)k[d].fxl_registered||a(k[d],"play","video_played");window.addEventListener("unload",function(){var a=+o.getItem("fxl_po_a");o.setItem("fxl_po_a",--a)})}},{key:"Fire",value:function h(){if(this.getClass()){var a={High:["High","Med","Basic"],Med:["Med","Basic"],Basic:["Basic"]}[this.getClass()],b=!0,c=!1,d=void 0;try{for(var e,f,g=a[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)f=e.value,o.isFired(f)||this.fireEvent(f)}catch(a){c=!0,d=a}finally{try{b||null==g.return||g.return()}finally{if(c)throw d}}}}},{key:"fireEvent",value:function n(c){var d=b.display||a,e={li:function h(){var a=new Date().getTime(),e=location.origin+"/"+d+"/fixel-"+c.toLowerCase(),f=b.li_pid||b.li.pid;if(!f)throw console.log("no LinkedIn PID provided"),new DOMException;var g=document.createElement("script");g.type="text/javascript",g.src="https://px.ads.linkedin.com/collect/?time="+a+"&pid="+f+"&url="+e+"&fmt=js&s=1",document.getElementsByTagName("body")[0].appendChild(g)},ga:function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){ga("send","event","Fixel",c,d,{nonInteraction:!0})}),gtag:function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){gtag("event",c,{event_category:"Fixel",event_label:a,non_interaction:!0})}),fb:function a(){fbq("trackCustom","Fixel_"+d+"_"+c)},ob:function b(){var a=d.substring(0,9);obApi("track","FXL "+a+" "+c)},tb:function a(){window._tfa=window._tfa||[],_tfa.push({notify:"event",name:"Fixel_"+d+"_"+c})},gtm:function d(){dataLayer.push({event:"fixel_event",fixel_eventCategory:"Fixel",fixel_eventLabel:b.display||a,fixel_eventAction:c})},fxl:function d(){l.class=c,l.codeName=b.display||a,document.dispatchEvent(l)}};o.setFired(c);var f=!0,g=!1,h=void 0;try{for(var i,j,k=m.active_integrations[Symbol.iterator]();!(f=(i=k.next()).done);f=!0){j=i.value;try{e[j]()}catch(a){console.log("Fixel tries to fire "+j.toUpperCase()+" pixel, but no pixel found.")}}}catch(a){g=!0,h=a}finally{try{f||null==k.return||k.return()}finally{if(g)throw h}}}}]),c}();(function(){m.init(),o.init();var a=i(),b=d(a);k=new p(o,b),n.init(),a.fixelValidation&&n.validate(a.fixelValidation);var c=o.isHalted();return c?console.log("Fixel Disabled."):void(k.initializeTimer(),l=document.createEvent("Event"),l.initEvent("fxl_event",!0,!0))})()}