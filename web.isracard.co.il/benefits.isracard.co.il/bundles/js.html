/* Minification failed. Returning unminified contents.
(7763,30-38): run-time error JS1004: Expected ';': function
(7772,23-32): run-time error JS1004: Expected ';': recaptcha
(8349,82-83): run-time error JS1195: Expected expression: >
(8349,118-119): run-time error JS1004: Expected ';': )
(8359,17-21): run-time error JS1034: Unmatched 'else'; no 'if' defined: else
(8359,17-21): run-time error JS1034: Unmatched 'else'; no 'if' defined: else
(8365,17-18): run-time error JS1002: Syntax error: }
(8385,9-10): run-time error JS1002: Syntax error: }
(8388,68-69): run-time error JS1004: Expected ';': {
(8710,76-77): run-time error JS1195: Expected expression: >
(8710,120-121): run-time error JS1004: Expected ';': )
(8718,9-10): run-time error JS1002: Syntax error: }
(8720,43-44): run-time error JS1004: Expected ';': {
(8865,1-2): run-time error JS1002: Syntax error: }
(8890,41-49): run-time error JS1004: Expected ';': function
(8892,33-43): run-time error JS1004: Expected ';': grecaptcha
(9225,31-39): run-time error JS1004: Expected ';': function
(9232,23-32): run-time error JS1004: Expected ';': recaptcha
(9303,35-43): run-time error JS1004: Expected ';': function
(9307,19-28): run-time error JS1004: Expected ';': recaptcha
(8373,17-73): run-time error JS1018: 'return' statement outside of function: return window.location.href = window.epi.Layout.LoginUrl
 */
!function (e, t) { "use strict"; "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) { if (!e.document) throw new Error("jQuery requires a window with a document"); return t(e) } : t(e) }("undefined" != typeof window ? window : this, function (C, e) { "use strict"; var t = [], E = C.document, r = Object.getPrototypeOf, s = t.slice, g = t.concat, u = t.push, i = t.indexOf, n = {}, o = n.toString, v = n.hasOwnProperty, a = v.toString, l = a.call(Object), y = {}, m = function (e) { return "function" == typeof e && "number" != typeof e.nodeType }, x = function (e) { return null != e && e === e.window }, c = { type: !0, src: !0, nonce: !0, noModule: !0 }; function b(e, t, n) { var r, i, o = (n = n || E).createElement("script"); if (o.text = e, t) for (r in c) (i = t[r] || t.getAttribute && t.getAttribute(r)) && o.setAttribute(r, i); n.head.appendChild(o).parentNode.removeChild(o) } function w(e) { return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? n[o.call(e)] || "object" : typeof e } var f = "3.4.1", k = function (e, t) { return new k.fn.init(e, t) }, p = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g; function d(e) { var t = !!e && "length" in e && e.length, n = w(e); return !m(e) && !x(e) && ("array" === n || 0 === t || "number" == typeof t && 0 < t && t - 1 in e) } k.fn = k.prototype = { jquery: f, constructor: k, length: 0, toArray: function () { return s.call(this) }, get: function (e) { return null == e ? s.call(this) : e < 0 ? this[e + this.length] : this[e] }, pushStack: function (e) { var t = k.merge(this.constructor(), e); return t.prevObject = this, t }, each: function (e) { return k.each(this, e) }, map: function (n) { return this.pushStack(k.map(this, function (e, t) { return n.call(e, t, e) })) }, slice: function () { return this.pushStack(s.apply(this, arguments)) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, eq: function (e) { var t = this.length, n = +e + (e < 0 ? t : 0); return this.pushStack(0 <= n && n < t ? [this[n]] : []) }, end: function () { return this.prevObject || this.constructor() }, push: u, sort: t.sort, splice: t.splice }, k.extend = k.fn.extend = function () { var e, t, n, r, i, o, a = arguments[0] || {}, s = 1, u = arguments.length, l = !1; for ("boolean" == typeof a && (l = a, a = arguments[s] || {}, s++), "object" == typeof a || m(a) || (a = {}), s === u && (a = this, s--) ; s < u; s++) if (null != (e = arguments[s])) for (t in e) r = e[t], "__proto__" !== t && a !== r && (l && r && (k.isPlainObject(r) || (i = Array.isArray(r))) ? (n = a[t], o = i && !Array.isArray(n) ? [] : i || k.isPlainObject(n) ? n : {}, i = !1, a[t] = k.extend(l, o, r)) : void 0 !== r && (a[t] = r)); return a }, k.extend({ expando: "jQuery" + (f + Math.random()).replace(/\D/g, ""), isReady: !0, error: function (e) { throw new Error(e) }, noop: function () { }, isPlainObject: function (e) { var t, n; return !(!e || "[object Object]" !== o.call(e)) && (!(t = r(e)) || "function" == typeof (n = v.call(t, "constructor") && t.constructor) && a.call(n) === l) }, isEmptyObject: function (e) { var t; for (t in e) return !1; return !0 }, globalEval: function (e, t) { b(e, { nonce: t && t.nonce }) }, each: function (e, t) { var n, r = 0; if (d(e)) { for (n = e.length; r < n; r++) if (!1 === t.call(e[r], r, e[r])) break } else for (r in e) if (!1 === t.call(e[r], r, e[r])) break; return e }, trim: function (e) { return null == e ? "" : (e + "").replace(p, "") }, makeArray: function (e, t) { var n = t || []; return null != e && (d(Object(e)) ? k.merge(n, "string" == typeof e ? [e] : e) : u.call(n, e)), n }, inArray: function (e, t, n) { return null == t ? -1 : i.call(t, e, n) }, merge: function (e, t) { for (var n = +t.length, r = 0, i = e.length; r < n; r++) e[i++] = t[r]; return e.length = i, e }, grep: function (e, t, n) { for (var r = [], i = 0, o = e.length, a = !n; i < o; i++) !t(e[i], i) !== a && r.push(e[i]); return r }, map: function (e, t, n) { var r, i, o = 0, a = []; if (d(e)) for (r = e.length; o < r; o++) null != (i = t(e[o], o, n)) && a.push(i); else for (o in e) null != (i = t(e[o], o, n)) && a.push(i); return g.apply([], a) }, guid: 1, support: y }), "function" == typeof Symbol && (k.fn[Symbol.iterator] = t[Symbol.iterator]), k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (e, t) { n["[object " + t + "]"] = t.toLowerCase() }); var h = function (n) { var e, d, b, o, i, h, f, g, w, u, l, T, C, a, E, v, s, c, y, k = "sizzle" + 1 * new Date, m = n.document, S = 0, r = 0, p = ue(), x = ue(), N = ue(), A = ue(), D = function (e, t) { return e === t && (l = !0), 0 }, j = {}.hasOwnProperty, t = [], q = t.pop, L = t.push, H = t.push, O = t.slice, P = function (e, t) { for (var n = 0, r = e.length; n < r; n++) if (e[n] === t) return n; return -1 }, R = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", M = "[\\x20\\t\\r\\n\\f]", I = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+", W = "\\[" + M + "*(" + I + ")(?:" + M + "*([*^$|!~]?=)" + M + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + I + "))|)" + M + "*\\]", $ = ":(" + I + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + W + ")*)|.*)\\)|)", F = new RegExp(M + "+", "g"), B = new RegExp("^" + M + "+|((?:^|[^\\\\])(?:\\\\.)*)" + M + "+$", "g"), _ = new RegExp("^" + M + "*," + M + "*"), z = new RegExp("^" + M + "*([>+~]|" + M + ")" + M + "*"), U = new RegExp(M + "|>"), X = new RegExp($), V = new RegExp("^" + I + "$"), G = { ID: new RegExp("^#(" + I + ")"), CLASS: new RegExp("^\\.(" + I + ")"), TAG: new RegExp("^(" + I + "|[*])"), ATTR: new RegExp("^" + W), PSEUDO: new RegExp("^" + $), CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + M + "*(even|odd|(([+-]|)(\\d*)n|)" + M + "*(?:([+-]|)" + M + "*(\\d+)|))" + M + "*\\)|)", "i"), bool: new RegExp("^(?:" + R + ")$", "i"), needsContext: new RegExp("^" + M + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + M + "*((?:-\\d)?\\d*)" + M + "*\\)|)(?=[^-]|$)", "i") }, Y = /HTML$/i, Q = /^(?:input|select|textarea|button)$/i, J = /^h\d$/i, K = /^[^{]+\{\s*\[native \w/, Z = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ee = /[+~]/, te = new RegExp("\\\\([\\da-f]{1,6}" + M + "?|(" + M + ")|.)", "ig"), ne = function (e, t, n) { var r = "0x" + t - 65536; return r != r || n ? t : r < 0 ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320) }, re = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g, ie = function (e, t) { return t ? "\0" === e ? "\ufffd" : e.slice(0, -1) + "\\" + e.charCodeAt(e.length - 1).toString(16) + " " : "\\" + e }, oe = function () { T() }, ae = be(function (e) { return !0 === e.disabled && "fieldset" === e.nodeName.toLowerCase() }, { dir: "parentNode", next: "legend" }); try { H.apply(t = O.call(m.childNodes), m.childNodes), t[m.childNodes.length].nodeType } catch (e) { H = { apply: t.length ? function (e, t) { L.apply(e, O.call(t)) } : function (e, t) { var n = e.length, r = 0; while (e[n++] = t[r++]); e.length = n - 1 } } } function se(t, e, n, r) { var i, o, a, s, u, l, c, f = e && e.ownerDocument, p = e ? e.nodeType : 9; if (n = n || [], "string" != typeof t || !t || 1 !== p && 9 !== p && 11 !== p) return n; if (!r && ((e ? e.ownerDocument || e : m) !== C && T(e), e = e || C, E)) { if (11 !== p && (u = Z.exec(t))) if (i = u[1]) { if (9 === p) { if (!(a = e.getElementById(i))) return n; if (a.id === i) return n.push(a), n } else if (f && (a = f.getElementById(i)) && y(e, a) && a.id === i) return n.push(a), n } else { if (u[2]) return H.apply(n, e.getElementsByTagName(t)), n; if ((i = u[3]) && d.getElementsByClassName && e.getElementsByClassName) return H.apply(n, e.getElementsByClassName(i)), n } if (d.qsa && !A[t + " "] && (!v || !v.test(t)) && (1 !== p || "object" !== e.nodeName.toLowerCase())) { if (c = t, f = e, 1 === p && U.test(t)) { (s = e.getAttribute("id")) ? s = s.replace(re, ie) : e.setAttribute("id", s = k), o = (l = h(t)).length; while (o--) l[o] = "#" + s + " " + xe(l[o]); c = l.join(","), f = ee.test(t) && ye(e.parentNode) || e } try { return H.apply(n, f.querySelectorAll(c)), n } catch (e) { A(t, !0) } finally { s === k && e.removeAttribute("id") } } } return g(t.replace(B, "$1"), e, n, r) } function ue() { var r = []; return function e(t, n) { return r.push(t + " ") > b.cacheLength && delete e[r.shift()], e[t + " "] = n } } function le(e) { return e[k] = !0, e } function ce(e) { var t = C.createElement("fieldset"); try { return !!e(t) } catch (e) { return !1 } finally { t.parentNode && t.parentNode.removeChild(t), t = null } } function fe(e, t) { var n = e.split("|"), r = n.length; while (r--) b.attrHandle[n[r]] = t } function pe(e, t) { var n = t && e, r = n && 1 === e.nodeType && 1 === t.nodeType && e.sourceIndex - t.sourceIndex; if (r) return r; if (n) while (n = n.nextSibling) if (n === t) return -1; return e ? 1 : -1 } function de(t) { return function (e) { return "input" === e.nodeName.toLowerCase() && e.type === t } } function he(n) { return function (e) { var t = e.nodeName.toLowerCase(); return ("input" === t || "button" === t) && e.type === n } } function ge(t) { return function (e) { return "form" in e ? e.parentNode && !1 === e.disabled ? "label" in e ? "label" in e.parentNode ? e.parentNode.disabled === t : e.disabled === t : e.isDisabled === t || e.isDisabled !== !t && ae(e) === t : e.disabled === t : "label" in e && e.disabled === t } } function ve(a) { return le(function (o) { return o = +o, le(function (e, t) { var n, r = a([], e.length, o), i = r.length; while (i--) e[n = r[i]] && (e[n] = !(t[n] = e[n])) }) }) } function ye(e) { return e && "undefined" != typeof e.getElementsByTagName && e } for (e in d = se.support = {}, i = se.isXML = function (e) { var t = e.namespaceURI, n = (e.ownerDocument || e).documentElement; return !Y.test(t || n && n.nodeName || "HTML") }, T = se.setDocument = function (e) { var t, n, r = e ? e.ownerDocument || e : m; return r !== C && 9 === r.nodeType && r.documentElement && (a = (C = r).documentElement, E = !i(C), m !== C && (n = C.defaultView) && n.top !== n && (n.addEventListener ? n.addEventListener("unload", oe, !1) : n.attachEvent && n.attachEvent("onunload", oe)), d.attributes = ce(function (e) { return e.className = "i", !e.getAttribute("className") }), d.getElementsByTagName = ce(function (e) { return e.appendChild(C.createComment("")), !e.getElementsByTagName("*").length }), d.getElementsByClassName = K.test(C.getElementsByClassName), d.getById = ce(function (e) { return a.appendChild(e).id = k, !C.getElementsByName || !C.getElementsByName(k).length }), d.getById ? (b.filter.ID = function (e) { var t = e.replace(te, ne); return function (e) { return e.getAttribute("id") === t } }, b.find.ID = function (e, t) { if ("undefined" != typeof t.getElementById && E) { var n = t.getElementById(e); return n ? [n] : [] } }) : (b.filter.ID = function (e) { var n = e.replace(te, ne); return function (e) { var t = "undefined" != typeof e.getAttributeNode && e.getAttributeNode("id"); return t && t.value === n } }, b.find.ID = function (e, t) { if ("undefined" != typeof t.getElementById && E) { var n, r, i, o = t.getElementById(e); if (o) { if ((n = o.getAttributeNode("id")) && n.value === e) return [o]; i = t.getElementsByName(e), r = 0; while (o = i[r++]) if ((n = o.getAttributeNode("id")) && n.value === e) return [o] } return [] } }), b.find.TAG = d.getElementsByTagName ? function (e, t) { return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(e) : d.qsa ? t.querySelectorAll(e) : void 0 } : function (e, t) { var n, r = [], i = 0, o = t.getElementsByTagName(e); if ("*" === e) { while (n = o[i++]) 1 === n.nodeType && r.push(n); return r } return o }, b.find.CLASS = d.getElementsByClassName && function (e, t) { if ("undefined" != typeof t.getElementsByClassName && E) return t.getElementsByClassName(e) }, s = [], v = [], (d.qsa = K.test(C.querySelectorAll)) && (ce(function (e) { a.appendChild(e).innerHTML = "<a id='" + k + "'></a><select id='" + k + "-\r\\' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && v.push("[*^$]=" + M + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || v.push("\\[" + M + "*(?:value|" + R + ")"), e.querySelectorAll("[id~=" + k + "-]").length || v.push("~="), e.querySelectorAll(":checked").length || v.push(":checked"), e.querySelectorAll("a#" + k + "+*").length || v.push(".#.+[+~]") }), ce(function (e) { e.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>"; var t = C.createElement("input"); t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && v.push("name" + M + "*[*^$|!~]?="), 2 !== e.querySelectorAll(":enabled").length && v.push(":enabled", ":disabled"), a.appendChild(e).disabled = !0, 2 !== e.querySelectorAll(":disabled").length && v.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), v.push(",.*:") })), (d.matchesSelector = K.test(c = a.matches || a.webkitMatchesSelector || a.mozMatchesSelector || a.oMatchesSelector || a.msMatchesSelector)) && ce(function (e) { d.disconnectedMatch = c.call(e, "*"), c.call(e, "[s!='']:x"), s.push("!=", $) }), v = v.length && new RegExp(v.join("|")), s = s.length && new RegExp(s.join("|")), t = K.test(a.compareDocumentPosition), y = t || K.test(a.contains) ? function (e, t) { var n = 9 === e.nodeType ? e.documentElement : e, r = t && t.parentNode; return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r))) } : function (e, t) { if (t) while (t = t.parentNode) if (t === e) return !0; return !1 }, D = t ? function (e, t) { if (e === t) return l = !0, 0; var n = !e.compareDocumentPosition - !t.compareDocumentPosition; return n || (1 & (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !d.sortDetached && t.compareDocumentPosition(e) === n ? e === C || e.ownerDocument === m && y(m, e) ? -1 : t === C || t.ownerDocument === m && y(m, t) ? 1 : u ? P(u, e) - P(u, t) : 0 : 4 & n ? -1 : 1) } : function (e, t) { if (e === t) return l = !0, 0; var n, r = 0, i = e.parentNode, o = t.parentNode, a = [e], s = [t]; if (!i || !o) return e === C ? -1 : t === C ? 1 : i ? -1 : o ? 1 : u ? P(u, e) - P(u, t) : 0; if (i === o) return pe(e, t); n = e; while (n = n.parentNode) a.unshift(n); n = t; while (n = n.parentNode) s.unshift(n); while (a[r] === s[r]) r++; return r ? pe(a[r], s[r]) : a[r] === m ? -1 : s[r] === m ? 1 : 0 }), C }, se.matches = function (e, t) { return se(e, null, null, t) }, se.matchesSelector = function (e, t) { if ((e.ownerDocument || e) !== C && T(e), d.matchesSelector && E && !A[t + " "] && (!s || !s.test(t)) && (!v || !v.test(t))) try { var n = c.call(e, t); if (n || d.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n } catch (e) { A(t, !0) } return 0 < se(t, C, null, [e]).length }, se.contains = function (e, t) { return (e.ownerDocument || e) !== C && T(e), y(e, t) }, se.attr = function (e, t) { (e.ownerDocument || e) !== C && T(e); var n = b.attrHandle[t.toLowerCase()], r = n && j.call(b.attrHandle, t.toLowerCase()) ? n(e, t, !E) : void 0; return void 0 !== r ? r : d.attributes || !E ? e.getAttribute(t) : (r = e.getAttributeNode(t)) && r.specified ? r.value : null }, se.escape = function (e) { return (e + "").replace(re, ie) }, se.error = function (e) { throw new Error("Syntax error, unrecognized expression: " + e) }, se.uniqueSort = function (e) { var t, n = [], r = 0, i = 0; if (l = !d.detectDuplicates, u = !d.sortStable && e.slice(0), e.sort(D), l) { while (t = e[i++]) t === e[i] && (r = n.push(i)); while (r--) e.splice(n[r], 1) } return u = null, e }, o = se.getText = function (e) { var t, n = "", r = 0, i = e.nodeType; if (i) { if (1 === i || 9 === i || 11 === i) { if ("string" == typeof e.textContent) return e.textContent; for (e = e.firstChild; e; e = e.nextSibling) n += o(e) } else if (3 === i || 4 === i) return e.nodeValue } else while (t = e[r++]) n += o(t); return n }, (b = se.selectors = { cacheLength: 50, createPseudo: le, match: G, attrHandle: {}, find: {}, relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } }, preFilter: { ATTR: function (e) { return e[1] = e[1].replace(te, ne), e[3] = (e[3] || e[4] || e[5] || "").replace(te, ne), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4) }, CHILD: function (e) { return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || se.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && se.error(e[0]), e }, PSEUDO: function (e) { var t, n = !e[6] && e[2]; return G.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && X.test(n) && (t = h(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3)) } }, filter: { TAG: function (e) { var t = e.replace(te, ne).toLowerCase(); return "*" === e ? function () { return !0 } : function (e) { return e.nodeName && e.nodeName.toLowerCase() === t } }, CLASS: function (e) { var t = p[e + " "]; return t || (t = new RegExp("(^|" + M + ")" + e + "(" + M + "|$)")) && p(e, function (e) { return t.test("string" == typeof e.className && e.className || "undefined" != typeof e.getAttribute && e.getAttribute("class") || "") }) }, ATTR: function (n, r, i) { return function (e) { var t = se.attr(e, n); return null == t ? "!=" === r : !r || (t += "", "=" === r ? t === i : "!=" === r ? t !== i : "^=" === r ? i && 0 === t.indexOf(i) : "*=" === r ? i && -1 < t.indexOf(i) : "$=" === r ? i && t.slice(-i.length) === i : "~=" === r ? -1 < (" " + t.replace(F, " ") + " ").indexOf(i) : "|=" === r && (t === i || t.slice(0, i.length + 1) === i + "-")) } }, CHILD: function (h, e, t, g, v) { var y = "nth" !== h.slice(0, 3), m = "last" !== h.slice(-4), x = "of-type" === e; return 1 === g && 0 === v ? function (e) { return !!e.parentNode } : function (e, t, n) { var r, i, o, a, s, u, l = y !== m ? "nextSibling" : "previousSibling", c = e.parentNode, f = x && e.nodeName.toLowerCase(), p = !n && !x, d = !1; if (c) { if (y) { while (l) { a = e; while (a = a[l]) if (x ? a.nodeName.toLowerCase() === f : 1 === a.nodeType) return !1; u = l = "only" === h && !u && "nextSibling" } return !0 } if (u = [m ? c.firstChild : c.lastChild], m && p) { d = (s = (r = (i = (o = (a = c)[k] || (a[k] = {}))[a.uniqueID] || (o[a.uniqueID] = {}))[h] || [])[0] === S && r[1]) && r[2], a = s && c.childNodes[s]; while (a = ++s && a && a[l] || (d = s = 0) || u.pop()) if (1 === a.nodeType && ++d && a === e) { i[h] = [S, s, d]; break } } else if (p && (d = s = (r = (i = (o = (a = e)[k] || (a[k] = {}))[a.uniqueID] || (o[a.uniqueID] = {}))[h] || [])[0] === S && r[1]), !1 === d) while (a = ++s && a && a[l] || (d = s = 0) || u.pop()) if ((x ? a.nodeName.toLowerCase() === f : 1 === a.nodeType) && ++d && (p && ((i = (o = a[k] || (a[k] = {}))[a.uniqueID] || (o[a.uniqueID] = {}))[h] = [S, d]), a === e)) break; return (d -= v) === g || d % g == 0 && 0 <= d / g } } }, PSEUDO: function (e, o) { var t, a = b.pseudos[e] || b.setFilters[e.toLowerCase()] || se.error("unsupported pseudo: " + e); return a[k] ? a(o) : 1 < a.length ? (t = [e, e, "", o], b.setFilters.hasOwnProperty(e.toLowerCase()) ? le(function (e, t) { var n, r = a(e, o), i = r.length; while (i--) e[n = P(e, r[i])] = !(t[n] = r[i]) }) : function (e) { return a(e, 0, t) }) : a } }, pseudos: { not: le(function (e) { var r = [], i = [], s = f(e.replace(B, "$1")); return s[k] ? le(function (e, t, n, r) { var i, o = s(e, null, r, []), a = e.length; while (a--) (i = o[a]) && (e[a] = !(t[a] = i)) }) : function (e, t, n) { return r[0] = e, s(r, null, n, i), r[0] = null, !i.pop() } }), has: le(function (t) { return function (e) { return 0 < se(t, e).length } }), contains: le(function (t) { return t = t.replace(te, ne), function (e) { return -1 < (e.textContent || o(e)).indexOf(t) } }), lang: le(function (n) { return V.test(n || "") || se.error("unsupported lang: " + n), n = n.replace(te, ne).toLowerCase(), function (e) { var t; do { if (t = E ? e.lang : e.getAttribute("xml:lang") || e.getAttribute("lang")) return (t = t.toLowerCase()) === n || 0 === t.indexOf(n + "-") } while ((e = e.parentNode) && 1 === e.nodeType); return !1 } }), target: function (e) { var t = n.location && n.location.hash; return t && t.slice(1) === e.id }, root: function (e) { return e === a }, focus: function (e) { return e === C.activeElement && (!C.hasFocus || C.hasFocus()) && !!(e.type || e.href || ~e.tabIndex) }, enabled: ge(!1), disabled: ge(!0), checked: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && !!e.checked || "option" === t && !!e.selected }, selected: function (e) { return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected }, empty: function (e) { for (e = e.firstChild; e; e = e.nextSibling) if (e.nodeType < 6) return !1; return !0 }, parent: function (e) { return !b.pseudos.empty(e) }, header: function (e) { return J.test(e.nodeName) }, input: function (e) { return Q.test(e.nodeName) }, button: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && "button" === e.type || "button" === t }, text: function (e) { var t; return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase()) }, first: ve(function () { return [0] }), last: ve(function (e, t) { return [t - 1] }), eq: ve(function (e, t, n) { return [n < 0 ? n + t : n] }), even: ve(function (e, t) { for (var n = 0; n < t; n += 2) e.push(n); return e }), odd: ve(function (e, t) { for (var n = 1; n < t; n += 2) e.push(n); return e }), lt: ve(function (e, t, n) { for (var r = n < 0 ? n + t : t < n ? t : n; 0 <= --r;) e.push(r); return e }), gt: ve(function (e, t, n) { for (var r = n < 0 ? n + t : n; ++r < t;) e.push(r); return e }) } }).pseudos.nth = b.pseudos.eq, { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) b.pseudos[e] = de(e); for (e in { submit: !0, reset: !0 }) b.pseudos[e] = he(e); function me() { } function xe(e) { for (var t = 0, n = e.length, r = ""; t < n; t++) r += e[t].value; return r } function be(s, e, t) { var u = e.dir, l = e.next, c = l || u, f = t && "parentNode" === c, p = r++; return e.first ? function (e, t, n) { while (e = e[u]) if (1 === e.nodeType || f) return s(e, t, n); return !1 } : function (e, t, n) { var r, i, o, a = [S, p]; if (n) { while (e = e[u]) if ((1 === e.nodeType || f) && s(e, t, n)) return !0 } else while (e = e[u]) if (1 === e.nodeType || f) if (i = (o = e[k] || (e[k] = {}))[e.uniqueID] || (o[e.uniqueID] = {}), l && l === e.nodeName.toLowerCase()) e = e[u] || e; else { if ((r = i[c]) && r[0] === S && r[1] === p) return a[2] = r[2]; if ((i[c] = a)[2] = s(e, t, n)) return !0 } return !1 } } function we(i) { return 1 < i.length ? function (e, t, n) { var r = i.length; while (r--) if (!i[r](e, t, n)) return !1; return !0 } : i[0] } function Te(e, t, n, r, i) { for (var o, a = [], s = 0, u = e.length, l = null != t; s < u; s++) (o = e[s]) && (n && !n(o, r, i) || (a.push(o), l && t.push(s))); return a } function Ce(d, h, g, v, y, e) { return v && !v[k] && (v = Ce(v)), y && !y[k] && (y = Ce(y, e)), le(function (e, t, n, r) { var i, o, a, s = [], u = [], l = t.length, c = e || function (e, t, n) { for (var r = 0, i = t.length; r < i; r++) se(e, t[r], n); return n }(h || "*", n.nodeType ? [n] : n, []), f = !d || !e && h ? c : Te(c, s, d, n, r), p = g ? y || (e ? d : l || v) ? [] : t : f; if (g && g(f, p, n, r), v) { i = Te(p, u), v(i, [], n, r), o = i.length; while (o--) (a = i[o]) && (p[u[o]] = !(f[u[o]] = a)) } if (e) { if (y || d) { if (y) { i = [], o = p.length; while (o--) (a = p[o]) && i.push(f[o] = a); y(null, p = [], i, r) } o = p.length; while (o--) (a = p[o]) && -1 < (i = y ? P(e, a) : s[o]) && (e[i] = !(t[i] = a)) } } else p = Te(p === t ? p.splice(l, p.length) : p), y ? y(null, t, p, r) : H.apply(t, p) }) } function Ee(e) { for (var i, t, n, r = e.length, o = b.relative[e[0].type], a = o || b.relative[" "], s = o ? 1 : 0, u = be(function (e) { return e === i }, a, !0), l = be(function (e) { return -1 < P(i, e) }, a, !0), c = [function (e, t, n) { var r = !o && (n || t !== w) || ((i = t).nodeType ? u(e, t, n) : l(e, t, n)); return i = null, r }]; s < r; s++) if (t = b.relative[e[s].type]) c = [be(we(c), t)]; else { if ((t = b.filter[e[s].type].apply(null, e[s].matches))[k]) { for (n = ++s; n < r; n++) if (b.relative[e[n].type]) break; return Ce(1 < s && we(c), 1 < s && xe(e.slice(0, s - 1).concat({ value: " " === e[s - 2].type ? "*" : "" })).replace(B, "$1"), t, s < n && Ee(e.slice(s, n)), n < r && Ee(e = e.slice(n)), n < r && xe(e)) } c.push(t) } return we(c) } return me.prototype = b.filters = b.pseudos, b.setFilters = new me, h = se.tokenize = function (e, t) { var n, r, i, o, a, s, u, l = x[e + " "]; if (l) return t ? 0 : l.slice(0); a = e, s = [], u = b.preFilter; while (a) { for (o in n && !(r = _.exec(a)) || (r && (a = a.slice(r[0].length) || a), s.push(i = [])), n = !1, (r = z.exec(a)) && (n = r.shift(), i.push({ value: n, type: r[0].replace(B, " ") }), a = a.slice(n.length)), b.filter) !(r = G[o].exec(a)) || u[o] && !(r = u[o](r)) || (n = r.shift(), i.push({ value: n, type: o, matches: r }), a = a.slice(n.length)); if (!n) break } return t ? a.length : a ? se.error(e) : x(e, s).slice(0) }, f = se.compile = function (e, t) { var n, v, y, m, x, r, i = [], o = [], a = N[e + " "]; if (!a) { t || (t = h(e)), n = t.length; while (n--) (a = Ee(t[n]))[k] ? i.push(a) : o.push(a); (a = N(e, (v = o, m = 0 < (y = i).length, x = 0 < v.length, r = function (e, t, n, r, i) { var o, a, s, u = 0, l = "0", c = e && [], f = [], p = w, d = e || x && b.find.TAG("*", i), h = S += null == p ? 1 : Math.random() || .1, g = d.length; for (i && (w = t === C || t || i) ; l !== g && null != (o = d[l]) ; l++) { if (x && o) { a = 0, t || o.ownerDocument === C || (T(o), n = !E); while (s = v[a++]) if (s(o, t || C, n)) { r.push(o); break } i && (S = h) } m && ((o = !s && o) && u--, e && c.push(o)) } if (u += l, m && l !== u) { a = 0; while (s = y[a++]) s(c, f, t, n); if (e) { if (0 < u) while (l--) c[l] || f[l] || (f[l] = q.call(r)); f = Te(f) } H.apply(r, f), i && !e && 0 < f.length && 1 < u + y.length && se.uniqueSort(r) } return i && (S = h, w = p), c }, m ? le(r) : r))).selector = e } return a }, g = se.select = function (e, t, n, r) { var i, o, a, s, u, l = "function" == typeof e && e, c = !r && h(e = l.selector || e); if (n = n || [], 1 === c.length) { if (2 < (o = c[0] = c[0].slice(0)).length && "ID" === (a = o[0]).type && 9 === t.nodeType && E && b.relative[o[1].type]) { if (!(t = (b.find.ID(a.matches[0].replace(te, ne), t) || [])[0])) return n; l && (t = t.parentNode), e = e.slice(o.shift().value.length) } i = G.needsContext.test(e) ? 0 : o.length; while (i--) { if (a = o[i], b.relative[s = a.type]) break; if ((u = b.find[s]) && (r = u(a.matches[0].replace(te, ne), ee.test(o[0].type) && ye(t.parentNode) || t))) { if (o.splice(i, 1), !(e = r.length && xe(o))) return H.apply(n, r), n; break } } } return (l || f(e, c))(r, t, !E, n, !t || ee.test(e) && ye(t.parentNode) || t), n }, d.sortStable = k.split("").sort(D).join("") === k, d.detectDuplicates = !!l, T(), d.sortDetached = ce(function (e) { return 1 & e.compareDocumentPosition(C.createElement("fieldset")) }), ce(function (e) { return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href") }) || fe("type|href|height|width", function (e, t, n) { if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2) }), d.attributes && ce(function (e) { return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value") }) || fe("value", function (e, t, n) { if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue }), ce(function (e) { return null == e.getAttribute("disabled") }) || fe(R, function (e, t, n) { var r; if (!n) return !0 === e[t] ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null }), se }(C); k.find = h, k.expr = h.selectors, k.expr[":"] = k.expr.pseudos, k.uniqueSort = k.unique = h.uniqueSort, k.text = h.getText, k.isXMLDoc = h.isXML, k.contains = h.contains, k.escapeSelector = h.escape; var T = function (e, t, n) { var r = [], i = void 0 !== n; while ((e = e[t]) && 9 !== e.nodeType) if (1 === e.nodeType) { if (i && k(e).is(n)) break; r.push(e) } return r }, S = function (e, t) { for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e); return n }, N = k.expr.match.needsContext; function A(e, t) { return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase() } var D = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i; function j(e, n, r) { return m(n) ? k.grep(e, function (e, t) { return !!n.call(e, t, e) !== r }) : n.nodeType ? k.grep(e, function (e) { return e === n !== r }) : "string" != typeof n ? k.grep(e, function (e) { return -1 < i.call(n, e) !== r }) : k.filter(n, e, r) } k.filter = function (e, t, n) { var r = t[0]; return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === r.nodeType ? k.find.matchesSelector(r, e) ? [r] : [] : k.find.matches(e, k.grep(t, function (e) { return 1 === e.nodeType })) }, k.fn.extend({ find: function (e) { var t, n, r = this.length, i = this; if ("string" != typeof e) return this.pushStack(k(e).filter(function () { for (t = 0; t < r; t++) if (k.contains(i[t], this)) return !0 })); for (n = this.pushStack([]), t = 0; t < r; t++) k.find(e, i[t], n); return 1 < r ? k.uniqueSort(n) : n }, filter: function (e) { return this.pushStack(j(this, e || [], !1)) }, not: function (e) { return this.pushStack(j(this, e || [], !0)) }, is: function (e) { return !!j(this, "string" == typeof e && N.test(e) ? k(e) : e || [], !1).length } }); var q, L = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/; (k.fn.init = function (e, t, n) { var r, i; if (!e) return this; if (n = n || q, "string" == typeof e) { if (!(r = "<" === e[0] && ">" === e[e.length - 1] && 3 <= e.length ? [null, e, null] : L.exec(e)) || !r[1] && t) return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e); if (r[1]) { if (t = t instanceof k ? t[0] : t, k.merge(this, k.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : E, !0)), D.test(r[1]) && k.isPlainObject(t)) for (r in t) m(this[r]) ? this[r](t[r]) : this.attr(r, t[r]); return this } return (i = E.getElementById(r[2])) && (this[0] = i, this.length = 1), this } return e.nodeType ? (this[0] = e, this.length = 1, this) : m(e) ? void 0 !== n.ready ? n.ready(e) : e(k) : k.makeArray(e, this) }).prototype = k.fn, q = k(E); var H = /^(?:parents|prev(?:Until|All))/, O = { children: !0, contents: !0, next: !0, prev: !0 }; function P(e, t) { while ((e = e[t]) && 1 !== e.nodeType); return e } k.fn.extend({ has: function (e) { var t = k(e, this), n = t.length; return this.filter(function () { for (var e = 0; e < n; e++) if (k.contains(this, t[e])) return !0 }) }, closest: function (e, t) { var n, r = 0, i = this.length, o = [], a = "string" != typeof e && k(e); if (!N.test(e)) for (; r < i; r++) for (n = this[r]; n && n !== t; n = n.parentNode) if (n.nodeType < 11 && (a ? -1 < a.index(n) : 1 === n.nodeType && k.find.matchesSelector(n, e))) { o.push(n); break } return this.pushStack(1 < o.length ? k.uniqueSort(o) : o) }, index: function (e) { return e ? "string" == typeof e ? i.call(k(e), this[0]) : i.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1 }, add: function (e, t) { return this.pushStack(k.uniqueSort(k.merge(this.get(), k(e, t)))) }, addBack: function (e) { return this.add(null == e ? this.prevObject : this.prevObject.filter(e)) } }), k.each({ parent: function (e) { var t = e.parentNode; return t && 11 !== t.nodeType ? t : null }, parents: function (e) { return T(e, "parentNode") }, parentsUntil: function (e, t, n) { return T(e, "parentNode", n) }, next: function (e) { return P(e, "nextSibling") }, prev: function (e) { return P(e, "previousSibling") }, nextAll: function (e) { return T(e, "nextSibling") }, prevAll: function (e) { return T(e, "previousSibling") }, nextUntil: function (e, t, n) { return T(e, "nextSibling", n) }, prevUntil: function (e, t, n) { return T(e, "previousSibling", n) }, siblings: function (e) { return S((e.parentNode || {}).firstChild, e) }, children: function (e) { return S(e.firstChild) }, contents: function (e) { return "undefined" != typeof e.contentDocument ? e.contentDocument : (A(e, "template") && (e = e.content || e), k.merge([], e.childNodes)) } }, function (r, i) { k.fn[r] = function (e, t) { var n = k.map(this, i, e); return "Until" !== r.slice(-5) && (t = e), t && "string" == typeof t && (n = k.filter(t, n)), 1 < this.length && (O[r] || k.uniqueSort(n), H.test(r) && n.reverse()), this.pushStack(n) } }); var R = /[^\x20\t\r\n\f]+/g; function M(e) { return e } function I(e) { throw e } function W(e, t, n, r) { var i; try { e && m(i = e.promise) ? i.call(e).done(t).fail(n) : e && m(i = e.then) ? i.call(e, t, n) : t.apply(void 0, [e].slice(r)) } catch (e) { n.apply(void 0, [e]) } } k.Callbacks = function (r) { var e, n; r = "string" == typeof r ? (e = r, n = {}, k.each(e.match(R) || [], function (e, t) { n[t] = !0 }), n) : k.extend({}, r); var i, t, o, a, s = [], u = [], l = -1, c = function () { for (a = a || r.once, o = i = !0; u.length; l = -1) { t = u.shift(); while (++l < s.length) !1 === s[l].apply(t[0], t[1]) && r.stopOnFalse && (l = s.length, t = !1) } r.memory || (t = !1), i = !1, a && (s = t ? [] : "") }, f = { add: function () { return s && (t && !i && (l = s.length - 1, u.push(t)), function n(e) { k.each(e, function (e, t) { m(t) ? r.unique && f.has(t) || s.push(t) : t && t.length && "string" !== w(t) && n(t) }) }(arguments), t && !i && c()), this }, remove: function () { return k.each(arguments, function (e, t) { var n; while (-1 < (n = k.inArray(t, s, n))) s.splice(n, 1), n <= l && l-- }), this }, has: function (e) { return e ? -1 < k.inArray(e, s) : 0 < s.length }, empty: function () { return s && (s = []), this }, disable: function () { return a = u = [], s = t = "", this }, disabled: function () { return !s }, lock: function () { return a = u = [], t || i || (s = t = ""), this }, locked: function () { return !!a }, fireWith: function (e, t) { return a || (t = [e, (t = t || []).slice ? t.slice() : t], u.push(t), i || c()), this }, fire: function () { return f.fireWith(this, arguments), this }, fired: function () { return !!o } }; return f }, k.extend({ Deferred: function (e) { var o = [["notify", "progress", k.Callbacks("memory"), k.Callbacks("memory"), 2], ["resolve", "done", k.Callbacks("once memory"), k.Callbacks("once memory"), 0, "resolved"], ["reject", "fail", k.Callbacks("once memory"), k.Callbacks("once memory"), 1, "rejected"]], i = "pending", a = { state: function () { return i }, always: function () { return s.done(arguments).fail(arguments), this }, "catch": function (e) { return a.then(null, e) }, pipe: function () { var i = arguments; return k.Deferred(function (r) { k.each(o, function (e, t) { var n = m(i[t[4]]) && i[t[4]]; s[t[1]](function () { var e = n && n.apply(this, arguments); e && m(e.promise) ? e.promise().progress(r.notify).done(r.resolve).fail(r.reject) : r[t[0] + "With"](this, n ? [e] : arguments) }) }), i = null }).promise() }, then: function (t, n, r) { var u = 0; function l(i, o, a, s) { return function () { var n = this, r = arguments, e = function () { var e, t; if (!(i < u)) { if ((e = a.apply(n, r)) === o.promise()) throw new TypeError("Thenable self-resolution"); t = e && ("object" == typeof e || "function" == typeof e) && e.then, m(t) ? s ? t.call(e, l(u, o, M, s), l(u, o, I, s)) : (u++, t.call(e, l(u, o, M, s), l(u, o, I, s), l(u, o, M, o.notifyWith))) : (a !== M && (n = void 0, r = [e]), (s || o.resolveWith)(n, r)) } }, t = s ? e : function () { try { e() } catch (e) { k.Deferred.exceptionHook && k.Deferred.exceptionHook(e, t.stackTrace), u <= i + 1 && (a !== I && (n = void 0, r = [e]), o.rejectWith(n, r)) } }; i ? t() : (k.Deferred.getStackHook && (t.stackTrace = k.Deferred.getStackHook()), C.setTimeout(t)) } } return k.Deferred(function (e) { o[0][3].add(l(0, e, m(r) ? r : M, e.notifyWith)), o[1][3].add(l(0, e, m(t) ? t : M)), o[2][3].add(l(0, e, m(n) ? n : I)) }).promise() }, promise: function (e) { return null != e ? k.extend(e, a) : a } }, s = {}; return k.each(o, function (e, t) { var n = t[2], r = t[5]; a[t[1]] = n.add, r && n.add(function () { i = r }, o[3 - e][2].disable, o[3 - e][3].disable, o[0][2].lock, o[0][3].lock), n.add(t[3].fire), s[t[0]] = function () { return s[t[0] + "With"](this === s ? void 0 : this, arguments), this }, s[t[0] + "With"] = n.fireWith }), a.promise(s), e && e.call(s, s), s }, when: function (e) { var n = arguments.length, t = n, r = Array(t), i = s.call(arguments), o = k.Deferred(), a = function (t) { return function (e) { r[t] = this, i[t] = 1 < arguments.length ? s.call(arguments) : e, --n || o.resolveWith(r, i) } }; if (n <= 1 && (W(e, o.done(a(t)).resolve, o.reject, !n), "pending" === o.state() || m(i[t] && i[t].then))) return o.then(); while (t--) W(i[t], a(t), o.reject); return o.promise() } }); var $ = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/; k.Deferred.exceptionHook = function (e, t) { C.console && C.console.warn && e && $.test(e.name) && C.console.warn("jQuery.Deferred exception: " + e.message, e.stack, t) }, k.readyException = function (e) { C.setTimeout(function () { throw e }) }; var F = k.Deferred(); function B() { E.removeEventListener("DOMContentLoaded", B), C.removeEventListener("load", B), k.ready() } k.fn.ready = function (e) { return F.then(e)["catch"](function (e) { k.readyException(e) }), this }, k.extend({ isReady: !1, readyWait: 1, ready: function (e) { (!0 === e ? --k.readyWait : k.isReady) || (k.isReady = !0) !== e && 0 < --k.readyWait || F.resolveWith(E, [k]) } }), k.ready.then = F.then, "complete" === E.readyState || "loading" !== E.readyState && !E.documentElement.doScroll ? C.setTimeout(k.ready) : (E.addEventListener("DOMContentLoaded", B), C.addEventListener("load", B)); var _ = function (e, t, n, r, i, o, a) { var s = 0, u = e.length, l = null == n; if ("object" === w(n)) for (s in i = !0, n) _(e, t, s, n[s], !0, o, a); else if (void 0 !== r && (i = !0, m(r) || (a = !0), l && (a ? (t.call(e, r), t = null) : (l = t, t = function (e, t, n) { return l.call(k(e), n) })), t)) for (; s < u; s++) t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n))); return i ? e : l ? t.call(e) : u ? t(e[0], n) : o }, z = /^-ms-/, U = /-([a-z])/g; function X(e, t) { return t.toUpperCase() } function V(e) { return e.replace(z, "ms-").replace(U, X) } var G = function (e) { return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType }; function Y() { this.expando = k.expando + Y.uid++ } Y.uid = 1, Y.prototype = { cache: function (e) { var t = e[this.expando]; return t || (t = {}, G(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, { value: t, configurable: !0 }))), t }, set: function (e, t, n) { var r, i = this.cache(e); if ("string" == typeof t) i[V(t)] = n; else for (r in t) i[V(r)] = t[r]; return i }, get: function (e, t) { return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][V(t)] }, access: function (e, t, n) { return void 0 === t || t && "string" == typeof t && void 0 === n ? this.get(e, t) : (this.set(e, t, n), void 0 !== n ? n : t) }, remove: function (e, t) { var n, r = e[this.expando]; if (void 0 !== r) { if (void 0 !== t) { n = (t = Array.isArray(t) ? t.map(V) : (t = V(t)) in r ? [t] : t.match(R) || []).length; while (n--) delete r[t[n]] } (void 0 === t || k.isEmptyObject(r)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando]) } }, hasData: function (e) { var t = e[this.expando]; return void 0 !== t && !k.isEmptyObject(t) } }; var Q = new Y, J = new Y, K = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, Z = /[A-Z]/g; function ee(e, t, n) { var r, i; if (void 0 === n && 1 === e.nodeType) if (r = "data-" + t.replace(Z, "-$&").toLowerCase(), "string" == typeof (n = e.getAttribute(r))) { try { n = "true" === (i = n) || "false" !== i && ("null" === i ? null : i === +i + "" ? +i : K.test(i) ? JSON.parse(i) : i) } catch (e) { } J.set(e, t, n) } else n = void 0; return n } k.extend({ hasData: function (e) { return J.hasData(e) || Q.hasData(e) }, data: function (e, t, n) { return J.access(e, t, n) }, removeData: function (e, t) { J.remove(e, t) }, _data: function (e, t, n) { return Q.access(e, t, n) }, _removeData: function (e, t) { Q.remove(e, t) } }), k.fn.extend({ data: function (n, e) { var t, r, i, o = this[0], a = o && o.attributes; if (void 0 === n) { if (this.length && (i = J.get(o), 1 === o.nodeType && !Q.get(o, "hasDataAttrs"))) { t = a.length; while (t--) a[t] && 0 === (r = a[t].name).indexOf("data-") && (r = V(r.slice(5)), ee(o, r, i[r])); Q.set(o, "hasDataAttrs", !0) } return i } return "object" == typeof n ? this.each(function () { J.set(this, n) }) : _(this, function (e) { var t; if (o && void 0 === e) return void 0 !== (t = J.get(o, n)) ? t : void 0 !== (t = ee(o, n)) ? t : void 0; this.each(function () { J.set(this, n, e) }) }, null, e, 1 < arguments.length, null, !0) }, removeData: function (e) { return this.each(function () { J.remove(this, e) }) } }), k.extend({ queue: function (e, t, n) { var r; if (e) return t = (t || "fx") + "queue", r = Q.get(e, t), n && (!r || Array.isArray(n) ? r = Q.access(e, t, k.makeArray(n)) : r.push(n)), r || [] }, dequeue: function (e, t) { t = t || "fx"; var n = k.queue(e, t), r = n.length, i = n.shift(), o = k._queueHooks(e, t); "inprogress" === i && (i = n.shift(), r--), i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, function () { k.dequeue(e, t) }, o)), !r && o && o.empty.fire() }, _queueHooks: function (e, t) { var n = t + "queueHooks"; return Q.get(e, n) || Q.access(e, n, { empty: k.Callbacks("once memory").add(function () { Q.remove(e, [t + "queue", n]) }) }) } }), k.fn.extend({ queue: function (t, n) { var e = 2; return "string" != typeof t && (n = t, t = "fx", e--), arguments.length < e ? k.queue(this[0], t) : void 0 === n ? this : this.each(function () { var e = k.queue(this, t, n); k._queueHooks(this, t), "fx" === t && "inprogress" !== e[0] && k.dequeue(this, t) }) }, dequeue: function (e) { return this.each(function () { k.dequeue(this, e) }) }, clearQueue: function (e) { return this.queue(e || "fx", []) }, promise: function (e, t) { var n, r = 1, i = k.Deferred(), o = this, a = this.length, s = function () { --r || i.resolveWith(o, [o]) }; "string" != typeof e && (t = e, e = void 0), e = e || "fx"; while (a--) (n = Q.get(o[a], e + "queueHooks")) && n.empty && (r++, n.empty.add(s)); return s(), i.promise(t) } }); var te = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, ne = new RegExp("^(?:([+-])=|)(" + te + ")([a-z%]*)$", "i"), re = ["Top", "Right", "Bottom", "Left"], ie = E.documentElement, oe = function (e) { return k.contains(e.ownerDocument, e) }, ae = { composed: !0 }; ie.getRootNode && (oe = function (e) { return k.contains(e.ownerDocument, e) || e.getRootNode(ae) === e.ownerDocument }); var se = function (e, t) { return "none" === (e = t || e).style.display || "" === e.style.display && oe(e) && "none" === k.css(e, "display") }, ue = function (e, t, n, r) { var i, o, a = {}; for (o in t) a[o] = e.style[o], e.style[o] = t[o]; for (o in i = n.apply(e, r || []), t) e.style[o] = a[o]; return i }; function le(e, t, n, r) { var i, o, a = 20, s = r ? function () { return r.cur() } : function () { return k.css(e, t, "") }, u = s(), l = n && n[3] || (k.cssNumber[t] ? "" : "px"), c = e.nodeType && (k.cssNumber[t] || "px" !== l && +u) && ne.exec(k.css(e, t)); if (c && c[3] !== l) { u /= 2, l = l || c[3], c = +u || 1; while (a--) k.style(e, t, c + l), (1 - o) * (1 - (o = s() / u || .5)) <= 0 && (a = 0), c /= o; c *= 2, k.style(e, t, c + l), n = n || [] } return n && (c = +c || +u || 0, i = n[1] ? c + (n[1] + 1) * n[2] : +n[2], r && (r.unit = l, r.start = c, r.end = i)), i } var ce = {}; function fe(e, t) { for (var n, r, i, o, a, s, u, l = [], c = 0, f = e.length; c < f; c++) (r = e[c]).style && (n = r.style.display, t ? ("none" === n && (l[c] = Q.get(r, "display") || null, l[c] || (r.style.display = "")), "" === r.style.display && se(r) && (l[c] = (u = a = o = void 0, a = (i = r).ownerDocument, s = i.nodeName, (u = ce[s]) || (o = a.body.appendChild(a.createElement(s)), u = k.css(o, "display"), o.parentNode.removeChild(o), "none" === u && (u = "block"), ce[s] = u)))) : "none" !== n && (l[c] = "none", Q.set(r, "display", n))); for (c = 0; c < f; c++) null != l[c] && (e[c].style.display = l[c]); return e } k.fn.extend({ show: function () { return fe(this, !0) }, hide: function () { return fe(this) }, toggle: function (e) { return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () { se(this) ? k(this).show() : k(this).hide() }) } }); var pe = /^(?:checkbox|radio)$/i, de = /<([a-z][^\/\0>\x20\t\r\n\f]*)/i, he = /^$|^module$|\/(?:java|ecma)script/i, ge = { option: [1, "<select multiple='multiple'>", "</select>"], thead: [1, "<table>", "</table>"], col: [2, "<table><colgroup>", "</colgroup></table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: [0, "", ""] }; function ve(e, t) { var n; return n = "undefined" != typeof e.getElementsByTagName ? e.getElementsByTagName(t || "*") : "undefined" != typeof e.querySelectorAll ? e.querySelectorAll(t || "*") : [], void 0 === t || t && A(e, t) ? k.merge([e], n) : n } function ye(e, t) { for (var n = 0, r = e.length; n < r; n++) Q.set(e[n], "globalEval", !t || Q.get(t[n], "globalEval")) } ge.optgroup = ge.option, ge.tbody = ge.tfoot = ge.colgroup = ge.caption = ge.thead, ge.th = ge.td; var me, xe, be = /<|&#?\w+;/; function we(e, t, n, r, i) { for (var o, a, s, u, l, c, f = t.createDocumentFragment(), p = [], d = 0, h = e.length; d < h; d++) if ((o = e[d]) || 0 === o) if ("object" === w(o)) k.merge(p, o.nodeType ? [o] : o); else if (be.test(o)) { a = a || f.appendChild(t.createElement("div")), s = (de.exec(o) || ["", ""])[1].toLowerCase(), u = ge[s] || ge._default, a.innerHTML = u[1] + k.htmlPrefilter(o) + u[2], c = u[0]; while (c--) a = a.lastChild; k.merge(p, a.childNodes), (a = f.firstChild).textContent = "" } else p.push(t.createTextNode(o)); f.textContent = "", d = 0; while (o = p[d++]) if (r && -1 < k.inArray(o, r)) i && i.push(o); else if (l = oe(o), a = ve(f.appendChild(o), "script"), l && ye(a), n) { c = 0; while (o = a[c++]) he.test(o.type || "") && n.push(o) } return f } me = E.createDocumentFragment().appendChild(E.createElement("div")), (xe = E.createElement("input")).setAttribute("type", "radio"), xe.setAttribute("checked", "checked"), xe.setAttribute("name", "t"), me.appendChild(xe), y.checkClone = me.cloneNode(!0).cloneNode(!0).lastChild.checked, me.innerHTML = "<textarea>x</textarea>", y.noCloneChecked = !!me.cloneNode(!0).lastChild.defaultValue; var Te = /^key/, Ce = /^(?:mouse|pointer|contextmenu|drag|drop)|click/, Ee = /^([^.]*)(?:\.(.+)|)/; function ke() { return !0 } function Se() { return !1 } function Ne(e, t) { return e === function () { try { return E.activeElement } catch (e) { } }() == ("focus" === t) } function Ae(e, t, n, r, i, o) { var a, s; if ("object" == typeof t) { for (s in "string" != typeof n && (r = r || n, n = void 0), t) Ae(e, s, n, r, t[s], o); return e } if (null == r && null == i ? (i = n, r = n = void 0) : null == i && ("string" == typeof n ? (i = r, r = void 0) : (i = r, r = n, n = void 0)), !1 === i) i = Se; else if (!i) return e; return 1 === o && (a = i, (i = function (e) { return k().off(e), a.apply(this, arguments) }).guid = a.guid || (a.guid = k.guid++)), e.each(function () { k.event.add(this, t, i, r, n) }) } function De(e, i, o) { o ? (Q.set(e, i, !1), k.event.add(e, i, { namespace: !1, handler: function (e) { var t, n, r = Q.get(this, i); if (1 & e.isTrigger && this[i]) { if (r.length) (k.event.special[i] || {}).delegateType && e.stopPropagation(); else if (r = s.call(arguments), Q.set(this, i, r), t = o(this, i), this[i](), r !== (n = Q.get(this, i)) || t ? Q.set(this, i, !1) : n = {}, r !== n) return e.stopImmediatePropagation(), e.preventDefault(), n.value } else r.length && (Q.set(this, i, { value: k.event.trigger(k.extend(r[0], k.Event.prototype), r.slice(1), this) }), e.stopImmediatePropagation()) } })) : void 0 === Q.get(e, i) && k.event.add(e, i, ke) } k.event = { global: {}, add: function (t, e, n, r, i) { var o, a, s, u, l, c, f, p, d, h, g, v = Q.get(t); if (v) { n.handler && (n = (o = n).handler, i = o.selector), i && k.find.matchesSelector(ie, i), n.guid || (n.guid = k.guid++), (u = v.events) || (u = v.events = {}), (a = v.handle) || (a = v.handle = function (e) { return "undefined" != typeof k && k.event.triggered !== e.type ? k.event.dispatch.apply(t, arguments) : void 0 }), l = (e = (e || "").match(R) || [""]).length; while (l--) d = g = (s = Ee.exec(e[l]) || [])[1], h = (s[2] || "").split(".").sort(), d && (f = k.event.special[d] || {}, d = (i ? f.delegateType : f.bindType) || d, f = k.event.special[d] || {}, c = k.extend({ type: d, origType: g, data: r, handler: n, guid: n.guid, selector: i, needsContext: i && k.expr.match.needsContext.test(i), namespace: h.join(".") }, o), (p = u[d]) || ((p = u[d] = []).delegateCount = 0, f.setup && !1 !== f.setup.call(t, r, h, a) || t.addEventListener && t.addEventListener(d, a)), f.add && (f.add.call(t, c), c.handler.guid || (c.handler.guid = n.guid)), i ? p.splice(p.delegateCount++, 0, c) : p.push(c), k.event.global[d] = !0) } }, remove: function (e, t, n, r, i) { var o, a, s, u, l, c, f, p, d, h, g, v = Q.hasData(e) && Q.get(e); if (v && (u = v.events)) { l = (t = (t || "").match(R) || [""]).length; while (l--) if (d = g = (s = Ee.exec(t[l]) || [])[1], h = (s[2] || "").split(".").sort(), d) { f = k.event.special[d] || {}, p = u[d = (r ? f.delegateType : f.bindType) || d] || [], s = s[2] && new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = p.length; while (o--) c = p[o], !i && g !== c.origType || n && n.guid !== c.guid || s && !s.test(c.namespace) || r && r !== c.selector && ("**" !== r || !c.selector) || (p.splice(o, 1), c.selector && p.delegateCount--, f.remove && f.remove.call(e, c)); a && !p.length && (f.teardown && !1 !== f.teardown.call(e, h, v.handle) || k.removeEvent(e, d, v.handle), delete u[d]) } else for (d in u) k.event.remove(e, d + t[l], n, r, !0); k.isEmptyObject(u) && Q.remove(e, "handle events") } }, dispatch: function (e) { var t, n, r, i, o, a, s = k.event.fix(e), u = new Array(arguments.length), l = (Q.get(this, "events") || {})[s.type] || [], c = k.event.special[s.type] || {}; for (u[0] = s, t = 1; t < arguments.length; t++) u[t] = arguments[t]; if (s.delegateTarget = this, !c.preDispatch || !1 !== c.preDispatch.call(this, s)) { a = k.event.handlers.call(this, s, l), t = 0; while ((i = a[t++]) && !s.isPropagationStopped()) { s.currentTarget = i.elem, n = 0; while ((o = i.handlers[n++]) && !s.isImmediatePropagationStopped()) s.rnamespace && !1 !== o.namespace && !s.rnamespace.test(o.namespace) || (s.handleObj = o, s.data = o.data, void 0 !== (r = ((k.event.special[o.origType] || {}).handle || o.handler).apply(i.elem, u)) && !1 === (s.result = r) && (s.preventDefault(), s.stopPropagation())) } return c.postDispatch && c.postDispatch.call(this, s), s.result } }, handlers: function (e, t) { var n, r, i, o, a, s = [], u = t.delegateCount, l = e.target; if (u && l.nodeType && !("click" === e.type && 1 <= e.button)) for (; l !== this; l = l.parentNode || this) if (1 === l.nodeType && ("click" !== e.type || !0 !== l.disabled)) { for (o = [], a = {}, n = 0; n < u; n++) void 0 === a[i = (r = t[n]).selector + " "] && (a[i] = r.needsContext ? -1 < k(i, this).index(l) : k.find(i, this, null, [l]).length), a[i] && o.push(r); o.length && s.push({ elem: l, handlers: o }) } return l = this, u < t.length && s.push({ elem: l, handlers: t.slice(u) }), s }, addProp: function (t, e) { Object.defineProperty(k.Event.prototype, t, { enumerable: !0, configurable: !0, get: m(e) ? function () { if (this.originalEvent) return e(this.originalEvent) } : function () { if (this.originalEvent) return this.originalEvent[t] }, set: function (e) { Object.defineProperty(this, t, { enumerable: !0, configurable: !0, writable: !0, value: e }) } }) }, fix: function (e) { return e[k.expando] ? e : new k.Event(e) }, special: { load: { noBubble: !0 }, click: { setup: function (e) { var t = this || e; return pe.test(t.type) && t.click && A(t, "input") && De(t, "click", ke), !1 }, trigger: function (e) { var t = this || e; return pe.test(t.type) && t.click && A(t, "input") && De(t, "click"), !0 }, _default: function (e) { var t = e.target; return pe.test(t.type) && t.click && A(t, "input") && Q.get(t, "click") || A(t, "a") } }, beforeunload: { postDispatch: function (e) { void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result) } } } }, k.removeEvent = function (e, t, n) { e.removeEventListener && e.removeEventListener(t, n) }, k.Event = function (e, t) { if (!(this instanceof k.Event)) return new k.Event(e, t); e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? ke : Se, this.target = e.target && 3 === e.target.nodeType ? e.target.parentNode : e.target, this.currentTarget = e.currentTarget, this.relatedTarget = e.relatedTarget) : this.type = e, t && k.extend(this, t), this.timeStamp = e && e.timeStamp || Date.now(), this[k.expando] = !0 }, k.Event.prototype = { constructor: k.Event, isDefaultPrevented: Se, isPropagationStopped: Se, isImmediatePropagationStopped: Se, isSimulated: !1, preventDefault: function () { var e = this.originalEvent; this.isDefaultPrevented = ke, e && !this.isSimulated && e.preventDefault() }, stopPropagation: function () { var e = this.originalEvent; this.isPropagationStopped = ke, e && !this.isSimulated && e.stopPropagation() }, stopImmediatePropagation: function () { var e = this.originalEvent; this.isImmediatePropagationStopped = ke, e && !this.isSimulated && e.stopImmediatePropagation(), this.stopPropagation() } }, k.each({ altKey: !0, bubbles: !0, cancelable: !0, changedTouches: !0, ctrlKey: !0, detail: !0, eventPhase: !0, metaKey: !0, pageX: !0, pageY: !0, shiftKey: !0, view: !0, "char": !0, code: !0, charCode: !0, key: !0, keyCode: !0, button: !0, buttons: !0, clientX: !0, clientY: !0, offsetX: !0, offsetY: !0, pointerId: !0, pointerType: !0, screenX: !0, screenY: !0, targetTouches: !0, toElement: !0, touches: !0, which: function (e) { var t = e.button; return null == e.which && Te.test(e.type) ? null != e.charCode ? e.charCode : e.keyCode : !e.which && void 0 !== t && Ce.test(e.type) ? 1 & t ? 1 : 2 & t ? 3 : 4 & t ? 2 : 0 : e.which } }, k.event.addProp), k.each({ focus: "focusin", blur: "focusout" }, function (e, t) { k.event.special[e] = { setup: function () { return De(this, e, Ne), !1 }, trigger: function () { return De(this, e), !0 }, delegateType: t } }), k.each({ mouseenter: "mouseover", mouseleave: "mouseout", pointerenter: "pointerover", pointerleave: "pointerout" }, function (e, i) { k.event.special[e] = { delegateType: i, bindType: i, handle: function (e) { var t, n = e.relatedTarget, r = e.handleObj; return n && (n === this || k.contains(this, n)) || (e.type = r.origType, t = r.handler.apply(this, arguments), e.type = i), t } } }), k.fn.extend({ on: function (e, t, n, r) { return Ae(this, e, t, n, r) }, one: function (e, t, n, r) { return Ae(this, e, t, n, r, 1) }, off: function (e, t, n) { var r, i; if (e && e.preventDefault && e.handleObj) return r = e.handleObj, k(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this; if ("object" == typeof e) { for (i in e) this.off(i, t, e[i]); return this } return !1 !== t && "function" != typeof t || (n = t, t = void 0), !1 === n && (n = Se), this.each(function () { k.event.remove(this, e, n, t) }) } }); var je = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi, qe = /<script|<style|<link/i, Le = /checked\s*(?:[^=]|=\s*.checked.)/i, He = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g; function Oe(e, t) { return A(e, "table") && A(11 !== t.nodeType ? t : t.firstChild, "tr") && k(e).children("tbody")[0] || e } function Pe(e) { return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e } function Re(e) { return "true/" === (e.type || "").slice(0, 5) ? e.type = e.type.slice(5) : e.removeAttribute("type"), e } function Me(e, t) { var n, r, i, o, a, s, u, l; if (1 === t.nodeType) { if (Q.hasData(e) && (o = Q.access(e), a = Q.set(t, o), l = o.events)) for (i in delete a.handle, a.events = {}, l) for (n = 0, r = l[i].length; n < r; n++) k.event.add(t, i, l[i][n]); J.hasData(e) && (s = J.access(e), u = k.extend({}, s), J.set(t, u)) } } function Ie(n, r, i, o) { r = g.apply([], r); var e, t, a, s, u, l, c = 0, f = n.length, p = f - 1, d = r[0], h = m(d); if (h || 1 < f && "string" == typeof d && !y.checkClone && Le.test(d)) return n.each(function (e) { var t = n.eq(e); h && (r[0] = d.call(this, e, t.html())), Ie(t, r, i, o) }); if (f && (t = (e = we(r, n[0].ownerDocument, !1, n, o)).firstChild, 1 === e.childNodes.length && (e = t), t || o)) { for (s = (a = k.map(ve(e, "script"), Pe)).length; c < f; c++) u = e, c !== p && (u = k.clone(u, !0, !0), s && k.merge(a, ve(u, "script"))), i.call(n[c], u, c); if (s) for (l = a[a.length - 1].ownerDocument, k.map(a, Re), c = 0; c < s; c++) u = a[c], he.test(u.type || "") && !Q.access(u, "globalEval") && k.contains(l, u) && (u.src && "module" !== (u.type || "").toLowerCase() ? k._evalUrl && !u.noModule && k._evalUrl(u.src, { nonce: u.nonce || u.getAttribute("nonce") }) : b(u.textContent.replace(He, ""), u, l)) } return n } function We(e, t, n) { for (var r, i = t ? k.filter(t, e) : e, o = 0; null != (r = i[o]) ; o++) n || 1 !== r.nodeType || k.cleanData(ve(r)), r.parentNode && (n && oe(r) && ye(ve(r, "script")), r.parentNode.removeChild(r)); return e } k.extend({ htmlPrefilter: function (e) { return e.replace(je, "<$1></$2>") }, clone: function (e, t, n) { var r, i, o, a, s, u, l, c = e.cloneNode(!0), f = oe(e); if (!(y.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || k.isXMLDoc(e))) for (a = ve(c), r = 0, i = (o = ve(e)).length; r < i; r++) s = o[r], u = a[r], void 0, "input" === (l = u.nodeName.toLowerCase()) && pe.test(s.type) ? u.checked = s.checked : "input" !== l && "textarea" !== l || (u.defaultValue = s.defaultValue); if (t) if (n) for (o = o || ve(e), a = a || ve(c), r = 0, i = o.length; r < i; r++) Me(o[r], a[r]); else Me(e, c); return 0 < (a = ve(c, "script")).length && ye(a, !f && ve(e, "script")), c }, cleanData: function (e) { for (var t, n, r, i = k.event.special, o = 0; void 0 !== (n = e[o]) ; o++) if (G(n)) { if (t = n[Q.expando]) { if (t.events) for (r in t.events) i[r] ? k.event.remove(n, r) : k.removeEvent(n, r, t.handle); n[Q.expando] = void 0 } n[J.expando] && (n[J.expando] = void 0) } } }), k.fn.extend({ detach: function (e) { return We(this, e, !0) }, remove: function (e) { return We(this, e) }, text: function (e) { return _(this, function (e) { return void 0 === e ? k.text(this) : this.empty().each(function () { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e) }) }, null, e, arguments.length) }, append: function () { return Ie(this, arguments, function (e) { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || Oe(this, e).appendChild(e) }) }, prepend: function () { return Ie(this, arguments, function (e) { if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) { var t = Oe(this, e); t.insertBefore(e, t.firstChild) } }) }, before: function () { return Ie(this, arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this) }) }, after: function () { return Ie(this, arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this.nextSibling) }) }, empty: function () { for (var e, t = 0; null != (e = this[t]) ; t++) 1 === e.nodeType && (k.cleanData(ve(e, !1)), e.textContent = ""); return this }, clone: function (e, t) { return e = null != e && e, t = null == t ? e : t, this.map(function () { return k.clone(this, e, t) }) }, html: function (e) { return _(this, function (e) { var t = this[0] || {}, n = 0, r = this.length; if (void 0 === e && 1 === t.nodeType) return t.innerHTML; if ("string" == typeof e && !qe.test(e) && !ge[(de.exec(e) || ["", ""])[1].toLowerCase()]) { e = k.htmlPrefilter(e); try { for (; n < r; n++) 1 === (t = this[n] || {}).nodeType && (k.cleanData(ve(t, !1)), t.innerHTML = e); t = 0 } catch (e) { } } t && this.empty().append(e) }, null, e, arguments.length) }, replaceWith: function () { var n = []; return Ie(this, arguments, function (e) { var t = this.parentNode; k.inArray(this, n) < 0 && (k.cleanData(ve(this)), t && t.replaceChild(e, this)) }, n) } }), k.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (e, a) { k.fn[e] = function (e) { for (var t, n = [], r = k(e), i = r.length - 1, o = 0; o <= i; o++) t = o === i ? this : this.clone(!0), k(r[o])[a](t), u.apply(n, t.get()); return this.pushStack(n) } }); var $e = new RegExp("^(" + te + ")(?!px)[a-z%]+$", "i"), Fe = function (e) { var t = e.ownerDocument.defaultView; return t && t.opener || (t = C), t.getComputedStyle(e) }, Be = new RegExp(re.join("|"), "i"); function _e(e, t, n) { var r, i, o, a, s = e.style; return (n = n || Fe(e)) && ("" !== (a = n.getPropertyValue(t) || n[t]) || oe(e) || (a = k.style(e, t)), !y.pixelBoxStyles() && $e.test(a) && Be.test(t) && (r = s.width, i = s.minWidth, o = s.maxWidth, s.minWidth = s.maxWidth = s.width = a, a = n.width, s.width = r, s.minWidth = i, s.maxWidth = o)), void 0 !== a ? a + "" : a } function ze(e, t) { return { get: function () { if (!e()) return (this.get = t).apply(this, arguments); delete this.get } } } !function () { function e() { if (u) { s.style.cssText = "position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0", u.style.cssText = "position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%", ie.appendChild(s).appendChild(u); var e = C.getComputedStyle(u); n = "1%" !== e.top, a = 12 === t(e.marginLeft), u.style.right = "60%", o = 36 === t(e.right), r = 36 === t(e.width), u.style.position = "absolute", i = 12 === t(u.offsetWidth / 3), ie.removeChild(s), u = null } } function t(e) { return Math.round(parseFloat(e)) } var n, r, i, o, a, s = E.createElement("div"), u = E.createElement("div"); u.style && (u.style.backgroundClip = "content-box", u.cloneNode(!0).style.backgroundClip = "", y.clearCloneStyle = "content-box" === u.style.backgroundClip, k.extend(y, { boxSizingReliable: function () { return e(), r }, pixelBoxStyles: function () { return e(), o }, pixelPosition: function () { return e(), n }, reliableMarginLeft: function () { return e(), a }, scrollboxSize: function () { return e(), i } })) }(); var Ue = ["Webkit", "Moz", "ms"], Xe = E.createElement("div").style, Ve = {}; function Ge(e) { var t = k.cssProps[e] || Ve[e]; return t || (e in Xe ? e : Ve[e] = function (e) { var t = e[0].toUpperCase() + e.slice(1), n = Ue.length; while (n--) if ((e = Ue[n] + t) in Xe) return e }(e) || e) } var Ye = /^(none|table(?!-c[ea]).+)/, Qe = /^--/, Je = { position: "absolute", visibility: "hidden", display: "block" }, Ke = { letterSpacing: "0", fontWeight: "400" }; function Ze(e, t, n) { var r = ne.exec(t); return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || "px") : t } function et(e, t, n, r, i, o) { var a = "width" === t ? 1 : 0, s = 0, u = 0; if (n === (r ? "border" : "content")) return 0; for (; a < 4; a += 2) "margin" === n && (u += k.css(e, n + re[a], !0, i)), r ? ("content" === n && (u -= k.css(e, "padding" + re[a], !0, i)), "margin" !== n && (u -= k.css(e, "border" + re[a] + "Width", !0, i))) : (u += k.css(e, "padding" + re[a], !0, i), "padding" !== n ? u += k.css(e, "border" + re[a] + "Width", !0, i) : s += k.css(e, "border" + re[a] + "Width", !0, i)); return !r && 0 <= o && (u += Math.max(0, Math.ceil(e["offset" + t[0].toUpperCase() + t.slice(1)] - o - u - s - .5)) || 0), u } function tt(e, t, n) { var r = Fe(e), i = (!y.boxSizingReliable() || n) && "border-box" === k.css(e, "boxSizing", !1, r), o = i, a = _e(e, t, r), s = "offset" + t[0].toUpperCase() + t.slice(1); if ($e.test(a)) { if (!n) return a; a = "auto" } return (!y.boxSizingReliable() && i || "auto" === a || !parseFloat(a) && "inline" === k.css(e, "display", !1, r)) && e.getClientRects().length && (i = "border-box" === k.css(e, "boxSizing", !1, r), (o = s in e) && (a = e[s])), (a = parseFloat(a) || 0) + et(e, t, n || (i ? "border" : "content"), o, r, a) + "px" } function nt(e, t, n, r, i) { return new nt.prototype.init(e, t, n, r, i) } k.extend({ cssHooks: { opacity: { get: function (e, t) { if (t) { var n = _e(e, "opacity"); return "" === n ? "1" : n } } } }, cssNumber: { animationIterationCount: !0, columnCount: !0, fillOpacity: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, gridArea: !0, gridColumn: !0, gridColumnEnd: !0, gridColumnStart: !0, gridRow: !0, gridRowEnd: !0, gridRowStart: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: {}, style: function (e, t, n, r) { if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) { var i, o, a, s = V(t), u = Qe.test(t), l = e.style; if (u || (t = Ge(s)), a = k.cssHooks[t] || k.cssHooks[s], void 0 === n) return a && "get" in a && void 0 !== (i = a.get(e, !1, r)) ? i : l[t]; "string" === (o = typeof n) && (i = ne.exec(n)) && i[1] && (n = le(e, t, i), o = "number"), null != n && n == n && ("number" !== o || u || (n += i && i[3] || (k.cssNumber[s] ? "" : "px")), y.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"), a && "set" in a && void 0 === (n = a.set(e, n, r)) || (u ? l.setProperty(t, n) : l[t] = n)) } }, css: function (e, t, n, r) { var i, o, a, s = V(t); return Qe.test(t) || (t = Ge(s)), (a = k.cssHooks[t] || k.cssHooks[s]) && "get" in a && (i = a.get(e, !0, n)), void 0 === i && (i = _e(e, t, r)), "normal" === i && t in Ke && (i = Ke[t]), "" === n || n ? (o = parseFloat(i), !0 === n || isFinite(o) ? o || 0 : i) : i } }), k.each(["height", "width"], function (e, u) { k.cssHooks[u] = { get: function (e, t, n) { if (t) return !Ye.test(k.css(e, "display")) || e.getClientRects().length && e.getBoundingClientRect().width ? tt(e, u, n) : ue(e, Je, function () { return tt(e, u, n) }) }, set: function (e, t, n) { var r, i = Fe(e), o = !y.scrollboxSize() && "absolute" === i.position, a = (o || n) && "border-box" === k.css(e, "boxSizing", !1, i), s = n ? et(e, u, n, a, i) : 0; return a && o && (s -= Math.ceil(e["offset" + u[0].toUpperCase() + u.slice(1)] - parseFloat(i[u]) - et(e, u, "border", !1, i) - .5)), s && (r = ne.exec(t)) && "px" !== (r[3] || "px") && (e.style[u] = t, t = k.css(e, u)), Ze(0, t, s) } } }), k.cssHooks.marginLeft = ze(y.reliableMarginLeft, function (e, t) { if (t) return (parseFloat(_e(e, "marginLeft")) || e.getBoundingClientRect().left - ue(e, { marginLeft: 0 }, function () { return e.getBoundingClientRect().left })) + "px" }), k.each({ margin: "", padding: "", border: "Width" }, function (i, o) { k.cssHooks[i + o] = { expand: function (e) { for (var t = 0, n = {}, r = "string" == typeof e ? e.split(" ") : [e]; t < 4; t++) n[i + re[t] + o] = r[t] || r[t - 2] || r[0]; return n } }, "margin" !== i && (k.cssHooks[i + o].set = Ze) }), k.fn.extend({ css: function (e, t) { return _(this, function (e, t, n) { var r, i, o = {}, a = 0; if (Array.isArray(t)) { for (r = Fe(e), i = t.length; a < i; a++) o[t[a]] = k.css(e, t[a], !1, r); return o } return void 0 !== n ? k.style(e, t, n) : k.css(e, t) }, e, t, 1 < arguments.length) } }), ((k.Tween = nt).prototype = { constructor: nt, init: function (e, t, n, r, i, o) { this.elem = e, this.prop = n, this.easing = i || k.easing._default, this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = o || (k.cssNumber[n] ? "" : "px") }, cur: function () { var e = nt.propHooks[this.prop]; return e && e.get ? e.get(this) : nt.propHooks._default.get(this) }, run: function (e) { var t, n = nt.propHooks[this.prop]; return this.options.duration ? this.pos = t = k.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : nt.propHooks._default.set(this), this } }).init.prototype = nt.prototype, (nt.propHooks = { _default: { get: function (e) { var t; return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = k.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0 }, set: function (e) { k.fx.step[e.prop] ? k.fx.step[e.prop](e) : 1 !== e.elem.nodeType || !k.cssHooks[e.prop] && null == e.elem.style[Ge(e.prop)] ? e.elem[e.prop] = e.now : k.style(e.elem, e.prop, e.now + e.unit) } } }).scrollTop = nt.propHooks.scrollLeft = { set: function (e) { e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now) } }, k.easing = { linear: function (e) { return e }, swing: function (e) { return .5 - Math.cos(e * Math.PI) / 2 }, _default: "swing" }, k.fx = nt.prototype.init, k.fx.step = {}; var rt, it, ot, at, st = /^(?:toggle|show|hide)$/, ut = /queueHooks$/; function lt() { it && (!1 === E.hidden && C.requestAnimationFrame ? C.requestAnimationFrame(lt) : C.setTimeout(lt, k.fx.interval), k.fx.tick()) } function ct() { return C.setTimeout(function () { rt = void 0 }), rt = Date.now() } function ft(e, t) { var n, r = 0, i = { height: e }; for (t = t ? 1 : 0; r < 4; r += 2 - t) i["margin" + (n = re[r])] = i["padding" + n] = e; return t && (i.opacity = i.width = e), i } function pt(e, t, n) { for (var r, i = (dt.tweeners[t] || []).concat(dt.tweeners["*"]), o = 0, a = i.length; o < a; o++) if (r = i[o].call(n, t, e)) return r } function dt(o, e, t) { var n, a, r = 0, i = dt.prefilters.length, s = k.Deferred().always(function () { delete u.elem }), u = function () { if (a) return !1; for (var e = rt || ct(), t = Math.max(0, l.startTime + l.duration - e), n = 1 - (t / l.duration || 0), r = 0, i = l.tweens.length; r < i; r++) l.tweens[r].run(n); return s.notifyWith(o, [l, n, t]), n < 1 && i ? t : (i || s.notifyWith(o, [l, 1, 0]), s.resolveWith(o, [l]), !1) }, l = s.promise({ elem: o, props: k.extend({}, e), opts: k.extend(!0, { specialEasing: {}, easing: k.easing._default }, t), originalProperties: e, originalOptions: t, startTime: rt || ct(), duration: t.duration, tweens: [], createTween: function (e, t) { var n = k.Tween(o, l.opts, e, t, l.opts.specialEasing[e] || l.opts.easing); return l.tweens.push(n), n }, stop: function (e) { var t = 0, n = e ? l.tweens.length : 0; if (a) return this; for (a = !0; t < n; t++) l.tweens[t].run(1); return e ? (s.notifyWith(o, [l, 1, 0]), s.resolveWith(o, [l, e])) : s.rejectWith(o, [l, e]), this } }), c = l.props; for (!function (e, t) { var n, r, i, o, a; for (n in e) if (i = t[r = V(n)], o = e[n], Array.isArray(o) && (i = o[1], o = e[n] = o[0]), n !== r && (e[r] = o, delete e[n]), (a = k.cssHooks[r]) && "expand" in a) for (n in o = a.expand(o), delete e[r], o) n in e || (e[n] = o[n], t[n] = i); else t[r] = i }(c, l.opts.specialEasing) ; r < i; r++) if (n = dt.prefilters[r].call(l, o, c, l.opts)) return m(n.stop) && (k._queueHooks(l.elem, l.opts.queue).stop = n.stop.bind(n)), n; return k.map(c, pt, l), m(l.opts.start) && l.opts.start.call(o, l), l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always), k.fx.timer(k.extend(u, { elem: o, anim: l, queue: l.opts.queue })), l } k.Animation = k.extend(dt, { tweeners: { "*": [function (e, t) { var n = this.createTween(e, t); return le(n.elem, e, ne.exec(t), n), n }] }, tweener: function (e, t) { m(e) ? (t = e, e = ["*"]) : e = e.match(R); for (var n, r = 0, i = e.length; r < i; r++) n = e[r], dt.tweeners[n] = dt.tweeners[n] || [], dt.tweeners[n].unshift(t) }, prefilters: [function (e, t, n) { var r, i, o, a, s, u, l, c, f = "width" in t || "height" in t, p = this, d = {}, h = e.style, g = e.nodeType && se(e), v = Q.get(e, "fxshow"); for (r in n.queue || (null == (a = k._queueHooks(e, "fx")).unqueued && (a.unqueued = 0, s = a.empty.fire, a.empty.fire = function () { a.unqueued || s() }), a.unqueued++, p.always(function () { p.always(function () { a.unqueued--, k.queue(e, "fx").length || a.empty.fire() }) })), t) if (i = t[r], st.test(i)) { if (delete t[r], o = o || "toggle" === i, i === (g ? "hide" : "show")) { if ("show" !== i || !v || void 0 === v[r]) continue; g = !0 } d[r] = v && v[r] || k.style(e, r) } if ((u = !k.isEmptyObject(t)) || !k.isEmptyObject(d)) for (r in f && 1 === e.nodeType && (n.overflow = [h.overflow, h.overflowX, h.overflowY], null == (l = v && v.display) && (l = Q.get(e, "display")), "none" === (c = k.css(e, "display")) && (l ? c = l : (fe([e], !0), l = e.style.display || l, c = k.css(e, "display"), fe([e]))), ("inline" === c || "inline-block" === c && null != l) && "none" === k.css(e, "float") && (u || (p.done(function () { h.display = l }), null == l && (c = h.display, l = "none" === c ? "" : c)), h.display = "inline-block")), n.overflow && (h.overflow = "hidden", p.always(function () { h.overflow = n.overflow[0], h.overflowX = n.overflow[1], h.overflowY = n.overflow[2] })), u = !1, d) u || (v ? "hidden" in v && (g = v.hidden) : v = Q.access(e, "fxshow", { display: l }), o && (v.hidden = !g), g && fe([e], !0), p.done(function () { for (r in g || fe([e]), Q.remove(e, "fxshow"), d) k.style(e, r, d[r]) })), u = pt(g ? v[r] : 0, r, p), r in v || (v[r] = u.start, g && (u.end = u.start, u.start = 0)) }], prefilter: function (e, t) { t ? dt.prefilters.unshift(e) : dt.prefilters.push(e) } }), k.speed = function (e, t, n) { var r = e && "object" == typeof e ? k.extend({}, e) : { complete: n || !n && t || m(e) && e, duration: e, easing: n && t || t && !m(t) && t }; return k.fx.off ? r.duration = 0 : "number" != typeof r.duration && (r.duration in k.fx.speeds ? r.duration = k.fx.speeds[r.duration] : r.duration = k.fx.speeds._default), null != r.queue && !0 !== r.queue || (r.queue = "fx"), r.old = r.complete, r.complete = function () { m(r.old) && r.old.call(this), r.queue && k.dequeue(this, r.queue) }, r }, k.fn.extend({ fadeTo: function (e, t, n, r) { return this.filter(se).css("opacity", 0).show().end().animate({ opacity: t }, e, n, r) }, animate: function (t, e, n, r) { var i = k.isEmptyObject(t), o = k.speed(e, n, r), a = function () { var e = dt(this, k.extend({}, t), o); (i || Q.get(this, "finish")) && e.stop(!0) }; return a.finish = a, i || !1 === o.queue ? this.each(a) : this.queue(o.queue, a) }, stop: function (i, e, o) { var a = function (e) { var t = e.stop; delete e.stop, t(o) }; return "string" != typeof i && (o = e, e = i, i = void 0), e && !1 !== i && this.queue(i || "fx", []), this.each(function () { var e = !0, t = null != i && i + "queueHooks", n = k.timers, r = Q.get(this); if (t) r[t] && r[t].stop && a(r[t]); else for (t in r) r[t] && r[t].stop && ut.test(t) && a(r[t]); for (t = n.length; t--;) n[t].elem !== this || null != i && n[t].queue !== i || (n[t].anim.stop(o), e = !1, n.splice(t, 1)); !e && o || k.dequeue(this, i) }) }, finish: function (a) { return !1 !== a && (a = a || "fx"), this.each(function () { var e, t = Q.get(this), n = t[a + "queue"], r = t[a + "queueHooks"], i = k.timers, o = n ? n.length : 0; for (t.finish = !0, k.queue(this, a, []), r && r.stop && r.stop.call(this, !0), e = i.length; e--;) i[e].elem === this && i[e].queue === a && (i[e].anim.stop(!0), i.splice(e, 1)); for (e = 0; e < o; e++) n[e] && n[e].finish && n[e].finish.call(this); delete t.finish }) } }), k.each(["toggle", "show", "hide"], function (e, r) { var i = k.fn[r]; k.fn[r] = function (e, t, n) { return null == e || "boolean" == typeof e ? i.apply(this, arguments) : this.animate(ft(r, !0), e, t, n) } }), k.each({ slideDown: ft("show"), slideUp: ft("hide"), slideToggle: ft("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (e, r) { k.fn[e] = function (e, t, n) { return this.animate(r, e, t, n) } }), k.timers = [], k.fx.tick = function () { var e, t = 0, n = k.timers; for (rt = Date.now() ; t < n.length; t++) (e = n[t])() || n[t] !== e || n.splice(t--, 1); n.length || k.fx.stop(), rt = void 0 }, k.fx.timer = function (e) { k.timers.push(e), k.fx.start() }, k.fx.interval = 13, k.fx.start = function () { it || (it = !0, lt()) }, k.fx.stop = function () { it = null }, k.fx.speeds = { slow: 600, fast: 200, _default: 400 }, k.fn.delay = function (r, e) { return r = k.fx && k.fx.speeds[r] || r, e = e || "fx", this.queue(e, function (e, t) { var n = C.setTimeout(e, r); t.stop = function () { C.clearTimeout(n) } }) }, ot = E.createElement("input"), at = E.createElement("select").appendChild(E.createElement("option")), ot.type = "checkbox", y.checkOn = "" !== ot.value, y.optSelected = at.selected, (ot = E.createElement("input")).value = "t", ot.type = "radio", y.radioValue = "t" === ot.value; var ht, gt = k.expr.attrHandle; k.fn.extend({ attr: function (e, t) { return _(this, k.attr, e, t, 1 < arguments.length) }, removeAttr: function (e) { return this.each(function () { k.removeAttr(this, e) }) } }), k.extend({ attr: function (e, t, n) { var r, i, o = e.nodeType; if (3 !== o && 8 !== o && 2 !== o) return "undefined" == typeof e.getAttribute ? k.prop(e, t, n) : (1 === o && k.isXMLDoc(e) || (i = k.attrHooks[t.toLowerCase()] || (k.expr.match.bool.test(t) ? ht : void 0)), void 0 !== n ? null === n ? void k.removeAttr(e, t) : i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : (e.setAttribute(t, n + ""), n) : i && "get" in i && null !== (r = i.get(e, t)) ? r : null == (r = k.find.attr(e, t)) ? void 0 : r) }, attrHooks: { type: { set: function (e, t) { if (!y.radioValue && "radio" === t && A(e, "input")) { var n = e.value; return e.setAttribute("type", t), n && (e.value = n), t } } } }, removeAttr: function (e, t) { var n, r = 0, i = t && t.match(R); if (i && 1 === e.nodeType) while (n = i[r++]) e.removeAttribute(n) } }), ht = { set: function (e, t, n) { return !1 === t ? k.removeAttr(e, n) : e.setAttribute(n, n), n } }, k.each(k.expr.match.bool.source.match(/\w+/g), function (e, t) { var a = gt[t] || k.find.attr; gt[t] = function (e, t, n) { var r, i, o = t.toLowerCase(); return n || (i = gt[o], gt[o] = r, r = null != a(e, t, n) ? o : null, gt[o] = i), r } }); var vt = /^(?:input|select|textarea|button)$/i, yt = /^(?:a|area)$/i; function mt(e) { return (e.match(R) || []).join(" ") } function xt(e) { return e.getAttribute && e.getAttribute("class") || "" } function bt(e) { return Array.isArray(e) ? e : "string" == typeof e && e.match(R) || [] } k.fn.extend({ prop: function (e, t) { return _(this, k.prop, e, t, 1 < arguments.length) }, removeProp: function (e) { return this.each(function () { delete this[k.propFix[e] || e] }) } }), k.extend({ prop: function (e, t, n) { var r, i, o = e.nodeType; if (3 !== o && 8 !== o && 2 !== o) return 1 === o && k.isXMLDoc(e) || (t = k.propFix[t] || t, i = k.propHooks[t]), void 0 !== n ? i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : e[t] = n : i && "get" in i && null !== (r = i.get(e, t)) ? r : e[t] }, propHooks: { tabIndex: { get: function (e) { var t = k.find.attr(e, "tabindex"); return t ? parseInt(t, 10) : vt.test(e.nodeName) || yt.test(e.nodeName) && e.href ? 0 : -1 } } }, propFix: { "for": "htmlFor", "class": "className" } }), y.optSelected || (k.propHooks.selected = { get: function (e) { var t = e.parentNode; return t && t.parentNode && t.parentNode.selectedIndex, null }, set: function (e) { var t = e.parentNode; t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex) } }), k.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () { k.propFix[this.toLowerCase()] = this }), k.fn.extend({ addClass: function (t) { var e, n, r, i, o, a, s, u = 0; if (m(t)) return this.each(function (e) { k(this).addClass(t.call(this, e, xt(this))) }); if ((e = bt(t)).length) while (n = this[u++]) if (i = xt(n), r = 1 === n.nodeType && " " + mt(i) + " ") { a = 0; while (o = e[a++]) r.indexOf(" " + o + " ") < 0 && (r += o + " "); i !== (s = mt(r)) && n.setAttribute("class", s) } return this }, removeClass: function (t) { var e, n, r, i, o, a, s, u = 0; if (m(t)) return this.each(function (e) { k(this).removeClass(t.call(this, e, xt(this))) }); if (!arguments.length) return this.attr("class", ""); if ((e = bt(t)).length) while (n = this[u++]) if (i = xt(n), r = 1 === n.nodeType && " " + mt(i) + " ") { a = 0; while (o = e[a++]) while (-1 < r.indexOf(" " + o + " ")) r = r.replace(" " + o + " ", " "); i !== (s = mt(r)) && n.setAttribute("class", s) } return this }, toggleClass: function (i, t) { var o = typeof i, a = "string" === o || Array.isArray(i); return "boolean" == typeof t && a ? t ? this.addClass(i) : this.removeClass(i) : m(i) ? this.each(function (e) { k(this).toggleClass(i.call(this, e, xt(this), t), t) }) : this.each(function () { var e, t, n, r; if (a) { t = 0, n = k(this), r = bt(i); while (e = r[t++]) n.hasClass(e) ? n.removeClass(e) : n.addClass(e) } else void 0 !== i && "boolean" !== o || ((e = xt(this)) && Q.set(this, "__className__", e), this.setAttribute && this.setAttribute("class", e || !1 === i ? "" : Q.get(this, "__className__") || "")) }) }, hasClass: function (e) { var t, n, r = 0; t = " " + e + " "; while (n = this[r++]) if (1 === n.nodeType && -1 < (" " + mt(xt(n)) + " ").indexOf(t)) return !0; return !1 } }); var wt = /\r/g; k.fn.extend({ val: function (n) { var r, e, i, t = this[0]; return arguments.length ? (i = m(n), this.each(function (e) { var t; 1 === this.nodeType && (null == (t = i ? n.call(this, e, k(this).val()) : n) ? t = "" : "number" == typeof t ? t += "" : Array.isArray(t) && (t = k.map(t, function (e) { return null == e ? "" : e + "" })), (r = k.valHooks[this.type] || k.valHooks[this.nodeName.toLowerCase()]) && "set" in r && void 0 !== r.set(this, t, "value") || (this.value = t)) })) : t ? (r = k.valHooks[t.type] || k.valHooks[t.nodeName.toLowerCase()]) && "get" in r && void 0 !== (e = r.get(t, "value")) ? e : "string" == typeof (e = t.value) ? e.replace(wt, "") : null == e ? "" : e : void 0 } }), k.extend({ valHooks: { option: { get: function (e) { var t = k.find.attr(e, "value"); return null != t ? t : mt(k.text(e)) } }, select: { get: function (e) { var t, n, r, i = e.options, o = e.selectedIndex, a = "select-one" === e.type, s = a ? null : [], u = a ? o + 1 : i.length; for (r = o < 0 ? u : a ? o : 0; r < u; r++) if (((n = i[r]).selected || r === o) && !n.disabled && (!n.parentNode.disabled || !A(n.parentNode, "optgroup"))) { if (t = k(n).val(), a) return t; s.push(t) } return s }, set: function (e, t) { var n, r, i = e.options, o = k.makeArray(t), a = i.length; while (a--) ((r = i[a]).selected = -1 < k.inArray(k.valHooks.option.get(r), o)) && (n = !0); return n || (e.selectedIndex = -1), o } } } }), k.each(["radio", "checkbox"], function () { k.valHooks[this] = { set: function (e, t) { if (Array.isArray(t)) return e.checked = -1 < k.inArray(k(e).val(), t) } }, y.checkOn || (k.valHooks[this].get = function (e) { return null === e.getAttribute("value") ? "on" : e.value }) }), y.focusin = "onfocusin" in C; var Tt = /^(?:focusinfocus|focusoutblur)$/, Ct = function (e) { e.stopPropagation() }; k.extend(k.event, { trigger: function (e, t, n, r) { var i, o, a, s, u, l, c, f, p = [n || E], d = v.call(e, "type") ? e.type : e, h = v.call(e, "namespace") ? e.namespace.split(".") : []; if (o = f = a = n = n || E, 3 !== n.nodeType && 8 !== n.nodeType && !Tt.test(d + k.event.triggered) && (-1 < d.indexOf(".") && (d = (h = d.split(".")).shift(), h.sort()), u = d.indexOf(":") < 0 && "on" + d, (e = e[k.expando] ? e : new k.Event(d, "object" == typeof e && e)).isTrigger = r ? 2 : 3, e.namespace = h.join("."), e.rnamespace = e.namespace ? new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, e.result = void 0, e.target || (e.target = n), t = null == t ? [e] : k.makeArray(t, [e]), c = k.event.special[d] || {}, r || !c.trigger || !1 !== c.trigger.apply(n, t))) { if (!r && !c.noBubble && !x(n)) { for (s = c.delegateType || d, Tt.test(s + d) || (o = o.parentNode) ; o; o = o.parentNode) p.push(o), a = o; a === (n.ownerDocument || E) && p.push(a.defaultView || a.parentWindow || C) } i = 0; while ((o = p[i++]) && !e.isPropagationStopped()) f = o, e.type = 1 < i ? s : c.bindType || d, (l = (Q.get(o, "events") || {})[e.type] && Q.get(o, "handle")) && l.apply(o, t), (l = u && o[u]) && l.apply && G(o) && (e.result = l.apply(o, t), !1 === e.result && e.preventDefault()); return e.type = d, r || e.isDefaultPrevented() || c._default && !1 !== c._default.apply(p.pop(), t) || !G(n) || u && m(n[d]) && !x(n) && ((a = n[u]) && (n[u] = null), k.event.triggered = d, e.isPropagationStopped() && f.addEventListener(d, Ct), n[d](), e.isPropagationStopped() && f.removeEventListener(d, Ct), k.event.triggered = void 0, a && (n[u] = a)), e.result } }, simulate: function (e, t, n) { var r = k.extend(new k.Event, n, { type: e, isSimulated: !0 }); k.event.trigger(r, null, t) } }), k.fn.extend({ trigger: function (e, t) { return this.each(function () { k.event.trigger(e, t, this) }) }, triggerHandler: function (e, t) { var n = this[0]; if (n) return k.event.trigger(e, t, n, !0) } }), y.focusin || k.each({ focus: "focusin", blur: "focusout" }, function (n, r) { var i = function (e) { k.event.simulate(r, e.target, k.event.fix(e)) }; k.event.special[r] = { setup: function () { var e = this.ownerDocument || this, t = Q.access(e, r); t || e.addEventListener(n, i, !0), Q.access(e, r, (t || 0) + 1) }, teardown: function () { var e = this.ownerDocument || this, t = Q.access(e, r) - 1; t ? Q.access(e, r, t) : (e.removeEventListener(n, i, !0), Q.remove(e, r)) } } }); var Et = C.location, kt = Date.now(), St = /\?/; k.parseXML = function (e) { var t; if (!e || "string" != typeof e) return null; try { t = (new C.DOMParser).parseFromString(e, "text/xml") } catch (e) { t = void 0 } return t && !t.getElementsByTagName("parsererror").length || k.error("Invalid XML: " + e), t }; var Nt = /\[\]$/, At = /\r?\n/g, Dt = /^(?:submit|button|image|reset|file)$/i, jt = /^(?:input|select|textarea|keygen)/i; function qt(n, e, r, i) { var t; if (Array.isArray(e)) k.each(e, function (e, t) { r || Nt.test(n) ? i(n, t) : qt(n + "[" + ("object" == typeof t && null != t ? e : "") + "]", t, r, i) }); else if (r || "object" !== w(e)) i(n, e); else for (t in e) qt(n + "[" + t + "]", e[t], r, i) } k.param = function (e, t) { var n, r = [], i = function (e, t) { var n = m(t) ? t() : t; r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(null == n ? "" : n) }; if (null == e) return ""; if (Array.isArray(e) || e.jquery && !k.isPlainObject(e)) k.each(e, function () { i(this.name, this.value) }); else for (n in e) qt(n, e[n], t, i); return r.join("&") }, k.fn.extend({ serialize: function () { return k.param(this.serializeArray()) }, serializeArray: function () { return this.map(function () { var e = k.prop(this, "elements"); return e ? k.makeArray(e) : this }).filter(function () { var e = this.type; return this.name && !k(this).is(":disabled") && jt.test(this.nodeName) && !Dt.test(e) && (this.checked || !pe.test(e)) }).map(function (e, t) { var n = k(this).val(); return null == n ? null : Array.isArray(n) ? k.map(n, function (e) { return { name: t.name, value: e.replace(At, "\r\n") } }) : { name: t.name, value: n.replace(At, "\r\n") } }).get() } }); var Lt = /%20/g, Ht = /#.*$/, Ot = /([?&])_=[^&]*/, Pt = /^(.*?):[ \t]*([^\r\n]*)$/gm, Rt = /^(?:GET|HEAD)$/, Mt = /^\/\//, It = {}, Wt = {}, $t = "*/".concat("*"), Ft = E.createElement("a"); function Bt(o) { return function (e, t) { "string" != typeof e && (t = e, e = "*"); var n, r = 0, i = e.toLowerCase().match(R) || []; if (m(t)) while (n = i[r++]) "+" === n[0] ? (n = n.slice(1) || "*", (o[n] = o[n] || []).unshift(t)) : (o[n] = o[n] || []).push(t) } } function _t(t, i, o, a) { var s = {}, u = t === Wt; function l(e) { var r; return s[e] = !0, k.each(t[e] || [], function (e, t) { var n = t(i, o, a); return "string" != typeof n || u || s[n] ? u ? !(r = n) : void 0 : (i.dataTypes.unshift(n), l(n), !1) }), r } return l(i.dataTypes[0]) || !s["*"] && l("*") } function zt(e, t) { var n, r, i = k.ajaxSettings.flatOptions || {}; for (n in t) void 0 !== t[n] && ((i[n] ? e : r || (r = {}))[n] = t[n]); return r && k.extend(!0, e, r), e } Ft.href = Et.href, k.extend({ active: 0, lastModified: {}, etag: {}, ajaxSettings: { url: Et.href, type: "GET", isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol), global: !0, processData: !0, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", accepts: { "*": $t, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript" }, contents: { xml: /\bxml\b/, html: /\bhtml/, json: /\bjson\b/ }, responseFields: { xml: "responseXML", text: "responseText", json: "responseJSON" }, converters: { "* text": String, "text html": !0, "text json": JSON.parse, "text xml": k.parseXML }, flatOptions: { url: !0, context: !0 } }, ajaxSetup: function (e, t) { return t ? zt(zt(e, k.ajaxSettings), t) : zt(k.ajaxSettings, e) }, ajaxPrefilter: Bt(It), ajaxTransport: Bt(Wt), ajax: function (e, t) { "object" == typeof e && (t = e, e = void 0), t = t || {}; var c, f, p, n, d, r, h, g, i, o, v = k.ajaxSetup({}, t), y = v.context || v, m = v.context && (y.nodeType || y.jquery) ? k(y) : k.event, x = k.Deferred(), b = k.Callbacks("once memory"), w = v.statusCode || {}, a = {}, s = {}, u = "canceled", T = { readyState: 0, getResponseHeader: function (e) { var t; if (h) { if (!n) { n = {}; while (t = Pt.exec(p)) n[t[1].toLowerCase() + " "] = (n[t[1].toLowerCase() + " "] || []).concat(t[2]) } t = n[e.toLowerCase() + " "] } return null == t ? null : t.join(", ") }, getAllResponseHeaders: function () { return h ? p : null }, setRequestHeader: function (e, t) { return null == h && (e = s[e.toLowerCase()] = s[e.toLowerCase()] || e, a[e] = t), this }, overrideMimeType: function (e) { return null == h && (v.mimeType = e), this }, statusCode: function (e) { var t; if (e) if (h) T.always(e[T.status]); else for (t in e) w[t] = [w[t], e[t]]; return this }, abort: function (e) { var t = e || u; return c && c.abort(t), l(0, t), this } }; if (x.promise(T), v.url = ((e || v.url || Et.href) + "").replace(Mt, Et.protocol + "//"), v.type = t.method || t.type || v.method || v.type, v.dataTypes = (v.dataType || "*").toLowerCase().match(R) || [""], null == v.crossDomain) { r = E.createElement("a"); try { r.href = v.url, r.href = r.href, v.crossDomain = Ft.protocol + "//" + Ft.host != r.protocol + "//" + r.host } catch (e) { v.crossDomain = !0 } } if (v.data && v.processData && "string" != typeof v.data && (v.data = k.param(v.data, v.traditional)), _t(It, v, t, T), h) return T; for (i in (g = k.event && v.global) && 0 == k.active++ && k.event.trigger("ajaxStart"), v.type = v.type.toUpperCase(), v.hasContent = !Rt.test(v.type), f = v.url.replace(Ht, ""), v.hasContent ? v.data && v.processData && 0 === (v.contentType || "").indexOf("application/x-www-form-urlencoded") && (v.data = v.data.replace(Lt, "+")) : (o = v.url.slice(f.length), v.data && (v.processData || "string" == typeof v.data) && (f += (St.test(f) ? "&" : "?") + v.data, delete v.data), !1 === v.cache && (f = f.replace(Ot, "$1"), o = (St.test(f) ? "&" : "?") + "_=" + kt++ + o), v.url = f + o), v.ifModified && (k.lastModified[f] && T.setRequestHeader("If-Modified-Since", k.lastModified[f]), k.etag[f] && T.setRequestHeader("If-None-Match", k.etag[f])), (v.data && v.hasContent && !1 !== v.contentType || t.contentType) && T.setRequestHeader("Content-Type", v.contentType), T.setRequestHeader("Accept", v.dataTypes[0] && v.accepts[v.dataTypes[0]] ? v.accepts[v.dataTypes[0]] + ("*" !== v.dataTypes[0] ? ", " + $t + "; q=0.01" : "") : v.accepts["*"]), v.headers) T.setRequestHeader(i, v.headers[i]); if (v.beforeSend && (!1 === v.beforeSend.call(y, T, v) || h)) return T.abort(); if (u = "abort", b.add(v.complete), T.done(v.success), T.fail(v.error), c = _t(Wt, v, t, T)) { if (T.readyState = 1, g && m.trigger("ajaxSend", [T, v]), h) return T; v.async && 0 < v.timeout && (d = C.setTimeout(function () { T.abort("timeout") }, v.timeout)); try { h = !1, c.send(a, l) } catch (e) { if (h) throw e; l(-1, e) } } else l(-1, "No Transport"); function l(e, t, n, r) { var i, o, a, s, u, l = t; h || (h = !0, d && C.clearTimeout(d), c = void 0, p = r || "", T.readyState = 0 < e ? 4 : 0, i = 200 <= e && e < 300 || 304 === e, n && (s = function (e, t, n) { var r, i, o, a, s = e.contents, u = e.dataTypes; while ("*" === u[0]) u.shift(), void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type")); if (r) for (i in s) if (s[i] && s[i].test(r)) { u.unshift(i); break } if (u[0] in n) o = u[0]; else { for (i in n) { if (!u[0] || e.converters[i + " " + u[0]]) { o = i; break } a || (a = i) } o = o || a } if (o) return o !== u[0] && u.unshift(o), n[o] }(v, T, n)), s = function (e, t, n, r) { var i, o, a, s, u, l = {}, c = e.dataTypes.slice(); if (c[1]) for (a in e.converters) l[a.toLowerCase()] = e.converters[a]; o = c.shift(); while (o) if (e.responseFields[o] && (n[e.responseFields[o]] = t), !u && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), u = o, o = c.shift()) if ("*" === o) o = u; else if ("*" !== u && u !== o) { if (!(a = l[u + " " + o] || l["* " + o])) for (i in l) if ((s = i.split(" "))[1] === o && (a = l[u + " " + s[0]] || l["* " + s[0]])) { !0 === a ? a = l[i] : !0 !== l[i] && (o = s[0], c.unshift(s[1])); break } if (!0 !== a) if (a && e["throws"]) t = a(t); else try { t = a(t) } catch (e) { return { state: "parsererror", error: a ? e : "No conversion from " + u + " to " + o } } } return { state: "success", data: t } }(v, s, T, i), i ? (v.ifModified && ((u = T.getResponseHeader("Last-Modified")) && (k.lastModified[f] = u), (u = T.getResponseHeader("etag")) && (k.etag[f] = u)), 204 === e || "HEAD" === v.type ? l = "nocontent" : 304 === e ? l = "notmodified" : (l = s.state, o = s.data, i = !(a = s.error))) : (a = l, !e && l || (l = "error", e < 0 && (e = 0))), T.status = e, T.statusText = (t || l) + "", i ? x.resolveWith(y, [o, l, T]) : x.rejectWith(y, [T, l, a]), T.statusCode(w), w = void 0, g && m.trigger(i ? "ajaxSuccess" : "ajaxError", [T, v, i ? o : a]), b.fireWith(y, [T, l]), g && (m.trigger("ajaxComplete", [T, v]), --k.active || k.event.trigger("ajaxStop"))) } return T }, getJSON: function (e, t, n) { return k.get(e, t, n, "json") }, getScript: function (e, t) { return k.get(e, void 0, t, "script") } }), k.each(["get", "post"], function (e, i) { k[i] = function (e, t, n, r) { return m(t) && (r = r || n, n = t, t = void 0), k.ajax(k.extend({ url: e, type: i, dataType: r, data: t, success: n }, k.isPlainObject(e) && e)) } }), k._evalUrl = function (e, t) { return k.ajax({ url: e, type: "GET", dataType: "script", cache: !0, async: !1, global: !1, converters: { "text script": function () { } }, dataFilter: function (e) { k.globalEval(e, t) } }) }, k.fn.extend({ wrapAll: function (e) { var t; return this[0] && (m(e) && (e = e.call(this[0])), t = k(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () { var e = this; while (e.firstElementChild) e = e.firstElementChild; return e }).append(this)), this }, wrapInner: function (n) { return m(n) ? this.each(function (e) { k(this).wrapInner(n.call(this, e)) }) : this.each(function () { var e = k(this), t = e.contents(); t.length ? t.wrapAll(n) : e.append(n) }) }, wrap: function (t) { var n = m(t); return this.each(function (e) { k(this).wrapAll(n ? t.call(this, e) : t) }) }, unwrap: function (e) { return this.parent(e).not("body").each(function () { k(this).replaceWith(this.childNodes) }), this } }), k.expr.pseudos.hidden = function (e) { return !k.expr.pseudos.visible(e) }, k.expr.pseudos.visible = function (e) { return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length) }, k.ajaxSettings.xhr = function () { try { return new C.XMLHttpRequest } catch (e) { } }; var Ut = { 0: 200, 1223: 204 }, Xt = k.ajaxSettings.xhr(); y.cors = !!Xt && "withCredentials" in Xt, y.ajax = Xt = !!Xt, k.ajaxTransport(function (i) { var o, a; if (y.cors || Xt && !i.crossDomain) return { send: function (e, t) { var n, r = i.xhr(); if (r.open(i.type, i.url, i.async, i.username, i.password), i.xhrFields) for (n in i.xhrFields) r[n] = i.xhrFields[n]; for (n in i.mimeType && r.overrideMimeType && r.overrideMimeType(i.mimeType), i.crossDomain || e["X-Requested-With"] || (e["X-Requested-With"] = "XMLHttpRequest"), e) r.setRequestHeader(n, e[n]); o = function (e) { return function () { o && (o = a = r.onload = r.onerror = r.onabort = r.ontimeout = r.onreadystatechange = null, "abort" === e ? r.abort() : "error" === e ? "number" != typeof r.status ? t(0, "error") : t(r.status, r.statusText) : t(Ut[r.status] || r.status, r.statusText, "text" !== (r.responseType || "text") || "string" != typeof r.responseText ? { binary: r.response } : { text: r.responseText }, r.getAllResponseHeaders())) } }, r.onload = o(), a = r.onerror = r.ontimeout = o("error"), void 0 !== r.onabort ? r.onabort = a : r.onreadystatechange = function () { 4 === r.readyState && C.setTimeout(function () { o && a() }) }, o = o("abort"); try { r.send(i.hasContent && i.data || null) } catch (e) { if (o) throw e } }, abort: function () { o && o() } } }), k.ajaxPrefilter(function (e) { e.crossDomain && (e.contents.script = !1) }), k.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /\b(?:java|ecma)script\b/ }, converters: { "text script": function (e) { return k.globalEval(e), e } } }), k.ajaxPrefilter("script", function (e) { void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET") }), k.ajaxTransport("script", function (n) { var r, i; if (n.crossDomain || n.scriptAttrs) return { send: function (e, t) { r = k("<script>").attr(n.scriptAttrs || {}).prop({ charset: n.scriptCharset, src: n.url }).on("load error", i = function (e) { r.remove(), i = null, e && t("error" === e.type ? 404 : 200, e.type) }), E.head.appendChild(r[0]) }, abort: function () { i && i() } } }); var Vt, Gt = [], Yt = /(=)\?(?=&|$)|\?\?/; k.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { var e = Gt.pop() || k.expando + "_" + kt++; return this[e] = !0, e } }), k.ajaxPrefilter("json jsonp", function (e, t, n) { var r, i, o, a = !1 !== e.jsonp && (Yt.test(e.url) ? "url" : "string" == typeof e.data && 0 === (e.contentType || "").indexOf("application/x-www-form-urlencoded") && Yt.test(e.data) && "data"); if (a || "jsonp" === e.dataTypes[0]) return r = e.jsonpCallback = m(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback, a ? e[a] = e[a].replace(Yt, "$1" + r) : !1 !== e.jsonp && (e.url += (St.test(e.url) ? "&" : "?") + e.jsonp + "=" + r), e.converters["script json"] = function () { return o || k.error(r + " was not called"), o[0] }, e.dataTypes[0] = "json", i = C[r], C[r] = function () { o = arguments }, n.always(function () { void 0 === i ? k(C).removeProp(r) : C[r] = i, e[r] && (e.jsonpCallback = t.jsonpCallback, Gt.push(r)), o && m(i) && i(o[0]), o = i = void 0 }), "script" }), y.createHTMLDocument = ((Vt = E.implementation.createHTMLDocument("").body).innerHTML = "<form></form><form></form>", 2 === Vt.childNodes.length), k.parseHTML = function (e, t, n) { return "string" != typeof e ? [] : ("boolean" == typeof t && (n = t, t = !1), t || (y.createHTMLDocument ? ((r = (t = E.implementation.createHTMLDocument("")).createElement("base")).href = E.location.href, t.head.appendChild(r)) : t = E), o = !n && [], (i = D.exec(e)) ? [t.createElement(i[1])] : (i = we([e], t, o), o && o.length && k(o).remove(), k.merge([], i.childNodes))); var r, i, o }, k.fn.load = function (e, t, n) { var r, i, o, a = this, s = e.indexOf(" "); return -1 < s && (r = mt(e.slice(s)), e = e.slice(0, s)), m(t) ? (n = t, t = void 0) : t && "object" == typeof t && (i = "POST"), 0 < a.length && k.ajax({ url: e, type: i || "GET", dataType: "html", data: t }).done(function (e) { o = arguments, a.html(r ? k("<div>").append(k.parseHTML(e)).find(r) : e) }).always(n && function (e, t) { a.each(function () { n.apply(this, o || [e.responseText, t, e]) }) }), this }, k.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) { k.fn[t] = function (e) { return this.on(t, e) } }), k.expr.pseudos.animated = function (t) { return k.grep(k.timers, function (e) { return t === e.elem }).length }, k.offset = { setOffset: function (e, t, n) { var r, i, o, a, s, u, l = k.css(e, "position"), c = k(e), f = {}; "static" === l && (e.style.position = "relative"), s = c.offset(), o = k.css(e, "top"), u = k.css(e, "left"), ("absolute" === l || "fixed" === l) && -1 < (o + u).indexOf("auto") ? (a = (r = c.position()).top, i = r.left) : (a = parseFloat(o) || 0, i = parseFloat(u) || 0), m(t) && (t = t.call(e, n, k.extend({}, s))), null != t.top && (f.top = t.top - s.top + a), null != t.left && (f.left = t.left - s.left + i), "using" in t ? t.using.call(e, f) : c.css(f) } }, k.fn.extend({ offset: function (t) { if (arguments.length) return void 0 === t ? this : this.each(function (e) { k.offset.setOffset(this, t, e) }); var e, n, r = this[0]; return r ? r.getClientRects().length ? (e = r.getBoundingClientRect(), n = r.ownerDocument.defaultView, { top: e.top + n.pageYOffset, left: e.left + n.pageXOffset }) : { top: 0, left: 0 } : void 0 }, position: function () { if (this[0]) { var e, t, n, r = this[0], i = { top: 0, left: 0 }; if ("fixed" === k.css(r, "position")) t = r.getBoundingClientRect(); else { t = this.offset(), n = r.ownerDocument, e = r.offsetParent || n.documentElement; while (e && (e === n.body || e === n.documentElement) && "static" === k.css(e, "position")) e = e.parentNode; e && e !== r && 1 === e.nodeType && ((i = k(e).offset()).top += k.css(e, "borderTopWidth", !0), i.left += k.css(e, "borderLeftWidth", !0)) } return { top: t.top - i.top - k.css(r, "marginTop", !0), left: t.left - i.left - k.css(r, "marginLeft", !0) } } }, offsetParent: function () { return this.map(function () { var e = this.offsetParent; while (e && "static" === k.css(e, "position")) e = e.offsetParent; return e || ie }) } }), k.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (t, i) { var o = "pageYOffset" === i; k.fn[t] = function (e) { return _(this, function (e, t, n) { var r; if (x(e) ? r = e : 9 === e.nodeType && (r = e.defaultView), void 0 === n) return r ? r[i] : e[t]; r ? r.scrollTo(o ? r.pageXOffset : n, o ? n : r.pageYOffset) : e[t] = n }, t, e, arguments.length) } }), k.each(["top", "left"], function (e, n) { k.cssHooks[n] = ze(y.pixelPosition, function (e, t) { if (t) return t = _e(e, n), $e.test(t) ? k(e).position()[n] + "px" : t }) }), k.each({ Height: "height", Width: "width" }, function (a, s) { k.each({ padding: "inner" + a, content: s, "": "outer" + a }, function (r, o) { k.fn[o] = function (e, t) { var n = arguments.length && (r || "boolean" != typeof e), i = r || (!0 === e || !0 === t ? "margin" : "border"); return _(this, function (e, t, n) { var r; return x(e) ? 0 === o.indexOf("outer") ? e["inner" + a] : e.document.documentElement["client" + a] : 9 === e.nodeType ? (r = e.documentElement, Math.max(e.body["scroll" + a], r["scroll" + a], e.body["offset" + a], r["offset" + a], r["client" + a])) : void 0 === n ? k.css(e, t, i) : k.style(e, t, n, i) }, s, n ? e : void 0, n) } }) }), k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function (e, n) { k.fn[n] = function (e, t) { return 0 < arguments.length ? this.on(n, null, e, t) : this.trigger(n) } }), k.fn.extend({ hover: function (e, t) { return this.mouseenter(e).mouseleave(t || e) } }), k.fn.extend({ bind: function (e, t, n) { return this.on(e, null, t, n) }, unbind: function (e, t) { return this.off(e, null, t) }, delegate: function (e, t, n, r) { return this.on(t, e, n, r) }, undelegate: function (e, t, n) { return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n) } }), k.proxy = function (e, t) { var n, r, i; if ("string" == typeof t && (n = e[t], t = e, e = n), m(e)) return r = s.call(arguments, 2), (i = function () { return e.apply(t || this, r.concat(s.call(arguments))) }).guid = e.guid = e.guid || k.guid++, i }, k.holdReady = function (e) { e ? k.readyWait++ : k.ready(!0) }, k.isArray = Array.isArray, k.parseJSON = JSON.parse, k.nodeName = A, k.isFunction = m, k.isWindow = x, k.camelCase = V, k.type = w, k.now = Date.now, k.isNumeric = function (e) { var t = k.type(e); return ("number" === t || "string" === t) && !isNaN(e - parseFloat(e)) }, "function" == typeof define && define.amd && define("jquery", [], function () { return k }); var Qt = C.jQuery, Jt = C.$; return k.noConflict = function (e) { return C.$ === k && (C.$ = Jt), e && C.jQuery === k && (C.jQuery = Qt), k }, e || (C.jQuery = C.$ = k), k });;

    ; (function (factory) {
        'use strict';
        if (typeof define === 'function' && define.amd) {
            define(['jquery'], factory);
        } else if (typeof exports !== 'undefined') {
            module.exports = factory(require('jquery'));
        } else {
            factory(jQuery);
        }

    }(function ($) {
            'use strict';
         
        var Slick = window.Slick || {};

        Slick = (function () {

            var instanceUid = 0;

            function Slick(element, settings) {

                var _ = this, dataSettings;

                _.defaults = {
                    accessibility: true,
                    adaptiveHeight: false,
                    appendArrows: $(element),
                    appendDots: $(element),
                    arrows: true,
                    asNavFor: null,
                    prevArrow: '<button onClick="partialPagesHandler.recommendedArrowClick()" tabindex="0" class="slick-prev" aria-label="" type="button"><span class="prevAr"></span></button>',
                    nextArrow: '<button onClick="partialPagesHandler.recommendedArrowClick()" tabindex="0" class="slick-next" aria-label="" type="button"><span class="pextAr"></span></button>',
                    autoplay: false,
                    autoplaySpeed: 3000,
                    centerMode: false,
                    centerPadding: '50px',
                    cssEase: 'ease',
                    customPaging: function (slider, i) {
                        return $('<button type="button" />').text(i + 1);
                    },
                    dots: false,
                    dotsClass: 'slick-dots',
                    draggable: true,
                    easing: 'linear',
                    edgeFriction: 0.35,
                    fade: false,
                    focusOnSelect: false,
                    focusOnChange: false,
                    infinite: true,
                    initialSlide: 0,
                    lazyLoad: 'ondemand',
                    mobileFirst: false,
                    pauseOnHover: true,
                    pauseOnFocus: true,
                    pauseOnDotsHover: false,
                    respondTo: 'window',
                    responsive: null,
                    rows: 1,
                    rtl: false,
                    slide: '',
                    slidesPerRow: 1,
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    speed: 500,
                    swipe: true,
                    swipeToSlide: false,
                    touchMove: true,
                    touchThreshold: 5,
                    useCSS: true,
                    useTransform: true,
                    variableWidth: false,
                    vertical: false,
                    verticalSwiping: false,
                    waitForAnimate: true,
                    zIndex: 1000
                };

                _.initials = {
                    animating: false,
                    dragging: false,
                    autoPlayTimer: null,
                    currentDirection: 0,
                    currentLeft: null,
                    currentSlide: 0,
                    direction: 1,
                    $dots: null,
                    listWidth: null,
                    listHeight: null,
                    loadIndex: 0,
                    $nextArrow: null,
                    $prevArrow: null,
                    scrolling: false,
                    slideCount: null,
                    slideWidth: null,
                    $slideTrack: null,
                    $slides: null,
                    sliding: false,
                    slideOffset: 0,
                    swipeLeft: null,
                    swiping: false,
                    $list: null,
                    touchObject: {},
                    transformsEnabled: false,
                    unslicked: false
                };

                $.extend(_, _.initials);

                _.activeBreakpoint = null;
                _.animType = null;
                _.animProp = null;
                _.breakpoints = [];
                _.breakpointSettings = [];
                _.cssTransitions = false;
                _.focussed = false;
                _.interrupted = false;
                _.hidden = 'hidden';
                _.paused = true;
                _.positionProp = null;
                _.respondTo = null;
                _.rowCount = 1;
                _.shouldClick = true;
                _.$slider = $(element);
                _.$slidesCache = null;
                _.transformType = null;
                _.transitionType = null;
                _.visibilityChange = 'visibilitychange';
                _.windowWidth = 0;
                _.windowTimer = null;

                dataSettings = $(element).data('slick') || {};

                _.options = $.extend({}, _.defaults, settings, dataSettings);

                _.currentSlide = _.options.initialSlide;

                _.originalSettings = _.options;

                if (typeof document.mozHidden !== 'undefined') {
                    _.hidden = 'mozHidden';
                    _.visibilityChange = 'mozvisibilitychange';
                } else if (typeof document.webkitHidden !== 'undefined') {
                    _.hidden = 'webkitHidden';
                    _.visibilityChange = 'webkitvisibilitychange';
                }

                _.autoPlay = $.proxy(_.autoPlay, _);
                _.autoPlayClear = $.proxy(_.autoPlayClear, _);
                _.autoPlayIterator = $.proxy(_.autoPlayIterator, _);
                _.changeSlide = $.proxy(_.changeSlide, _);
                _.clickHandler = $.proxy(_.clickHandler, _);
                _.selectHandler = $.proxy(_.selectHandler, _);
                _.setPosition = $.proxy(_.setPosition, _);
                _.swipeHandler = $.proxy(_.swipeHandler, _);
                _.dragHandler = $.proxy(_.dragHandler, _);
                _.keyHandler = $.proxy(_.keyHandler, _);

                _.instanceUid = instanceUid++;

                // A simple way to check for HTML strings
                // Strict HTML recognition (must start with <)
                // Extracted from jQuery v1.11 source
                _.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/;


                _.registerBreakpoints();
                _.init(true);

            }

            return Slick;

        }());

        Slick.prototype.activateADA = function () {
            var _ = this;

            _.$slideTrack.find('.slick-active').attr({
                'aria-hidden': 'false'
            }).find('a, input, button, select').attr({
                'tabindex': '0'
            });

        };

        Slick.prototype.addSlide = Slick.prototype.slickAdd = function (markup, index, addBefore) {

            var _ = this;

            if (typeof (index) === 'boolean') {
                addBefore = index;
                index = null;
            } else if (index < 0 || (index >= _.slideCount)) {
                return false;
            }

            _.unload();

            if (typeof (index) === 'number') {
                if (index === 0 && _.$slides.length === 0) {
                    $(markup).appendTo(_.$slideTrack);
                } else if (addBefore) {
                    $(markup).insertBefore(_.$slides.eq(index));
                } else {
                    $(markup).insertAfter(_.$slides.eq(index));
                }
            } else {
                if (addBefore === true) {
                    $(markup).prependTo(_.$slideTrack);
                } else {
                    $(markup).appendTo(_.$slideTrack);
                }
            }

            _.$slides = _.$slideTrack.children(this.options.slide);

            _.$slideTrack.children(this.options.slide).detach();

            _.$slideTrack.append(_.$slides);

            _.$slides.each(function (index, element) {
                $(element).attr('data-slick-index', index);
            });

            _.$slidesCache = _.$slides;

            _.reinit();

        };

        Slick.prototype.animateHeight = function () {
            var _ = this;
            if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
                var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
                _.$list.animate({
                    height: targetHeight
                }, _.options.speed);
            }
        };

        Slick.prototype.animateSlide = function (targetLeft, callback) {

            var animProps = {},
                _ = this;

            _.animateHeight();

            if (_.options.rtl === true && _.options.vertical === false) {
                targetLeft = -targetLeft;
            }
            if (_.transformsEnabled === false) {
                if (_.options.vertical === false) {
                    _.$slideTrack.animate({
                        left: targetLeft
                    }, _.options.speed, _.options.easing, callback);
                } else {
                    _.$slideTrack.animate({
                        top: targetLeft
                    }, _.options.speed, _.options.easing, callback);
                }

            } else {

                if (_.cssTransitions === false) {
                    if (_.options.rtl === true) {
                        _.currentLeft = -(_.currentLeft);
                    }
                    $({
                        animStart: _.currentLeft
                    }).animate({
                        animStart: targetLeft
                    }, {
                            duration: _.options.speed,
                            easing: _.options.easing,
                            step: function (now) {
                                now = Math.ceil(now);
                                if (_.options.vertical === false) {
                                    animProps[_.animType] = 'translate(' +
                                        now + 'px, 0px)';
                                    _.$slideTrack.css(animProps);
                                } else {
                                    animProps[_.animType] = 'translate(0px,' +
                                        now + 'px)';
                                    _.$slideTrack.css(animProps);
                                }
                            },
                            complete: function () {
                                if (callback) {
                                    callback.call();
                                }
                            }
                        });

                } else {

                    _.applyTransition();
                    targetLeft = Math.ceil(targetLeft);

                    if (_.options.vertical === false) {
                        animProps[_.animType] = 'translate3d(' + targetLeft + 'px, 0px, 0px)';
                    } else {
                        animProps[_.animType] = 'translate3d(0px,' + targetLeft + 'px, 0px)';
                    }
                    _.$slideTrack.css(animProps);

                    if (callback) {
                        setTimeout(function () {

                            _.disableTransition();

                            callback.call();
                        }, _.options.speed);
                    }

                }

            }

        };

        Slick.prototype.getNavTarget = function () {

            var _ = this,
                asNavFor = _.options.asNavFor;

            if (asNavFor && asNavFor !== null) {
                asNavFor = $(asNavFor).not(_.$slider);
            }

            return asNavFor;

        };

        Slick.prototype.asNavFor = function (index) {

            var _ = this,
                asNavFor = _.getNavTarget();

            if (asNavFor !== null && typeof asNavFor === 'object') {
                asNavFor.each(function () {
                    var target = $(this).slick('getSlick');
                    if (!target.unslicked) {
                        target.slideHandler(index, true);
                    }
                });
            }

        };

        Slick.prototype.applyTransition = function (slide) {

            var _ = this,
                transition = {};

            if (_.options.fade === false) {
                transition[_.transitionType] = _.transformType + ' ' + _.options.speed + 'ms ' + _.options.cssEase;
            } else {
                transition[_.transitionType] = 'opacity ' + _.options.speed + 'ms ' + _.options.cssEase;
            }

            if (_.options.fade === false) {
                _.$slideTrack.css(transition);
            } else {
                _.$slides.eq(slide).css(transition);
            }

        };

        Slick.prototype.autoPlay = function () {

            var _ = this;

            _.autoPlayClear();

            if (_.slideCount > _.options.slidesToShow) {
                _.autoPlayTimer = setInterval(_.autoPlayIterator, _.options.autoplaySpeed);
            }

        };

        Slick.prototype.autoPlayClear = function () {

            var _ = this;

            if (_.autoPlayTimer) {
                clearInterval(_.autoPlayTimer);
            }

        };

        Slick.prototype.autoPlayIterator = function () {

            var _ = this,
                slideTo = _.currentSlide + _.options.slidesToScroll;

            if (!_.paused && !_.interrupted && !_.focussed) {

                if (_.options.infinite === false) {

                    if (_.direction === 1 && (_.currentSlide + 1) === (_.slideCount - 1)) {
                        _.direction = 0;
                    }

                    else if (_.direction === 0) {

                        slideTo = _.currentSlide - _.options.slidesToScroll;

                        if (_.currentSlide - 1 === 0) {
                            _.direction = 1;
                        }

                    }

                }

                _.slideHandler(slideTo);

            }

        };

        Slick.prototype.buildArrows = function () {

            var _ = this;

            if (_.options.arrows === true) {

                _.$prevArrow = $(_.options.prevArrow).addClass('slick-arrow');
                _.$nextArrow = $(_.options.nextArrow).addClass('slick-arrow');

                if (_.slideCount > _.options.slidesToShow) {

                    _.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');
                    _.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');

                    if (_.htmlExpr.test(_.options.prevArrow)) {
                        _.$prevArrow.prependTo(_.options.appendArrows);
                    }

                    if (_.htmlExpr.test(_.options.nextArrow)) {
                        _.$nextArrow.appendTo(_.options.appendArrows);
                    }

                    if (_.options.infinite !== true) {
                        _.$prevArrow
                            .addClass('slick-disabled')
                            .attr('aria-disabled', 'true');
                    }

                } else {

                    _.$prevArrow.add(_.$nextArrow)

                        .addClass('slick-hidden')
                        .attr({
                            'aria-disabled': 'true',
                            'tabindex': '-1'
                        });

                }

            }

        };

        Slick.prototype.buildDots = function () {

            var _ = this,
                i, dot;

            if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

                _.$slider.addClass('slick-dotted');

                dot = $('<ul />').addClass(_.options.dotsClass);

                for (i = 0; i <= _.getDotCount(); i += 1) {
                    dot.append($('<li />').append(_.options.customPaging.call(this, _, i)));
                }

                _.$dots = dot.appendTo(_.options.appendDots);

                _.$dots.find('li').first().addClass('slick-active');

            }

        };

        Slick.prototype.buildOut = function () {

            var _ = this;

            _.$slides =
                _.$slider
                    .children(_.options.slide + ':not(.slick-cloned)')
                    .addClass('slick-slide');

            _.slideCount = _.$slides.length;

            _.$slides.each(function (index, element) {
                $(element)
                    .attr('data-slick-index', index)
                    .data('originalStyling', $(element).attr('style') || '');
            });

            _.$slider.addClass('slick-slider');

            _.$slideTrack = (_.slideCount === 0) ?
                $('<div class="slick-track"/>').appendTo(_.$slider) :
                _.$slides.wrapAll('<div class="slick-track"/>').parent();

            _.$list = _.$slideTrack.wrap(
                '<div class="slick-list"/>').parent();
            _.$slideTrack.css('opacity', 0);

            if (_.options.centerMode === true || _.options.swipeToSlide === true) {
                _.options.slidesToScroll = 1;
            }

            $('img[data-lazy]', _.$slider).not('[src]').addClass('slick-loading');

            _.setupInfinite();

            _.buildArrows();

            _.buildDots();

            _.updateDots();


            _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);

            if (_.options.draggable === true) {
                _.$list.addClass('draggable');
            }

        };

        Slick.prototype.buildRows = function () {

            var _ = this, a, b, c, newSlides, numOfSlides, originalSlides, slidesPerSection;

            newSlides = document.createDocumentFragment();
            originalSlides = _.$slider.children();

            if (_.options.rows > 0) {

                slidesPerSection = _.options.slidesPerRow * _.options.rows;
                numOfSlides = Math.ceil(
                    originalSlides.length / slidesPerSection
                );

                for (a = 0; a < numOfSlides; a++) {
                    var slide = document.createElement('div');
                    for (b = 0; b < _.options.rows; b++) {
                        var row = document.createElement('div');
                        for (c = 0; c < _.options.slidesPerRow; c++) {
                            var target = (a * slidesPerSection + ((b * _.options.slidesPerRow) + c));
                            if (originalSlides.get(target)) {
                                row.appendChild(originalSlides.get(target));
                            }
                        }
                        slide.appendChild(row);
                    }
                    newSlides.appendChild(slide);
                }

                _.$slider.empty().append(newSlides);
                _.$slider.children().children().children()
                    .css({
                        'width': (100 / _.options.slidesPerRow) + '%',
                        'display': 'inline-block'
                    });

            }

        };

        Slick.prototype.checkResponsive = function (initial, forceUpdate) {

            var _ = this,
                breakpoint, targetBreakpoint, respondToWidth, triggerBreakpoint = false;
            var sliderWidth = _.$slider.width();
            var windowWidth = window.innerWidth || $(window).width();

            if (_.respondTo === 'window') {
                respondToWidth = windowWidth;
            } else if (_.respondTo === 'slider') {
                respondToWidth = sliderWidth;
            } else if (_.respondTo === 'min') {
                respondToWidth = Math.min(windowWidth, sliderWidth);
            }

            if (_.options.responsive &&
                _.options.responsive.length &&
                _.options.responsive !== null) {

                targetBreakpoint = null;

                for (breakpoint in _.breakpoints) {
                    if (_.breakpoints.hasOwnProperty(breakpoint)) {
                        if (_.originalSettings.mobileFirst === false) {
                            if (respondToWidth < _.breakpoints[breakpoint]) {
                                targetBreakpoint = _.breakpoints[breakpoint];
                            }
                        } else {
                            if (respondToWidth > _.breakpoints[breakpoint]) {
                                targetBreakpoint = _.breakpoints[breakpoint];
                            }
                        }
                    }
                }

                if (targetBreakpoint !== null) {
                    if (_.activeBreakpoint !== null) {
                        if (targetBreakpoint !== _.activeBreakpoint || forceUpdate) {
                            _.activeBreakpoint =
                                targetBreakpoint;
                            if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                                _.unslick(targetBreakpoint);
                            } else {
                                _.options = $.extend({}, _.originalSettings,
                                    _.breakpointSettings[
                                    targetBreakpoint]);
                                if (initial === true) {
                                    _.currentSlide = _.options.initialSlide;
                                }
                                _.refresh(initial);
                            }
                            triggerBreakpoint = targetBreakpoint;
                        }
                    } else {
                        _.activeBreakpoint = targetBreakpoint;
                        if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                            _.unslick(targetBreakpoint);
                        } else {
                            _.options = $.extend({}, _.originalSettings,
                                _.breakpointSettings[
                                targetBreakpoint]);
                            if (initial === true) {
                                _.currentSlide = _.options.initialSlide;
                            }
                            _.refresh(initial);
                        }
                        triggerBreakpoint = targetBreakpoint;
                    }
                } else {
                    if (_.activeBreakpoint !== null) {
                        _.activeBreakpoint = null;
                        _.options = _.originalSettings;
                        if (initial === true) {
                            _.currentSlide = _.options.initialSlide;
                        }
                        _.refresh(initial);
                        triggerBreakpoint = targetBreakpoint;
                    }
                }

                // only trigger breakpoints during an actual break. not on initialize.
                if (!initial && triggerBreakpoint !== false) {
                    _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);
                }
            }

        };

        Slick.prototype.changeSlide = function (event, dontAnimate) {

            var _ = this,
                $target = $(event.currentTarget),
                indexOffset, slideOffset, unevenOffset;

            // If target is a link, prevent default action.
            if ($target.is('a')) {
                event.preventDefault();
            }

            // If target is not the <li> element (ie: a child), find the <li>.
            if (!$target.is('li')) {
                $target = $target.closest('li');
            }

            unevenOffset = (_.slideCount % _.options.slidesToScroll !== 0);
            indexOffset = unevenOffset ? 0 : (_.slideCount - _.currentSlide) % _.options.slidesToScroll;

            switch (event.data.message) {

                case 'previous':
                    slideOffset = indexOffset === 0 ? _.options.slidesToScroll : _.options.slidesToShow - indexOffset;
                    if (_.slideCount > _.options.slidesToShow) {
                        _.slideHandler(_.currentSlide - slideOffset, false, dontAnimate);
                    }
                    break;

                case 'next':
                    slideOffset = indexOffset === 0 ? _.options.slidesToScroll : indexOffset;
                    if (_.slideCount > _.options.slidesToShow) {
                        _.slideHandler(_.currentSlide + slideOffset, false, dontAnimate);
                    }
                    break;

                case 'index':
                    var index = event.data.index === 0 ? 0 :
                        event.data.index || $target.index() * _.options.slidesToScroll;

                    _.slideHandler(_.checkNavigable(index), false, dontAnimate);
                    $target.children().trigger('focus');
                    break;

                default:
                    return;
            }

        };

        Slick.prototype.checkNavigable = function (index) {

            var _ = this,
                navigables, prevNavigable;

            navigables = _.getNavigableIndexes();
            prevNavigable = 0;
            if (index > navigables[navigables.length - 1]) {
                index = navigables[navigables.length - 1];
            } else {
                for (var n in navigables) {
                    if (index < navigables[n]) {
                        index = prevNavigable;
                        break;
                    }
                    prevNavigable = navigables[n];
                }
            }

            return index;
        };

        Slick.prototype.cleanUpEvents = function () {

            var _ = this;

            if (_.options.dots && _.$dots !== null) {

                $('li', _.$dots)
                    .off('click.slick', _.changeSlide)
                    .off('mouseenter.slick', $.proxy(_.interrupt, _, true))
                    .off('mouseleave.slick', $.proxy(_.interrupt, _, false));

                if (_.options.accessibility === true) {
                    _.$dots.off('keydown.slick', _.keyHandler);
                }
            }

            _.$slider.off('focus.slick blur.slick');

            if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
                _.$prevArrow && _.$prevArrow.off('click.slick', _.changeSlide);
                _.$nextArrow && _.$nextArrow.off('click.slick', _.changeSlide);

                if (_.options.accessibility === true) {
                    _.$prevArrow && _.$prevArrow.off('keydown.slick', _.keyHandler);
                    _.$nextArrow && _.$nextArrow.off('keydown.slick', _.keyHandler);
                }
            }

            _.$list.off('touchstart.slick mousedown.slick', _.swipeHandler);
            _.$list.off('touchmove.slick mousemove.slick', _.swipeHandler);
            _.$list.off('touchend.slick mouseup.slick', _.swipeHandler);
            _.$list.off('touchcancel.slick mouseleave.slick', _.swipeHandler);

            _.$list.off('click.slick', _.clickHandler);

            $(document).off(_.visibilityChange, _.visibility);

            _.cleanUpSlideEvents();

            if (_.options.accessibility === true) {
                _.$list.off('keydown.slick', _.keyHandler);
            }

            if (_.options.focusOnSelect === true) {
                $(_.$slideTrack).children().off('click.slick', _.selectHandler);
            }

            $(window).off('orientationchange.slick.slick-' + _.instanceUid, _.orientationChange);

            $(window).off('resize.slick.slick-' + _.instanceUid, _.resize);

            $('[draggable!=true]', _.$slideTrack).off('dragstart', _.preventDefault);

            $(window).off('load.slick.slick-' + _.instanceUid, _.setPosition);

        };

        Slick.prototype.cleanUpSlideEvents = function () {

            var _ = this;

            _.$list.off('mouseenter.slick', $.proxy(_.interrupt, _, true));
            _.$list.off('mouseleave.slick', $.proxy(_.interrupt, _, false));

        };

        Slick.prototype.cleanUpRows = function () {

            var _ = this, originalSlides;

            if (_.options.rows > 0) {
                originalSlides = _.$slides.children().children();
                originalSlides.removeAttr('style');
                _.$slider.empty().append(originalSlides);
            }

        };

        Slick.prototype.clickHandler = function (event) {

            var _ = this;

            if (_.shouldClick === false) {
                event.stopImmediatePropagation();
                event.stopPropagation();
                event.preventDefault();
            }

        };

        Slick.prototype.destroy = function (refresh) {

            var _ = this;

            _.autoPlayClear();

            _.touchObject = {};

            _.cleanUpEvents();

            $('.slick-cloned', _.$slider).detach();

            if (_.$dots) {
                _.$dots.remove();
            }

            if (_.$prevArrow && _.$prevArrow.length) {

                _.$prevArrow
                    .removeClass('slick-disabled slick-arrow slick-hidden')
                    .removeAttr('aria-hidden aria-disabled tabindex')
                    .css('display', '');

                if (_.htmlExpr.test(_.options.prevArrow)) {
                    _.$prevArrow.remove();
                }
            }

            if (_.$nextArrow && _.$nextArrow.length) {

                _.$nextArrow
                    .removeClass('slick-disabled slick-arrow slick-hidden')
                    .removeAttr('aria-hidden aria-disabled tabindex')
                    .css('display', '');

                if (_.htmlExpr.test(_.options.nextArrow)) {
                    _.$nextArrow.remove();
                }
            }


            if (_.$slides) {

                _.$slides
                    .removeClass('slick-slide slick-active slick-center slick-visible slick-current')
                    .removeAttr('aria-hidden')
                    .removeAttr('data-slick-index')
                    .each(function () {
                        $(this).attr('style', $(this).data('originalStyling'));
                    });

                _.$slideTrack.children(this.options.slide).detach();

                _.$slideTrack.detach();

                _.$list.detach();

                _.$slider.append(_.$slides);
            }

            _.cleanUpRows();

            _.$slider.removeClass('slick-slider');
            _.$slider.removeClass('slick-initialized');
            _.$slider.removeClass('slick-dotted');

            _.unslicked = true;

            if (!refresh) {
                _.$slider.trigger('destroy', [_]);
            }

        };

        Slick.prototype.disableTransition = function (slide) {

            var _ = this,
                transition = {};

            transition[_.transitionType] = '';

            if (_.options.fade === false) {
                _.$slideTrack.css(transition);
            } else {
                _.$slides.eq(slide).css(transition);
            }

        };

        Slick.prototype.fadeSlide = function (slideIndex, callback) {

            var _ = this;

            if (_.cssTransitions === false) {

                _.$slides.eq(slideIndex).css({
                    zIndex: _.options.zIndex
                });

                _.$slides.eq(slideIndex).animate({
                    opacity: 1
                }, _.options.speed, _.options.easing, callback);

            } else {

                _.applyTransition(slideIndex);

                _.$slides.eq(slideIndex).css({
                    opacity: 1,
                    zIndex: _.options.zIndex
                });

                if (callback) {
                    setTimeout(function () {

                        _.disableTransition(slideIndex);

                        callback.call();
                    }, _.options.speed);
                }

            }

        };

        Slick.prototype.fadeSlideOut = function (slideIndex) {

            var _ = this;

            if (_.cssTransitions === false) {

                _.$slides.eq(slideIndex).animate({
                    opacity: 0,
                    zIndex: _.options.zIndex - 2
                }, _.options.speed, _.options.easing);

            } else {

                _.applyTransition(slideIndex);

                _.$slides.eq(slideIndex).css({
                    opacity: 0,
                    zIndex: _.options.zIndex - 2
                });

            }

        };

        Slick.prototype.filterSlides = Slick.prototype.slickFilter = function (filter) {

            var _ = this;

            if (filter !== null) {

                _.$slidesCache = _.$slides;

                _.unload();

                _.$slideTrack.children(this.options.slide).detach();

                _.$slidesCache.filter(filter).appendTo(_.$slideTrack);

                _.reinit();

            }

        };

        Slick.prototype.focusHandler = function () {

            var _ = this;

            _.$slider
                .off('focus.slick blur.slick')
                .on('focus.slick blur.slick', '*', function (event) {

                    event.stopImmediatePropagation();
                    var $sf = $(this);

                    setTimeout(function () {

                        if (_.options.pauseOnFocus) {
                            _.focussed = $sf.is(':focus');
                            _.autoPlay();
                        }

                    }, 0);

                });
        };

        Slick.prototype.getCurrent = Slick.prototype.slickCurrentSlide = function () {

            var _ = this;
            return _.currentSlide;

        };

        Slick.prototype.getDotCount = function () {

            var _ = this;

            var breakPoint = 0;
            var counter = 0;
            var pagerQty = 0;

            if (_.options.infinite === true) {
                if (_.slideCount <= _.options.slidesToShow) {
                    ++pagerQty;
                } else {
                    while (breakPoint < _.slideCount) {
                        ++pagerQty;
                        breakPoint = counter + _.options.slidesToScroll;
                        counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
                    }
                }
            } else if (_.options.centerMode === true) {
                pagerQty = _.slideCount;
            } else if (!_.options.asNavFor) {
                pagerQty = 1 + Math.ceil((_.slideCount - _.options.slidesToShow) / _.options.slidesToScroll);
            } else {
                while (breakPoint < _.slideCount) {
                    ++pagerQty;
                    breakPoint = counter + _.options.slidesToScroll;
                    counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
                }
            }

            return pagerQty - 1;

        };

        Slick.prototype.getLeft = function (slideIndex) {

            var _ = this,
                targetLeft,
                verticalHeight,
                verticalOffset = 0,
                targetSlide,
                coef;

            _.slideOffset = 0;
            verticalHeight = _.$slides.first().outerHeight(true);

            if (_.options.infinite === true) {
                if (_.slideCount > _.options.slidesToShow) {
                    _.slideOffset = (_.slideWidth * _.options.slidesToShow) * -1;
                    coef = -1

                    if (_.options.vertical === true && _.options.centerMode === true) {
                        if (_.options.slidesToShow === 2) {
                            coef = -1.5;
                        } else if (_.options.slidesToShow === 1) {
                            coef = -2
                        }
                    }
                    verticalOffset = (verticalHeight * _.options.slidesToShow) * coef;
                }
                if (_.slideCount % _.options.slidesToScroll !== 0) {
                    if (slideIndex + _.options.slidesToScroll > _.slideCount && _.slideCount > _.options.slidesToShow) {
                        if (slideIndex > _.slideCount) {
                            _.slideOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * _.slideWidth) * -1;
                            verticalOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * verticalHeight) * -1;
                        } else {
                            _.slideOffset = ((_.slideCount % _.options.slidesToScroll) * _.slideWidth) * -1;
                            verticalOffset = ((_.slideCount % _.options.slidesToScroll) * verticalHeight) * -1;
                        }
                    }
                }
            } else {
                if (slideIndex + _.options.slidesToShow > _.slideCount) {
                    _.slideOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * _.slideWidth;
                    verticalOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * verticalHeight;
                }
            }

            if (_.slideCount <= _.options.slidesToShow) {
                _.slideOffset = 0;
                verticalOffset = 0;
            }

            if (_.options.centerMode === true && _.slideCount <= _.options.slidesToShow) {
                _.slideOffset = ((_.slideWidth * Math.floor(_.options.slidesToShow)) / 2) - ((_.slideWidth * _.slideCount) / 2);
            } else if (_.options.centerMode === true && _.options.infinite === true) {
                _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2) - _.slideWidth;
            } else if (_.options.centerMode === true) {
                _.slideOffset = 0;
                _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2);
            }

            if (_.options.vertical === false) {
                targetLeft = ((slideIndex * _.slideWidth) * -1) + _.slideOffset;
            } else {
                targetLeft = ((slideIndex * verticalHeight) * -1) + verticalOffset;
            }

            if (_.options.variableWidth === true) {

                if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
                } else {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow);
                }

                if (_.options.rtl === true) {
                    if (targetSlide[0]) {
                        targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                    } else {
                        targetLeft = 0;
                    }
                } else {
                    targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
                }

                if (_.options.centerMode === true) {
                    if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                        targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
                    } else {
                        targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow + 1);
                    }

                    if (_.options.rtl === true) {
                        if (targetSlide[0]) {
                            targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                        } else {
                            targetLeft = 0;
                        }
                    } else {
                        targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
                    }

                    targetLeft += (_.$list.width() - targetSlide.outerWidth()) / 2;
                }
            }

            return targetLeft;

        };

        Slick.prototype.getOption = Slick.prototype.slickGetOption = function (option) {

            var _ = this;

            return _.options[option];

        };

        Slick.prototype.getNavigableIndexes = function () {

            var _ = this,
                breakPoint = 0,
                counter = 0,
                indexes = [],
                max;

            if (_.options.infinite === false) {
                max = _.slideCount;
            } else {
                breakPoint = _.options.slidesToScroll * -1;
                counter = _.options.slidesToScroll * -1;
                max = _.slideCount * 2;
            }

            while (breakPoint < max) {
                indexes.push(breakPoint);
                breakPoint = counter + _.options.slidesToScroll;
                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
            }

            return indexes;

        };

        Slick.prototype.getSlick = function () {

            return this;

        };

        Slick.prototype.getSlideCount = function () {

            var _ = this,
                slidesTraversed, swipedSlide, centerOffset;

            centerOffset = _.options.centerMode === true ? _.slideWidth * Math.floor(_.options.slidesToShow / 2) : 0;

            if (_.options.swipeToSlide === true) {
                _.$slideTrack.find('.slick-slide').each(function (index, slide) {
                    if (slide.offsetLeft - centerOffset + ($(slide).outerWidth() / 2) > (_.swipeLeft * -1)) {
                        swipedSlide = slide;
                        return false;
                    }
                });

                slidesTraversed = Math.abs($(swipedSlide).attr('data-slick-index') - _.currentSlide) || 1;

                return slidesTraversed;

            } else {
                return _.options.slidesToScroll;
            }

        };

        Slick.prototype.goTo = Slick.prototype.slickGoTo = function (slide, dontAnimate) {

            var _ = this;

            _.changeSlide({
                data: {
                    message: 'index',
                    index: parseInt(slide)
                }
            }, dontAnimate);

        };

        Slick.prototype.init = function (creation) {

            var _ = this;

            if (!$(_.$slider).hasClass('slick-initialized')) {

                $(_.$slider).addClass('slick-initialized');

                _.buildRows();
                _.buildOut();
                _.setProps();
                _.startLoad();
                _.loadSlider();
                _.initializeEvents();
                _.updateArrows();
                _.updateDots();
                _.checkResponsive(true);
                _.focusHandler();

            }

            if (creation) {
                _.$slider.trigger('init', [_]);
            }

            if (_.options.accessibility === true) {
                _.initADA();
            }

            if (_.options.autoplay) {

                _.paused = false;
                _.autoPlay();

            }

        };

        Slick.prototype.initADA = function () {
            var _ = this,
                numDotGroups = Math.ceil(_.slideCount / _.options.slidesToShow),
                tabControlIndexes = _.getNavigableIndexes().filter(function (val) {
                    return (val >= 0) && (val < _.slideCount);
                });

            _.$slides.add(_.$slideTrack.find('.slick-cloned')).attr({
                'aria-hidden': 'true',
                'tabindex': '-1'
            }).find('a, input, button, select').attr({
                'tabindex': '-1'
            });

            if (_.$dots !== null) {
                _.$slides.not(_.$slideTrack.find('.slick-cloned')).each(function (i) {
                    var slideControlIndex = tabControlIndexes.indexOf(i);

                    $(this).attr({
                        'role': 'tabpanel',
                        'id': 'slick-slide' + _.instanceUid + i,
                        'tabindex': -1
                    });

                    if (slideControlIndex !== -1) {
                        var ariaButtonControl = 'slick-slide-control' + _.instanceUid + slideControlIndex
                        if ($('#' + ariaButtonControl).length) {
                            $(this).attr({
                                'aria-describedby': ariaButtonControl
                            });
                        }
                    }
                });

                _.$dots.attr('role', 'tablist').find('li').each(function (i) {
                    var mappedSlideIndex = tabControlIndexes[i];

                    $(this).attr({
                        'role': 'presentation'
                    });

                    $(this).find('button').first().attr({
                        'role': 'tab',
                        'id': 'slick-slide-control' + _.instanceUid + i,
                        'aria-controls': 'slick-slide' + _.instanceUid + mappedSlideIndex,
                        'aria-label': (i + 1) + ' of ' + numDotGroups,
                        'aria-selected': null,
                        'tabindex': '-1'
                    });

                }).eq(_.currentSlide).find('button').attr({
                    'aria-selected': 'true',
                    'tabindex': '0'
                }).end();
            }

            for (var i = _.currentSlide, max = i + _.options.slidesToShow; i < max; i++) {
                if (_.options.focusOnChange) {
                    _.$slides.eq(i).attr({ 'tabindex': '0' });
                } else {
                    _.$slides.eq(i).removeAttr('tabindex');
                }
            }

            _.activateADA();

        };

        Slick.prototype.initArrowEvents = function () {

            var _ = this;

            if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
                _.$prevArrow
                    .off('click.slick')
                    .on('click.slick', {
                        message: 'previous'
                    }, _.changeSlide);
                _.$nextArrow
                    .off('click.slick')
                    .on('click.slick', {
                        message: 'next'
                    }, _.changeSlide);

                if (_.options.accessibility === true) {
                    _.$prevArrow.on('keydown.slick', _.keyHandler);
                    _.$nextArrow.on('keydown.slick', _.keyHandler);
                }
            }

        };

        Slick.prototype.initDotEvents = function () {

            var _ = this;

            if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {
                $('li', _.$dots).on('click.slick', {
                    message: 'index'
                }, _.changeSlide);

                if (_.options.accessibility === true) {
                    _.$dots.on('keydown.slick', _.keyHandler);
                }
            }

            if (_.options.dots === true && _.options.pauseOnDotsHover === true && _.slideCount > _.options.slidesToShow) {

                $('li', _.$dots)
                    .on('mouseenter.slick', $.proxy(_.interrupt, _, true))
                    .on('mouseleave.slick', $.proxy(_.interrupt, _, false));

            }

        };

        Slick.prototype.initSlideEvents = function () {

            var _ = this;

            if (_.options.pauseOnHover) {

                _.$list.on('mouseenter.slick', $.proxy(_.interrupt, _, true));
                _.$list.on('mouseleave.slick', $.proxy(_.interrupt, _, false));

            }

        };

        Slick.prototype.initializeEvents = function () {

            var _ = this;

            _.initArrowEvents();

            _.initDotEvents();
            _.initSlideEvents();

            _.$list.on('touchstart.slick mousedown.slick', {
                action: 'start'
            }, _.swipeHandler);
            _.$list.on('touchmove.slick mousemove.slick', {
                action: 'move'
            }, _.swipeHandler);
            _.$list.on('touchend.slick mouseup.slick', {
                action: 'end'
            }, _.swipeHandler);
            _.$list.on('touchcancel.slick mouseleave.slick', {
                action: 'end'
            }, _.swipeHandler);

            _.$list.on('click.slick', _.clickHandler);

            $(document).on(_.visibilityChange, $.proxy(_.visibility, _));

            if (_.options.accessibility === true) {
                _.$list.on('keydown.slick', _.keyHandler);
            }

            if (_.options.focusOnSelect === true) {
                $(_.$slideTrack).children().on('click.slick', _.selectHandler);
            }

            $(window).on('orientationchange.slick.slick-' + _.instanceUid, $.proxy(_.orientationChange, _));

            $(window).on('resize.slick.slick-' + _.instanceUid, $.proxy(_.resize, _));

            $('[draggable!=true]', _.$slideTrack).on('dragstart', _.preventDefault);

            $(window).on('load.slick.slick-' + _.instanceUid, _.setPosition);
            $(_.setPosition);

        };

        Slick.prototype.initUI = function () {

            var _ = this;

            if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

                _.$prevArrow.show();
                _.$nextArrow.show();

            }

            if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

                _.$dots.show();

            }

        };

        Slick.prototype.keyHandler = function (event) {

            var _ = this;
            //Dont slide if the cursor is inside the form fields and arrow keys are pressed
            if (!event.target.tagName.match('TEXTAREA|INPUT|SELECT')) {
                if (event.keyCode === 37 && _.options.accessibility === true) {
                    _.changeSlide({
                        data: {
                            message: _.options.rtl === true ? 'next' : 'previous'
                        }
                    });
                } else if (event.keyCode === 39 && _.options.accessibility === true) {
                    _.changeSlide({
                        data: {
                            message: _.options.rtl === true ? 'previous' : 'next'
                        }
                    });
                }
            }

        };

        Slick.prototype.lazyLoad = function () {

            var _ = this,
                loadRange, cloneRange, rangeStart, rangeEnd;

            function loadImages(imagesScope) {

                $('img[data-lazy]', imagesScope).each(function () {

                    var image = $(this),
                        imageSource = $(this).attr('data-lazy'),
                        imageSrcSet = $(this).attr('data-srcset'),
                        imageSizes = $(this).attr('data-sizes') || _.$slider.attr('data-sizes'),
                        imageToLoad = document.createElement('img');

                    imageToLoad.onload = function () {

                        image
                            .animate({ opacity: 0 }, 100, function () {

                                if (imageSrcSet) {
                                    image
                                        .attr('srcset', imageSrcSet);

                                    if (imageSizes) {
                                        image
                                            .attr('sizes', imageSizes);
                                    }
                                }

                                image
                                    .attr('src', imageSource)
                                    .animate({ opacity: 1 }, 200, function () {
                                        image
                                            .removeAttr('data-lazy data-srcset data-sizes')
                                            .removeClass('slick-loading');
                                    });
                                _.$slider.trigger('lazyLoaded', [_, image, imageSource]);
                            });

                    };

                    imageToLoad.onerror = function () {

                        image
                            .removeAttr('data-lazy')
                            .removeClass('slick-loading')
                            .addClass('slick-lazyload-error');

                        _.$slider.trigger('lazyLoadError', [_, image, imageSource]);

                    };

                    imageToLoad.src = imageSource;

                });

            }

            if (_.options.centerMode === true) {
                if (_.options.infinite === true) {
                    rangeStart = _.currentSlide + (_.options.slidesToShow / 2 + 1);
                    rangeEnd = rangeStart + _.options.slidesToShow + 2;
                } else {
                    rangeStart = Math.max(0, _.currentSlide - (_.options.slidesToShow / 2 + 1));
                    rangeEnd = 2 + (_.options.slidesToShow / 2 + 1) + _.currentSlide;
                }
            } else {
                rangeStart = _.options.infinite ? _.options.slidesToShow + _.currentSlide : _.currentSlide;
                rangeEnd = Math.ceil(rangeStart + _.options.slidesToShow);
                if (_.options.fade === true) {
                    if (rangeStart > 0) rangeStart--;
                    if (rangeEnd <= _.slideCount) rangeEnd++;
                }
            }

            loadRange = _.$slider.find('.slick-slide').slice(rangeStart, rangeEnd);

            if (_.options.lazyLoad === 'anticipated') {
                var prevSlide = rangeStart - 1,
                    nextSlide = rangeEnd,
                    $slides = _.$slider.find('.slick-slide');

                for (var i = 0; i < _.options.slidesToScroll; i++) {
                    if (prevSlide < 0) prevSlide = _.slideCount - 1;
                    loadRange = loadRange.add($slides.eq(prevSlide));
                    loadRange = loadRange.add($slides.eq(nextSlide));
                    prevSlide--;
                    nextSlide++;
                }
            }

            loadImages(loadRange);

            if (_.slideCount <= _.options.slidesToShow) {
                cloneRange = _.$slider.find('.slick-slide');
                loadImages(cloneRange);
            } else
                if (_.currentSlide >= _.slideCount - _.options.slidesToShow) {
                    cloneRange = _.$slider.find('.slick-cloned').slice(0, _.options.slidesToShow);
                    loadImages(cloneRange);
                } else if (_.currentSlide === 0) {
                    cloneRange = _.$slider.find('.slick-cloned').slice(_.options.slidesToShow * -1);
                    loadImages(cloneRange);
                }

        };

        Slick.prototype.loadSlider = function () {

            var _ = this;

            _.setPosition();

            _.$slideTrack.css({
                opacity: 1
            });

            _.$slider.removeClass('slick-loading');

            _.initUI();

            if (_.options.lazyLoad === 'progressive') {
                _.progressiveLazyLoad();
            }

        };

        Slick.prototype.next = Slick.prototype.slickNext = function () {

            var _ = this;

            _.changeSlide({
                data: {
                    message: 'next'
                }
            });

        };

        Slick.prototype.orientationChange = function () {

            var _ = this;

            _.checkResponsive();
            _.setPosition();

        };

        Slick.prototype.pause = Slick.prototype.slickPause = function () {

            var _ = this;

            _.autoPlayClear();
            _.paused = true;

        };

        Slick.prototype.play = Slick.prototype.slickPlay = function () {

            var _ = this;

            _.autoPlay();
            _.options.autoplay = true;
            _.paused = false;
            _.focussed = false;
            _.interrupted = false;

        };

        Slick.prototype.postSlide = function (index) {

            var _ = this;

            if (!_.unslicked) {

                _.$slider.trigger('afterChange', [_, index]);

                _.animating = false;

                if (_.slideCount > _.options.slidesToShow) {
                    _.setPosition();
                }

                _.swipeLeft = null;

                if (_.options.autoplay) {
                    _.autoPlay();
                }

                if (_.options.accessibility === true) {
                    _.initADA();

                    if (_.options.focusOnChange) {
                        var $currentSlide = $(_.$slides.get(_.currentSlide));
                        $currentSlide.attr('tabindex', 0).focus();
                    }
                }

            }

        };

        Slick.prototype.prev = Slick.prototype.slickPrev = function () {

            var _ = this;

            _.changeSlide({
                data: {
                    message: 'previous'
                }
            });

        };

        Slick.prototype.preventDefault = function (event) {

            event.preventDefault();

        };

        Slick.prototype.progressiveLazyLoad = function (tryCount) {

            tryCount = tryCount || 1;

            var _ = this,
                $imgsToLoad = $('img[data-lazy]', _.$slider),
                image,
                imageSource,
                imageSrcSet,
                imageSizes,
                imageToLoad;

            if ($imgsToLoad.length) {

                image = $imgsToLoad.first();
                imageSource = image.attr('data-lazy');
                imageSrcSet = image.attr('data-srcset');
                imageSizes = image.attr('data-sizes') || _.$slider.attr('data-sizes');
                imageToLoad = document.createElement('img');

                imageToLoad.onload = function () {

                    if (imageSrcSet) {
                        image
                            .attr('srcset', imageSrcSet);

                        if (imageSizes) {
                            image
                                .attr('sizes', imageSizes);
                        }
                    }

                    image
                        .attr('src', imageSource)
                        .removeAttr('data-lazy data-srcset data-sizes')
                        .removeClass('slick-loading');

                    if (_.options.adaptiveHeight === true) {
                        _.setPosition();
                    }

                    _.$slider.trigger('lazyLoaded', [_, image, imageSource]);
                    _.progressiveLazyLoad();

                };

                imageToLoad.onerror = function () {

                    if (tryCount < 3) {

                        /**
                         * try to load the image 3 times,
                         * leave a slight delay so we don't get
                         * servers blocking the request.
                         */
                        setTimeout(function () {
                            _.progressiveLazyLoad(tryCount + 1);
                        }, 500);

                    } else {

                        image
                            .removeAttr('data-lazy')
                            .removeClass('slick-loading')
                            .addClass('slick-lazyload-error');

                        _.$slider.trigger('lazyLoadError', [_, image, imageSource]);

                        _.progressiveLazyLoad();

                    }

                };

                imageToLoad.src = imageSource;

            } else {

                _.$slider.trigger('allImagesLoaded', [_]);

            }

        };

        Slick.prototype.refresh = function (initializing) {

            var _ = this, currentSlide, lastVisibleIndex;

            lastVisibleIndex = _.slideCount - _.options.slidesToShow;

            // in non-infinite sliders, we don't want to go past the
            // last visible index.
            if (!_.options.infinite && (_.currentSlide > lastVisibleIndex)) {
                _.currentSlide = lastVisibleIndex;
            }

            // if less slides than to show, go to start.
            if (_.slideCount <= _.options.slidesToShow) {
                _.currentSlide = 0;

            }

            currentSlide = _.currentSlide;

            _.destroy(true);

            $.extend(_, _.initials, { currentSlide: currentSlide });

            _.init();

            if (!initializing) {

                _.changeSlide({
                    data: {
                        message: 'index',
                        index: currentSlide
                    }
                }, false);

            }

        };

        Slick.prototype.registerBreakpoints = function () {

            var _ = this, breakpoint, currentBreakpoint, l,
                responsiveSettings = _.options.responsive || null;

            if ($.type(responsiveSettings) === 'array' && responsiveSettings.length) {

                _.respondTo = _.options.respondTo || 'window';

                for (breakpoint in responsiveSettings) {

                    l = _.breakpoints.length - 1;

                    if (responsiveSettings.hasOwnProperty(breakpoint)) {
                        currentBreakpoint = responsiveSettings[breakpoint].breakpoint;

                        // loop through the breakpoints and cut out any existing
                        // ones with the same breakpoint number, we don't want dupes.
                        while (l >= 0) {
                            if (_.breakpoints[l] && _.breakpoints[l] === currentBreakpoint) {
                                _.breakpoints.splice(l, 1);
                            }
                            l--;
                        }

                        _.breakpoints.push(currentBreakpoint);
                        _.breakpointSettings[currentBreakpoint] = responsiveSettings[breakpoint].settings;

                    }

                }

                _.breakpoints.sort(function (a, b) {
                    return (_.options.mobileFirst) ? a - b : b - a;
                });

            }

        };

        Slick.prototype.reinit = function () {

            var _ = this;

            _.$slides =
                _.$slideTrack
                    .children(_.options.slide)
                    .addClass('slick-slide');

            _.slideCount = _.$slides.length;

            if (_.currentSlide >= _.slideCount && _.currentSlide !== 0) {
                _.currentSlide = _.currentSlide - _.options.slidesToScroll;
            }

            if (_.slideCount <= _.options.slidesToShow) {
                _.currentSlide = 0;
            }

            _.registerBreakpoints();

            _.setProps();
            _.setupInfinite();
            _.buildArrows();
            _.updateArrows();
            _.initArrowEvents();
            _.buildDots();
            _.updateDots();
            _.initDotEvents();
            _.cleanUpSlideEvents();
            _.initSlideEvents();

            _.checkResponsive(false, true);

            if (_.options.focusOnSelect === true) {
                $(_.$slideTrack).children().on('click.slick', _.selectHandler);
            }

            _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);

            _.setPosition();
            _.focusHandler();

            _.paused = !_.options.autoplay;
            _.autoPlay();

            _.$slider.trigger('reInit', [_]);

        };

        Slick.prototype.resize = function () {

            var _ = this;

            if ($(window).width() !== _.windowWidth) {
                clearTimeout(_.windowDelay);
                _.windowDelay = window.setTimeout(function () {
                    _.windowWidth = $(window).width();
                    _.checkResponsive();
                    if (!_.unslicked) { _.setPosition(); }
                }, 50);
            }
        };

        Slick.prototype.removeSlide = Slick.prototype.slickRemove = function (index, removeBefore, removeAll) {

            var _ = this;

            if (typeof (index) === 'boolean') {
                removeBefore = index;
                index = removeBefore === true ? 0 : _.slideCount - 1;
            } else {
                index = removeBefore === true ? --index : index;
            }

            if (_.slideCount < 1 || index < 0 || index > _.slideCount - 1) {
                return false;
            }

            _.unload();

            if (removeAll === true) {
                _.$slideTrack.children().remove();
            } else {
                _.$slideTrack.children(this.options.slide).eq(index).remove();
            }

            _.$slides = _.$slideTrack.children(this.options.slide);

            _.$slideTrack.children(this.options.slide).detach();

            _.$slideTrack.append(_.$slides);

            _.$slidesCache = _.$slides;

            _.reinit();

        };

        Slick.prototype.setCSS = function (position) {

            var _ = this,
                positionProps = {},
                x, y;

            if (_.options.rtl === true) {
                position = -position;
            }
            x = _.positionProp == 'left' ? Math.ceil(position) + 'px' : '0px';
            y = _.positionProp == 'top' ? Math.ceil(position) + 'px' : '0px';

            positionProps[_.positionProp] = position;

            if (_.transformsEnabled === false) {
                _.$slideTrack.css(positionProps);
            } else {
                positionProps = {};
                if (_.cssTransitions === false) {
                    positionProps[_.animType] = 'translate(' + x + ', ' + y + ')';
                    _.$slideTrack.css(positionProps);
                } else {
                    positionProps[_.animType] = 'translate3d(' + x + ', ' + y + ', 0px)';
                    _.$slideTrack.css(positionProps);
                }
            }

        };

        Slick.prototype.setDimensions = function () {

            var _ = this;

            if (_.options.vertical === false) {
                if (_.options.centerMode === true) {
                    _.$list.css({
                        padding: ('0px ' + _.options.centerPadding)
                    });
                }
            } else {
                _.$list.height(_.$slides.first().outerHeight(true) * _.options.slidesToShow);
                if (_.options.centerMode === true) {
                    _.$list.css({
                        padding: (_.options.centerPadding + ' 0px')
                    });
                }
            }

            _.listWidth = _.$list.width();
            _.listHeight = _.$list.height();


            if (_.options.vertical === false && _.options.variableWidth === false) {
                _.slideWidth = Math.ceil(_.listWidth / _.options.slidesToShow);
                _.$slideTrack.width(Math.ceil((_.slideWidth * _.$slideTrack.children('.slick-slide').length)));

            } else if (_.options.variableWidth === true) {
                _.$slideTrack.width(5000 * _.slideCount);
            } else {
                _.slideWidth = Math.ceil(_.listWidth);
                _.$slideTrack.height(Math.ceil((_.$slides.first().outerHeight(true) * _.$slideTrack.children('.slick-slide').length)));
            }

            var offset = _.$slides.first().outerWidth(true) - _.$slides.first().width();
            if (_.options.variableWidth === false) _.$slideTrack.children('.slick-slide').width(_.slideWidth - offset);

        };

        Slick.prototype.setFade = function () {

            var _ = this,
                targetLeft;

            _.$slides.each(function (index, element) {
                targetLeft = (_.slideWidth * index) * -1;
                if (_.options.rtl === true) {
                    $(element).css({
                        position: 'relative',
                        right: targetLeft,
                        top: 0,
                        zIndex: _.options.zIndex - 2,
                        opacity: 0
                    });
                } else {
                    $(element).css({
                        position: 'relative',
                        left: targetLeft,
                        top: 0,
                        zIndex: _.options.zIndex - 2,
                        opacity: 0
                    });
                }
            });

            _.$slides.eq(_.currentSlide).css({
                zIndex: _.options.zIndex - 1,
                opacity: 1
            });

        };

        Slick.prototype.setHeight = function () {

            var _ = this;

            if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
                var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
                _.$list.css('height', targetHeight);
            }

        };

        Slick.prototype.setOption =
            Slick.prototype.slickSetOption = function () {

                /**
                 * accepts arguments in format of:
                 *
                 *  - for changing a single option's value:
                 *     .slick("setOption", option, value, refresh )
                 *
                 *  - for changing a set of responsive options:
                 *     .slick("setOption", 'responsive', [{}, ...], refresh )
                 *
                 *  - for updating multiple values at once (not responsive)
                 *     .slick("setOption", { 'option': value, ... }, refresh )
                 */

                var _ = this, l, item, option, value, refresh = false, type;

                if ($.type(arguments[0]) === 'object') {

                    option = arguments[0];
                    refresh = arguments[1];
                    type = 'multiple';

                } else if ($.type(arguments[0]) === 'string') {

                    option = arguments[0];
                    value = arguments[1];
                    refresh = arguments[2];

                    if (arguments[0] === 'responsive' && $.type(arguments[1]) === 'array') {

                        type = 'responsive';

                    } else if (typeof arguments[1] !== 'undefined') {

                        type = 'single';

                    }

                }

                if (type === 'single') {

                    _.options[option] = value;


                } else if (type === 'multiple') {

                    $.each(option, function (opt, val) {

                        _.options[opt] = val;

                    });


                } else if (type === 'responsive') {

                    for (item in value) {

                        if ($.type(_.options.responsive) !== 'array') {

                            _.options.responsive = [value[item]];

                        } else {

                            l = _.options.responsive.length - 1;

                            // loop through the responsive object and splice out duplicates.
                            while (l >= 0) {

                                if (_.options.responsive[l].breakpoint === value[item].breakpoint) {

                                    _.options.responsive.splice(l, 1);

                                }

                                l--;

                            }

                            _.options.responsive.push(value[item]);

                        }

                    }

                }

                if (refresh) {

                    _.unload();
                    _.reinit();

                }

            };

        Slick.prototype.setPosition = function () {

            var _ = this;

            _.setDimensions();

            _.setHeight();

            if (_.options.fade === false) {
                _.setCSS(_.getLeft(_.currentSlide));
            } else {
                _.setFade();
            }

            _.$slider.trigger('setPosition', [_]);

        };

        Slick.prototype.setProps = function () {

            var _ = this,
                bodyStyle = document.body.style;

            _.positionProp = _.options.vertical === true ? 'top' : 'left';

            if (_.positionProp === 'top') {
                _.$slider.addClass('slick-vertical');
            } else {
                _.$slider.removeClass('slick-vertical');
            }

            if (bodyStyle.WebkitTransition !== undefined ||
                bodyStyle.MozTransition !== undefined ||
                bodyStyle.msTransition !== undefined) {
                if (_.options.useCSS === true) {
                    _.cssTransitions = true;
                }
            }

            if (_.options.fade) {
                if (typeof _.options.zIndex === 'number') {
                    if (_.options.zIndex < 3) {
                        _.options.zIndex = 3;
                    }
                } else {
                    _.options.zIndex = _.defaults.zIndex;
                }
            }

            if (bodyStyle.OTransform !== undefined) {
                _.animType = 'OTransform';
                _.transformType = '-o-transform';
                _.transitionType = 'OTransition';
                if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
            }
            if (bodyStyle.MozTransform !== undefined) {
                _.animType = 'MozTransform';
                _.transformType = '-moz-transform';
                _.transitionType = 'MozTransition';
                if (bodyStyle.perspectiveProperty === undefined && bodyStyle.MozPerspective === undefined) _.animType = false;
            }
            if (bodyStyle.webkitTransform !== undefined) {
                _.animType = 'webkitTransform';
                _.transformType = '-webkit-transform';
                _.transitionType = 'webkitTransition';
                if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
            }
            if (bodyStyle.msTransform !== undefined) {
                _.animType = 'msTransform';
                _.transformType = '-ms-transform';
                _.transitionType = 'msTransition';
                if (bodyStyle.msTransform === undefined) _.animType = false;
            }
            if (bodyStyle.transform !== undefined && _.animType !== false) {
                _.animType = 'transform';
                _.transformType = 'transform';
                _.transitionType = 'transition';
            }
            _.transformsEnabled = _.options.useTransform && (_.animType !== null && _.animType !== false);
        };


        Slick.prototype.setSlideClasses = function (index) {

            var _ = this,
                centerOffset, allSlides, indexOffset, remainder;

            allSlides = _.$slider
                .find('.slick-slide')
                .removeClass('slick-active slick-center slick-current')
                .attr('aria-hidden', 'true');

            _.$slides
                .eq(index)
                .addClass('slick-current');

            if (_.options.centerMode === true) {

                var evenCoef = _.options.slidesToShow % 2 === 0 ? 1 : 0;

                centerOffset = Math.floor(_.options.slidesToShow / 2);

                if (_.options.infinite === true) {

                    if (index >= centerOffset && index <= (_.slideCount - 1) - centerOffset) {
                        _.$slides
                            .slice(index - centerOffset + evenCoef, index + centerOffset + 1)
                            .addClass('slick-active')
                            .attr('aria-hidden', 'false');

                    } else {

                        indexOffset = _.options.slidesToShow + index;
                        allSlides
                            .slice(indexOffset - centerOffset + 1 + evenCoef, indexOffset + centerOffset + 2)
                            .addClass('slick-active')
                            .attr('aria-hidden', 'false');

                    }

                    if (index === 0) {

                        allSlides
                            .eq(allSlides.length - 1 - _.options.slidesToShow)
                            .addClass('slick-center');

                    } else if (index === _.slideCount - 1) {

                        allSlides
                            .eq(_.options.slidesToShow)
                            .addClass('slick-center');

                    }

                }

                _.$slides
                    .eq(index)
                    .addClass('slick-center');

            } else {

                if (index >= 0 && index <= (_.slideCount - _.options.slidesToShow)) {

                    _.$slides
                        .slice(index, index + _.options.slidesToShow)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else if (allSlides.length <= _.options.slidesToShow) {

                    allSlides
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else {

                    remainder = _.slideCount % _.options.slidesToShow;
                    indexOffset = _.options.infinite === true ? _.options.slidesToShow + index : index;

                    if (_.options.slidesToShow == _.options.slidesToScroll && (_.slideCount - index) < _.options.slidesToShow) {

                        allSlides
                            .slice(indexOffset - (_.options.slidesToShow - remainder), indexOffset + remainder)
                            .addClass('slick-active')
                            .attr('aria-hidden', 'false');

                    } else {

                        allSlides
                            .slice(indexOffset, indexOffset + _.options.slidesToShow)
                            .addClass('slick-active')
                            .attr('aria-hidden', 'false');

                    }

                }

            }

            if (_.options.lazyLoad === 'ondemand' || _.options.lazyLoad === 'anticipated') {
                _.lazyLoad();
            }
        };

        Slick.prototype.setupInfinite = function () {

            var _ = this,
                i, slideIndex, infiniteCount;

            if (_.options.fade === true) {
                _.options.centerMode = false;
            }

            if (_.options.infinite === true && _.options.fade === false) {

                slideIndex = null;

                if (_.slideCount > _.options.slidesToShow) {

                    if (_.options.centerMode === true) {
                        infiniteCount = _.options.slidesToShow + 1;
                    } else {
                        infiniteCount = _.options.slidesToShow;
                    }

                    for (i = _.slideCount; i > (_.slideCount -
                        infiniteCount); i -= 1) {
                        slideIndex = i - 1;
                        $(_.$slides[slideIndex]).clone(true).attr('id', '')
                            .attr('data-slick-index', slideIndex - _.slideCount)
                            .prependTo(_.$slideTrack).addClass('slick-cloned');
                    }
                    for (i = 0; i < infiniteCount + _.slideCount; i += 1) {
                        slideIndex = i;
                        $(_.$slides[slideIndex]).clone(true).attr('id', '')
                            .attr('data-slick-index', slideIndex + _.slideCount)
                            .appendTo(_.$slideTrack).addClass('slick-cloned');
                    }
                    _.$slideTrack.find('.slick-cloned').find('[id]').each(function () {
                        $(this).attr('id', '');
                    });

                }

            }

        };

        Slick.prototype.interrupt = function (toggle) {

            var _ = this;

            if (!toggle) {
                _.autoPlay();
            }
            _.interrupted = toggle;

        };

        Slick.prototype.selectHandler = function (event) {

            var _ = this;

            var targetElement =
                $(event.target).is('.slick-slide') ?
                    $(event.target) :
                    $(event.target).parents('.slick-slide');

            var index = parseInt(targetElement.attr('data-slick-index'));

            if (!index) index = 0;

            if (_.slideCount <= _.options.slidesToShow) {

                _.slideHandler(index, false, true);
                return;

            }

            _.slideHandler(index);

        };

        Slick.prototype.slideHandler = function (index, sync, dontAnimate) {

            var targetSlide, animSlide, oldSlide, slideLeft, targetLeft = null,
                _ = this, navTarget;

            sync = sync || false;

            if (_.animating === true && _.options.waitForAnimate === true) {
                return;
            }

            if (_.options.fade === true && _.currentSlide === index) {
                return;
            }

            if (sync === false) {
                _.asNavFor(index);
            }

            targetSlide = index;
            targetLeft = _.getLeft(targetSlide);
            slideLeft = _.getLeft(_.currentSlide);

            _.currentLeft = _.swipeLeft === null ? slideLeft : _.swipeLeft;

            if (_.options.infinite === false && _.options.centerMode === false && (index < 0 || index > _.getDotCount() * _.options.slidesToScroll)) {
                if (_.options.fade === false) {
                    targetSlide = _.currentSlide;
                    if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {
                        _.animateSlide(slideLeft, function () {
                            _.postSlide(targetSlide);
                        });
                    } else {
                        _.postSlide(targetSlide);
                    }
                }
                return;
            } else if (_.options.infinite === false && _.options.centerMode === true && (index < 0 || index > (_.slideCount - _.options.slidesToScroll))) {
                if (_.options.fade === false) {
                    targetSlide = _.currentSlide;
                    if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {
                        _.animateSlide(slideLeft, function () {
                            _.postSlide(targetSlide);
                        });
                    } else {
                        _.postSlide(targetSlide);
                    }
                }
                return;
            }

            if (_.options.autoplay) {
                clearInterval(_.autoPlayTimer);
            }

            if (targetSlide < 0) {
                if (_.slideCount % _.options.slidesToScroll !== 0) {
                    animSlide = _.slideCount - (_.slideCount % _.options.slidesToScroll);
                } else {
                    animSlide = _.slideCount + targetSlide;
                }
            } else if (targetSlide >= _.slideCount) {
                if (_.slideCount % _.options.slidesToScroll !== 0) {
                    animSlide = 0;
                } else {
                    animSlide = targetSlide - _.slideCount;
                }
            } else {
                animSlide = targetSlide;
            }

            _.animating = true;

            _.$slider.trigger('beforeChange', [_, _.currentSlide, animSlide]);

            oldSlide = _.currentSlide;
            _.currentSlide = animSlide;

            _.setSlideClasses(_.currentSlide);

            if (_.options.asNavFor) {

                navTarget = _.getNavTarget();
                navTarget = navTarget.slick('getSlick');

                if (navTarget.slideCount <= navTarget.options.slidesToShow) {
                    navTarget.setSlideClasses(_.currentSlide);
                }

            }

            _.updateDots();
            _.updateArrows();

            if (_.options.fade === true) {
                if (dontAnimate !== true) {

                    _.fadeSlideOut(oldSlide);

                    _.fadeSlide(animSlide, function () {
                        _.postSlide(animSlide);
                    });

                } else {
                    _.postSlide(animSlide);
                }
                _.animateHeight();
                return;
            }

            if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {
                _.animateSlide(targetLeft, function () {
                    _.postSlide(animSlide);
                });
            } else {
                _.postSlide(animSlide);
            }

        };

        Slick.prototype.startLoad = function () {

            var _ = this;

            if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

                _.$prevArrow.hide();
                _.$nextArrow.hide();

            }

            if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

                _.$dots.hide();

            }

            _.$slider.addClass('slick-loading');

        };

        Slick.prototype.swipeDirection = function () {

            var xDist, yDist, r, swipeAngle, _ = this;

            xDist = _.touchObject.startX - _.touchObject.curX;
            yDist = _.touchObject.startY - _.touchObject.curY;
            r = Math.atan2(yDist, xDist);

            swipeAngle = Math.round(r * 180 / Math.PI);
            if (swipeAngle < 0) {
                swipeAngle = 360 - Math.abs(swipeAngle);
            }

            if ((swipeAngle <= 45) && (swipeAngle >= 0)) {
                return (_.options.rtl === false ? 'left' : 'right');
            }
            if ((swipeAngle <= 360) && (swipeAngle >= 315)) {
                return (_.options.rtl === false ? 'left' : 'right');
            }
            if ((swipeAngle >= 135) && (swipeAngle <= 225)) {
                return (_.options.rtl === false ? 'right' : 'left');
            }
            if (_.options.verticalSwiping === true) {
                if ((swipeAngle >= 35) && (swipeAngle <= 135)) {
                    return 'down';
                } else {
                    return 'up';
                }
            }

            return 'vertical';

        };

        Slick.prototype.swipeEnd = function (event) {

            var _ = this,
                slideCount,
                direction;

            _.dragging = false;
            _.swiping = false;

            if (_.scrolling) {
                _.scrolling = false;
                return false;
            }

            _.interrupted = false;
            _.shouldClick = (_.touchObject.swipeLength > 10) ? false : true;

            if (_.touchObject.curX === undefined) {
                return false;
            }

            if (_.touchObject.edgeHit === true) {
                _.$slider.trigger('edge', [_, _.swipeDirection()]);
            }

            if (_.touchObject.swipeLength >= _.touchObject.minSwipe) {

                direction = _.swipeDirection();

                switch (direction) {

                    case 'left':
                    case 'down':

                        slideCount =
                            _.options.swipeToSlide ?
                                _.checkNavigable(_.currentSlide + _.getSlideCount()) :
                                _.currentSlide + _.getSlideCount();

                        _.currentDirection = 0;

                        break;

                    case 'right':
                    case 'up':

                        slideCount =
                            _.options.swipeToSlide ?
                                _.checkNavigable(_.currentSlide - _.getSlideCount()) :
                                _.currentSlide - _.getSlideCount();

                        _.currentDirection = 1;

                        break;

                    default:


                }

                if (direction != 'vertical') {

                    _.slideHandler(slideCount);
                    _.touchObject = {};
                    _.$slider.trigger('swipe', [_, direction]);

                }

            } else {

                if (_.touchObject.startX !== _.touchObject.curX) {

                    _.slideHandler(_.currentSlide);
                    _.touchObject = {};

                }

            }

        };

        Slick.prototype.swipeHandler = function (event) {

            var _ = this;

            if ((_.options.swipe === false) || ('ontouchend' in document && _.options.swipe === false)) {
                return;
            } else if (_.options.draggable === false && event.type.indexOf('mouse') !== -1) {
                return;
            }

            _.touchObject.fingerCount = event.originalEvent && event.originalEvent.touches !== undefined ?
                event.originalEvent.touches.length : 1;

            _.touchObject.minSwipe = _.listWidth / _.options
                .touchThreshold;

            if (_.options.verticalSwiping === true) {
                _.touchObject.minSwipe = _.listHeight / _.options
                    .touchThreshold;
            }

            switch (event.data.action) {

                case 'start':
                    _.swipeStart(event);
                    break;

                case 'move':
                    _.swipeMove(event);
                    break;

                case 'end':
                    _.swipeEnd(event);
                    break;

            }

        };

        Slick.prototype.swipeMove = function (event) {

            var _ = this,
                edgeWasHit = false,
                curLeft, swipeDirection, swipeLength, positionOffset, touches, verticalSwipeLength;

            touches = event.originalEvent !== undefined ? event.originalEvent.touches : null;

            if (!_.dragging || _.scrolling || touches && touches.length !== 1) {
                return false;
            }

            curLeft = _.getLeft(_.currentSlide);

            _.touchObject.curX = touches !== undefined ? touches[0].pageX : event.clientX;
            _.touchObject.curY = touches !== undefined ? touches[0].pageY : event.clientY;

            _.touchObject.swipeLength = Math.round(Math.sqrt(
                Math.pow(_.touchObject.curX - _.touchObject.startX, 2)));

            verticalSwipeLength = Math.round(Math.sqrt(
                Math.pow(_.touchObject.curY - _.touchObject.startY, 2)));

            if (!_.options.verticalSwiping && !_.swiping && verticalSwipeLength > 4) {
                _.scrolling = true;
                return false;
            }

            if (_.options.verticalSwiping === true) {
                _.touchObject.swipeLength = verticalSwipeLength;
            }

            swipeDirection = _.swipeDirection();

            if (event.originalEvent !== undefined && _.touchObject.swipeLength > 4) {
                _.swiping = true;
                event.preventDefault();
            }

            positionOffset = (_.options.rtl === false ? 1 : -1) * (_.touchObject.curX > _.touchObject.startX ? 1 : -1);
            if (_.options.verticalSwiping === true) {
                positionOffset = _.touchObject.curY > _.touchObject.startY ? 1 : -1;
            }


            swipeLength = _.touchObject.swipeLength;

            _.touchObject.edgeHit = false;

            if (_.options.infinite === false) {
                if ((_.currentSlide === 0 && swipeDirection === 'right') || (_.currentSlide >= _.getDotCount() && swipeDirection === 'left')) {
                    swipeLength = _.touchObject.swipeLength * _.options.edgeFriction;
                    _.touchObject.edgeHit = true;
                }
            }

            if (_.options.vertical === false) {
                _.swipeLeft = curLeft + swipeLength * positionOffset;
            } else {
                _.swipeLeft = curLeft + (swipeLength * (_.$list.height() / _.listWidth)) * positionOffset;
            }
            if (_.options.verticalSwiping === true) {
                _.swipeLeft = curLeft + swipeLength * positionOffset;
            }

            if (_.options.fade === true || _.options.touchMove === false) {
                return false;
            }

            if (_.animating === true) {
                _.swipeLeft = null;
                return false;
            }

            _.setCSS(_.swipeLeft);

        };

        Slick.prototype.swipeStart = function (event) {

            var _ = this,
                touches;

            _.interrupted = true;

            if (_.touchObject.fingerCount !== 1 || _.slideCount <= _.options.slidesToShow) {
                _.touchObject = {};
                return false;
            }

            if (event.originalEvent !== undefined && event.originalEvent.touches !== undefined) {
                touches = event.originalEvent.touches[0];
            }

            _.touchObject.startX = _.touchObject.curX = touches !== undefined ? touches.pageX : event.clientX;
            _.touchObject.startY = _.touchObject.curY = touches !== undefined ? touches.pageY : event.clientY;

            _.dragging = true;

        };

        Slick.prototype.unfilterSlides = Slick.prototype.slickUnfilter = function () {

            var _ = this;

            if (_.$slidesCache !== null) {

                _.unload();

                _.$slideTrack.children(this.options.slide).detach();

                _.$slidesCache.appendTo(_.$slideTrack);

                _.reinit();

            }

        };

        Slick.prototype.unload = function () {

            var _ = this;

            $('.slick-cloned', _.$slider).remove();

            if (_.$dots) {
                _.$dots.remove();
            }

            if (_.$prevArrow && _.htmlExpr.test(_.options.prevArrow)) {
                _.$prevArrow.remove();
            }

            if (_.$nextArrow && _.htmlExpr.test(_.options.nextArrow)) {
                _.$nextArrow.remove();
            }

            _.$slides
                .removeClass('slick-slide slick-active slick-visible slick-current')
                .attr('aria-hidden', 'true')
                .css('width', '');

        };

        Slick.prototype.unslick = function (fromBreakpoint) {

            var _ = this;
            _.$slider.trigger('unslick', [_, fromBreakpoint]);
            _.destroy();

        };

        Slick.prototype.updateArrows = function () {

            var _ = this,
                centerOffset;

            centerOffset = Math.floor(_.options.slidesToShow / 2);

            if (_.options.arrows === true &&
                _.slideCount > _.options.slidesToShow &&
                !_.options.infinite) {

                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');
                _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

                if (_.currentSlide === 0) {

                    _.$prevArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                    _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

                } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow && _.options.centerMode === false) {

                    _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                    _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

                } else if (_.currentSlide >= _.slideCount - 1 && _.options.centerMode === true) {

                    _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                    _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

                }

            }

        };

        Slick.prototype.updateDots = function () {

            var _ = this;

            if (_.$dots !== null) {

                _.$dots
                    .find('li')
                    .removeClass('slick-active')
                    .end();

                _.$dots
                    .find('li')
                    .eq(Math.floor(_.currentSlide / _.options.slidesToScroll))
                    .addClass('slick-active');

            }

        };

        Slick.prototype.visibility = function () {

            var _ = this;

            if (_.options.autoplay) {

                if (document[_.hidden]) {

                    _.interrupted = true;

                } else {

                    _.interrupted = false;

                }

            }

        };

        $.fn.slick = function () {
            var _ = this,
                opt = arguments[0],
                args = Array.prototype.slice.call(arguments, 1),
                l = _.length,
                i,
                ret;
            for (i = 0; i < l; i++) {
                if (typeof opt == 'object' || typeof opt == 'undefined')
                    _[i].slick = new Slick(_[i], opt);
                else
                    ret = _[i].slick[opt].apply(_[i].slick, args);
                if (typeof ret != 'undefined') return ret;
            }
            return _;
        };

    }));
;
/*
 Copyright (C) Federico Zivolo 2019
 Distributed under the MIT License (license terms are at http://opensource.org/licenses/MIT).
 */(function (e, t) { 'object' == typeof exports && 'undefined' != typeof module ? module.exports = t() : 'function' == typeof define && define.amd ? define(t) : e.Popper = t() })(this, function () { 'use strict'; function e(e) { return e && '[object Function]' === {}.toString.call(e) } function t(e, t) { if (1 !== e.nodeType) return []; var o = e.ownerDocument.defaultView, n = o.getComputedStyle(e, null); return t ? n[t] : n } function o(e) { return 'HTML' === e.nodeName ? e : e.parentNode || e.host } function n(e) { if (!e) return document.body; switch (e.nodeName) { case 'HTML': case 'BODY': return e.ownerDocument.body; case '#document': return e.body; }var i = t(e), r = i.overflow, p = i.overflowX, s = i.overflowY; return /(auto|scroll|overlay)/.test(r + s + p) ? e : n(o(e)) } function r(e) { return 11 === e ? pe : 10 === e ? se : pe || se } function p(e) { if (!e) return document.documentElement; for (var o = r(10) ? document.body : null, n = e.offsetParent || null; n === o && e.nextElementSibling;)n = (e = e.nextElementSibling).offsetParent; var i = n && n.nodeName; return i && 'BODY' !== i && 'HTML' !== i ? -1 !== ['TH', 'TD', 'TABLE'].indexOf(n.nodeName) && 'static' === t(n, 'position') ? p(n) : n : e ? e.ownerDocument.documentElement : document.documentElement } function s(e) { var t = e.nodeName; return 'BODY' !== t && ('HTML' === t || p(e.firstElementChild) === e) } function d(e) { return null === e.parentNode ? e : d(e.parentNode) } function a(e, t) { if (!e || !e.nodeType || !t || !t.nodeType) return document.documentElement; var o = e.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_FOLLOWING, n = o ? e : t, i = o ? t : e, r = document.createRange(); r.setStart(n, 0), r.setEnd(i, 0); var l = r.commonAncestorContainer; if (e !== l && t !== l || n.contains(i)) return s(l) ? l : p(l); var f = d(e); return f.host ? a(f.host, t) : a(e, d(t).host) } function l(e) { var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 'top', o = 'top' === t ? 'scrollTop' : 'scrollLeft', n = e.nodeName; if ('BODY' === n || 'HTML' === n) { var i = e.ownerDocument.documentElement, r = e.ownerDocument.scrollingElement || i; return r[o] } return e[o] } function f(e, t) { var o = 2 < arguments.length && void 0 !== arguments[2] && arguments[2], n = l(t, 'top'), i = l(t, 'left'), r = o ? -1 : 1; return e.top += n * r, e.bottom += n * r, e.left += i * r, e.right += i * r, e } function m(e, t) { var o = 'x' === t ? 'Left' : 'Top', n = 'Left' == o ? 'Right' : 'Bottom'; return parseFloat(e['border' + o + 'Width'], 10) + parseFloat(e['border' + n + 'Width'], 10) } function h(e, t, o, n) { return ee(t['offset' + e], t['scroll' + e], o['client' + e], o['offset' + e], o['scroll' + e], r(10) ? parseInt(o['offset' + e]) + parseInt(n['margin' + ('Height' === e ? 'Top' : 'Left')]) + parseInt(n['margin' + ('Height' === e ? 'Bottom' : 'Right')]) : 0) } function c(e) { var t = e.body, o = e.documentElement, n = r(10) && getComputedStyle(o); return { height: h('Height', t, o, n), width: h('Width', t, o, n) } } function g(e) { return fe({}, e, { right: e.left + e.width, bottom: e.top + e.height }) } function u(e) { var o = {}; try { if (r(10)) { o = e.getBoundingClientRect(); var n = l(e, 'top'), i = l(e, 'left'); o.top += n, o.left += i, o.bottom += n, o.right += i } else o = e.getBoundingClientRect() } catch (t) { } var p = { left: o.left, top: o.top, width: o.right - o.left, height: o.bottom - o.top }, s = 'HTML' === e.nodeName ? c(e.ownerDocument) : {}, d = s.width || e.clientWidth || p.right - p.left, a = s.height || e.clientHeight || p.bottom - p.top, f = e.offsetWidth - d, h = e.offsetHeight - a; if (f || h) { var u = t(e); f -= m(u, 'x'), h -= m(u, 'y'), p.width -= f, p.height -= h } return g(p) } function b(e, o) { var i = 2 < arguments.length && void 0 !== arguments[2] && arguments[2], p = r(10), s = 'HTML' === o.nodeName, d = u(e), a = u(o), l = n(e), m = t(o), h = parseFloat(m.borderTopWidth, 10), c = parseFloat(m.borderLeftWidth, 10); i && s && (a.top = ee(a.top, 0), a.left = ee(a.left, 0)); var b = g({ top: d.top - a.top - h, left: d.left - a.left - c, width: d.width, height: d.height }); if (b.marginTop = 0, b.marginLeft = 0, !p && s) { var w = parseFloat(m.marginTop, 10), y = parseFloat(m.marginLeft, 10); b.top -= h - w, b.bottom -= h - w, b.left -= c - y, b.right -= c - y, b.marginTop = w, b.marginLeft = y } return (p && !i ? o.contains(l) : o === l && 'BODY' !== l.nodeName) && (b = f(b, o)), b } function w(e) { var t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1], o = e.ownerDocument.documentElement, n = b(e, o), i = ee(o.clientWidth, window.innerWidth || 0), r = ee(o.clientHeight, window.innerHeight || 0), p = t ? 0 : l(o), s = t ? 0 : l(o, 'left'), d = { top: p - n.top + n.marginTop, left: s - n.left + n.marginLeft, width: i, height: r }; return g(d) } function y(e) { var n = e.nodeName; if ('BODY' === n || 'HTML' === n) return !1; if ('fixed' === t(e, 'position')) return !0; var i = o(e); return !!i && y(i) } function E(e) { if (!e || !e.parentElement || r()) return document.documentElement; for (var o = e.parentElement; o && 'none' === t(o, 'transform');)o = o.parentElement; return o || document.documentElement } function v(e, t, i, r) { var p = 4 < arguments.length && void 0 !== arguments[4] && arguments[4], s = { top: 0, left: 0 }, d = p ? E(e) : a(e, t); if ('viewport' === r) s = w(d, p); else { var l; 'scrollParent' === r ? (l = n(o(t)), 'BODY' === l.nodeName && (l = e.ownerDocument.documentElement)) : 'window' === r ? l = e.ownerDocument.documentElement : l = r; var f = b(l, d, p); if ('HTML' === l.nodeName && !y(d)) { var m = c(e.ownerDocument), h = m.height, g = m.width; s.top += f.top - f.marginTop, s.bottom = h + f.top, s.left += f.left - f.marginLeft, s.right = g + f.left } else s = f } i = i || 0; var u = 'number' == typeof i; return s.left += u ? i : i.left || 0, s.top += u ? i : i.top || 0, s.right -= u ? i : i.right || 0, s.bottom -= u ? i : i.bottom || 0, s } function x(e) { var t = e.width, o = e.height; return t * o } function O(e, t, o, n, i) { var r = 5 < arguments.length && void 0 !== arguments[5] ? arguments[5] : 0; if (-1 === e.indexOf('auto')) return e; var p = v(o, n, r, i), s = { top: { width: p.width, height: t.top - p.top }, right: { width: p.right - t.right, height: p.height }, bottom: { width: p.width, height: p.bottom - t.bottom }, left: { width: t.left - p.left, height: p.height } }, d = Object.keys(s).map(function (e) { return fe({ key: e }, s[e], { area: x(s[e]) }) }).sort(function (e, t) { return t.area - e.area }), a = d.filter(function (e) { var t = e.width, n = e.height; return t >= o.clientWidth && n >= o.clientHeight }), l = 0 < a.length ? a[0].key : d[0].key, f = e.split('-')[1]; return l + (f ? '-' + f : '') } function L(e, t, o) { var n = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null, i = n ? E(t) : a(t, o); return b(o, i, n) } function S(e) { var t = e.ownerDocument.defaultView, o = t.getComputedStyle(e), n = parseFloat(o.marginTop || 0) + parseFloat(o.marginBottom || 0), i = parseFloat(o.marginLeft || 0) + parseFloat(o.marginRight || 0), r = { width: e.offsetWidth + i, height: e.offsetHeight + n }; return r } function T(e) { var t = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' }; return e.replace(/left|right|bottom|top/g, function (e) { return t[e] }) } function D(e, t, o) { o = o.split('-')[0]; var n = S(e), i = { width: n.width, height: n.height }, r = -1 !== ['right', 'left'].indexOf(o), p = r ? 'top' : 'left', s = r ? 'left' : 'top', d = r ? 'height' : 'width', a = r ? 'width' : 'height'; return i[p] = t[p] + t[d] / 2 - n[d] / 2, i[s] = o === s ? t[s] - n[a] : t[T(s)], i } function C(e, t) { return Array.prototype.find ? e.find(t) : e.filter(t)[0] } function N(e, t, o) { if (Array.prototype.findIndex) return e.findIndex(function (e) { return e[t] === o }); var n = C(e, function (e) { return e[t] === o }); return e.indexOf(n) } function P(t, o, n) { var i = void 0 === n ? t : t.slice(0, N(t, 'name', n)); return i.forEach(function (t) { t['function'] && console.warn('`modifier.function` is deprecated, use `modifier.fn`!'); var n = t['function'] || t.fn; t.enabled && e(n) && (o.offsets.popper = g(o.offsets.popper), o.offsets.reference = g(o.offsets.reference), o = n(o, t)) }), o } function k() { if (!this.state.isDestroyed) { var e = { instance: this, styles: {}, arrowStyles: {}, attributes: {}, flipped: !1, offsets: {} }; e.offsets.reference = L(this.state, this.popper, this.reference, this.options.positionFixed), e.placement = O(this.options.placement, e.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding), e.originalPlacement = e.placement, e.positionFixed = this.options.positionFixed, e.offsets.popper = D(this.popper, e.offsets.reference, e.placement), e.offsets.popper.position = this.options.positionFixed ? 'fixed' : 'absolute', e = P(this.modifiers, e), this.state.isCreated ? this.options.onUpdate(e) : (this.state.isCreated = !0, this.options.onCreate(e)) } } function W(e, t) { return e.some(function (e) { var o = e.name, n = e.enabled; return n && o === t }) } function H(e) { for (var t = [!1, 'ms', 'Webkit', 'Moz', 'O'], o = e.charAt(0).toUpperCase() + e.slice(1), n = 0; n < t.length; n++) { var i = t[n], r = i ? '' + i + o : e; if ('undefined' != typeof document.body.style[r]) return r } return null } function B() { return this.state.isDestroyed = !0, W(this.modifiers, 'applyStyle') && (this.popper.removeAttribute('x-placement'), this.popper.style.position = '', this.popper.style.top = '', this.popper.style.left = '', this.popper.style.right = '', this.popper.style.bottom = '', this.popper.style.willChange = '', this.popper.style[H('transform')] = ''), this.disableEventListeners(), this.options.removeOnDestroy && this.popper.parentNode.removeChild(this.popper), this } function A(e) { var t = e.ownerDocument; return t ? t.defaultView : window } function M(e, t, o, i) { var r = 'BODY' === e.nodeName, p = r ? e.ownerDocument.defaultView : e; p.addEventListener(t, o, { passive: !0 }), r || M(n(p.parentNode), t, o, i), i.push(p) } function F(e, t, o, i) { o.updateBound = i, A(e).addEventListener('resize', o.updateBound, { passive: !0 }); var r = n(e); return M(r, 'scroll', o.updateBound, o.scrollParents), o.scrollElement = r, o.eventsEnabled = !0, o } function I() { this.state.eventsEnabled || (this.state = F(this.reference, this.options, this.state, this.scheduleUpdate)) } function R(e, t) { return A(e).removeEventListener('resize', t.updateBound), t.scrollParents.forEach(function (e) { e.removeEventListener('scroll', t.updateBound) }), t.updateBound = null, t.scrollParents = [], t.scrollElement = null, t.eventsEnabled = !1, t } function U() { this.state.eventsEnabled && (cancelAnimationFrame(this.scheduleUpdate), this.state = R(this.reference, this.state)) } function Y(e) { return '' !== e && !isNaN(parseFloat(e)) && isFinite(e) } function j(e, t) { Object.keys(t).forEach(function (o) { var n = ''; -1 !== ['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(o) && Y(t[o]) && (n = 'px'), e.style[o] = t[o] + n }) } function V(e, t) { Object.keys(t).forEach(function (o) { var n = t[o]; !1 === n ? e.removeAttribute(o) : e.setAttribute(o, t[o]) }) } function q(e, t) { var o = e.offsets, n = o.popper, i = o.reference, r = $, p = function (e) { return e }, s = r(i.width), d = r(n.width), a = -1 !== ['left', 'right'].indexOf(e.placement), l = -1 !== e.placement.indexOf('-'), f = t ? a || l || s % 2 == d % 2 ? r : Z : p, m = t ? r : p; return { left: f(1 == s % 2 && 1 == d % 2 && !l && t ? n.left - 1 : n.left), top: m(n.top), bottom: m(n.bottom), right: f(n.right) } } function K(e, t, o) { var n = C(e, function (e) { var o = e.name; return o === t }), i = !!n && e.some(function (e) { return e.name === o && e.enabled && e.order < n.order }); if (!i) { var r = '`' + t + '`'; console.warn('`' + o + '`' + ' modifier is required by ' + r + ' modifier in order to work, be sure to include it before ' + r + '!') } return i } function z(e) { return 'end' === e ? 'start' : 'start' === e ? 'end' : e } function G(e) { var t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1], o = ce.indexOf(e), n = ce.slice(o + 1).concat(ce.slice(0, o)); return t ? n.reverse() : n } function _(e, t, o, n) { var i = e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/), r = +i[1], p = i[2]; if (!r) return e; if (0 === p.indexOf('%')) { var s; switch (p) { case '%p': s = o; break; case '%': case '%r': default: s = n; }var d = g(s); return d[t] / 100 * r } if ('vh' === p || 'vw' === p) { var a; return a = 'vh' === p ? ee(document.documentElement.clientHeight, window.innerHeight || 0) : ee(document.documentElement.clientWidth, window.innerWidth || 0), a / 100 * r } return r } function X(e, t, o, n) { var i = [0, 0], r = -1 !== ['right', 'left'].indexOf(n), p = e.split(/(\+|\-)/).map(function (e) { return e.trim() }), s = p.indexOf(C(p, function (e) { return -1 !== e.search(/,|\s/) })); p[s] && -1 === p[s].indexOf(',') && console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.'); var d = /\s*,\s*|\s+/, a = -1 === s ? [p] : [p.slice(0, s).concat([p[s].split(d)[0]]), [p[s].split(d)[1]].concat(p.slice(s + 1))]; return a = a.map(function (e, n) { var i = (1 === n ? !r : r) ? 'height' : 'width', p = !1; return e.reduce(function (e, t) { return '' === e[e.length - 1] && -1 !== ['+', '-'].indexOf(t) ? (e[e.length - 1] = t, p = !0, e) : p ? (e[e.length - 1] += t, p = !1, e) : e.concat(t) }, []).map(function (e) { return _(e, i, t, o) }) }), a.forEach(function (e, t) { e.forEach(function (o, n) { Y(o) && (i[t] += o * ('-' === e[n - 1] ? -1 : 1)) }) }), i } function J(e, t) { var o, n = t.offset, i = e.placement, r = e.offsets, p = r.popper, s = r.reference, d = i.split('-')[0]; return o = Y(+n) ? [+n, 0] : X(n, p, s, d), 'left' === d ? (p.top += o[0], p.left -= o[1]) : 'right' === d ? (p.top += o[0], p.left += o[1]) : 'top' === d ? (p.left += o[0], p.top -= o[1]) : 'bottom' === d && (p.left += o[0], p.top += o[1]), e.popper = p, e } for (var Q = Math.min, Z = Math.floor, $ = Math.round, ee = Math.max, te = 'undefined' != typeof window && 'undefined' != typeof document, oe = ['Edge', 'Trident', 'Firefox'], ne = 0, ie = 0; ie < oe.length; ie += 1)if (te && 0 <= navigator.userAgent.indexOf(oe[ie])) { ne = 1; break } var i = te && window.Promise, re = i ? function (e) { var t = !1; return function () { t || (t = !0, window.Promise.resolve().then(function () { t = !1, e() })) } } : function (e) { var t = !1; return function () { t || (t = !0, setTimeout(function () { t = !1, e() }, ne)) } }, pe = te && !!(window.MSInputMethodContext && document.documentMode), se = te && /MSIE 10/.test(navigator.userAgent), de = function (e, t) { if (!(e instanceof t)) throw new TypeError('Cannot call a class as a function') }, ae = function () { function e(e, t) { for (var o, n = 0; n < t.length; n++)o = t[n], o.enumerable = o.enumerable || !1, o.configurable = !0, 'value' in o && (o.writable = !0), Object.defineProperty(e, o.key, o) } return function (t, o, n) { return o && e(t.prototype, o), n && e(t, n), t } }(), le = function (e, t, o) { return t in e ? Object.defineProperty(e, t, { value: o, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = o, e }, fe = Object.assign || function (e) { for (var t, o = 1; o < arguments.length; o++)for (var n in t = arguments[o], t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]); return e }, me = te && /Firefox/i.test(navigator.userAgent), he = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'], ce = he.slice(3), ge = { FLIP: 'flip', CLOCKWISE: 'clockwise', COUNTERCLOCKWISE: 'counterclockwise' }, ue = function () { function t(o, n) { var i = this, r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}; de(this, t), this.scheduleUpdate = function () { return requestAnimationFrame(i.update) }, this.update = re(this.update.bind(this)), this.options = fe({}, t.Defaults, r), this.state = { isDestroyed: !1, isCreated: !1, scrollParents: [] }, this.reference = o && o.jquery ? o[0] : o, this.popper = n && n.jquery ? n[0] : n, this.options.modifiers = {}, Object.keys(fe({}, t.Defaults.modifiers, r.modifiers)).forEach(function (e) { i.options.modifiers[e] = fe({}, t.Defaults.modifiers[e] || {}, r.modifiers ? r.modifiers[e] : {}) }), this.modifiers = Object.keys(this.options.modifiers).map(function (e) { return fe({ name: e }, i.options.modifiers[e]) }).sort(function (e, t) { return e.order - t.order }), this.modifiers.forEach(function (t) { t.enabled && e(t.onLoad) && t.onLoad(i.reference, i.popper, i.options, t, i.state) }), this.update(); var p = this.options.eventsEnabled; p && this.enableEventListeners(), this.state.eventsEnabled = p } return ae(t, [{ key: 'update', value: function () { return k.call(this) } }, { key: 'destroy', value: function () { return B.call(this) } }, { key: 'enableEventListeners', value: function () { return I.call(this) } }, { key: 'disableEventListeners', value: function () { return U.call(this) } }]), t }(); return ue.Utils = ('undefined' == typeof window ? global : window).PopperUtils, ue.placements = he, ue.Defaults = { placement: 'bottom', positionFixed: !1, eventsEnabled: !0, removeOnDestroy: !1, onCreate: function () { }, onUpdate: function () { }, modifiers: { shift: { order: 100, enabled: !0, fn: function (e) { var t = e.placement, o = t.split('-')[0], n = t.split('-')[1]; if (n) { var i = e.offsets, r = i.reference, p = i.popper, s = -1 !== ['bottom', 'top'].indexOf(o), d = s ? 'left' : 'top', a = s ? 'width' : 'height', l = { start: le({}, d, r[d]), end: le({}, d, r[d] + r[a] - p[a]) }; e.offsets.popper = fe({}, p, l[n]) } return e } }, offset: { order: 200, enabled: !0, fn: J, offset: 0 }, preventOverflow: { order: 300, enabled: !0, fn: function (e, t) { var o = t.boundariesElement || p(e.instance.popper); e.instance.reference === o && (o = p(o)); var n = H('transform'), i = e.instance.popper.style, r = i.top, s = i.left, d = i[n]; i.top = '', i.left = '', i[n] = ''; var a = v(e.instance.popper, e.instance.reference, t.padding, o, e.positionFixed); i.top = r, i.left = s, i[n] = d, t.boundaries = a; var l = t.priority, f = e.offsets.popper, m = { primary: function (e) { var o = f[e]; return f[e] < a[e] && !t.escapeWithReference && (o = ee(f[e], a[e])), le({}, e, o) }, secondary: function (e) { var o = 'right' === e ? 'left' : 'top', n = f[o]; return f[e] > a[e] && !t.escapeWithReference && (n = Q(f[o], a[e] - ('right' === e ? f.width : f.height))), le({}, o, n) } }; return l.forEach(function (e) { var t = -1 === ['left', 'top'].indexOf(e) ? 'secondary' : 'primary'; f = fe({}, f, m[t](e)) }), e.offsets.popper = f, e }, priority: ['left', 'right', 'top', 'bottom'], padding: 5, boundariesElement: 'scrollParent' }, keepTogether: { order: 400, enabled: !0, fn: function (e) { var t = e.offsets, o = t.popper, n = t.reference, i = e.placement.split('-')[0], r = Z, p = -1 !== ['top', 'bottom'].indexOf(i), s = p ? 'right' : 'bottom', d = p ? 'left' : 'top', a = p ? 'width' : 'height'; return o[s] < r(n[d]) && (e.offsets.popper[d] = r(n[d]) - o[a]), o[d] > r(n[s]) && (e.offsets.popper[d] = r(n[s])), e } }, arrow: { order: 500, enabled: !0, fn: function (e, o) { var n; if (!K(e.instance.modifiers, 'arrow', 'keepTogether')) return e; var i = o.element; if ('string' == typeof i) { if (i = e.instance.popper.querySelector(i), !i) return e; } else if (!e.instance.popper.contains(i)) return console.warn('WARNING: `arrow.element` must be child of its popper element!'), e; var r = e.placement.split('-')[0], p = e.offsets, s = p.popper, d = p.reference, a = -1 !== ['left', 'right'].indexOf(r), l = a ? 'height' : 'width', f = a ? 'Top' : 'Left', m = f.toLowerCase(), h = a ? 'left' : 'top', c = a ? 'bottom' : 'right', u = S(i)[l]; d[c] - u < s[m] && (e.offsets.popper[m] -= s[m] - (d[c] - u)), d[m] + u > s[c] && (e.offsets.popper[m] += d[m] + u - s[c]), e.offsets.popper = g(e.offsets.popper); var b = d[m] + d[l] / 2 - u / 2, w = t(e.instance.popper), y = parseFloat(w['margin' + f], 10), E = parseFloat(w['border' + f + 'Width'], 10), v = b - e.offsets.popper[m] - y - E; return v = ee(Q(s[l] - u, v), 0), e.arrowElement = i, e.offsets.arrow = (n = {}, le(n, m, $(v)), le(n, h, ''), n), e }, element: '[x-arrow]' }, flip: { order: 600, enabled: !0, fn: function (e, t) { if (W(e.instance.modifiers, 'inner')) return e; if (e.flipped && e.placement === e.originalPlacement) return e; var o = v(e.instance.popper, e.instance.reference, t.padding, t.boundariesElement, e.positionFixed), n = e.placement.split('-')[0], i = T(n), r = e.placement.split('-')[1] || '', p = []; switch (t.behavior) { case ge.FLIP: p = [n, i]; break; case ge.CLOCKWISE: p = G(n); break; case ge.COUNTERCLOCKWISE: p = G(n, !0); break; default: p = t.behavior; }return p.forEach(function (s, d) { if (n !== s || p.length === d + 1) return e; n = e.placement.split('-')[0], i = T(n); var a = e.offsets.popper, l = e.offsets.reference, f = Z, m = 'left' === n && f(a.right) > f(l.left) || 'right' === n && f(a.left) < f(l.right) || 'top' === n && f(a.bottom) > f(l.top) || 'bottom' === n && f(a.top) < f(l.bottom), h = f(a.left) < f(o.left), c = f(a.right) > f(o.right), g = f(a.top) < f(o.top), u = f(a.bottom) > f(o.bottom), b = 'left' === n && h || 'right' === n && c || 'top' === n && g || 'bottom' === n && u, w = -1 !== ['top', 'bottom'].indexOf(n), y = !!t.flipVariations && (w && 'start' === r && h || w && 'end' === r && c || !w && 'start' === r && g || !w && 'end' === r && u); (m || b || y) && (e.flipped = !0, (m || b) && (n = p[d + 1]), y && (r = z(r)), e.placement = n + (r ? '-' + r : ''), e.offsets.popper = fe({}, e.offsets.popper, D(e.instance.popper, e.offsets.reference, e.placement)), e = P(e.instance.modifiers, e, 'flip')) }), e }, behavior: 'flip', padding: 5, boundariesElement: 'viewport' }, inner: { order: 700, enabled: !1, fn: function (e) { var t = e.placement, o = t.split('-')[0], n = e.offsets, i = n.popper, r = n.reference, p = -1 !== ['left', 'right'].indexOf(o), s = -1 === ['top', 'left'].indexOf(o); return i[p ? 'left' : 'top'] = r[o] - (s ? i[p ? 'width' : 'height'] : 0), e.placement = T(t), e.offsets.popper = g(i), e } }, hide: { order: 800, enabled: !0, fn: function (e) { if (!K(e.instance.modifiers, 'hide', 'preventOverflow')) return e; var t = e.offsets.reference, o = C(e.instance.modifiers, function (e) { return 'preventOverflow' === e.name }).boundaries; if (t.bottom < o.top || t.left > o.right || t.top > o.bottom || t.right < o.left) { if (!0 === e.hide) return e; e.hide = !0, e.attributes['x-out-of-boundaries'] = '' } else { if (!1 === e.hide) return e; e.hide = !1, e.attributes['x-out-of-boundaries'] = !1 } return e } }, computeStyle: { order: 850, enabled: !0, fn: function (e, t) { var o = t.x, n = t.y, i = e.offsets.popper, r = C(e.instance.modifiers, function (e) { return 'applyStyle' === e.name }).gpuAcceleration; void 0 !== r && console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!'); var s, d, a = void 0 === r ? t.gpuAcceleration : r, l = p(e.instance.popper), f = u(l), m = { position: i.position }, h = q(e, 2 > window.devicePixelRatio || !me), c = 'bottom' === o ? 'top' : 'bottom', g = 'right' === n ? 'left' : 'right', b = H('transform'); if (d = 'bottom' == c ? 'HTML' === l.nodeName ? -l.clientHeight + h.bottom : -f.height + h.bottom : h.top, s = 'right' == g ? 'HTML' === l.nodeName ? -l.clientWidth + h.right : -f.width + h.right : h.left, a && b) m[b] = 'translate3d(' + s + 'px, ' + d + 'px, 0)', m[c] = 0, m[g] = 0, m.willChange = 'transform'; else { var w = 'bottom' == c ? -1 : 1, y = 'right' == g ? -1 : 1; m[c] = d * w, m[g] = s * y, m.willChange = c + ', ' + g } var E = { "x-placement": e.placement }; return e.attributes = fe({}, E, e.attributes), e.styles = fe({}, m, e.styles), e.arrowStyles = fe({}, e.offsets.arrow, e.arrowStyles), e }, gpuAcceleration: !0, x: 'bottom', y: 'right' }, applyStyle: { order: 900, enabled: !0, fn: function (e) { return j(e.instance.popper, e.styles), V(e.instance.popper, e.attributes), e.arrowElement && Object.keys(e.arrowStyles).length && j(e.arrowElement, e.arrowStyles), e }, onLoad: function (e, t, o, n, i) { var r = L(i, t, e, o.positionFixed), p = O(o.placement, r, t, e, o.modifiers.flip.boundariesElement, o.modifiers.flip.padding); return t.setAttribute('x-placement', p), j(t, { position: o.positionFixed ? 'fixed' : 'absolute' }), o }, gpuAcceleration: void 0 } } }, ue });
//# sourceMappingURL=popper.min.js.map;

!function ($) {

  $(function () {

    "use strict"; // jshint ;_;


    /* CSS TRANSITION SUPPORT (http://www.modernizr.com/)
     * ======================================================= */

    $.support.transition = (function () {

      var transitionEnd = (function () {

        var el = document.createElement('bootstrap')
          , transEndEventNames = {
               'WebkitTransition' : 'webkitTransitionEnd'
            ,  'MozTransition'    : 'transitionend'
            ,  'OTransition'      : 'oTransitionEnd'
            ,  'msTransition'     : 'MSTransitionEnd'
            ,  'transition'       : 'transitionend'
            }
          , name

        for (name in transEndEventNames){
          if (el.style[name] !== undefined) {
            return transEndEventNames[name]
          }
        }

      }())

      return transitionEnd && {
        end: transitionEnd
      }

    })()

  })

}(window.jQuery);/* ==========================================================
 * bootstrap-alert.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */


!function ($) {

  "use strict"; // jshint ;_;


 /* ALERT CLASS DEFINITION
  * ====================== */

  var dismiss = '[data-dismiss="alert"]'
    , Alert = function (el) {
        $(el).on('click', dismiss, this.close)
      }

  Alert.prototype.close = function (e) {
    var $this = $(this)
      , selector = $this.attr('data-target')
      , $parent

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') //strip for ie7
    }

    $parent = $(selector)

    e && e.preventDefault()

    $parent.length || ($parent = $this.hasClass('alert') ? $this : $this.parent())

    $parent.trigger(e = $.Event('close'))

    if (e.isDefaultPrevented()) return

    $parent.removeClass('in')

    function removeElement() {
      $parent
        .trigger('closed')
        .remove()
    }

    $.support.transition && $parent.hasClass('fade') ?
      $parent.on($.support.transition.end, removeElement) :
      removeElement()
  }


 /* ALERT PLUGIN DEFINITION
  * ======================= */

  $.fn.alert = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('alert')
      if (!data) $this.data('alert', (data = new Alert(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  $.fn.alert.Constructor = Alert


 /* ALERT DATA-API
  * ============== */

  $(function () {
    $('body').on('click.alert.data-api', dismiss, Alert.prototype.close)
  })

}(window.jQuery);/* ============================================================
 * bootstrap-button.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */


!function ($) {

  "use strict"; // jshint ;_;


 /* BUTTON PUBLIC CLASS DEFINITION
  * ============================== */

  var Button = function (element, options) {
    this.$element = $(element)
    this.options = $.extend({}, $.fn.button.defaults, options)
  }

  Button.prototype.setState = function (state) {
    var d = 'disabled'
      , $el = this.$element
      , data = $el.data()
      , val = $el.is('input') ? 'val' : 'html'

    state = state + 'Text'
    data.resetText || $el.data('resetText', $el[val]())

    $el[val](data[state] || this.options[state])

    // push to event loop to allow forms to submit
    setTimeout(function () {
      state == 'loadingText' ?
        $el.addClass(d).attr(d, d) :
        $el.removeClass(d).removeAttr(d)
    }, 0)
  }

  Button.prototype.toggle = function () {
    var $parent = this.$element.parent('[data-toggle="buttons-radio"]')

    $parent && $parent
      .find('.active')
      .removeClass('active')

    this.$element.toggleClass('active')
  }


 /* BUTTON PLUGIN DEFINITION
  * ======================== */

  $.fn.button = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('button')
        , options = typeof option == 'object' && option
      if (!data) $this.data('button', (data = new Button(this, options)))
      if (option == 'toggle') data.toggle()
      else if (option) data.setState(option)
    })
  }

  $.fn.button.defaults = {
    loadingText: 'loading...'
  }

  $.fn.button.Constructor = Button


 /* BUTTON DATA-API
  * =============== */

  $(function () {
    $('body').on('click.button.data-api', '[data-toggle^=button]', function ( e ) {
      var $btn = $(e.target)
      if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')
      $btn.button('toggle')
    })
  })

}(window.jQuery);/* ==========================================================
 * bootstrap-carousel.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#carousel
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */


!function ($) {

  "use strict"; // jshint ;_;


 /* CAROUSEL CLASS DEFINITION
  * ========================= */

  var Carousel = function (element, options) {
    this.$element = $(element)
    this.options = options
    this.options.slide && this.slide(this.options.slide)
    this.options.pause == 'hover' && this.$element
      .on('mouseenter', $.proxy(this.pause, this))
      .on('mouseleave', $.proxy(this.cycle, this))
  }

  Carousel.prototype = {

    cycle: function (e) {
      if (!e) this.paused = false
      this.options.interval
        && !this.paused
        && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))
      return this
    }

  , to: function (pos) {
      var $active = this.$element.find('.active')
        , children = $active.parent().children()
        , activePos = children.index($active)
        , that = this

      if (pos > (children.length - 1) || pos < 0) return

      if (this.sliding) {
        return this.$element.one('slid', function () {
          that.to(pos)
        })
      }

      if (activePos == pos) {
        return this.pause().cycle()
      }

      return this.slide(pos > activePos ? 'next' : 'prev', $(children[pos]))
    }

  , pause: function (e) {
      if (!e) this.paused = true
      clearInterval(this.interval)
      this.interval = null
      return this
    }

  , next: function () {
      if (this.sliding) return
      return this.slide('next')
    }

  , prev: function () {
      if (this.sliding) return
      return this.slide('prev')
    }

  , slide: function (type, next) {
      var $active = this.$element.find('.active')
        , $next = next || $active[type]()
        , isCycling = this.interval
        , direction = type == 'next' ? 'left' : 'right'
        , fallback  = type == 'next' ? 'first' : 'last'
        , that = this
        , e = $.Event('slide')

      this.sliding = true

      isCycling && this.pause()

      $next = $next.length ? $next : this.$element.find('.item')[fallback]()

      if ($next.hasClass('active')) return

      if ($.support.transition && this.$element.hasClass('slide')) {
        this.$element.trigger(e)
        if (e.isDefaultPrevented()) return
        $next.addClass(type)
        $next[0].offsetWidth // force reflow
        $active.addClass(direction)
        $next.addClass(direction)
        this.$element.one($.support.transition.end, function () {
          $next.removeClass([type, direction].join(' ')).addClass('active')
          $active.removeClass(['active', direction].join(' '))
          that.sliding = false
          setTimeout(function () { that.$element.trigger('slid') }, 0)
        })
      } else {
        this.$element.trigger(e)
        if (e.isDefaultPrevented()) return
        $active.removeClass('active')
        $next.addClass('active')
        this.sliding = false
        this.$element.trigger('slid')
      }

      isCycling && this.cycle()

      return this
    }

  }


 /* CAROUSEL PLUGIN DEFINITION
  * ========================== */

  $.fn.carousel = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('carousel')
        , options = $.extend({}, $.fn.carousel.defaults, typeof option == 'object' && option)
      if (!data) $this.data('carousel', (data = new Carousel(this, options)))
      if (typeof option == 'number') data.to(option)
      else if (typeof option == 'string' || (option = options.slide)) data[option]()
      else if (options.interval) data.cycle()
    })
  }

  $.fn.carousel.defaults = {
    interval: 5000
  , pause: 'hover'
  }

  $.fn.carousel.Constructor = Carousel


 /* CAROUSEL DATA-API
  * ================= */

  $(function () {
    $('body').on('click.carousel.data-api', '[data-slide]', function ( e ) {
      var $this = $(this), href
        , $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) //strip for ie7
        , options = !$target.data('modal') && $.extend({}, $target.data(), $this.data())
      $target.carousel(options)
      e.preventDefault()
    })
  })

}(window.jQuery);/* =============================================================
 * bootstrap-collapse.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */


!function ($) {

  "use strict"; // jshint ;_;


 /* COLLAPSE PUBLIC CLASS DEFINITION
  * ================================ */

  var Collapse = function (element, options) {
    this.$element = $(element)
    this.options = $.extend({}, $.fn.collapse.defaults, options)

    if (this.options.parent) {
      this.$parent = $(this.options.parent)
    }

    this.options.toggle && this.toggle()
  }

  Collapse.prototype = {

    constructor: Collapse

  , dimension: function () {
      var hasWidth = this.$element.hasClass('width')
      return hasWidth ? 'width' : 'height'
    }

  , show: function () {
      var dimension
        , scroll
        , actives
        , hasData

      if (this.transitioning) return

      dimension = this.dimension()
      scroll = $.camelCase(['scroll', dimension].join('-'))
      actives = this.$parent && this.$parent.find('> .accordion-group > .in')

      if (actives && actives.length) {
        hasData = actives.data('collapse')
        if (hasData && hasData.transitioning) return
        actives.collapse('hide')
        hasData || actives.data('collapse', null)
      }

      this.$element[dimension](0)
      this.transition('addClass', $.Event('show'), 'shown')
      this.$element[dimension](this.$element[0][scroll])
    }

  , hide: function () {
      var dimension
      if (this.transitioning) return
      dimension = this.dimension()
      this.reset(this.$element[dimension]())
      this.transition('removeClass', $.Event('hide'), 'hidden')
      this.$element[dimension](0)
    }

  , reset: function (size) {
      var dimension = this.dimension()

      this.$element
        .removeClass('collapse')
        [dimension](size || 'auto')
        [0].offsetWidth

      this.$element[size !== null ? 'addClass' : 'removeClass']('collapse')

      return this
    }

  , transition: function (method, startEvent, completeEvent) {
      var that = this
        , complete = function () {
            if (startEvent.type == 'show') that.reset()
            that.transitioning = 0
            that.$element.trigger(completeEvent)
          }

      this.$element.trigger(startEvent)

      if (startEvent.isDefaultPrevented()) return

      this.transitioning = 1

      this.$element[method]('in')

      $.support.transition && this.$element.hasClass('collapse') ?
        this.$element.one($.support.transition.end, complete) :
        complete()
    }

  , toggle: function () {
      this[this.$element.hasClass('in') ? 'hide' : 'show']()
    }

  }


 /* COLLAPSIBLE PLUGIN DEFINITION
  * ============================== */

  $.fn.collapse = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('collapse')
        , options = typeof option == 'object' && option
      if (!data) $this.data('collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.collapse.defaults = {
    toggle: true
  }

  $.fn.collapse.Constructor = Collapse


 /* COLLAPSIBLE DATA-API
  * ==================== */

  $(function () {
    $('body').on('click.collapse.data-api', '[data-toggle=collapse]', function ( e ) {
      var $this = $(this), href
        , target = $this.attr('data-target')
          || e.preventDefault()
          || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') //strip for ie7
        , option = $(target).data('collapse') ? 'toggle' : $this.data()
      $(target).collapse(option)
    })
  })

}(window.jQuery);/* ============================================================
 * bootstrap-dropdown.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */


!function ($) {

  "use strict"; // jshint ;_;


 /* DROPDOWN CLASS DEFINITION
  * ========================= */

  var toggle = '[data-toggle="dropdown"]'
    , Dropdown = function (element) {
        var $el = $(element).on('click.dropdown.data-api', this.toggle)
        $('html').on('click.dropdown.data-api', function () {
          $el.parent().removeClass('open')
        })
      }

  Dropdown.prototype = {

    constructor: Dropdown

  , toggle: function (e) {
      var $this = $(this)
        , $parent
        , selector
        , isActive

      if ($this.is('.disabled, :disabled')) return

      selector = $this.attr('data-target')

      if (!selector) {
        selector = $this.attr('href')
        selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') //strip for ie7
      }

      $parent = $(selector)
      $parent.length || ($parent = $this.parent())

      isActive = $parent.hasClass('open')

      clearMenus()

      if (!isActive) $parent.toggleClass('open')

      return false
    }

  }

  function clearMenus() {
    $(toggle).parent().removeClass('open')
  }


  /* DROPDOWN PLUGIN DEFINITION
   * ========================== */

  $.fn.dropdown = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('dropdown')
      if (!data) $this.data('dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  $.fn.dropdown.Constructor = Dropdown


  /* APPLY TO STANDARD DROPDOWN ELEMENTS
   * =================================== */

  $(function () {
    $('html').on('click.dropdown.data-api', clearMenus)
    $('body')
      .on('click.dropdown', '.dropdown form', function (e) { e.stopPropagation() })
      .on('click.dropdown.data-api', toggle, Dropdown.prototype.toggle)
  })

}(window.jQuery);/* =========================================================
 * bootstrap-modal.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */


!function ($) {

  "use strict"; // jshint ;_;


 /* MODAL CLASS DEFINITION
  * ====================== */

  var Modal = function (content, options) {
    this.options = options
    this.$element = $(content)
      .delegate('[data-dismiss="modal"]', 'click.dismiss.modal', $.proxy(this.hide, this))
  }

  Modal.prototype = {

      constructor: Modal

    , toggle: function () {
        return this[!this.isShown ? 'show' : 'hide']()
      }

    , show: function () {
        var that = this
          , e = $.Event('show')

        this.$element.trigger(e)

        if (this.isShown || e.isDefaultPrevented()) return

        $('body').addClass('modal-open')

        this.isShown = true

        escape.call(this)
        backdrop.call(this, function () {
          var transition = $.support.transition && that.$element.hasClass('fade')

          if (!that.$element.parent().length) {
            that.$element.appendTo(document.body) //don't move modals dom position
          }

          that.$element
            .show()

          if (transition) {
            that.$element[0].offsetWidth // force reflow
          }

          that.$element.addClass('in')

          transition ?
            that.$element.one($.support.transition.end, function () { that.$element.trigger('shown') }) :
            that.$element.trigger('shown')

        })
      }

    , hide: function (e) {
        e && e.preventDefault()

        var that = this

        e = $.Event('hide')

        this.$element.trigger(e)

        if (!this.isShown || e.isDefaultPrevented()) return

        this.isShown = false

        $('body').removeClass('modal-open')

        escape.call(this)

        this.$element.removeClass('in')

        $.support.transition && this.$element.hasClass('fade') ?
          hideWithTransition.call(this) :
          hideModal.call(this)
      }

  }


 /* MODAL PRIVATE METHODS
  * ===================== */

  function hideWithTransition() {
    var that = this
      , timeout = setTimeout(function () {
          that.$element.off($.support.transition.end)
          hideModal.call(that)
        }, 500)

    this.$element.one($.support.transition.end, function () {
      clearTimeout(timeout)
      hideModal.call(that)
    })
  }

  function hideModal(that) {
    this.$element
      .hide()
      .trigger('hidden')

    backdrop.call(this)
  }

  function backdrop(callback) {
    var that = this
      , animate = this.$element.hasClass('fade') ? 'fade' : ''

    if (this.isShown && this.options.backdrop) {
      var doAnimate = $.support.transition && animate

      this.$backdrop = $('<div class="modal-backdrop ' + animate + '" />')
        .appendTo(document.body)

      if (this.options.backdrop != 'static') {
        this.$backdrop.click($.proxy(this.hide, this))
      }

      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow

      this.$backdrop.addClass('in')

      doAnimate ?
        this.$backdrop.one($.support.transition.end, callback) :
        callback()

    } else if (!this.isShown && this.$backdrop) {
      this.$backdrop.removeClass('in')

      $.support.transition && this.$element.hasClass('fade')?
        this.$backdrop.one($.support.transition.end, $.proxy(removeBackdrop, this)) :
        removeBackdrop.call(this)

    } else if (callback) {
      callback()
    }
  }

  function removeBackdrop() {
    this.$backdrop.remove()
    this.$backdrop = null
  }

  function escape() {
    var that = this
    if (this.isShown && this.options.keyboard) {
      $(document).on('keyup.dismiss.modal', function ( e ) {
        e.which == 27 && that.hide()
      })
    } else if (!this.isShown) {
      $(document).off('keyup.dismiss.modal')
    }
  }


 /* MODAL PLUGIN DEFINITION
  * ======================= */

  $.fn.modal = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('modal')
        , options = $.extend({}, $.fn.modal.defaults, $this.data(), typeof option == 'object' && option)
      if (!data) $this.data('modal', (data = new Modal(this, options)))
      if (typeof option == 'string') data[option]()
      else if (options.show) data.show()
    })
  }

  $.fn.modal.defaults = {
      backdrop: true
    , keyboard: true
    , show: true
  }

  $.fn.modal.Constructor = Modal


 /* MODAL DATA-API
  * ============== */

  $(function () {
    $('body').on('click.modal.data-api', '[data-toggle="modal"]', function ( e ) {
      var $this = $(this), href
        , $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) //strip for ie7
        , option = $target.data('modal') ? 'toggle' : $.extend({}, $target.data(), $this.data())

      e.preventDefault()
      $target.modal(option)
    })
  })

}(window.jQuery);/* ===========================================================
 * bootstrap-tooltip.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */


!function ($) {

  "use strict"; // jshint ;_;


 /* TOOLTIP PUBLIC CLASS DEFINITION
  * =============================== */

  var Tooltip = function (element, options) {
    this.init('tooltip', element, options)
  }

  Tooltip.prototype = {

    constructor: Tooltip

  , init: function (type, element, options) {
      var eventIn
        , eventOut

      this.type = type
      this.$element = $(element)
      this.options = this.getOptions(options)
      this.enabled = true

      if (this.options.trigger != 'manual') {
        eventIn  = this.options.trigger == 'hover' ? 'mouseenter' : 'focus'
        eventOut = this.options.trigger == 'hover' ? 'mouseleave' : 'blur'
        this.$element.on(eventIn, this.options.selector, $.proxy(this.enter, this))
        this.$element.on(eventOut, this.options.selector, $.proxy(this.leave, this))
      }

      this.options.selector ?
        (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :
        this.fixTitle()
    }

  , getOptions: function (options) {
      options = $.extend({}, $.fn[this.type].defaults, options, this.$element.data())

      if (options.delay && typeof options.delay == 'number') {
        options.delay = {
          show: options.delay
        , hide: options.delay
        }
      }

      return options
    }

  , enter: function (e) {
      var self = $(e.currentTarget)[this.type](this._options).data(this.type)

      if (!self.options.delay || !self.options.delay.show) return self.show()

      clearTimeout(this.timeout)
      self.hoverState = 'in'
      this.timeout = setTimeout(function() {
        if (self.hoverState == 'in') self.show()
      }, self.options.delay.show)
    }

  , leave: function (e) {
      var self = $(e.currentTarget)[this.type](this._options).data(this.type)

      if (this.timeout) clearTimeout(this.timeout)
      if (!self.options.delay || !self.options.delay.hide) return self.hide()

      self.hoverState = 'out'
      this.timeout = setTimeout(function() {
        if (self.hoverState == 'out') self.hide()
      }, self.options.delay.hide)
    }

  , show: function () {
      var $tip
        , inside
        , pos
        , actualWidth
        , actualHeight
        , placement
        , tp

      if (this.hasContent() && this.enabled) {
        $tip = this.tip()
        this.setContent()

        if (this.options.animation) {
          $tip.addClass('fade')
        }

        placement = typeof this.options.placement == 'function' ?
          this.options.placement.call(this, $tip[0], this.$element[0]) :
          this.options.placement

        inside = /in/.test(placement)

        $tip
          .remove()
          .css({ top: 0, left: 0, display: 'block' })
          .appendTo(inside ? this.$element : document.body)

        pos = this.getPosition(inside)

        actualWidth = $tip[0].offsetWidth
        actualHeight = $tip[0].offsetHeight

        switch (inside ? placement.split(' ')[1] : placement) {
          case 'bottom':
            tp = {top: pos.top + pos.height, left: pos.left + pos.width / 2 - actualWidth / 2}
            break
          case 'top':
            tp = {top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2}
            break
          case 'left':
            tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth}
            break
          case 'right':
            tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width}
            break
        }

        $tip
          .css(tp)
          .addClass(placement)
          .addClass('in')
      }
    }

  , isHTML: function(text) {
      // html string detection logic adapted from jQuery
      return typeof text != 'string'
        || ( text.charAt(0) === "<"
          && text.charAt( text.length - 1 ) === ">"
          && text.length >= 3
        ) || /^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(text)
    }

  , setContent: function () {
      var $tip = this.tip()
        , title = this.getTitle()

      $tip.find('.tooltip-inner')[this.isHTML(title) ? 'html' : 'text'](title)
      $tip.removeClass('fade in top bottom left right')
    }

  , hide: function () {
      var that = this
        , $tip = this.tip()

      $tip.removeClass('in')

      function removeWithAnimation() {
        var timeout = setTimeout(function () {
          $tip.off($.support.transition.end).remove()
        }, 500)

        $tip.one($.support.transition.end, function () {
          clearTimeout(timeout)
          $tip.remove()
        })
      }

      $.support.transition && this.$tip.hasClass('fade') ?
        removeWithAnimation() :
        $tip.remove()
    }

  , fixTitle: function () {
      var $e = this.$element
      if ($e.attr('title') || typeof($e.attr('data-original-title')) != 'string') {
        $e.attr('data-original-title', $e.attr('title') || '').removeAttr('title')
      }
    }

  , hasContent: function () {
      return this.getTitle()
    }

  , getPosition: function (inside) {
      return $.extend({}, (inside ? {top: 0, left: 0} : this.$element.offset()), {
        width: this.$element[0].offsetWidth
      , height: this.$element[0].offsetHeight
      })
    }

  , getTitle: function () {
      var title
        , $e = this.$element
        , o = this.options

      title = $e.attr('data-original-title')
        || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)

      return title
    }

  , tip: function () {
      return this.$tip = this.$tip || $(this.options.template)
    }

  , validate: function () {
      if (!this.$element[0].parentNode) {
        this.hide()
        this.$element = null
        this.options = null
      }
    }

  , enable: function () {
      this.enabled = true
    }

  , disable: function () {
      this.enabled = false
    }

  , toggleEnabled: function () {
      this.enabled = !this.enabled
    }

  , toggle: function () {
      this[this.tip().hasClass('in') ? 'hide' : 'show']()
    }

  }


 /* TOOLTIP PLUGIN DEFINITION
  * ========================= */

  $.fn.tooltip = function ( option ) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('tooltip')
        , options = typeof option == 'object' && option
      if (!data) $this.data('tooltip', (data = new Tooltip(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.tooltip.Constructor = Tooltip

  $.fn.tooltip.defaults = {
    animation: true
  , placement: 'top'
  , selector: false
  , template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'
  , trigger: 'hover'
  , title: ''
  , delay: 0
  }

}(window.jQuery);
/* ===========================================================
 * bootstrap-popover.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#popovers
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */


!function ($) {

  "use strict"; // jshint ;_;


 /* POPOVER PUBLIC CLASS DEFINITION
  * =============================== */

  var Popover = function ( element, options ) {
    this.init('popover', element, options)
  }


  /* NOTE: POPOVER EXTENDS BOOTSTRAP-TOOLTIP.js
     ========================================== */

  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype, {

    constructor: Popover

  , setContent: function () {
      var $tip = this.tip()
        , title = this.getTitle()
        , content = this.getContent()

      $tip.find('.popover-title')[this.isHTML(title) ? 'html' : 'text'](title)
      $tip.find('.popover-content > *')[this.isHTML(content) ? 'html' : 'text'](content)

      $tip.removeClass('fade top bottom left right in')
    }

  , hasContent: function () {
      return this.getTitle() || this.getContent()
    }

  , getContent: function () {
      var content
        , $e = this.$element
        , o = this.options

      content = $e.attr('data-content')
        || (typeof o.content == 'function' ? o.content.call($e[0]) :  o.content)

      return content
    }

  , tip: function () {
      if (!this.$tip) {
        this.$tip = $(this.options.template)
      }
      return this.$tip
    }

  })


 /* POPOVER PLUGIN DEFINITION
  * ======================= */

  $.fn.popover = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('popover')
        , options = typeof option == 'object' && option
      if (!data) $this.data('popover', (data = new Popover(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.popover.Constructor = Popover

  $.fn.popover.defaults = $.extend({} , $.fn.tooltip.defaults, {
    placement: 'right'
  , content: ''
  , template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'
  })

}(window.jQuery);/* =============================================================
 * bootstrap-scrollspy.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */


!function ($) {

  "use strict"; // jshint ;_;


  /* SCROLLSPY CLASS DEFINITION
   * ========================== */

  function ScrollSpy( element, options) {
    var process = $.proxy(this.process, this)
      , $element = $(element).is('body') ? $(window) : $(element)
      , href
    this.options = $.extend({}, $.fn.scrollspy.defaults, options)
    this.$scrollElement = $element.on('scroll.scroll.data-api', process)
    this.selector = (this.options.target
      || ((href = $(element).attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) //strip for ie7
      || '') + ' .nav li > a'
    this.$body = $('body')
    this.refresh()
    this.process()
  }

  ScrollSpy.prototype = {

      constructor: ScrollSpy

    , refresh: function () {
        var self = this
          , $targets

        this.offsets = $([])
        this.targets = $([])

        $targets = this.$body
          .find(this.selector)
          .map(function () {
            var $el = $(this)
              , href = $el.data('target') || $el.attr('href')
              , $href = /^#\w/.test(href) && $(href)
            return ( $href
              && href.length
              && [[ $href.position().top, href ]] ) || null
          })
          .sort(function (a, b) { return a[0] - b[0] })
          .each(function () {
            self.offsets.push(this[0])
            self.targets.push(this[1])
          })
      }

    , process: function () {
        var scrollTop = this.$scrollElement.scrollTop() + this.options.offset
          , scrollHeight = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight
          , maxScroll = scrollHeight - this.$scrollElement.height()
          , offsets = this.offsets
          , targets = this.targets
          , activeTarget = this.activeTarget
          , i

        if (scrollTop >= maxScroll) {
          return activeTarget != (i = targets.last()[0])
            && this.activate ( i )
        }

        for (i = offsets.length; i--;) {
          activeTarget != targets[i]
            && scrollTop >= offsets[i]
            && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
            && this.activate( targets[i] )
        }
      }

    , activate: function (target) {
        var active
          , selector

        this.activeTarget = target

        $(this.selector)
          .parent('.active')
          .removeClass('active')

        selector = this.selector
          + '[data-target="' + target + '"],'
          + this.selector + '[href="' + target + '"]'

        active = $(selector)
          .parent('li')
          .addClass('active')

        if (active.parent('.dropdown-menu'))  {
          active = active.closest('li.dropdown').addClass('active')
        }

        active.trigger('activate')
      }

  }


 /* SCROLLSPY PLUGIN DEFINITION
  * =========================== */

  $.fn.scrollspy = function ( option ) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('scrollspy')
        , options = typeof option == 'object' && option
      if (!data) $this.data('scrollspy', (data = new ScrollSpy(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.scrollspy.Constructor = ScrollSpy

  $.fn.scrollspy.defaults = {
    offset: 10
  }


 /* SCROLLSPY DATA-API
  * ================== */

  $(function () {
    $('[data-spy="scroll"]').each(function () {
      var $spy = $(this)
      $spy.scrollspy($spy.data())
    })
  })

}(window.jQuery);/* ========================================================
 * bootstrap-tab.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */


!function ($) {

  "use strict"; // jshint ;_;


 /* TAB CLASS DEFINITION
  * ==================== */

  var Tab = function ( element ) {
    this.element = $(element)
  }

  Tab.prototype = {

    constructor: Tab

  , show: function () {
      var $this = this.element
        , $ul = $this.closest('ul:not(.dropdown-menu)')
        , selector = $this.attr('data-target')
        , previous
        , $target
        , e

      if (!selector) {
        selector = $this.attr('href')
        selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') //strip for ie7
      }

      if ( $this.parent('li').hasClass('active') ) return

      previous = $ul.find('.active a').last()[0]

      e = $.Event('show', {
        relatedTarget: previous
      })

      $this.trigger(e)

      if (e.isDefaultPrevented()) return

      $target = $(selector)

      this.activate($this.parent('li'), $ul)
      this.activate($target, $target.parent(), function () {
        $this.trigger({
          type: 'shown'
        , relatedTarget: previous
        })
      })
    }

  , activate: function ( element, container, callback) {
      var $active = container.find('> .active')
        , transition = callback
            && $.support.transition
            && $active.hasClass('fade')

      function next() {
        $active
          .removeClass('active')
          .find('> .dropdown-menu > .active')
          .removeClass('active')

        element.addClass('active')

        if (transition) {
          element[0].offsetWidth // reflow for transition
          element.addClass('in')
        } else {
          element.removeClass('fade')
        }

        if ( element.parent('.dropdown-menu') ) {
          element.closest('li.dropdown').addClass('active')
        }

        callback && callback()
      }

      transition ?
        $active.one($.support.transition.end, next) :
        next()

      $active.removeClass('in')
    }
  }


 /* TAB PLUGIN DEFINITION
  * ===================== */

  $.fn.tab = function ( option ) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('tab')
      if (!data) $this.data('tab', (data = new Tab(this)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.tab.Constructor = Tab


 /* TAB DATA-API
  * ============ */

  $(function () {
    $('body').on('click.tab.data-api', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
      e.preventDefault()
      $(this).tab('show')
    })
  })

}(window.jQuery);/* =============================================================
 * bootstrap-typeahead.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */


!function($){

  "use strict"; // jshint ;_;


 /* TYPEAHEAD PUBLIC CLASS DEFINITION
  * ================================= */

  var Typeahead = function (element, options) {
    this.$element = $(element)
    this.options = $.extend({}, $.fn.typeahead.defaults, options)
    this.matcher = this.options.matcher || this.matcher
    this.sorter = this.options.sorter || this.sorter
    this.highlighter = this.options.highlighter || this.highlighter
    this.updater = this.options.updater || this.updater
    this.$menu = $(this.options.menu).appendTo('body')
    this.source = this.options.source
    this.shown = false
    this.listen()
  }

  Typeahead.prototype = {

    constructor: Typeahead

  , select: function () {
      var val = this.$menu.find('.active').attr('data-value')
      this.$element
        .val(this.updater(val))
        .change()
      return this.hide()
    }

  , updater: function (item) {
      return item
    }

  , show: function () {
      var pos = $.extend({}, this.$element.offset(), {
        height: this.$element[0].offsetHeight
      })

      this.$menu.css({
        top: pos.top + pos.height
      , left: pos.left
      })

      this.$menu.show()
      this.shown = true
      return this
    }

  , hide: function () {
      this.$menu.hide()
      this.shown = false
      return this
    }

  , lookup: function (event) {
      var that = this
        , items
        , q

      this.query = this.$element.val()

      if (!this.query) {
        return this.shown ? this.hide() : this
      }

      items = $.grep(this.source, function (item) {
        return that.matcher(item)
      })

      items = this.sorter(items)

      if (!items.length) {
        return this.shown ? this.hide() : this
      }

      return this.render(items.slice(0, this.options.items)).show()
    }

  , matcher: function (item) {
      return ~item.toLowerCase().indexOf(this.query.toLowerCase())
    }

  , sorter: function (items) {
      var beginswith = []
        , caseSensitive = []
        , caseInsensitive = []
        , item

      while (item = items.shift()) {
        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(item)
        else if (~item.indexOf(this.query)) caseSensitive.push(item)
        else caseInsensitive.push(item)
      }

      return beginswith.concat(caseSensitive, caseInsensitive)
    }

  , highlighter: function (item) {
      var query = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {
        return '<strong>' + match + '</strong>'
      })
    }

  , render: function (items) {
      var that = this

      items = $(items).map(function (i, item) {
        i = $(that.options.item).attr('data-value', item)
        i.find('a').html(that.highlighter(item))
        return i[0]
      })

      items.first().addClass('active')
      this.$menu.html(items)
      return this
    }

  , next: function (event) {
      var active = this.$menu.find('.active').removeClass('active')
        , next = active.next()

      if (!next.length) {
        next = $(this.$menu.find('li')[0])
      }

      next.addClass('active')
    }

  , prev: function (event) {
      var active = this.$menu.find('.active').removeClass('active')
        , prev = active.prev()

      if (!prev.length) {
        prev = this.$menu.find('li').last()
      }

      prev.addClass('active')
    }

  , listen: function () {
      this.$element
        .on('blur',     $.proxy(this.blur, this))
        .on('keypress', $.proxy(this.keypress, this))
        .on('keyup',    $.proxy(this.keyup, this))

      if ($.browser.webkit || $.browser.msie) {
        this.$element.on('keydown', $.proxy(this.keypress, this))
      }

      this.$menu
        .on('click', $.proxy(this.click, this))
        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))
    }

  , keyup: function (e) {
      switch(e.keyCode) {
        case 40: // down arrow
        case 38: // up arrow
          break

        case 9: // tab
        case 13: // enter
          if (!this.shown) return
          this.select()
          break

        case 27: // escape
          if (!this.shown) return
          this.hide()
          break

        default:
          this.lookup()
      }

      e.stopPropagation()
      e.preventDefault()
  }

  , keypress: function (e) {
      if (!this.shown) return

      switch(e.keyCode) {
        case 9: // tab
        case 13: // enter
        case 27: // escape
          e.preventDefault()
          break

        case 38: // up arrow
          if (e.type != 'keydown') break
          e.preventDefault()
          this.prev()
          break

        case 40: // down arrow
          if (e.type != 'keydown') break
          e.preventDefault()
          this.next()
          break
      }

      e.stopPropagation()
    }

  , blur: function (e) {
      var that = this
      setTimeout(function () { that.hide() }, 150)
    }

  , click: function (e) {
      e.stopPropagation()
      e.preventDefault()
      this.select()
    }

  , mouseenter: function (e) {
      this.$menu.find('.active').removeClass('active')
      $(e.currentTarget).addClass('active')
    }

  }


  /* TYPEAHEAD PLUGIN DEFINITION
   * =========================== */

  $.fn.typeahead = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('typeahead')
        , options = typeof option == 'object' && option
      if (!data) $this.data('typeahead', (data = new Typeahead(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.typeahead.defaults = {
    source: []
  , items: 8
  , menu: '<ul class="typeahead dropdown-menu"></ul>'
  , item: '<li><a href="#"></a></li>'
  }

  $.fn.typeahead.Constructor = Typeahead


 /* TYPEAHEAD DATA-API
  * ================== */

  $(function () {
    $('body').on('focus.typeahead.data-api', '[data-provide="typeahead"]', function (e) {
      var $this = $(this)
      if ($this.data('typeahead')) return
      e.preventDefault()
      $this.typeahead($this.data())
    })
  })

}(window.jQuery);;
/*!
  * Bootstrap v4.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */
!function (t, e) { "object" == typeof exports && "undefined" != typeof module ? e(exports, require("jquery"), require("popper.js")) : "function" == typeof define && define.amd ? define(["exports", "jquery", "popper.js"], e) : e((t = t || self).bootstrap = {}, t.jQuery, t.Popper) }(this, function (t, g, u) { "use strict"; function i(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } function s(t, e, n) { return e && i(t.prototype, e), n && i(t, n), t } function l(o) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}, e = Object.keys(r); "function" == typeof Object.getOwnPropertySymbols && (e = e.concat(Object.getOwnPropertySymbols(r).filter(function (t) { return Object.getOwnPropertyDescriptor(r, t).enumerable }))), e.forEach(function (t) { var e, n, i; e = o, i = r[n = t], n in e ? Object.defineProperty(e, n, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : e[n] = i }) } return o } g = g && g.hasOwnProperty("default") ? g.default : g, u = u && u.hasOwnProperty("default") ? u.default : u; var e = "transitionend"; function n(t) { var e = this, n = !1; return g(this).one(_.TRANSITION_END, function () { n = !0 }), setTimeout(function () { n || _.triggerTransitionEnd(e) }, t), this } var _ = { TRANSITION_END: "bsTransitionEnd", getUID: function (t) { for (; t += ~~(1e6 * Math.random()), document.getElementById(t);); return t }, getSelectorFromElement: function (t) { var e = t.getAttribute("data-target"); if (!e || "#" === e) { var n = t.getAttribute("href"); e = n && "#" !== n ? n.trim() : "" } try { return document.querySelector(e) ? e : null } catch (t) { return null } }, getTransitionDurationFromElement: function (t) { if (!t) return 0; var e = g(t).css("transition-duration"), n = g(t).css("transition-delay"), i = parseFloat(e), o = parseFloat(n); return i || o ? (e = e.split(",")[0], n = n.split(",")[0], 1e3 * (parseFloat(e) + parseFloat(n))) : 0 }, reflow: function (t) { return t.offsetHeight }, triggerTransitionEnd: function (t) { g(t).trigger(e) }, supportsTransitionEnd: function () { return Boolean(e) }, isElement: function (t) { return (t[0] || t).nodeType }, typeCheckConfig: function (t, e, n) { for (var i in n) if (Object.prototype.hasOwnProperty.call(n, i)) { var o = n[i], r = e[i], s = r && _.isElement(r) ? "element" : (a = r, {}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase()); if (!new RegExp(o).test(s)) throw new Error(t.toUpperCase() + ': Option "' + i + '" provided type "' + s + '" but expected type "' + o + '".') } var a }, findShadowRoot: function (t) { if (!document.documentElement.attachShadow) return null; if ("function" != typeof t.getRootNode) return t instanceof ShadowRoot ? t : t.parentNode ? _.findShadowRoot(t.parentNode) : null; var e = t.getRootNode(); return e instanceof ShadowRoot ? e : null } }; g.fn.emulateTransitionEnd = n, g.event.special[_.TRANSITION_END] = { bindType: e, delegateType: e, handle: function (t) { if (g(t.target).is(this)) return t.handleObj.handler.apply(this, arguments) } }; var o = "alert", r = "bs.alert", a = "." + r, c = g.fn[o], h = { CLOSE: "close" + a, CLOSED: "closed" + a, CLICK_DATA_API: "click" + a + ".data-api" }, f = "alert", d = "fade", m = "show", p = function () { function i(t) { this._element = t } var t = i.prototype; return t.close = function (t) { var e = this._element; t && (e = this._getRootElement(t)), this._triggerCloseEvent(e).isDefaultPrevented() || this._removeElement(e) }, t.dispose = function () { g.removeData(this._element, r), this._element = null }, t._getRootElement = function (t) { var e = _.getSelectorFromElement(t), n = !1; return e && (n = document.querySelector(e)), n || (n = g(t).closest("." + f)[0]), n }, t._triggerCloseEvent = function (t) { var e = g.Event(h.CLOSE); return g(t).trigger(e), e }, t._removeElement = function (e) { var n = this; if (g(e).removeClass(m), g(e).hasClass(d)) { var t = _.getTransitionDurationFromElement(e); g(e).one(_.TRANSITION_END, function (t) { return n._destroyElement(e, t) }).emulateTransitionEnd(t) } else this._destroyElement(e) }, t._destroyElement = function (t) { g(t).detach().trigger(h.CLOSED).remove() }, i._jQueryInterface = function (n) { return this.each(function () { var t = g(this), e = t.data(r); e || (e = new i(this), t.data(r, e)), "close" === n && e[n](this) }) }, i._handleDismiss = function (e) { return function (t) { t && t.preventDefault(), e.close(this) } }, s(i, null, [{ key: "VERSION", get: function () { return "4.3.1" } }]), i }(); g(document).on(h.CLICK_DATA_API, '[data-dismiss="alert"]', p._handleDismiss(new p)), g.fn[o] = p._jQueryInterface, g.fn[o].Constructor = p, g.fn[o].noConflict = function () { return g.fn[o] = c, p._jQueryInterface }; var v = "button", y = "bs.button", E = "." + y, C = ".data-api", T = g.fn[v], S = "active", b = "btn", I = "focus", D = '[data-toggle^="button"]', w = '[data-toggle="buttons"]', A = 'input:not([type="hidden"])', N = ".active", O = ".btn", k = { CLICK_DATA_API: "click" + E + C, FOCUS_BLUR_DATA_API: "focus" + E + C + " blur" + E + C }, P = function () { function n(t) { this._element = t } var t = n.prototype; return t.toggle = function () { var t = !0, e = !0, n = g(this._element).closest(w)[0]; if (n) { var i = this._element.querySelector(A); if (i) { if ("radio" === i.type) if (i.checked && this._element.classList.contains(S)) t = !1; else { var o = n.querySelector(N); o && g(o).removeClass(S) } if (t) { if (i.hasAttribute("disabled") || n.hasAttribute("disabled") || i.classList.contains("disabled") || n.classList.contains("disabled")) return; i.checked = !this._element.classList.contains(S), g(i).trigger("change") } i.focus(), e = !1 } } e && this._element.setAttribute("aria-pressed", !this._element.classList.contains(S)), t && g(this._element).toggleClass(S) }, t.dispose = function () { g.removeData(this._element, y), this._element = null }, n._jQueryInterface = function (e) { return this.each(function () { var t = g(this).data(y); t || (t = new n(this), g(this).data(y, t)), "toggle" === e && t[e]() }) }, s(n, null, [{ key: "VERSION", get: function () { return "4.3.1" } }]), n }(); g(document).on(k.CLICK_DATA_API, D, function (t) { t.preventDefault(); var e = t.target; g(e).hasClass(b) || (e = g(e).closest(O)), P._jQueryInterface.call(g(e), "toggle") }).on(k.FOCUS_BLUR_DATA_API, D, function (t) { var e = g(t.target).closest(O)[0]; g(e).toggleClass(I, /^focus(in)?$/.test(t.type)) }), g.fn[v] = P._jQueryInterface, g.fn[v].Constructor = P, g.fn[v].noConflict = function () { return g.fn[v] = T, P._jQueryInterface }; var L = "carousel", j = "bs.carousel", H = "." + j, R = ".data-api", x = g.fn[L], F = { interval: 5e3, keyboard: !0, slide: !1, pause: "hover", wrap: !0, touch: !0 }, U = { interval: "(number|boolean)", keyboard: "boolean", slide: "(boolean|string)", pause: "(string|boolean)", wrap: "boolean", touch: "boolean" }, W = "next", q = "prev", M = "left", K = "right", Q = { SLIDE: "slide" + H, SLID: "slid" + H, KEYDOWN: "keydown" + H, MOUSEENTER: "mouseenter" + H, MOUSELEAVE: "mouseleave" + H, TOUCHSTART: "touchstart" + H, TOUCHMOVE: "touchmove" + H, TOUCHEND: "touchend" + H, POINTERDOWN: "pointerdown" + H, POINTERUP: "pointerup" + H, DRAG_START: "dragstart" + H, LOAD_DATA_API: "load" + H + R, CLICK_DATA_API: "click" + H + R }, B = "carousel", V = "active", Y = "slide", z = "carousel-item-right", X = "carousel-item-left", $ = "carousel-item-next", G = "carousel-item-prev", J = "pointer-event", Z = ".active", tt = ".active.carousel-item", et = ".carousel-item", nt = ".carousel-item img", it = ".carousel-item-next, .carousel-item-prev", ot = ".carousel-indicators", rt = "[data-slide], [data-slide-to]", st = '[data-ride="carousel"]', at = { TOUCH: "touch", PEN: "pen" }, lt = function () { function r(t, e) { this._items = null, this._interval = null, this._activeElement = null, this._isPaused = !1, this._isSliding = !1, this.touchTimeout = null, this.touchStartX = 0, this.touchDeltaX = 0, this._config = this._getConfig(e), this._element = t, this._indicatorsElement = this._element.querySelector(ot), this._touchSupported = "ontouchstart" in document.documentElement || 0 < navigator.maxTouchPoints, this._pointerEvent = Boolean(window.PointerEvent || window.MSPointerEvent), this._addEventListeners() } var t = r.prototype; return t.next = function () { this._isSliding || this._slide(W) }, t.nextWhenVisible = function () { !document.hidden && g(this._element).is(":visible") && "hidden" !== g(this._element).css("visibility") && this.next() }, t.prev = function () { this._isSliding || this._slide(q) }, t.pause = function (t) { t || (this._isPaused = !0), this._element.querySelector(it) && (_.triggerTransitionEnd(this._element), this.cycle(!0)), clearInterval(this._interval), this._interval = null }, t.cycle = function (t) { t || (this._isPaused = !1), this._interval && (clearInterval(this._interval), this._interval = null), this._config.interval && !this._isPaused && (this._interval = setInterval((document.visibilityState ? this.nextWhenVisible : this.next).bind(this), this._config.interval)) }, t.to = function (t) { var e = this; this._activeElement = this._element.querySelector(tt); var n = this._getItemIndex(this._activeElement); if (!(t > this._items.length - 1 || t < 0)) if (this._isSliding) g(this._element).one(Q.SLID, function () { return e.to(t) }); else { if (n === t) return this.pause(), void this.cycle(); var i = n < t ? W : q; this._slide(i, this._items[t]) } }, t.dispose = function () { g(this._element).off(H), g.removeData(this._element, j), this._items = null, this._config = null, this._element = null, this._interval = null, this._isPaused = null, this._isSliding = null, this._activeElement = null, this._indicatorsElement = null }, t._getConfig = function (t) { return t = l({}, F, t), _.typeCheckConfig(L, t, U), t }, t._handleSwipe = function () { var t = Math.abs(this.touchDeltaX); if (!(t <= 40)) { var e = t / this.touchDeltaX; 0 < e && this.prev(), e < 0 && this.next() } }, t._addEventListeners = function () { var e = this; this._config.keyboard && g(this._element).on(Q.KEYDOWN, function (t) { return e._keydown(t) }), "hover" === this._config.pause && g(this._element).on(Q.MOUSEENTER, function (t) { return e.pause(t) }).on(Q.MOUSELEAVE, function (t) { return e.cycle(t) }), this._config.touch && this._addTouchEventListeners() }, t._addTouchEventListeners = function () { var n = this; if (this._touchSupported) { var e = function (t) { n._pointerEvent && at[t.originalEvent.pointerType.toUpperCase()] ? n.touchStartX = t.originalEvent.clientX : n._pointerEvent || (n.touchStartX = t.originalEvent.touches[0].clientX) }, i = function (t) { n._pointerEvent && at[t.originalEvent.pointerType.toUpperCase()] && (n.touchDeltaX = t.originalEvent.clientX - n.touchStartX), n._handleSwipe(), "hover" === n._config.pause && (n.pause(), n.touchTimeout && clearTimeout(n.touchTimeout), n.touchTimeout = setTimeout(function (t) { return n.cycle(t) }, 500 + n._config.interval)) }; g(this._element.querySelectorAll(nt)).on(Q.DRAG_START, function (t) { return t.preventDefault() }), this._pointerEvent ? (g(this._element).on(Q.POINTERDOWN, function (t) { return e(t) }), g(this._element).on(Q.POINTERUP, function (t) { return i(t) }), this._element.classList.add(J)) : (g(this._element).on(Q.TOUCHSTART, function (t) { return e(t) }), g(this._element).on(Q.TOUCHMOVE, function (t) { var e; (e = t).originalEvent.touches && 1 < e.originalEvent.touches.length ? n.touchDeltaX = 0 : n.touchDeltaX = e.originalEvent.touches[0].clientX - n.touchStartX }), g(this._element).on(Q.TOUCHEND, function (t) { return i(t) })) } }, t._keydown = function (t) { if (!/input|textarea/i.test(t.target.tagName)) switch (t.which) { case 37: t.preventDefault(), this.prev(); break; case 39: t.preventDefault(), this.next() } }, t._getItemIndex = function (t) { return this._items = t && t.parentNode ? [].slice.call(t.parentNode.querySelectorAll(et)) : [], this._items.indexOf(t) }, t._getItemByDirection = function (t, e) { var n = t === W, i = t === q, o = this._getItemIndex(e), r = this._items.length - 1; if ((i && 0 === o || n && o === r) && !this._config.wrap) return e; var s = (o + (t === q ? -1 : 1)) % this._items.length; return -1 === s ? this._items[this._items.length - 1] : this._items[s] }, t._triggerSlideEvent = function (t, e) { var n = this._getItemIndex(t), i = this._getItemIndex(this._element.querySelector(tt)), o = g.Event(Q.SLIDE, { relatedTarget: t, direction: e, from: i, to: n }); return g(this._element).trigger(o), o }, t._setActiveIndicatorElement = function (t) { if (this._indicatorsElement) { var e = [].slice.call(this._indicatorsElement.querySelectorAll(Z)); g(e).removeClass(V); var n = this._indicatorsElement.children[this._getItemIndex(t)]; n && g(n).addClass(V) } }, t._slide = function (t, e) { var n, i, o, r = this, s = this._element.querySelector(tt), a = this._getItemIndex(s), l = e || s && this._getItemByDirection(t, s), c = this._getItemIndex(l), h = Boolean(this._interval); if (o = t === W ? (n = X, i = $, M) : (n = z, i = G, K), l && g(l).hasClass(V)) this._isSliding = !1; else if (!this._triggerSlideEvent(l, o).isDefaultPrevented() && s && l) { this._isSliding = !0, h && this.pause(), this._setActiveIndicatorElement(l); var u = g.Event(Q.SLID, { relatedTarget: l, direction: o, from: a, to: c }); if (g(this._element).hasClass(Y)) { g(l).addClass(i), _.reflow(l), g(s).addClass(n), g(l).addClass(n); var f = parseInt(l.getAttribute("data-interval"), 10); this._config.interval = f ? (this._config.defaultInterval = this._config.defaultInterval || this._config.interval, f) : this._config.defaultInterval || this._config.interval; var d = _.getTransitionDurationFromElement(s); g(s).one(_.TRANSITION_END, function () { g(l).removeClass(n + " " + i).addClass(V), g(s).removeClass(V + " " + i + " " + n), r._isSliding = !1, setTimeout(function () { return g(r._element).trigger(u) }, 0) }).emulateTransitionEnd(d) } else g(s).removeClass(V), g(l).addClass(V), this._isSliding = !1, g(this._element).trigger(u); h && this.cycle() } }, r._jQueryInterface = function (i) { return this.each(function () { var t = g(this).data(j), e = l({}, F, g(this).data()); "object" == typeof i && (e = l({}, e, i)); var n = "string" == typeof i ? i : e.slide; if (t || (t = new r(this, e), g(this).data(j, t)), "number" == typeof i) t.to(i); else if ("string" == typeof n) { if ("undefined" == typeof t[n]) throw new TypeError('No method named "' + n + '"'); t[n]() } else e.interval && e.ride && (t.pause(), t.cycle()) }) }, r._dataApiClickHandler = function (t) { var e = _.getSelectorFromElement(this); if (e) { var n = g(e)[0]; if (n && g(n).hasClass(B)) { var i = l({}, g(n).data(), g(this).data()), o = this.getAttribute("data-slide-to"); o && (i.interval = !1), r._jQueryInterface.call(g(n), i), o && g(n).data(j).to(o), t.preventDefault() } } }, s(r, null, [{ key: "VERSION", get: function () { return "4.3.1" } }, { key: "Default", get: function () { return F } }]), r }(); g(document).on(Q.CLICK_DATA_API, rt, lt._dataApiClickHandler), g(window).on(Q.LOAD_DATA_API, function () { for (var t = [].slice.call(document.querySelectorAll(st)), e = 0, n = t.length; e < n; e++) { var i = g(t[e]); lt._jQueryInterface.call(i, i.data()) } }), g.fn[L] = lt._jQueryInterface, g.fn[L].Constructor = lt, g.fn[L].noConflict = function () { return g.fn[L] = x, lt._jQueryInterface }; var ct = "collapse", ht = "bs.collapse", ut = "." + ht, ft = g.fn[ct], dt = { toggle: !0, parent: "" }, gt = { toggle: "boolean", parent: "(string|element)" }, _t = { SHOW: "show" + ut, SHOWN: "shown" + ut, HIDE: "hide" + ut, HIDDEN: "hidden" + ut, CLICK_DATA_API: "click" + ut + ".data-api" }, mt = "show", pt = "collapse", vt = "collapsing", yt = "collapsed", Et = "width", Ct = "height", Tt = ".show, .collapsing", St = '[data-toggle="collapse"]', bt = function () { function a(e, t) { this._isTransitioning = !1, this._element = e, this._config = this._getConfig(t), this._triggerArray = [].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#' + e.id + '"],[data-toggle="collapse"][data-target="#' + e.id + '"]')); for (var n = [].slice.call(document.querySelectorAll(St)), i = 0, o = n.length; i < o; i++) { var r = n[i], s = _.getSelectorFromElement(r), a = [].slice.call(document.querySelectorAll(s)).filter(function (t) { return t === e }); null !== s && 0 < a.length && (this._selector = s, this._triggerArray.push(r)) } this._parent = this._config.parent ? this._getParent() : null, this._config.parent || this._addAriaAndCollapsedClass(this._element, this._triggerArray), this._config.toggle && this.toggle() } var t = a.prototype; return t.toggle = function () { g(this._element).hasClass(mt) ? this.hide() : this.show() }, t.show = function () { var t, e, n = this; if (!this._isTransitioning && !g(this._element).hasClass(mt) && (this._parent && 0 === (t = [].slice.call(this._parent.querySelectorAll(Tt)).filter(function (t) { return "string" == typeof n._config.parent ? t.getAttribute("data-parent") === n._config.parent : t.classList.contains(pt) })).length && (t = null), !(t && (e = g(t).not(this._selector).data(ht)) && e._isTransitioning))) { var i = g.Event(_t.SHOW); if (g(this._element).trigger(i), !i.isDefaultPrevented()) { t && (a._jQueryInterface.call(g(t).not(this._selector), "hide"), e || g(t).data(ht, null)); var o = this._getDimension(); g(this._element).removeClass(pt).addClass(vt), this._element.style[o] = 0, this._triggerArray.length && g(this._triggerArray).removeClass(yt).attr("aria-expanded", !0), this.setTransitioning(!0); var r = "scroll" + (o[0].toUpperCase() + o.slice(1)), s = _.getTransitionDurationFromElement(this._element); g(this._element).one(_.TRANSITION_END, function () { g(n._element).removeClass(vt).addClass(pt).addClass(mt), n._element.style[o] = "", n.setTransitioning(!1), g(n._element).trigger(_t.SHOWN) }).emulateTransitionEnd(s), this._element.style[o] = this._element[r] + "px" } } }, t.hide = function () { var t = this; if (!this._isTransitioning && g(this._element).hasClass(mt)) { var e = g.Event(_t.HIDE); if (g(this._element).trigger(e), !e.isDefaultPrevented()) { var n = this._getDimension(); this._element.style[n] = this._element.getBoundingClientRect()[n] + "px", _.reflow(this._element), g(this._element).addClass(vt).removeClass(pt).removeClass(mt); var i = this._triggerArray.length; if (0 < i) for (var o = 0; o < i; o++) { var r = this._triggerArray[o], s = _.getSelectorFromElement(r); if (null !== s) g([].slice.call(document.querySelectorAll(s))).hasClass(mt) || g(r).addClass(yt).attr("aria-expanded", !1) } this.setTransitioning(!0); this._element.style[n] = ""; var a = _.getTransitionDurationFromElement(this._element); g(this._element).one(_.TRANSITION_END, function () { t.setTransitioning(!1), g(t._element).removeClass(vt).addClass(pt).trigger(_t.HIDDEN) }).emulateTransitionEnd(a) } } }, t.setTransitioning = function (t) { this._isTransitioning = t }, t.dispose = function () { g.removeData(this._element, ht), this._config = null, this._parent = null, this._element = null, this._triggerArray = null, this._isTransitioning = null }, t._getConfig = function (t) { return (t = l({}, dt, t)).toggle = Boolean(t.toggle), _.typeCheckConfig(ct, t, gt), t }, t._getDimension = function () { return g(this._element).hasClass(Et) ? Et : Ct }, t._getParent = function () { var t, n = this; _.isElement(this._config.parent) ? (t = this._config.parent, "undefined" != typeof this._config.parent.jquery && (t = this._config.parent[0])) : t = document.querySelector(this._config.parent); var e = '[data-toggle="collapse"][data-parent="' + this._config.parent + '"]', i = [].slice.call(t.querySelectorAll(e)); return g(i).each(function (t, e) { n._addAriaAndCollapsedClass(a._getTargetFromElement(e), [e]) }), t }, t._addAriaAndCollapsedClass = function (t, e) { var n = g(t).hasClass(mt); e.length && g(e).toggleClass(yt, !n).attr("aria-expanded", n) }, a._getTargetFromElement = function (t) { var e = _.getSelectorFromElement(t); return e ? document.querySelector(e) : null }, a._jQueryInterface = function (i) { return this.each(function () { var t = g(this), e = t.data(ht), n = l({}, dt, t.data(), "object" == typeof i && i ? i : {}); if (!e && n.toggle && /show|hide/.test(i) && (n.toggle = !1), e || (e = new a(this, n), t.data(ht, e)), "string" == typeof i) { if ("undefined" == typeof e[i]) throw new TypeError('No method named "' + i + '"'); e[i]() } }) }, s(a, null, [{ key: "VERSION", get: function () { return "4.3.1" } }, { key: "Default", get: function () { return dt } }]), a }(); g(document).on(_t.CLICK_DATA_API, St, function (t) { "A" === t.currentTarget.tagName && t.preventDefault(); var n = g(this), e = _.getSelectorFromElement(this), i = [].slice.call(document.querySelectorAll(e)); g(i).each(function () { var t = g(this), e = t.data(ht) ? "toggle" : n.data(); bt._jQueryInterface.call(t, e) }) }), g.fn[ct] = bt._jQueryInterface, g.fn[ct].Constructor = bt, g.fn[ct].noConflict = function () { return g.fn[ct] = ft, bt._jQueryInterface }; var It = "dropdown", Dt = "bs.dropdown", wt = "." + Dt, At = ".data-api", Nt = g.fn[It], Ot = new RegExp("38|40|27"), kt = { HIDE: "hide" + wt, HIDDEN: "hidden" + wt, SHOW: "show" + wt, SHOWN: "shown" + wt, CLICK: "click" + wt, CLICK_DATA_API: "click" + wt + At, KEYDOWN_DATA_API: "keydown" + wt + At, KEYUP_DATA_API: "keyup" + wt + At }, Pt = "disabled", Lt = "show", jt = "dropup", Ht = "dropright", Rt = "dropleft", xt = "dropdown-menu-right", Ft = "position-static", Ut = '[data-toggle="dropdown"]', Wt = ".dropdown form", qt = ".dropdown-menu", Mt = ".navbar-nav", Kt = ".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)", Qt = "top-start", Bt = "top-end", Vt = "bottom-start", Yt = "bottom-end", zt = "right-start", Xt = "left-start", $t = { offset: 0, flip: !0, boundary: "scrollParent", reference: "toggle", display: "dynamic" }, Gt = { offset: "(number|string|function)", flip: "boolean", boundary: "(string|element)", reference: "(string|element)", display: "string" }, Jt = function () { function c(t, e) { this._element = t, this._popper = null, this._config = this._getConfig(e), this._menu = this._getMenuElement(), this._inNavbar = this._detectNavbar(), this._addEventListeners() } var t = c.prototype; return t.toggle = function () { if (!this._element.disabled && !g(this._element).hasClass(Pt)) { var t = c._getParentFromElement(this._element), e = g(this._menu).hasClass(Lt); if (c._clearMenus(), !e) { var n = { relatedTarget: this._element }, i = g.Event(kt.SHOW, n); if (g(t).trigger(i), !i.isDefaultPrevented()) { if (!this._inNavbar) { if ("undefined" == typeof u) throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)"); var o = this._element; "parent" === this._config.reference ? o = t : _.isElement(this._config.reference) && (o = this._config.reference, "undefined" != typeof this._config.reference.jquery && (o = this._config.reference[0])), "scrollParent" !== this._config.boundary && g(t).addClass(Ft), this._popper = new u(o, this._menu, this._getPopperConfig()) } "ontouchstart" in document.documentElement && 0 === g(t).closest(Mt).length && g(document.body).children().on("mouseover", null, g.noop), this._element.focus(), this._element.setAttribute("aria-expanded", !0), g(this._menu).toggleClass(Lt), g(t).toggleClass(Lt).trigger(g.Event(kt.SHOWN, n)) } } } }, t.show = function () { if (!(this._element.disabled || g(this._element).hasClass(Pt) || g(this._menu).hasClass(Lt))) { var t = { relatedTarget: this._element }, e = g.Event(kt.SHOW, t), n = c._getParentFromElement(this._element); g(n).trigger(e), e.isDefaultPrevented() || (g(this._menu).toggleClass(Lt), g(n).toggleClass(Lt).trigger(g.Event(kt.SHOWN, t))) } }, t.hide = function () { if (!this._element.disabled && !g(this._element).hasClass(Pt) && g(this._menu).hasClass(Lt)) { var t = { relatedTarget: this._element }, e = g.Event(kt.HIDE, t), n = c._getParentFromElement(this._element); g(n).trigger(e), e.isDefaultPrevented() || (g(this._menu).toggleClass(Lt), g(n).toggleClass(Lt).trigger(g.Event(kt.HIDDEN, t))) } }, t.dispose = function () { g.removeData(this._element, Dt), g(this._element).off(wt), this._element = null, (this._menu = null) !== this._popper && (this._popper.destroy(), this._popper = null) }, t.update = function () { this._inNavbar = this._detectNavbar(), null !== this._popper && this._popper.scheduleUpdate() }, t._addEventListeners = function () { var e = this; g(this._element).on(kt.CLICK, function (t) { t.preventDefault(), t.stopPropagation(), e.toggle() }) }, t._getConfig = function (t) { return t = l({}, this.constructor.Default, g(this._element).data(), t), _.typeCheckConfig(It, t, this.constructor.DefaultType), t }, t._getMenuElement = function () { if (!this._menu) { var t = c._getParentFromElement(this._element); t && (this._menu = t.querySelector(qt)) } return this._menu }, t._getPlacement = function () { var t = g(this._element.parentNode), e = Vt; return t.hasClass(jt) ? (e = Qt, g(this._menu).hasClass(xt) && (e = Bt)) : t.hasClass(Ht) ? e = zt : t.hasClass(Rt) ? e = Xt : g(this._menu).hasClass(xt) && (e = Yt), e }, t._detectNavbar = function () { return 0 < g(this._element).closest(".navbar").length }, t._getOffset = function () { var e = this, t = {}; return "function" == typeof this._config.offset ? t.fn = function (t) { return t.offsets = l({}, t.offsets, e._config.offset(t.offsets, e._element) || {}), t } : t.offset = this._config.offset, t }, t._getPopperConfig = function () { var t = { placement: this._getPlacement(), modifiers: { offset: this._getOffset(), flip: { enabled: this._config.flip }, preventOverflow: { boundariesElement: this._config.boundary } } }; return "static" === this._config.display && (t.modifiers.applyStyle = { enabled: !1 }), t }, c._jQueryInterface = function (e) { return this.each(function () { var t = g(this).data(Dt); if (t || (t = new c(this, "object" == typeof e ? e : null), g(this).data(Dt, t)), "string" == typeof e) { if ("undefined" == typeof t[e]) throw new TypeError('No method named "' + e + '"'); t[e]() } }) }, c._clearMenus = function (t) { if (!t || 3 !== t.which && ("keyup" !== t.type || 9 === t.which)) for (var e = [].slice.call(document.querySelectorAll(Ut)), n = 0, i = e.length; n < i; n++) { var o = c._getParentFromElement(e[n]), r = g(e[n]).data(Dt), s = { relatedTarget: e[n] }; if (t && "click" === t.type && (s.clickEvent = t), r) { var a = r._menu; if (g(o).hasClass(Lt) && !(t && ("click" === t.type && /input|textarea/i.test(t.target.tagName) || "keyup" === t.type && 9 === t.which) && g.contains(o, t.target))) { var l = g.Event(kt.HIDE, s); g(o).trigger(l), l.isDefaultPrevented() || ("ontouchstart" in document.documentElement && g(document.body).children().off("mouseover", null, g.noop), e[n].setAttribute("aria-expanded", "false"), g(a).removeClass(Lt), g(o).removeClass(Lt).trigger(g.Event(kt.HIDDEN, s))) } } } }, c._getParentFromElement = function (t) { var e, n = _.getSelectorFromElement(t); return n && (e = document.querySelector(n)), e || t.parentNode }, c._dataApiKeydownHandler = function (t) { if ((/input|textarea/i.test(t.target.tagName) ? !(32 === t.which || 27 !== t.which && (40 !== t.which && 38 !== t.which || g(t.target).closest(qt).length)) : Ot.test(t.which)) && (t.preventDefault(), t.stopPropagation(), !this.disabled && !g(this).hasClass(Pt))) { var e = c._getParentFromElement(this), n = g(e).hasClass(Lt); if (n && (!n || 27 !== t.which && 32 !== t.which)) { var i = [].slice.call(e.querySelectorAll(Kt)); if (0 !== i.length) { var o = i.indexOf(t.target); 38 === t.which && 0 < o && o-- , 40 === t.which && o < i.length - 1 && o++ , o < 0 && (o = 0), i[o].focus() } } else { if (27 === t.which) { var r = e.querySelector(Ut); g(r).trigger("focus") } g(this).trigger("click") } } }, s(c, null, [{ key: "VERSION", get: function () { return "4.3.1" } }, { key: "Default", get: function () { return $t } }, { key: "DefaultType", get: function () { return Gt } }]), c }(); g(document).on(kt.KEYDOWN_DATA_API, Ut, Jt._dataApiKeydownHandler).on(kt.KEYDOWN_DATA_API, qt, Jt._dataApiKeydownHandler).on(kt.CLICK_DATA_API + " " + kt.KEYUP_DATA_API, Jt._clearMenus).on(kt.CLICK_DATA_API, Ut, function (t) { t.preventDefault(), t.stopPropagation(), Jt._jQueryInterface.call(g(this), "toggle") }).on(kt.CLICK_DATA_API, Wt, function (t) { t.stopPropagation() }), g.fn[It] = Jt._jQueryInterface, g.fn[It].Constructor = Jt, g.fn[It].noConflict = function () { return g.fn[It] = Nt, Jt._jQueryInterface }; var Zt = "modal", te = "bs.modal", ee = "." + te, ne = g.fn[Zt], ie = { backdrop: !0, keyboard: !0, focus: !0, show: !0 }, oe = { backdrop: "(boolean|string)", keyboard: "boolean", focus: "boolean", show: "boolean" }, re = { HIDE: "hide" + ee, HIDDEN: "hidden" + ee, SHOW: "show" + ee, SHOWN: "shown" + ee, FOCUSIN: "focusin" + ee, RESIZE: "resize" + ee, CLICK_DISMISS: "click.dismiss" + ee, KEYDOWN_DISMISS: "keydown.dismiss" + ee, MOUSEUP_DISMISS: "mouseup.dismiss" + ee, MOUSEDOWN_DISMISS: "mousedown.dismiss" + ee, CLICK_DATA_API: "click" + ee + ".data-api" }, se = "modal-dialog-scrollable", ae = "modal-scrollbar-measure", le = "modal-backdrop", ce = "modal-open", he = "fade", ue = "show", fe = ".modal-dialog", de = ".modal-body", ge = '[data-toggle="modal"]', _e = '[data-dismiss="modal"]', me = ".fixed-top, .fixed-bottom, .is-fixed, .sticky-top", pe = ".sticky-top", ve = function () { function o(t, e) { this._config = this._getConfig(e), this._element = t, this._dialog = t.querySelector(fe), this._backdrop = null, this._isShown = !1, this._isBodyOverflowing = !1, this._ignoreBackdropClick = !1, this._isTransitioning = !1, this._scrollbarWidth = 0 } var t = o.prototype; return t.toggle = function (t) { return this._isShown ? this.hide() : this.show(t) }, t.show = function (t) { var e = this; if (!this._isShown && !this._isTransitioning) { g(this._element).hasClass(he) && (this._isTransitioning = !0); var n = g.Event(re.SHOW, { relatedTarget: t }); g(this._element).trigger(n), this._isShown || n.isDefaultPrevented() || (this._isShown = !0, this._checkScrollbar(), this._setScrollbar(), this._adjustDialog(), this._setEscapeEvent(), this._setResizeEvent(), g(this._element).on(re.CLICK_DISMISS, _e, function (t) { return e.hide(t) }), g(this._dialog).on(re.MOUSEDOWN_DISMISS, function () { g(e._element).one(re.MOUSEUP_DISMISS, function (t) { g(t.target).is(e._element) && (e._ignoreBackdropClick = !0) }) }), this._showBackdrop(function () { return e._showElement(t) })) } }, t.hide = function (t) { var e = this; if (t && t.preventDefault(), this._isShown && !this._isTransitioning) { var n = g.Event(re.HIDE); if (g(this._element).trigger(n), this._isShown && !n.isDefaultPrevented()) { this._isShown = !1; var i = g(this._element).hasClass(he); if (i && (this._isTransitioning = !0), this._setEscapeEvent(), this._setResizeEvent(), g(document).off(re.FOCUSIN), g(this._element).removeClass(ue), g(this._element).off(re.CLICK_DISMISS), g(this._dialog).off(re.MOUSEDOWN_DISMISS), i) { var o = _.getTransitionDurationFromElement(this._element); g(this._element).one(_.TRANSITION_END, function (t) { return e._hideModal(t) }).emulateTransitionEnd(o) } else this._hideModal() } } }, t.dispose = function () { [window, this._element, this._dialog].forEach(function (t) { return g(t).off(ee) }), g(document).off(re.FOCUSIN), g.removeData(this._element, te), this._config = null, this._element = null, this._dialog = null, this._backdrop = null, this._isShown = null, this._isBodyOverflowing = null, this._ignoreBackdropClick = null, this._isTransitioning = null, this._scrollbarWidth = null }, t.handleUpdate = function () { this._adjustDialog() }, t._getConfig = function (t) { return t = l({}, ie, t), _.typeCheckConfig(Zt, t, oe), t }, t._showElement = function (t) { var e = this, n = g(this._element).hasClass(he); this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE || document.body.appendChild(this._element), this._element.style.display = "block", this._element.removeAttribute("aria-hidden"), this._element.setAttribute("aria-modal", !0), g(this._dialog).hasClass(se) ? this._dialog.querySelector(de).scrollTop = 0 : this._element.scrollTop = 0, n && _.reflow(this._element), g(this._element).addClass(ue), this._config.focus && this._enforceFocus(); var i = g.Event(re.SHOWN, { relatedTarget: t }), o = function () { e._config.focus && e._element.focus(), e._isTransitioning = !1, g(e._element).trigger(i) }; if (n) { var r = _.getTransitionDurationFromElement(this._dialog); g(this._dialog).one(_.TRANSITION_END, o).emulateTransitionEnd(r) } else o() }, t._enforceFocus = function () { var e = this; g(document).off(re.FOCUSIN).on(re.FOCUSIN, function (t) { document !== t.target && e._element !== t.target && 0 === g(e._element).has(t.target).length && e._element.focus() }) }, t._setEscapeEvent = function () { var e = this; this._isShown && this._config.keyboard ? g(this._element).on(re.KEYDOWN_DISMISS, function (t) { 27 === t.which && (t.preventDefault(), e.hide()) }) : this._isShown || g(this._element).off(re.KEYDOWN_DISMISS) }, t._setResizeEvent = function () { var e = this; this._isShown ? g(window).on(re.RESIZE, function (t) { return e.handleUpdate(t) }) : g(window).off(re.RESIZE) }, t._hideModal = function () { var t = this; this._element.style.display = "none", this._element.setAttribute("aria-hidden", !0), this._element.removeAttribute("aria-modal"), this._isTransitioning = !1, this._showBackdrop(function () { g(document.body).removeClass(ce), t._resetAdjustments(), t._resetScrollbar(), g(t._element).trigger(re.HIDDEN) }) }, t._removeBackdrop = function () { this._backdrop && (g(this._backdrop).remove(), this._backdrop = null) }, t._showBackdrop = function (t) { var e = this, n = g(this._element).hasClass(he) ? he : ""; if (this._isShown && this._config.backdrop) { if (this._backdrop = document.createElement("div"), this._backdrop.className = le, n && this._backdrop.classList.add(n), g(this._backdrop).appendTo(document.body), g(this._element).on(re.CLICK_DISMISS, function (t) { e._ignoreBackdropClick ? e._ignoreBackdropClick = !1 : t.target === t.currentTarget && ("static" === e._config.backdrop ? e._element.focus() : e.hide()) }), n && _.reflow(this._backdrop), g(this._backdrop).addClass(ue), !t) return; if (!n) return void t(); var i = _.getTransitionDurationFromElement(this._backdrop); g(this._backdrop).one(_.TRANSITION_END, t).emulateTransitionEnd(i) } else if (!this._isShown && this._backdrop) { g(this._backdrop).removeClass(ue); var o = function () { e._removeBackdrop(), t && t() }; if (g(this._element).hasClass(he)) { var r = _.getTransitionDurationFromElement(this._backdrop); g(this._backdrop).one(_.TRANSITION_END, o).emulateTransitionEnd(r) } else o() } else t && t() }, t._adjustDialog = function () { var t = this._element.scrollHeight > document.documentElement.clientHeight; !this._isBodyOverflowing && t && (this._element.style.paddingLeft = this._scrollbarWidth + "px"), this._isBodyOverflowing && !t && (this._element.style.paddingRight = this._scrollbarWidth + "px") }, t._resetAdjustments = function () { this._element.style.paddingLeft = "", this._element.style.paddingRight = "" }, t._checkScrollbar = function () { var t = document.body.getBoundingClientRect(); this._isBodyOverflowing = t.left + t.right < window.innerWidth, this._scrollbarWidth = this._getScrollbarWidth() }, t._setScrollbar = function () { var o = this; if (this._isBodyOverflowing) { var t = [].slice.call(document.querySelectorAll(me)), e = [].slice.call(document.querySelectorAll(pe)); g(t).each(function (t, e) { var n = e.style.paddingRight, i = g(e).css("padding-right"); g(e).data("padding-right", n).css("padding-right", parseFloat(i) + o._scrollbarWidth + "px") }), g(e).each(function (t, e) { var n = e.style.marginRight, i = g(e).css("margin-right"); g(e).data("margin-right", n).css("margin-right", parseFloat(i) - o._scrollbarWidth + "px") }); var n = document.body.style.paddingRight, i = g(document.body).css("padding-right"); g(document.body).data("padding-right", n).css("padding-right", parseFloat(i) + this._scrollbarWidth + "px") } g(document.body).addClass(ce) }, t._resetScrollbar = function () { var t = [].slice.call(document.querySelectorAll(me)); g(t).each(function (t, e) { var n = g(e).data("padding-right"); g(e).removeData("padding-right"), e.style.paddingRight = n || "" }); var e = [].slice.call(document.querySelectorAll("" + pe)); g(e).each(function (t, e) { var n = g(e).data("margin-right"); "undefined" != typeof n && g(e).css("margin-right", n).removeData("margin-right") }); var n = g(document.body).data("padding-right"); g(document.body).removeData("padding-right"), document.body.style.paddingRight = n || "" }, t._getScrollbarWidth = function () { var t = document.createElement("div"); t.className = ae, document.body.appendChild(t); var e = t.getBoundingClientRect().width - t.clientWidth; return document.body.removeChild(t), e }, o._jQueryInterface = function (n, i) { return this.each(function () { var t = g(this).data(te), e = l({}, ie, g(this).data(), "object" == typeof n && n ? n : {}); if (t || (t = new o(this, e), g(this).data(te, t)), "string" == typeof n) { if ("undefined" == typeof t[n]) throw new TypeError('No method named "' + n + '"'); t[n](i) } else e.show && t.show(i) }) }, s(o, null, [{ key: "VERSION", get: function () { return "4.3.1" } }, { key: "Default", get: function () { return ie } }]), o }(); g(document).on(re.CLICK_DATA_API, ge, function (t) { var e, n = this, i = _.getSelectorFromElement(this); i && (e = document.querySelector(i)); var o = g(e).data(te) ? "toggle" : l({}, g(e).data(), g(this).data()); "A" !== this.tagName && "AREA" !== this.tagName || t.preventDefault(); var r = g(e).one(re.SHOW, function (t) { t.isDefaultPrevented() || r.one(re.HIDDEN, function () { g(n).is(":visible") && n.focus() }) }); ve._jQueryInterface.call(g(e), o, this) }), g.fn[Zt] = ve._jQueryInterface, g.fn[Zt].Constructor = ve, g.fn[Zt].noConflict = function () { return g.fn[Zt] = ne, ve._jQueryInterface }; var ye = ["background", "cite", "href", "itemtype", "longdesc", "poster", "src", "xlink:href"], Ee = { "*": ["class", "dir", "id", "lang", "role", /^aria-[\w-]*$/i], a: ["target", "href", "title", "rel"], area: [], b: [], br: [], col: [], code: [], div: [], em: [], hr: [], h1: [], h2: [], h3: [], h4: [], h5: [], h6: [], i: [], img: ["src", "alt", "title", "width", "height"], li: [], ol: [], p: [], pre: [], s: [], small: [], span: [], sub: [], sup: [], strong: [], u: [], ul: [] }, Ce = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi, Te = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i; function Se(t, s, e) { if (0 === t.length) return t; if (e && "function" == typeof e) return e(t); for (var n = (new window.DOMParser).parseFromString(t, "text/html"), a = Object.keys(s), l = [].slice.call(n.body.querySelectorAll("*")), i = function (t, e) { var n = l[t], i = n.nodeName.toLowerCase(); if (-1 === a.indexOf(n.nodeName.toLowerCase())) return n.parentNode.removeChild(n), "continue"; var o = [].slice.call(n.attributes), r = [].concat(s["*"] || [], s[i] || []); o.forEach(function (t) { (function (t, e) { var n = t.nodeName.toLowerCase(); if (-1 !== e.indexOf(n)) return -1 === ye.indexOf(n) || Boolean(t.nodeValue.match(Ce) || t.nodeValue.match(Te)); for (var i = e.filter(function (t) { return t instanceof RegExp }), o = 0, r = i.length; o < r; o++)if (n.match(i[o])) return !0; return !1 })(t, r) || n.removeAttribute(t.nodeName) }) }, o = 0, r = l.length; o < r; o++)i(o); return n.body.innerHTML } var be = "tooltip", Ie = "bs.tooltip", De = "." + Ie, we = g.fn[be], Ae = "bs-tooltip", Ne = new RegExp("(^|\\s)" + Ae + "\\S+", "g"), Oe = ["sanitize", "whiteList", "sanitizeFn"], ke = { animation: "boolean", template: "string", title: "(string|element|function)", trigger: "string", delay: "(number|object)", html: "boolean", selector: "(string|boolean)", placement: "(string|function)", offset: "(number|string|function)", container: "(string|element|boolean)", fallbackPlacement: "(string|array)", boundary: "(string|element)", sanitize: "boolean", sanitizeFn: "(null|function)", whiteList: "object" }, Pe = { AUTO: "auto", TOP: "top", RIGHT: "right", BOTTOM: "bottom", LEFT: "left" }, Le = { animation: !0, template: '<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>', trigger: "hover focus", title: "", delay: 0, html: !1, selector: !1, placement: "top", offset: 0, container: !1, fallbackPlacement: "flip", boundary: "scrollParent", sanitize: !0, sanitizeFn: null, whiteList: Ee }, je = "show", He = "out", Re = { HIDE: "hide" + De, HIDDEN: "hidden" + De, SHOW: "show" + De, SHOWN: "shown" + De, INSERTED: "inserted" + De, CLICK: "click" + De, FOCUSIN: "focusin" + De, FOCUSOUT: "focusout" + De, MOUSEENTER: "mouseenter" + De, MOUSELEAVE: "mouseleave" + De }, xe = "fade", Fe = "show", Ue = ".tooltip-inner", We = ".arrow", qe = "hover", Me = "focus", Ke = "click", Qe = "manual", Be = function () { function i(t, e) { if ("undefined" == typeof u) throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)"); this._isEnabled = !0, this._timeout = 0, this._hoverState = "", this._activeTrigger = {}, this._popper = null, this.element = t, this.config = this._getConfig(e), this.tip = null, this._setListeners() } var t = i.prototype; return t.enable = function () { this._isEnabled = !0 }, t.disable = function () { this._isEnabled = !1 }, t.toggleEnabled = function () { this._isEnabled = !this._isEnabled }, t.toggle = function (t) { if (this._isEnabled) if (t) { var e = this.constructor.DATA_KEY, n = g(t.currentTarget).data(e); n || (n = new this.constructor(t.currentTarget, this._getDelegateConfig()), g(t.currentTarget).data(e, n)), n._activeTrigger.click = !n._activeTrigger.click, n._isWithActiveTrigger() ? n._enter(null, n) : n._leave(null, n) } else { if (g(this.getTipElement()).hasClass(Fe)) return void this._leave(null, this); this._enter(null, this) } }, t.dispose = function () { clearTimeout(this._timeout), g.removeData(this.element, this.constructor.DATA_KEY), g(this.element).off(this.constructor.EVENT_KEY), g(this.element).closest(".modal").off("hide.bs.modal"), this.tip && g(this.tip).remove(), this._isEnabled = null, this._timeout = null, this._hoverState = null, (this._activeTrigger = null) !== this._popper && this._popper.destroy(), this._popper = null, this.element = null, this.config = null, this.tip = null }, t.show = function () { var e = this; if ("none" === g(this.element).css("display")) throw new Error("Please use show on visible elements"); var t = g.Event(this.constructor.Event.SHOW); if (this.isWithContent() && this._isEnabled) { g(this.element).trigger(t); var n = _.findShadowRoot(this.element), i = g.contains(null !== n ? n : this.element.ownerDocument.documentElement, this.element); if (t.isDefaultPrevented() || !i) return; var o = this.getTipElement(), r = _.getUID(this.constructor.NAME); o.setAttribute("id", r), this.element.setAttribute("aria-describedby", r), this.setContent(), this.config.animation && g(o).addClass(xe); var s = "function" == typeof this.config.placement ? this.config.placement.call(this, o, this.element) : this.config.placement, a = this._getAttachment(s); this.addAttachmentClass(a); var l = this._getContainer(); g(o).data(this.constructor.DATA_KEY, this), g.contains(this.element.ownerDocument.documentElement, this.tip) || g(o).appendTo(l), g(this.element).trigger(this.constructor.Event.INSERTED), this._popper = new u(this.element, o, { placement: a, modifiers: { offset: this._getOffset(), flip: { behavior: this.config.fallbackPlacement }, arrow: { element: We }, preventOverflow: { boundariesElement: this.config.boundary } }, onCreate: function (t) { t.originalPlacement !== t.placement && e._handlePopperPlacementChange(t) }, onUpdate: function (t) { return e._handlePopperPlacementChange(t) } }), g(o).addClass(Fe), "ontouchstart" in document.documentElement && g(document.body).children().on("mouseover", null, g.noop); var c = function () { e.config.animation && e._fixTransition(); var t = e._hoverState; e._hoverState = null, g(e.element).trigger(e.constructor.Event.SHOWN), t === He && e._leave(null, e) }; if (g(this.tip).hasClass(xe)) { var h = _.getTransitionDurationFromElement(this.tip); g(this.tip).one(_.TRANSITION_END, c).emulateTransitionEnd(h) } else c() } }, t.hide = function (t) { var e = this, n = this.getTipElement(), i = g.Event(this.constructor.Event.HIDE), o = function () { e._hoverState !== je && n.parentNode && n.parentNode.removeChild(n), e._cleanTipClass(), e.element.removeAttribute("aria-describedby"), g(e.element).trigger(e.constructor.Event.HIDDEN), null !== e._popper && e._popper.destroy(), t && t() }; if (g(this.element).trigger(i), !i.isDefaultPrevented()) { if (g(n).removeClass(Fe), "ontouchstart" in document.documentElement && g(document.body).children().off("mouseover", null, g.noop), this._activeTrigger[Ke] = !1, this._activeTrigger[Me] = !1, this._activeTrigger[qe] = !1, g(this.tip).hasClass(xe)) { var r = _.getTransitionDurationFromElement(n); g(n).one(_.TRANSITION_END, o).emulateTransitionEnd(r) } else o(); this._hoverState = "" } }, t.update = function () { null !== this._popper && this._popper.scheduleUpdate() }, t.isWithContent = function () { return Boolean(this.getTitle()) }, t.addAttachmentClass = function (t) { g(this.getTipElement()).addClass(Ae + "-" + t) }, t.getTipElement = function () { return this.tip = this.tip || g(this.config.template)[0], this.tip }, t.setContent = function () { var t = this.getTipElement(); this.setElementContent(g(t.querySelectorAll(Ue)), this.getTitle()), g(t).removeClass(xe + " " + Fe) }, t.setElementContent = function (t, e) { "object" != typeof e || !e.nodeType && !e.jquery ? this.config.html ? (this.config.sanitize && (e = Se(e, this.config.whiteList, this.config.sanitizeFn)), t.html(e)) : t.text(e) : this.config.html ? g(e).parent().is(t) || t.empty().append(e) : t.text(g(e).text()) }, t.getTitle = function () { var t = this.element.getAttribute("data-original-title"); return t || (t = "function" == typeof this.config.title ? this.config.title.call(this.element) : this.config.title), t }, t._getOffset = function () { var e = this, t = {}; return "function" == typeof this.config.offset ? t.fn = function (t) { return t.offsets = l({}, t.offsets, e.config.offset(t.offsets, e.element) || {}), t } : t.offset = this.config.offset, t }, t._getContainer = function () { return !1 === this.config.container ? document.body : _.isElement(this.config.container) ? g(this.config.container) : g(document).find(this.config.container) }, t._getAttachment = function (t) { return Pe[t.toUpperCase()] }, t._setListeners = function () { var i = this; this.config.trigger.split(" ").forEach(function (t) { if ("click" === t) g(i.element).on(i.constructor.Event.CLICK, i.config.selector, function (t) { return i.toggle(t) }); else if (t !== Qe) { var e = t === qe ? i.constructor.Event.MOUSEENTER : i.constructor.Event.FOCUSIN, n = t === qe ? i.constructor.Event.MOUSELEAVE : i.constructor.Event.FOCUSOUT; g(i.element).on(e, i.config.selector, function (t) { return i._enter(t) }).on(n, i.config.selector, function (t) { return i._leave(t) }) } }), g(this.element).closest(".modal").on("hide.bs.modal", function () { i.element && i.hide() }), this.config.selector ? this.config = l({}, this.config, { trigger: "manual", selector: "" }) : this._fixTitle() }, t._fixTitle = function () { var t = typeof this.element.getAttribute("data-original-title"); (this.element.getAttribute("title") || "string" !== t) && (this.element.setAttribute("data-original-title", this.element.getAttribute("title") || ""), this.element.setAttribute("title", "")) }, t._enter = function (t, e) { var n = this.constructor.DATA_KEY; (e = e || g(t.currentTarget).data(n)) || (e = new this.constructor(t.currentTarget, this._getDelegateConfig()), g(t.currentTarget).data(n, e)), t && (e._activeTrigger["focusin" === t.type ? Me : qe] = !0), g(e.getTipElement()).hasClass(Fe) || e._hoverState === je ? e._hoverState = je : (clearTimeout(e._timeout), e._hoverState = je, e.config.delay && e.config.delay.show ? e._timeout = setTimeout(function () { e._hoverState === je && e.show() }, e.config.delay.show) : e.show()) }, t._leave = function (t, e) { var n = this.constructor.DATA_KEY; (e = e || g(t.currentTarget).data(n)) || (e = new this.constructor(t.currentTarget, this._getDelegateConfig()), g(t.currentTarget).data(n, e)), t && (e._activeTrigger["focusout" === t.type ? Me : qe] = !1), e._isWithActiveTrigger() || (clearTimeout(e._timeout), e._hoverState = He, e.config.delay && e.config.delay.hide ? e._timeout = setTimeout(function () { e._hoverState === He && e.hide() }, e.config.delay.hide) : e.hide()) }, t._isWithActiveTrigger = function () { for (var t in this._activeTrigger) if (this._activeTrigger[t]) return !0; return !1 }, t._getConfig = function (t) { var e = g(this.element).data(); return Object.keys(e).forEach(function (t) { -1 !== Oe.indexOf(t) && delete e[t] }), "number" == typeof (t = l({}, this.constructor.Default, e, "object" == typeof t && t ? t : {})).delay && (t.delay = { show: t.delay, hide: t.delay }), "number" == typeof t.title && (t.title = t.title.toString()), "number" == typeof t.content && (t.content = t.content.toString()), _.typeCheckConfig(be, t, this.constructor.DefaultType), t.sanitize && (t.template = Se(t.template, t.whiteList, t.sanitizeFn)), t }, t._getDelegateConfig = function () { var t = {}; if (this.config) for (var e in this.config) this.constructor.Default[e] !== this.config[e] && (t[e] = this.config[e]); return t }, t._cleanTipClass = function () { var t = g(this.getTipElement()), e = t.attr("class").match(Ne); null !== e && e.length && t.removeClass(e.join("")) }, t._handlePopperPlacementChange = function (t) { var e = t.instance; this.tip = e.popper, this._cleanTipClass(), this.addAttachmentClass(this._getAttachment(t.placement)) }, t._fixTransition = function () { var t = this.getTipElement(), e = this.config.animation; null === t.getAttribute("x-placement") && (g(t).removeClass(xe), this.config.animation = !1, this.hide(), this.show(), this.config.animation = e) }, i._jQueryInterface = function (n) { return this.each(function () { var t = g(this).data(Ie), e = "object" == typeof n && n; if ((t || !/dispose|hide/.test(n)) && (t || (t = new i(this, e), g(this).data(Ie, t)), "string" == typeof n)) { if ("undefined" == typeof t[n]) throw new TypeError('No method named "' + n + '"'); t[n]() } }) }, s(i, null, [{ key: "VERSION", get: function () { return "4.3.1" } }, { key: "Default", get: function () { return Le } }, { key: "NAME", get: function () { return be } }, { key: "DATA_KEY", get: function () { return Ie } }, { key: "Event", get: function () { return Re } }, { key: "EVENT_KEY", get: function () { return De } }, { key: "DefaultType", get: function () { return ke } }]), i }(); g.fn[be] = Be._jQueryInterface, g.fn[be].Constructor = Be, g.fn[be].noConflict = function () { return g.fn[be] = we, Be._jQueryInterface }; var Ve = "popover", Ye = "bs.popover", ze = "." + Ye, Xe = g.fn[Ve], $e = "bs-popover", Ge = new RegExp("(^|\\s)" + $e + "\\S+", "g"), Je = l({}, Be.Default, { placement: "right", trigger: "click", content: "", template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>' }), Ze = l({}, Be.DefaultType, { content: "(string|element|function)" }), tn = "fade", en = "show", nn = ".popover-header", on = ".popover-body", rn = { HIDE: "hide" + ze, HIDDEN: "hidden" + ze, SHOW: "show" + ze, SHOWN: "shown" + ze, INSERTED: "inserted" + ze, CLICK: "click" + ze, FOCUSIN: "focusin" + ze, FOCUSOUT: "focusout" + ze, MOUSEENTER: "mouseenter" + ze, MOUSELEAVE: "mouseleave" + ze }, sn = function (t) { var e, n; function i() { return t.apply(this, arguments) || this } n = t, (e = i).prototype = Object.create(n.prototype), (e.prototype.constructor = e).__proto__ = n; var o = i.prototype; return o.isWithContent = function () { return this.getTitle() || this._getContent() }, o.addAttachmentClass = function (t) { g(this.getTipElement()).addClass($e + "-" + t) }, o.getTipElement = function () { return this.tip = this.tip || g(this.config.template)[0], this.tip }, o.setContent = function () { var t = g(this.getTipElement()); this.setElementContent(t.find(nn), this.getTitle()); var e = this._getContent(); "function" == typeof e && (e = e.call(this.element)), this.setElementContent(t.find(on), e), t.removeClass(tn + " " + en) }, o._getContent = function () { return this.element.getAttribute("data-content") || this.config.content }, o._cleanTipClass = function () { var t = g(this.getTipElement()), e = t.attr("class").match(Ge); null !== e && 0 < e.length && t.removeClass(e.join("")) }, i._jQueryInterface = function (n) { return this.each(function () { var t = g(this).data(Ye), e = "object" == typeof n ? n : null; if ((t || !/dispose|hide/.test(n)) && (t || (t = new i(this, e), g(this).data(Ye, t)), "string" == typeof n)) { if ("undefined" == typeof t[n]) throw new TypeError('No method named "' + n + '"'); t[n]() } }) }, s(i, null, [{ key: "VERSION", get: function () { return "4.3.1" } }, { key: "Default", get: function () { return Je } }, { key: "NAME", get: function () { return Ve } }, { key: "DATA_KEY", get: function () { return Ye } }, { key: "Event", get: function () { return rn } }, { key: "EVENT_KEY", get: function () { return ze } }, { key: "DefaultType", get: function () { return Ze } }]), i }(Be); g.fn[Ve] = sn._jQueryInterface, g.fn[Ve].Constructor = sn, g.fn[Ve].noConflict = function () { return g.fn[Ve] = Xe, sn._jQueryInterface }; var an = "scrollspy", ln = "bs.scrollspy", cn = "." + ln, hn = g.fn[an], un = { offset: 10, method: "auto", target: "" }, fn = { offset: "number", method: "string", target: "(string|element)" }, dn = { ACTIVATE: "activate" + cn, SCROLL: "scroll" + cn, LOAD_DATA_API: "load" + cn + ".data-api" }, gn = "dropdown-item", _n = "active", mn = '[data-spy="scroll"]', pn = ".nav, .list-group", vn = ".nav-link", yn = ".nav-item", En = ".list-group-item", Cn = ".dropdown", Tn = ".dropdown-item", Sn = ".dropdown-toggle", bn = "offset", In = "position", Dn = function () { function n(t, e) { var n = this; this._element = t, this._scrollElement = "BODY" === t.tagName ? window : t, this._config = this._getConfig(e), this._selector = this._config.target + " " + vn + "," + this._config.target + " " + En + "," + this._config.target + " " + Tn, this._offsets = [], this._targets = [], this._activeTarget = null, this._scrollHeight = 0, g(this._scrollElement).on(dn.SCROLL, function (t) { return n._process(t) }), this.refresh(), this._process() } var t = n.prototype; return t.refresh = function () { var e = this, t = this._scrollElement === this._scrollElement.window ? bn : In, o = "auto" === this._config.method ? t : this._config.method, r = o === In ? this._getScrollTop() : 0; this._offsets = [], this._targets = [], this._scrollHeight = this._getScrollHeight(), [].slice.call(document.querySelectorAll(this._selector)).map(function (t) { var e, n = _.getSelectorFromElement(t); if (n && (e = document.querySelector(n)), e) { var i = e.getBoundingClientRect(); if (i.width || i.height) return [g(e)[o]().top + r, n] } return null }).filter(function (t) { return t }).sort(function (t, e) { return t[0] - e[0] }).forEach(function (t) { e._offsets.push(t[0]), e._targets.push(t[1]) }) }, t.dispose = function () { g.removeData(this._element, ln), g(this._scrollElement).off(cn), this._element = null, this._scrollElement = null, this._config = null, this._selector = null, this._offsets = null, this._targets = null, this._activeTarget = null, this._scrollHeight = null }, t._getConfig = function (t) { if ("string" != typeof (t = l({}, un, "object" == typeof t && t ? t : {})).target) { var e = g(t.target).attr("id"); e || (e = _.getUID(an), g(t.target).attr("id", e)), t.target = "#" + e } return _.typeCheckConfig(an, t, fn), t }, t._getScrollTop = function () { return this._scrollElement === window ? this._scrollElement.pageYOffset : this._scrollElement.scrollTop }, t._getScrollHeight = function () { return this._scrollElement.scrollHeight || Math.max(document.body.scrollHeight, document.documentElement.scrollHeight) }, t._getOffsetHeight = function () { return this._scrollElement === window ? window.innerHeight : this._scrollElement.getBoundingClientRect().height }, t._process = function () { var t = this._getScrollTop() + this._config.offset, e = this._getScrollHeight(), n = this._config.offset + e - this._getOffsetHeight(); if (this._scrollHeight !== e && this.refresh(), n <= t) { var i = this._targets[this._targets.length - 1]; this._activeTarget !== i && this._activate(i) } else { if (this._activeTarget && t < this._offsets[0] && 0 < this._offsets[0]) return this._activeTarget = null, void this._clear(); for (var o = this._offsets.length; o--;) { this._activeTarget !== this._targets[o] && t >= this._offsets[o] && ("undefined" == typeof this._offsets[o + 1] || t < this._offsets[o + 1]) && this._activate(this._targets[o]) } } }, t._activate = function (e) { this._activeTarget = e, this._clear(); var t = this._selector.split(",").map(function (t) { return t + '[data-target="' + e + '"],' + t + '[href="' + e + '"]' }), n = g([].slice.call(document.querySelectorAll(t.join(",")))); n.hasClass(gn) ? (n.closest(Cn).find(Sn).addClass(_n), n.addClass(_n)) : (n.addClass(_n), n.parents(pn).prev(vn + ", " + En).addClass(_n), n.parents(pn).prev(yn).children(vn).addClass(_n)), g(this._scrollElement).trigger(dn.ACTIVATE, { relatedTarget: e }) }, t._clear = function () { [].slice.call(document.querySelectorAll(this._selector)).filter(function (t) { return t.classList.contains(_n) }).forEach(function (t) { return t.classList.remove(_n) }) }, n._jQueryInterface = function (e) { return this.each(function () { var t = g(this).data(ln); if (t || (t = new n(this, "object" == typeof e && e), g(this).data(ln, t)), "string" == typeof e) { if ("undefined" == typeof t[e]) throw new TypeError('No method named "' + e + '"'); t[e]() } }) }, s(n, null, [{ key: "VERSION", get: function () { return "4.3.1" } }, { key: "Default", get: function () { return un } }]), n }(); g(window).on(dn.LOAD_DATA_API, function () { for (var t = [].slice.call(document.querySelectorAll(mn)), e = t.length; e--;) { var n = g(t[e]); Dn._jQueryInterface.call(n, n.data()) } }), g.fn[an] = Dn._jQueryInterface, g.fn[an].Constructor = Dn, g.fn[an].noConflict = function () { return g.fn[an] = hn, Dn._jQueryInterface }; var wn = "bs.tab", An = "." + wn, Nn = g.fn.tab, On = { HIDE: "hide" + An, HIDDEN: "hidden" + An, SHOW: "show" + An, SHOWN: "shown" + An, CLICK_DATA_API: "click" + An + ".data-api" }, kn = "dropdown-menu", Pn = "active", Ln = "disabled", jn = "fade", Hn = "show", Rn = ".dropdown", xn = ".nav, .list-group", Fn = ".active", Un = "> li > .active", Wn = '[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]', qn = ".dropdown-toggle", Mn = "> .dropdown-menu .active", Kn = function () { function i(t) { this._element = t } var t = i.prototype; return t.show = function () { var n = this; if (!(this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE && g(this._element).hasClass(Pn) || g(this._element).hasClass(Ln))) { var t, i, e = g(this._element).closest(xn)[0], o = _.getSelectorFromElement(this._element); if (e) { var r = "UL" === e.nodeName || "OL" === e.nodeName ? Un : Fn; i = (i = g.makeArray(g(e).find(r)))[i.length - 1] } var s = g.Event(On.HIDE, { relatedTarget: this._element }), a = g.Event(On.SHOW, { relatedTarget: i }); if (i && g(i).trigger(s), g(this._element).trigger(a), !a.isDefaultPrevented() && !s.isDefaultPrevented()) { o && (t = document.querySelector(o)), this._activate(this._element, e); var l = function () { var t = g.Event(On.HIDDEN, { relatedTarget: n._element }), e = g.Event(On.SHOWN, { relatedTarget: i }); g(i).trigger(t), g(n._element).trigger(e) }; t ? this._activate(t, t.parentNode, l) : l() } } }, t.dispose = function () { g.removeData(this._element, wn), this._element = null }, t._activate = function (t, e, n) { var i = this, o = (!e || "UL" !== e.nodeName && "OL" !== e.nodeName ? g(e).children(Fn) : g(e).find(Un))[0], r = n && o && g(o).hasClass(jn), s = function () { return i._transitionComplete(t, o, n) }; if (o && r) { var a = _.getTransitionDurationFromElement(o); g(o).removeClass(Hn).one(_.TRANSITION_END, s).emulateTransitionEnd(a) } else s() }, t._transitionComplete = function (t, e, n) { if (e) { g(e).removeClass(Pn); var i = g(e.parentNode).find(Mn)[0]; i && g(i).removeClass(Pn), "tab" === e.getAttribute("role") && e.setAttribute("aria-selected", !1) } if (g(t).addClass(Pn), "tab" === t.getAttribute("role") && t.setAttribute("aria-selected", !0), _.reflow(t), t.classList.contains(jn) && t.classList.add(Hn), t.parentNode && g(t.parentNode).hasClass(kn)) { var o = g(t).closest(Rn)[0]; if (o) { var r = [].slice.call(o.querySelectorAll(qn)); g(r).addClass(Pn) } t.setAttribute("aria-expanded", !0) } n && n() }, i._jQueryInterface = function (n) { return this.each(function () { var t = g(this), e = t.data(wn); if (e || (e = new i(this), t.data(wn, e)), "string" == typeof n) { if ("undefined" == typeof e[n]) throw new TypeError('No method named "' + n + '"'); e[n]() } }) }, s(i, null, [{ key: "VERSION", get: function () { return "4.3.1" } }]), i }(); g(document).on(On.CLICK_DATA_API, Wn, function (t) { t.preventDefault(), Kn._jQueryInterface.call(g(this), "show") }), g.fn.tab = Kn._jQueryInterface, g.fn.tab.Constructor = Kn, g.fn.tab.noConflict = function () { return g.fn.tab = Nn, Kn._jQueryInterface }; var Qn = "toast", Bn = "bs.toast", Vn = "." + Bn, Yn = g.fn[Qn], zn = { CLICK_DISMISS: "click.dismiss" + Vn, HIDE: "hide" + Vn, HIDDEN: "hidden" + Vn, SHOW: "show" + Vn, SHOWN: "shown" + Vn }, Xn = "fade", $n = "hide", Gn = "show", Jn = "showing", Zn = { animation: "boolean", autohide: "boolean", delay: "number" }, ti = { animation: !0, autohide: !0, delay: 500 }, ei = '[data-dismiss="toast"]', ni = function () { function i(t, e) { this._element = t, this._config = this._getConfig(e), this._timeout = null, this._setListeners() } var t = i.prototype; return t.show = function () { var t = this; g(this._element).trigger(zn.SHOW), this._config.animation && this._element.classList.add(Xn); var e = function () { t._element.classList.remove(Jn), t._element.classList.add(Gn), g(t._element).trigger(zn.SHOWN), t._config.autohide && t.hide() }; if (this._element.classList.remove($n), this._element.classList.add(Jn), this._config.animation) { var n = _.getTransitionDurationFromElement(this._element); g(this._element).one(_.TRANSITION_END, e).emulateTransitionEnd(n) } else e() }, t.hide = function (t) { var e = this; this._element.classList.contains(Gn) && (g(this._element).trigger(zn.HIDE), t ? this._close() : this._timeout = setTimeout(function () { e._close() }, this._config.delay)) }, t.dispose = function () { clearTimeout(this._timeout), this._timeout = null, this._element.classList.contains(Gn) && this._element.classList.remove(Gn), g(this._element).off(zn.CLICK_DISMISS), g.removeData(this._element, Bn), this._element = null, this._config = null }, t._getConfig = function (t) { return t = l({}, ti, g(this._element).data(), "object" == typeof t && t ? t : {}), _.typeCheckConfig(Qn, t, this.constructor.DefaultType), t }, t._setListeners = function () { var t = this; g(this._element).on(zn.CLICK_DISMISS, ei, function () { return t.hide(!0) }) }, t._close = function () { var t = this, e = function () { t._element.classList.add($n), g(t._element).trigger(zn.HIDDEN) }; if (this._element.classList.remove(Gn), this._config.animation) { var n = _.getTransitionDurationFromElement(this._element); g(this._element).one(_.TRANSITION_END, e).emulateTransitionEnd(n) } else e() }, i._jQueryInterface = function (n) { return this.each(function () { var t = g(this), e = t.data(Bn); if (e || (e = new i(this, "object" == typeof n && n), t.data(Bn, e)), "string" == typeof n) { if ("undefined" == typeof e[n]) throw new TypeError('No method named "' + n + '"'); e[n](this) } }) }, s(i, null, [{ key: "VERSION", get: function () { return "4.3.1" } }, { key: "DefaultType", get: function () { return Zn } }, { key: "Default", get: function () { return ti } }]), i }(); g.fn[Qn] = ni._jQueryInterface, g.fn[Qn].Constructor = ni, g.fn[Qn].noConflict = function () { return g.fn[Qn] = Yn, ni._jQueryInterface }, function () { if ("undefined" == typeof g) throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript."); var t = g.fn.jquery.split(" ")[0].split("."); if (t[0] < 2 && t[1] < 9 || 1 === t[0] && 9 === t[1] && t[2] < 1 || 4 <= t[0]) throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0") }(), t.Util = _, t.Alert = p, t.Button = P, t.Carousel = lt, t.Collapse = bt, t.Dropdown = Jt, t.Modal = ve, t.Popover = sn, t.Scrollspy = Dn, t.Tab = Kn, t.Toast = ni, t.Tooltip = Be, Object.defineProperty(t, "__esModule", { value: !0 }) });
//# sourceMappingURL=bootstrap.min.js.map;
/*
 * Version:  5.6.196B7  
 * Copyright (c) 19-12-2018 GlassBox http://www.glassboxdigital.com
 */
 
if (typeof _cls_config === "undefined") {
    _cls_config = {};
} /* DO NOT CHANGE */


_cls_config.resourcesRecordEnabled = true;
_cls_config.resourcesRecordCssOnly = false;

_cls_config.ajaxRecordMetadata="always";
_cls_config.ajaxRecordResponseHeaders="always";
_cls_config.ajaxRecordRequestHeaders="always";
_cls_config.ajaxRecordRequestBody="always";
_cls_config.ajaxRecordResponseBody="always";
 

!function(e,M,A,n,D){if(!function(e,n,t){if(void 0!==e[n])return void 0!==e.console&&"function"==typeof e.console.log&&console.log("WARNING[EyeView-1301]: detector script has been loaded more than once. Please fix to have a single detector loading. (Extra script loading will be ignored)"),!0;if(void 0===e.NodeFilter)return!0;if(e.sessionStorage["gb.disabled"])return console.log("Glassbox Detector is DISABLED, no recording is performed. To re-enable Glassbox Detector please invoke enable() method."),e[n]={version:t,enable:function(){delete e.sessionStorage["gb.disabled"],console.log("Glassbox Detector has been ENABLED. Please refresh the page or perform navigation for recording to start.")}},!0;return!1}(M,e,n)){var k={beaconVersion:"2"};k.mouseEvents=M.PointerEvent?{down:"pointerdown",up:"pointerup"}:{down:"mousedown",up:"mouseup"},k.eventTypes=[k.mouseEvents.down,k.mouseEvents.up,"touchstart","touchend","scroll","change","blur","focusout","keydown","submit","reset","load","unload","ajaxComplete","hashchange","navigation","popstate","focus","focusin","mouseenter","mousemove","error","beforeunload","resize","pagehide"],k.snapshotApplicableEventType=["pageUpdate","change","mousedown","scroll","touchstart","blur","submit","drag","formValidationError","navigation","unload","beforeunload","segmentChanged"],k.reportBase64URLs=!1,k.nobelEventTypes=["pageSnapshot"],k.socialNobelEventTypes=["resourceContent"],k.encodeSelectors=!0,k.encodeEventTypes=!0,k.useClassesInSelectors=!1,k.repeatingElementSelector="!",k.encoding={numberBase:36,rootSelector:"-",delimiters:{versionPayload:";",pages:"~~~",events:"~~",eventParts:"~",pageIdEvents:"_"},domSnapshotPrefix:"D",domSnapshotRefPrefix:"r",domSnapshotCompressedPrefix:"d",domSnapshotPlainPrefix:"P",valueEncodedPrefix:"E",valueNotEncodedPrefix:"N"},k.cookies={session:"_cls_s",visitor:"_cls_v",sub_session:"_cls_subs",supportMode:"_cls_sm"},k.maskingAttribute="cls_mask",k.ValueMaskingMode={BlackList:"blacklist",WhiteList:"whitelist"},k.Storage={BoundKeyPrefix:"gb.",UnboundKeyPrefix:"gb_unbound."},k.detectorScript=function(e,n){if(e)return e.hasAttribute(n)?e:A.querySelector("["+n+"]")||e;var t=A.querySelector("["+n+"]");return!t&&M._cls_config&&M._cls_config.detectorTagId&&(t=A.getElementById(M._cls_config.detectorTagId)),t||(t=A.getElementById("_cls_detector")),t}(A.currentScript,"data-clsconfig");var E={};void 0!==E&&xe(E),k.setup="dom",void 0!==E&&Se(E);var t=",";void 0!==k&&k.detectorScript&&(t=k.detectorScript.getAttribute("data-clsarraydelim")||t);var r=function(e,n){if("TRUE"===e.toUpperCase())return!0;if("FALSE"===e.toUpperCase())return!1;throw"cannot parse boolean from '"+e+"'"},i=function(e){var n=-1==e.indexOf(".")?parseInt(e):parseFloat(e);if(isNaN(n))throw"cannot parse number from '"+e+"'";return n},v=function(e){return e},o=function(e){return null==e?[]:e.split(t)},a=function(e){return(Array.isArray?Array.isArray(e):e instanceof Array)?null:"array is expected"},u=function(e,n){for(var t=0;t<n.length;t++)if(typeof n[t]!==e)return"array element type mismatch. expected:"+e+" actual:"+typeof n[t];return null},c=function(){var r=arguments;return function(e){for(var n=0;n<r.length;n++){var t=r[n](e);if(null!=t)return t}return null}};Ce.prototype.ignore=function(e){this[e.toLowerCase()]={name:e,ignore:!0}};var s={options:{caseSensitive:!0,errorOnUnknown:!(Ce.newBuilder=function(){var t=new Ce;return{bool:function(e,n){return t.add("boolean",!1,r,null,e,n),this},num:function(e,n){return t.add("number",!1,i,null,e,n),this},str:function(e,n){return t.add("string",!0,v,null,e,n),this},strarray:function(e,n){return t.add("object",!0,o,c(a,function(e){return u("string",e)}),e,n),this},ignore:function(e){return t.ignore(e),this},build:function(){return t}}})},validate:function(e,n){var t=new Re;if(this.parsingError)return t.addError(s.parsingError),t;n=n||{};var r=e.requiredFieldsMask();for(var i in n)if(n.hasOwnProperty(i)){var o=e[i.toLowerCase()];if(!o){(s.options.errorOnUnknown?t.addError:t.addWarning).call(t,"unknown configuration field",i);continue}if(o.ignore)continue;if(o.name!==i&&s.options.caseSensitive){t.addError("unknown configuration field (did you mean '"+o.name+"'?).",i),delete r[o.name];continue}var a=n[i];if(null==a){o.nullable||t.addError("value cannot be null, value of "+o.type+" type is expected.",i);continue}if(typeof a!==o.type){t.addError("value type mismatch. expected:"+o.type+" actual:"+typeof a,i);continue}if(o.required&&delete r[o.name],o.validator){var u=o.validator(a);u&&t.addError("value violation, "+u,i)}}for(var c in r)t.addError("missing required field",c);return t},onParsingError:function(e){s.parsingError=e}};Re.prototype.addError=function(e,n){this.errors.push({field:n,reason:e})},Re.prototype.addWarning=function(e,n){this.warnings.push({field:n,reason:e})},Re.prototype.toString=function(){var e=function(e){for(var n="",t=0;t<e.length;t++)return n+"\n"+(e[t].field?"'"+e[t].field+"': ":"")+e[t].reason;return n},n="\n"+this.errors.length+" error(s):";return n+=e(this.errors),n+="\n"+this.warnings.length+" warning(s):",n+=e(this.warnings)};var f=function(e,n,t,r,i){var o=function(e){return"function"!=typeof String.prototype.trim?e.replace(/^\s+|\s+$/g,""):e.trim()};e=e||{};for(var a=null!=t?t.split(n):[],u=0;u<a.length;u++){var c=a[u].split("=");if(2==c.length){var s,f=o(c[0]),l=o(c[1]),d=e[f.toLowerCase()];d?void 0===(s=d.parser)&&(s=v):s=v;try{r[f]=s(l)}catch(e){i&&i("'"+f+"': "+e)}}}},l=Ce.newBuilder().ignore("injectionTime").ignore("visualName").ignore("detectionScriptURI").str("reportURI",!0).str("configPath",!1).bool("recordMouseMoves",!1).bool("recordScrolls",!1).bool("recordErrors",!1).bool("reportValidationErrors",!1).strarray("domFormValidationClassErrors",!1).num("idleEventTimeInterval",!1).bool("botDetection",!1).bool("recordHovers",!1).bool("reportByPost",!1).num("maxPostReportSize",!1).num("reportPostInterval",!1).bool("postRetry",!1).bool("DOMBeaconImg",!1).num("reportInterval",!1).bool("reportAllOnUnload",!1).num("maxReportSize",!1).strarray("maskList",!1).strarray("maskClassList",!1).str("externalIdAttr",!1).bool("useIdSelectors",!1).bool("useNameInFormSelectors",!1).bool("preferNamesInFormSelectors",!1).strarray("noIdSelectorsForClassNames",!1).strarray("noIdSelectorsForIDs",!1).strarray("noIdSelectorsForAttrs",!1).bool("SCIntegration",!1).strarray("SCIntegrationURLsContainList",!1).strarray("SCIntegrationKeyList",!1).bool("reportAllResourcesLoad",!1).bool("reportExternalResources",!1).strarray("ignoreReportResourcesByTagNames",!1).strarray("reportScriptURLContainList",!1).strarray("reportScriptKeyList",!1).strarray("reportImageURLContainList",!1).strarray("reportImageKeyList",!1).bool("debugMode",!1).bool("traceMode",!1).bool("suppressMouseMovesDebug",!1).bool("visualNameDebug",!1).bool("timingMode",!1).num("maxReportsWithUnload",!1).num("minDragPixels",!1).bool("reportVisualNames",!1).num("titleCharsLimit",!1).num("maxTimeForIdleEvent",!1).num("validationValueForRenderTime",!1).bool("reportDebugInfo",!1).bool("supportNativeAutoComplete",!1).bool("recordEnterForInputs",!1).bool("recordTypingAll",!1).strarray("recordTypingForAttrs",!1).strarray("recordTypingForClasses",!1).strarray("recordTypingForIDs",!1).num("mmMaxMovesWithUnload",!1).num("mmMaxMovesInEventNoTimes",!1).num("mmMaxMovesInEventWithTimes",!1).num("mmMinStallingMoveTime",!1).num("mmMaxInMemoryMoves",!1).bool("mmDebug",!1).num("mhDeepLevel",!1).num("mhMaxListSize",!1).num("mhMaxInMemeoryHovers",!1).bool("mhDebug",!1).bool("dependentScroll",!1).num("minStallingScrollTime",!1).bool("scrollDebug",!1).bool("clsDebug",!1).num("clsDebugCharsLimit",!1).num("clsDebugMaxReports",!1).bool("domRecordEnabled",!1).strarray("domNewPageTriggers",!1).strarray("pageSnapshotTriggers",!1).num("domStartAfter",!1).num("domUpdateEveryWsMsgIn",!1).num("domRecordEnabledByChance",!1).str("domReportURI",!1).bool("domCompress",!1).strarray("domNewPageAjaxTriggers",!1).strarray("domIgnoredFormElements",!1).bool("semiDomEnabled",!1).bool("domRecordCssRules",!1).strarray("ignorableElementIds",!1).bool("recordAjaxCallsAnyway",!1).bool("truncateEventsWithUnload",!1).bool("mmRecordTimes",!1).num("mmDiluteMinPixels",!1).bool("reportHybrid",!1).str("customTLD",!1).num("enabledByChance",!1).strarray("domCloningBannedIds",!1).strarray("domCloningBannedClasses",!1).str("reportEncoding",!1).bool("reportCompress",!1).str("maskingMode",!1).strarray("reportAddUriParams",!1).bool("recordConsoleErrors",!1).strarray("domMaskContentById",!1).strarray("domMaskContentByClass",!1).strarray("domMaskOmitById",!1).strarray("domMaskOmitByClass",!1).strarray("domMaskedAttributes",!1).strarray("domMaskAttributesByTag",!1).strarray("domMaskSimpleSelector",!1).bool("reportPreferSendBeaconAPI",!1).bool("domKeepComments",!1).str("domKeepScriptMatching",!1).num("domExpireSnapshotAfter",!1).bool("reportCorsForceSafelistedHeaders",!1).bool("reportDisableCors",!1).strarray("reportCorsTakeNativeCookies",!1).strarray("maskCookies",!1).bool("reportToStorageAfterUnload",!1).bool("domOmitAfterUnload",!1).bool("duplicateIdCheck",!1).strarray("domPartialWhenLocationContains",!1).strarray("blackoutWhenLocationContains",!1).bool("iframesAutoInject",!1).bool("iframesRecordEnabled",!1).str("iframesParentOrigin",!1).num("iframesHandshakeTimeout",!1).bool("reportIncludeReferrer",!1).str("mobileHybridId",!1).bool("domAssignGlassboxId",!1).bool("interceptAjax",!1).bool("ajaxDebug",!1).bool("ajaxHashRecurrentUrls",!1).str("ajaxRecordMetadata",!1).str("ajaxRecordResponseBody",!1).str("ajaxRecordResponseHeaders",!1).str("ajaxRecordRequestBody",!1).str("ajaxRecordRequestHeaders",!1).bool("recordAjaxRequest",!1).bool("ajaxCaptureResponseHeaders",!1).num("ajaxCaptureResponseOnStatusGreater",!1).str("ajaxCaptureResponseContentWhenUrlMatches",!1).bool("ajaxCaptureFQDNOnly",!1).bool("reportCreateSubSessionCookie",!1).bool("resourcesRecordEnabled",!1).bool("resourceRecordCssOnly",!1).bool("resourcesRecordAllowCors",!1).num("resourcesRecordCount",!1).num("resourcesRecordChance",!1).strarray("resourceIgnoreWhenUrlContains",!1).bool("resourceTimingRecordEnabled",!1).num("resourceTimingRecordEnabledByChance",!1).bool("clientAttributesEnabled",!1).num("clientAttributeMaxLength",!1).bool("domIE11ForceMutationObserver",!1).str("detectorTagId",!1).bool("cookieAssignFQDN",!1).str("sessionIdByQueryParam",!1).str("visitorIdByQueryParam",!1).str("domIdentifyingAttribute",!1).bool("sendStateInfo",!1).strarray("valueAutoMasking",!1).num("debounceScrolls",!1).build();if(k.detectorScript){var d=k.detectorScript.getAttribute("data-clsdelim")||";",h=k.detectorScript.getAttribute("data-clsconfig");h&&f(l,d,h,E,s.onParsingError)}var p,m=M._cls_config||M._config||{};for(p in m)m.hasOwnProperty(p)&&(E[p]=m[p]);var g,y,b,w=(y=/\d{12,19}/g,g=[0,2,4,6,8,1,3,5,7,9],b=function(e){for(var n,t=e.length,r=1,i=0;t;)n=parseInt(e.charAt(--t),10),i+=(r^=1)?g[n]:n;return i&&i%10==0},{creditCard:function(e){return!!((e=(e||"").trim())&&e.match(y)&&b(e))},byTypes:function(e){var n,t,r=[];for(e=e||[],n=0;n<e.length;n++)this[e[n]]&&"byTypes"!==e[n]?r.push(this[e[n]]):console.error("[EyeView-1408]: Detector configuration error: auto masking of type '"+e[n]+"' is not supported.");return 1===r.length?r[0]:(t=r,function(e){var n;for(n=0;n<t[n];n++)if(t[n](e))return!0;return!1})}}),x=new function(a,u,c){var e=c?"":(t=a.location.host,r=t.split(":")[0]||"",i=r.split("."),i.length<=2?r:(i.shift(),"."+i.join("."))),n=function(){if(-1===(u||"").indexOf("://"))return!1;var e=a.createElement("a");if(e.href=u,c)return e.hostname!==a.location.hostname;for(var n=a.location.hostname.split("."),t=e.hostname.split("."),r=n.length<=2,i=!1;n.length&&t.length&&!i;)i=n.pop()!==t.pop();var o=(i?1:0)+Math.max(n.length,t.length);return r?0!==o:1<o}();var t,r,i;this.isCorsReporting=function(){return n},this.cookieDomainSegment=function(){return e}}(A,E.reportURI,E.cookieAssignFQDN),N=new function(a,e){var u={},c=e?";domain="+e:"";this.get=function(e){var n,t,r=u[e];return void 0===r&&(n=a,t=new RegExp("[,; ]"+e+"=([^\\s,;]*)","gi").exec(";"+n.cookie),r=t&&t[1]||null,u[e]=r),null==r?D:r},this.set=function(e,n,t){var r,i,o;u[e]=n,a.cookie=(r=n,i=t,o=encodeURIComponent(e)+"="+(r+"").replace(/[^!#-+\--:<-\[\]-~]/g,encodeURIComponent),o+=";path=/",o+=c,o+=i?";expires="+i.toUTCString():"")}}(A,x.cookieDomainSegment()),S=new function(i,o){i=i||{};var a=o.keysPrefix+"sid",u=function(){return e||(e=o.sessionIdFunc()),e};var e;function c(e){return o.keysPrefix+e}this.get=function(e){var n=u();if(!n)return D;try{if(n==i[a])return i[c(e)]}catch(e){}return D},this.set=function(e,n){var t=u();if(!t)return D;try{var r=i[a];return t!==r&&function(){var e;for(e in i)0===e.indexOf(o.keysPrefix)&&delete i[e]}(),i[a]=t,i[c(e)]=n}catch(e){}return D},this.remove=function(e){var n=u();if(!n)return!0;try{if(n==i[a])return delete i[c(e)]}catch(e){}return!0}}(M.localStorage,{keysPrefix:k.Storage.BoundKeyPrefix,sessionIdFunc:function(){return N.get(k.cookies.session)}}),C=new function(l){var n={tilda:"_clstil",asterisks:"_clsast",space:"_clsspc"};function d(e,n){if(p(e))return n?k.encoding.rootSelector:e.nodeName;var t=u(e.nodeName,n),r=function(e){if(!e.parentNode)return null;var n=e.parentNode.childNodes;if(n.length<2)return null;for(var t=e.nodeName,r=[],i=0;i<n.length;i+=1)n[i].nodeName===t&&r.push(n[i]);if(r.length<2)return null;for(var o=0;o<r.length;o+=1)if(r[o]===e)return o;return null}(e);if(null!==r)return function(e,n,t){var r=e;t||(r+=":eq");return r+"("+n+")"}(t,r,n);if(k.useClassesInSelectors){var i=L.getClassList(e);if(0<i.length){for(var o=t,a=0;a<i.length;a++)o+="."+i[a];return o}}return t}function v(e,n,t){if(p(e))return null;var r=L.getElementId(e);return(r&&-1!==r.indexOf("~")||-1!==r.indexOf("*")||-1!==r.indexOf(" "))&&(r=o(r)),n?u(e.nodeName,t)+"#"+r:"#"+r}function h(e,n){var t=typeof n;"string"!==t&&"number"!==t||e.unshift(n)}function u(e,n){return n?k.dictionary.encodeNodeName(e):e}function p(e){var n=e.nodeName;return"HTML"===n||"BODY"===n}function o(e){return e.replace(/~/g,n.tilda).replace(/\*/g,n.asterisks).replace(/ /g,n.space)}function m(e){for(var n=e.parentNode;null!==n;){if(void 0===n&&console.log("hasFormAncestor undefined node: ",e),"FORM"===n.nodeName)return!0;n=n.parentNode}return!1}function g(e,n,t){var r=e.getAttribute(n),i="["+n+"='"+r+"']";return-1===i.indexOf("~")&&-1===i.indexOf("*")&&-1===i.indexOf(" ")||(i=o(i)),u(e.nodeName,t)+i}function y(e,n){if(0===l.noIdSelectorsForClassNames.length&&0===l.noIdSelectorsForIDs.length&&0===l.noIdSelectorsForAttrs.length)return!0;var t,r=L.getClassList(e);for(t=0;t<l.noIdSelectorsForClassNames.length;t++)if(0<=O.indexOf(r,l.noIdSelectorsForClassNames[t]))return!1;for(t=0;t<l.noIdSelectorsForAttrs.length;t++)if(e.hasAttribute(l.noIdSelectorsForAttrs[t]))return!1;for(t=0;t<l.noIdSelectorsForIDs.length;t++){var i=l.noIdSelectorsForIDs[t];if(i&&0<=n.indexOf(i))return!1}return!0}this.getSelectorExpression=function(e,n,t){n=void 0!==n?n:k.encodeSelectors,t=t||{useId:!0};var r=l.useIdSelectors&&t.useId;if(null===e||O.isUndefined(e)||!L.isElement(e))return k.encoding.rootSelector;if(e.name&&l.preferNamesInFormSelectors&&m(e))return g(e,"name",n);if(r){var i=L.getElementId(e);if(i&&!L.isDuplicateElementId(i)&&y(e,i))return v(e,!0,n)}if(e.name&&l.useNameInFormSelectors&&m(e))return g(e,"name",n);if(t.identifyingAttribute&&e.hasAttribute(t.identifyingAttribute))return g(e,t.identifyingAttribute,n);for(var o=d(e,n),a=[o],u=e,c=n?"*":">";u.parentNode&&!p(u);)if(1===(u=u.parentNode).nodeType){var s=L.getElementId(u);if(s&&r&&!L.isDuplicateElementId(s)&&y(u,s))return h(a,v(u,!1)),a.join(c);var f=d(u,n);if(h(a,f),u===parent)return a.join(c)}return a.join(c)}}(E),R=new Ie({valueMaskingMode:E.maskingMode,valueMaskIds:E.maskList,valueMaskClasses:E.maskClassList,autoMaskPredicate:w.byTypes(E.valueAutoMasking)},He(),function(e){H.onAutoMaskingApplied(e)});!function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var n=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var n,t=String(e),r=t.length,i=-1,o="",a=t.charCodeAt(0);++i<r;)0!=(n=t.charCodeAt(i))?o+=1<=n&&n<=31||127==n||0==i&&48<=n&&n<=57||1==i&&48<=n&&n<=57&&45==a?"\\"+n.toString(16)+" ":0==i&&1==r&&45==n||!(128<=n||45==n||95==n||48<=n&&n<=57||65<=n&&n<=90||97<=n&&n<=122)?"\\"+t.charAt(i):t.charAt(i):o+="?";return o};e.CSS||(e.CSS={}),e.CSS.escape=n}(M);var T,O=function(){var n=Object.prototype.toString;var r=e("indexOf");function e(e){return function(){return Array.prototype[e].apply(arguments[0],Array.prototype.slice.call(arguments,1))}}return{isFunction:function(e){return"function"==typeof e},isNumber:function(e){return"number"==typeof e||"[object Number]"===n.call(e)},isString:function(e){return"string"==typeof e||"[object String]"===n.call(e)},isUndefined:function(e){return void 0===e},last:function(e){return e&&e[e.length-1]},forOwn:function(e,n){for(var t in e)e.hasOwnProperty(t)&&n(e[t],t)},indexOf:r,pluck:function(e,n){return e?e.map(function(e){return e[n]}):[]},reduce:e("reduce"),contains:"function"==typeof Array.prototype.includes?e("includes"):function(e,n,t){return-1<r(e,n,t)},forEach:e("forEach")}}(),I=new function(e){var o={},a=[];(e=e||this).on=function(e,n,t){(o[e]=o[e]||[]).push([n,t])},e.off=function(e,n){e||(o={});for(var t=o[e]||a,r=t.length=n?t.length:0;r--;)n==t[r][0]&&t.splice(r,1)},e.emit=function(e){for(var n,t=o[e]||a,r=0<t.length?t.slice(0,t.length):t,i=0;n=r[i++];)n[0].apply(n[1],a.slice.call(arguments,1))}},L=function(i,o,a,t,e){t=t||{};var n,u={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",unload:"img",abort:"img",readystatechange:"XMLHttpRequest"},r=a.createElement("a"),c=o.console&&o.console.time&&o.console.timeEnd&&o.console.timeStamp,s=i.isFunction(String.prototype.startsWith);return{currentTimestamp:i.isFunction(Date.now)&&i.isNumber(Date.now())?Date.now:function(){return(new Date).getTime()},isElement:function(e){return"hasAttribute"in e},isDOMElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},isOldIE:function(){return!a.addEventListener},hasTouch:function(){return"ontouchstart"in o},isChromeDesktop:function(){var e=navigator.userAgent,n=/Android|webOS|iPhone|iPad|iPod|Windows Phone|IEMobile|Opera Mini|Mobile|mobile|Tablet|CriOS/i.test(e),t=/Chrome/i.test(e);return!n&&t},getAttributeForElement:function(e,n){return e&&this.isElement(e)?(e.hasAttribute(n.toLocaleLowerCase())?t=e.getAttribute(n.toLocaleLowerCase()):e.hasAttribute(n.toLocaleUpperCase())&&(t=e.getAttribute(n.toLocaleUpperCase())),t&&(t=this.trim(t)),t||null):null;var t},getElementId:function(e){return e&&e.id?i.isString(e.id)||"function"!=typeof e.getAttribute?e.id:e.getAttribute("id"):null},isDuplicateElementId:function(e){if(!t.duplicateIdCheck)return!1;try{return"querySelectorAll"in a&&1<a.querySelectorAll("[id='"+e+"']").length}catch(e){return!1}},getMouseEnterTarget:function(){return"onmouseenter"in a?a:"onmouseenter"in o?o:a.body},hasTimingAPI:function(){return!i.isUndefined(o.performance)&&!i.isUndefined(o.performance.timing)},startsWith:function(e,n){return!(!i.isString(e)||!i.isString(n))&&(s?e.startsWith(n):e.slice(0,n.length)===n)},truncateStr:function(e,n,t){var r=e;return e&&e.length>n&&(r=e.substr(0,n),t&&(r=r.concat("..."))),r},getCoordinate:function(e){var n=e.changedTouches||e.touches,t=n&&0<n.length?n[0]:e,r=this.extractElementFromEvent(e);return this.isHybrid()||"HTML"===r.nodeName.toUpperCase()?new Ve(t.clientX,t.clientY):i.isUndefined(t.pageX)||i.isUndefined(t.pageY)?new Ve(e.clientX+a.body.scrollLeft+a.documentElement.scrollLeft,e.clientY+a.body.scrollTop+a.documentElement.scrollTop):new Ve(t.pageX,t.pageY)},getScrollTopLeft:function(){try{var e=null!==o.top&&o.top!==o.self?o.top:o;return{top:void 0!==e.pageYOffset?e.pageYOffset:(e.document.documentElement||e.document.body.parentNode||e.document.body).scrollTop,left:void 0!==e.pageXOffset?e.pageXOffset:(e.document.documentElement||e.document.body.parentNode||e.document.body).scrollLeft}}catch(e){return this.log("Failed getting scroll values: "+e.message,e),{top:0,left:0}}},getElementXYCoordinates:function(e){if(!e)return null;if(!("getBoundingClientRect"in e))return null;var n=e.getBoundingClientRect(),t=this.getScrollTopLeft();return new Ve(Math.round(n.left+t.left),Math.round(n.top+t.top))},isSameCoordinates:function(e,n){return e.x===n.x&&e.y===n.y},isCoordinatesDistLargerThan:function(e,n,t){return Math.abs(e.x-n.x)>t||Math.abs(e.y-n.y)>t},getCurrentScrollReach:function(){try{var e=null!==o.top&&o.top!==o.self?o.top:o;return(void 0!==e.pageYOffset?e.pageYOffset:(e.document.documentElement||e.document.body.parentNode||e.document.body).scrollTop)+(e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight)}catch(e){return this.log("Failed getting scroll reach: "+e.message,e),0}},getWindowSize:function(){return i.isNumber(o.innerWidth)&&i.isNumber(o.innerHeight)?this.validateSize(o.innerWidth,o.innerHeight):!i.isUndefined(a.body)&&i.isNumber(a.body.offsetWidth)&&i.isNumber(a.body.offsetHeight)?this.validateSize(a.body.offsetWidth,a.body.offsetHeight):null},getScreenSize:function(){return this.validateSize(screen.width,screen.height)},validateSize:function(e,n){return i.isNumber(e)&&i.isNumber(n)?{width:e,height:n}:null},indexOfNode:function(e,n,t){for(var r=t||0;r<e.length;r++)if(e[r]===n)return r;return-1},getLocationUrlSplitByHash:function(){var e=o.location.href,n=e.indexOf("#");return-1===n?{url:e,withoutHash:e,hash:null}:{url:e,withoutHash:e.slice(0,n),hash:e.slice(n+1,e.length)}},getHashFromUrl:function(e){var n=e.indexOf("#");return-1===n?"":e.slice(n+1,e.length)},stripHash:function(e){var n=e.indexOf("#");return-1===n?e:e.slice(0,n)},getReferrerUrlWithoutHash:function(){var e=o.document.referrer;if(!e||0===e.length)return null;var n=e.indexOf("#");return-1!==n?e.slice(0,n):e},encodeAsBase:function(e,n){return e.toString(n)},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},addEventHandler:function(e,n,t,r){e.addEventListener?e.addEventListener(n,t,r):e.attachEvent&&e.attachEvent("on"+n,t)},removeEventHandler:function(e,n,t){i.isUndefined(e.removeEventListener)?i.isUndefined(e.detachEvent)||e.detachEvent("on"+n,t):e.removeEventListener(n,t,!0)},extractElementFromEvent:function(e){void 0===e&&(e=o.event);var n=e.target||e.srcElement;return null==n?null:3===n.nodeType?n.parentNode:n},isEventSupported:function(e){var n="on"+e;if(n in o||n in o.document)return!0;var t=a.createElement(u[n]||"div"),r=n in t;return r||(t.setAttribute(n,"return;"),r=i.isFunction(t[n])),t=null,r||this.log(e+" is not supported."),r},isConsoleSupported:function(){return!i.isUndefined(o.console)&&i.isFunction(o.console.log)},getReason:function(e){return i.isString(e)?"("+e+")":"(not specified)"},hashcode:function(e){var n=0;if(0===e.length)return n;for(var t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},trim:function(e){return"function"!=typeof String.prototype.trim?e.replace(/^\s+|\s+$/g,""):e.trim()},log:function(){if(!i.isUndefined(t.debugMode)&&t.debugMode){var e=Array.prototype.slice.call(arguments,0);if(e.unshift(this.currentTimestamp()),!0===H.page.frame&&e.push(" (in frame "+H.page.id+")"),this.isConsoleSupported())console.log.apply(console,e);else if(!i.isUndefined(o.console.log)){var n=e.join(" ");console.log(n)}}},trace:function(){t.traceMode&&this.log.apply(this,arguments)},time:function(e){t.timingMode&&c&&o.console.time(e)},timeEnd:function(e){t.timingMode&&c&&o.console.timeEnd(e)},timeStamp:function(e){t.timingMode&&c&&o.console.timeStamp(e)},isMaskedElement:function(e){var n=this.getElementId(e);return"password"===e.type||i.contains(t.maskList,n)||e.hasAttribute(k.maskingAttribute)},hasOneOfClassNames:function(e,n){for(var t=" "+this.getClass(e)+" ",r=0;r<n.length;r++)if(-1<t.indexOf(" "+n[r]+" "))return!0;return!1},getClass:function(e){return e.getAttribute&&e.getAttribute("class")||""},getClassList:function(e){var n=this.getClass(e);return n?n.split(" "):[]},hasClassName:function(e,n){return-1<(" "+this.getClass(e)+" ").indexOf(" "+n+" ")},getHybridType:function(){return"undefined"==typeof eyeViewHybridBridge?null:eyeViewHybridBridge.getHybridType()},isHybrid:function(){return"undefined"!=typeof eyeViewHybridBridge},isHybridAndroid:function(){return this.isHybrid()&&this.getHybridType()===eyeViewHybridBridge.HYBRID_ANDROID},isHybridIOS:function(){return this.isHybrid()&&this.getHybridType()===eyeViewHybridBridge.HYBRID_IOS},immutableSet:function(){for(var e={},n=0;n<arguments.length;n++)e[arguments[n]]=!0;return e},DOMElement2Str:function(e){return e instanceof CharacterData?e.textContent:e.outerHTML},dateFromNow:function(e){return new Date(this.currentTimestamp()+e)},isAttachedToDOM:function(e){for(;e;){if(e===a)return!0;e=e.parentNode}return!1},ensureProperty:function(e){for(var n=Array.prototype.slice.call(arguments,1),t=e,r=0;r<n.length;r++)t.hasOwnProperty(n[r])||(t[n[r]]={}),t=t[n[r]];return t},shallowExtend:function(e,n){var t,r={};for(t in e)r[t]=e[t];for(t in n)r[t]=n[t];return r},isEmpty:function(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0},extractHostname:function(e){if(!e)return"";var n=e.indexOf("//");if(-1!==n){var t=e.indexOf("/",n+2);return e.substring(n+2,-1!==t?t:D)}return""},joinPath:function(e,n){var t="/"===e.charAt(e.length-1),r="/"===n.charAt(0);return t&&r?e+n.substring(1):t||r?e+n:e+"/"+n},extractOrigin:function(e){if(!e)return"";if(r.href=e,!r.origin){var n=e.indexOf("://"),t=-1!==n&&-1!==e.indexOf(":",n+3);return r.hostname?r.protocol+"//"+r.hostname+(t&&r.port?":"+r.port:""):""}return r.origin},toAbsoluteUrl:function(e){return r.href=e,r.href},arrayToJsonSafe:function(e){return n||(n="function"==typeof Array.prototype.toJSON?function(e){var n=Array.prototype.toJSON;delete Array.prototype.toJSON;var t=JSON.stringify(e);return Array.prototype.toJSON=n,t}:JSON.stringify),n(e)},parseQuery:function(e){var n={};if(e){var t,r,i=e.split("&");for(t=0;t<i.length;t++)if((r=i[t].split("="))[0])try{n[r[0]]=r[1]?decodeURIComponent(r[1]):""}catch(e){}}return n},bus:e}}(O,M,A,void 0!==E?E:{},I),_={MASKING_CHAR:"*",maskValueOf:function(e){return new Array((""+(e||"")).length+1).join(this.MASKING_CHAR)},canBeValueMasked:function(e){if(!e)return!1;if("INPUT"===e.tagName){var n=(e.getAttribute("type")||"").toLowerCase();return"button"!==n&&"submit"!==n&&"reset"!==n}return!0}};Ie.attributeValueInRegexpArray=function(e,n){for(var t=0;t<n.length;t++)if(n[t].test(e))return!0;return!1},Ie.prototype.isValueMasked=function(e,n){var t=e,r=n?e.parentElement:e;if(!_.canBeValueMasked(r))return!1;var i=this._options.valueMaskingMode===k.ValueMaskingMode.WhiteList;return"INPUT"===r.tagName&&"password"===r.type?i=!0:r.hasAttribute(k.maskingAttribute)?i=!0:L.hasClassName(r,"cls_mask")?i=!0:this._valueMaskIdsWithoutwildcards.length&&O.contains(this._valueMaskIdsWithoutwildcards,L.getElementId(r))?i=!i:this._valueMaskClassesWithoutwildcards.length&&L.hasOneOfClassNames(r,this._valueMaskClassesWithoutwildcards)?i=!i:this._regexpValueMaskIds.length&&Ie.attributeValueInRegexpArray(L.getElementId(r),this._regexpValueMaskIds)?i=!i:this._regexpValueMaskClasses.length&&Ie.attributeValueInRegexpArray(L.getClass(r),this._regexpValueMaskClasses)&&(i=!i),!i&&this._options.autoMaskPredicate(t.value)&&(this._autoMaskingCallback(t),i=!0),i},Ie.prototype.maskValue=function(e,n){return this.isValueMasked(e,n)?_.maskValueOf(e.value):e.value},Me.prototype.open=function(e,n){this._url=n,this.readyState=XMLHttpRequest.OPENED,this.onreadystatechange&&this.onreadystatechange()},Me.prototype.send=function(e){var n;if(this.readyState=XMLHttpRequest.LOADING,this._contentType){var t={type:this._contentType};n=new Blob([e],t)}else n=e;this.status=navigator.sendBeacon(this._url,n)?200:Me.BEACON_ERROR_STATUS,200!==this.status&&L.log("failed posting new beacon using sendBeacon API. payload:  contentType:"+this._contentType),this.readyState=XMLHttpRequest.DONE,this.onreadystatechange&&this.onreadystatechange()},Me.prototype.setRequestHeader=function(e,n){"Content-Type"===e&&(this._contentType=n)},Me.prototype.getResponseHeader=function(){return null},Me.canSend=(T=/chrome/.test(navigator.userAgent.toLowerCase()),function(e){return!(T&&e&&e.length>Me.CHROME_PAYLOAD_LIMIT)}),Me.isSupported=function(){return"function"==typeof navigator.sendBeacon},Me.CHROME_PAYLOAD_LIMIT=61440,Me.BEACON_ERROR_STATUS=400,Ae.prototype.open=function(e,n){-1===n.indexOf("://")&&(n=location.protocol+"//"+location.hostname+(n.startsWith("/")?"":"/")+n),this.xdr.open(e,n),this.readyState=XMLHttpRequest.OPENED,this.onreadystatechange&&this.onreadystatechange()},Ae.prototype.send=function(e){this.xdr.send(e),this.readyState=XMLHttpRequest.LOADING,this.onreadystatechange&&this.onreadystatechange()},Ae.prototype.setRequestHeader=function(){},Ae.prototype.getResponseHeader=function(){return null};var P=function(i){var o=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];if(void 0!==M.XDomainRequest&&/(msie 8\.0|msie 9\.0)/i.test(M.navigator.userAgent)&&o.unshift(function(){return new Ae}),"undefined"!=typeof CordovaRequestAdapter){var e=new CordovaCookieAdapter(N),n=new CordovaContext(A,e);o.unshift(function(){return new CordovaRequestAdapter(n,e)})}var a=null,u=function(e){var n=e();return n.cls_own=!0,n};return{createXMLHTTPObject:function(e,n){if(!e&&i&&n&&Me.isSupported()&&Me.canSend(n))return new Me;if(a)return u(a);var t,r;for(t=0;t<o.length;t++)try{return r=u(o[t]),a=o[t],r}catch(e){continue}return r}}}(E.reportPreferSendBeaconAPI);!function(n,e){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(e){for(var n={},t=0,r=e.length;t<r;t++)n[e.charAt(t)]=t;return n}(i),a=String.fromCharCode,t=function(e){var n=e.charCodeAt(0);return n<128?e:n<2048?a(192|n>>>6)+a(128|63&n):a(224|n>>>12&15)+a(128|n>>>6&63)+a(128|63&n)},r=function(e){return e.replace(/[^\x00-\x7F]/g,t)},u=function(e){var n=[0,2,1][e.length%3],t=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[i.charAt(t>>>18),i.charAt(t>>>12&63),2<=n?"=":i.charAt(t>>>6&63),1<=n?"=":i.charAt(63&t)].join("")},c="function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,u)},s="function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,p)},f=function(e){return c(r(e))},l=function(e,n){return n?f(e).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}):f(e)},d=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}/g,v=function(e){return a(e.length<3?(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1):(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2))},h=function(e){return e.replace(d,v)},p=function(e){var n=e.length,t=n%4,r=(0<n?o[e.charAt(0)]<<18:0)|(1<n?o[e.charAt(1)]<<12:0)|(2<n?o[e.charAt(2)]<<6:0)|(3<n?o[e.charAt(3)]:0),i=[a(r>>>16),a(r>>>8&255),a(255&r)];return i.length-=[0,0,2,1][t],i.join("")},m=function(e){return n=e.replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""),h(s(n));var n};e.Base64={atob:s,btoa:c,fromBase64:m,toBase64:l,bytesToBase64:function(e){for(var n,t="",r=0;r<e.length;r+=3)n=(252&e[r])>>2,t+=i.charAt(n),n=(3&e[r])<<4,r+1<e.length?(n|=(240&e[r+1])>>4,t+=i.charAt(n),n=(15&e[r+1])<<2,r+2<e.length?(n|=(192&e[r+2])>>6,t+=i.charAt(n),n=63&e[r+2],t+=i.charAt(n)):(t+=i.charAt(n),t+="=")):(t+=i.charAt(n),t+="==");return t},utob:r,encode:l,encodeURI:function(e){return l(e,!0)},btou:h,decode:m}}(M,void 0!==L?L:{}),De.prototype.put=function(e,n){var t={key:e,value:n};if(this._keymap[e]=t,this.tail?(this.tail.newer=t).older=this.tail:this.head=t,this.tail=t,this.size===this.limit)return this.shift();this.size++},De.prototype.shift=function(){var e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=D):this.head=D,e.newer=e.older=D,delete this._keymap[e.key]),e},De.prototype.get=function(e,n){var t=this._keymap[e];if(t!==D)return t===this.tail||(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=D,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t),n?t:t.value},De.prototype.find=function(e){return this._keymap[e]},De.prototype.set=function(e,n){var t,r=this.get(e,!0);return r?(t=r.value,r.value=n):(t=this.put(e,n))&&(t=t.value),t},De.prototype.toString=function(){for(var e="",n=this.head;n;)e+=String(n.key)+":"+n.value,(n=n.newer)&&(e+=" < ");return e},k.dictionary={eventTypes:{change:0,document:2,mousedown:3,touchstart:4,touchend:5,focusout:6,blur:7,unload:9,submit:10,reset:11,mouseup:12,drag:13,scroll:14,popstate:15,keydown:16,keyup:17,keypress:18,timing:20,idle:21,ajaxRequest:22,formValidationError:23,hashchange:25,botDetection:26,mouseenter:27,navigation:28,mousemove:29,error:30,thirdparty:31,custom:32,hover:33,thirdpartymap:34,performance:35,resource:36,clsdebug:37,resize:38,pageSnapshot:91,pageUpdate:92,resourceContent:93,corsDeniedResource:94,blackout:101,segmentChanged:102,titleChanged:103,clientAttribute:110,waterfall:111,lastSegment:112},elements:{DIV:0,SPAN:1,INPUT:2,FORM:3,SELECT:4,TEXTAREA:5,TABLE:6,TR:7,TD:8,IFRAME:9,TBODY:10,THEAD:11,LABEL:12},encodingTypes:{cd_number:0,cd_boolean:1,cd_string:2,cd_coordinate:3},performanceTimingEvents:{navigationStart:1,redirectStart:2,fetchStart:4,domainLookupStart:5,connectStart:7,secureConnectionStart:8,requestStart:10,responseStart:13,domLoading:15,domContentLoadedEventStart:17,domComplete:19,loadEventStart:20,loadEventEnd:21},encode:function(e,n){var t=n[e];return t!==D?t:e},encodeEventType:function(e){return k.dictionary.encode(e,k.dictionary.eventTypes)},encodeNodeName:function(e){return k.dictionary.encode(e,k.dictionary.elements)},encodeEncodingType:function(e){return k.dictionary.encode(e,k.dictionary.encodingTypes)},encodePerformanceTimingMeasurement:function(e){return k.dictionary.encode(e,k.dictionary.performanceTimingEvents)}},ke.MAX_ENTRIES=150,ke.DirectionType={BACK:1,FORWARD:2},ke.UrlType={FUlL_URL:1,HASH_ONLY:2},Ne.EVENTS={BlackoutEnter:"BlackoutEnter",BlackoutLeave:"BlackoutLeave"},Ne.ALWAYS_FALSE=function(){return!1};var U,F={severity:{ERROR:0,WARN:1,INFO:2,DEBUG:3},types:{GENERAL_ERR:{code:100,count:0},INVALID_TIMING_ERR:{code:101,count:0},TOP_WINDOW_SIZE_ERR:{code:102,count:0},WINDOW_SIZE_NOT_VALID_ERR:{code:103,count:0},KEREN_ERR:{code:104,count:0}},currentDebugInfo:null,registerError:function(e,n){F.registerDebugInfo(F.severity.ERROR,e,n)},registerErrorAndLog:function(e,n){F.registerDebugInfoAndLog(F.severity.ERROR,e,n)},registerDebugInfoAndLog:function(e,n,t){F.registerDebugInfo(e,n,t),L.log(t)},registerDebugInfo:function(e,n,t){n.count++,null===F.currentDebugInfo&&(F.currentDebugInfo=new Oe(e,n.code,n.count,t))},getRegisteredDebugInfo:function(e){var n=F.currentDebugInfo;return null===n||O.isUndefined(n)?null:(e&&F.clearDebugInfo(),n)},clearDebugInfo:function(){F.currentDebugInfo=null},setRegisteredDebugInfoOnEvent:function(e){if(null===e.getDebugInfo()||O.isUndefined(e.getDebugInfo())){var n=F.getRegisteredDebugInfo(!0);null!=n&&e.setDebugInfo(n)}},setErrorOnEvent:function(e,n,t){F.setDebugInfoOnEvent(e,F.severity.ERROR,n,t)},setErrorOnEventAndLog:function(e,n,t,r){F.setDebugInfoOnEvent(e,F.severity.ERROR,n,t),r?L.log(t,r):L.log(t)},setWarnOnEvent:function(e,n,t){F.setDebugInfoOnEvent(e,F.severity.WARN,n,t)},setDebugInfoOnEvent:function(e,n,t,r){if(null===e||O.isUndefined(e))L.log("Failed setting debug on non-existing event");else{var i=new Oe(n,t.code,t.count,r);e.setDebugInfo(i)}}};U=function(t,r,i,u,c,o){var a={currentlyEncodedPageEvent:null};function s(e,n,t){var r=O.isNumber(e)&&O.isNumber(n);return r||o.setErrorOnEvent(a.currentlyEncodedPageEvent,o.types.WINDOW_SIZE_NOT_VALID_ERR,"Non valid values for window size for "+t+": x="+e+" y="+n),r?{width:e,height:n}:null}function f(e){return null!==e&&O.isNumber(e.width)&&O.isNumber(e.height)?e.width+"x"+e.height:"x"}function l(e){if(O.isNumber(e))return L.encodeAsBase(e,k.encoding.numberBase);L.log("Trying to encode a non-number "+e)}function d(e){if(O.isString(e))return l(L.hashcode(e));L.log("Trying to encode hashCode of a non-string "+e)}function n(e){if(O.isNumber(e.x)&&O.isNumber(e.y)){var n=Math.round(e.x),t=Math.round(e.y);return l(n)+"_"+l(t)}L.log("Trying to encode coordinate with non-numbers x,y : ("+e.x+","+e.y+")")}function v(e,n,t,r){O.isString(t)&&(r?e.push(L.Base64.encode(n)+"_"+L.Base64.encode(t)):e.push(n+"_"+t))}function h(e,n,t){O.isNumber(t)&&e.push(n+"_"+l(t))}function p(e,n,t,r){r=r||0;var i=u.mmRecordTimes?"_"+l(r):"",o=Math.round(n),a=Math.round(t);e.push(l(o)+"_"+l(a)+i)}return{encodePageDetails:function(e){var n=[];return e.frame&&v(n,"t",e.frame?"f":"p"),v(n,"u",d(e.urlWithoutHash)),e.hash&&v(n,"h",L.Base64.encode(e.hash)),i().state.lastSizes.window=O.isNumber(t.innerWidth)&&O.isNumber(t.innerHeight)?s(t.innerWidth,t.innerHeight,"[inner]"):!O.isUndefined(r.body)&&O.isNumber(r.body.offsetWidth)&&O.isNumber(r.body.offsetHeight)?s(r.body.offsetWidth,r.body.offsetHeight,"[offset]"):null,i().state.lastSizes.screen=s(t.screen.width,t.screen.height,"[screen]"),v(n,"s",f(i().state.lastSizes.window)),v(n,"sc",f(i().state.lastSizes.screen)),e.referrerWithoutHash&&v(n,"r",d(e.referrerWithoutHash)),k.reportBase64URLs&&v(n,"ub",L.Base64.encode(e.url)),n.join("*")},encodePageSnapshotData:function(e){var n="h",t=i().plugins.reporter.beaconEncoder.encodeSnapshotHtml(e.html);return t.compressed?n="hh":t.plain&&(n="p"),["sn_"+e.seq,"r_"+L.Base64.encode(e.referrer),"c_"+L.Base64.encode(e.cookie),"ch_"+e.charset,n+"_"+t.encoded].join("*")},encodeResize:function(e){var n=[];return v(n,"ws",f(e.window)),v(n,"sc",f(e.screen)),n.join("*")},encodeTimings:function(e){return O.reduce(e,function(e,n,t){var r="u_"+t+"*t_"+n.total;return O.isNumber(n.rendering)&&(r+="*r_"+n.rendering),O.isNumber(n.dns)&&(r+="*d_"+n.dns),O.isNumber(n.timeToFirstBuffer)&&(r+="*f_"+n.timeToFirstBuffer),O.isNumber(n.downloadTime)&&(r+="*w_"+n.downloadTime),O.isNumber(n.originalRenderTime)&&(r+="*o_"+n.originalRenderTime),O.isString(e)&&0<e.length?e+"**"+r:r},"")},encodeWaterfallTiming:function(e){var n=[];for(var t in e){var r,i=[],o={},a=[];for(r=0;r<e[t].length;r++){var u=[],c=null;for(var s in e[t][r])"name"===s?c=L.Base64.encode(e[t][r][s]):(o[s]===D&&(o[s]=a.length,a.push(s)),h(u,o[s],Math.round(e[t][r][s])));null!==c&&i.push(c+"_"+u.join("_")),c=null}0!==i.length&&n.push(t+"*"+a.join("_")+"*"+i.join("*"))}return n.join("**")},encodePerformanceTimings:function(e){var n=e.perf.timing,t=e.perf.navigation,r=e.browserTime,i=[];for(var o in n)void 0!==k.dictionary.performanceTimingEvents[o]&&h(i,k.dictionary.encodePerformanceTimingMeasurement(o),n[o]);return t&&O.isNumber(t.type)&&h(i,"nt",t.type),t&&O.isNumber(t.redirectCount)&&h(i,"rc",t.redirectCount),r&&h(i,"bt",r),i.join("*")},encodeAjaxRequest:function(e){var n=[];if(e.method&&v(n,"m",e.method),u.ajaxHashRecurrentUrls){var t=d(e.url),r=e.ajaxUrls.get(t);O.isUndefined(r)&&(e.ajaxUrls.set(t,e.url),v(n,"u",L.Base64.encode(e.url))),v(n,"uh",t)}else v(n,"u",L.Base64.encode(e.url));return e.startedAt&&e.endedAt&&v(n,"d",l(e.endedAt-e.startedAt)),e.status&&v(n,"s",l(e.status)),e.statusText&&v(n,"st",L.Base64.encode(e.statusText)),e.requestHeaders&&v(n,"rqh",L.Base64.encode(e.requestHeaders)),e.requestContent&&v(n,"rqc",L.Base64.encode(e.requestContent)),e.responseHeaders&&v(n,"rh",L.Base64.encode(e.responseHeaders)),e.responseContent&&v(n,"rc",L.Base64.encode(e.responseContent)),n.join("*")},encodeResourceContent:function(e){var n=[];if(!O.isUndefined(e.url))return v(n,"u",L.Base64.encode(e.url)),e.type&&0<e.type.length&&v(n,"t",L.Base64.encode(e.type)),e.content&&0<e.content.length&&v(n,"dd",L.Base64.bytesToBase64(e.content)),e.error&&0<e.error.length&&v(n,"er",L.Base64.encode(e.error)),n.join("*")},encodeKeyValue:function(e){var n=[];return v(n,"n",L.Base64.encode(e.name)),v(n,"v",L.Base64.encode(""+e.val)),n.join("*")},encodeSegmentChanged:function(e){var n=[];return e.type&&n.push("t_"+e.type),e.current&&n.push("c_"+L.Base64.encode(e.current)),e.hint&&n.push("h_"+e.hint),e.last&&n.push("l_"+L.Base64.encode(e.last)),e.lastDwell&&n.push("ld_"+l(e.lastDwell)),n.join("*")},encodeKeyEvent:function(e){var n="";return e.unicode&&(n+=e.unicode),O.isUndefined(e.content)||(n+="_"+L.Base64.encode(e.content)),n},encodeClickDetails:function(e){return n(e.start)+"*"+n(e.end)+"*"+l(e.duration)},encodeMouseMove:function(e){u.mmDebug&&L.log("encoding coordArr["+e.length+"]:"+JSON.stringify(e));var n,t,r=[];for(n=0;n<e.length;n++)p(r,(t=e[n]).x,t.y,t.t);return r.join("*")},encodeHoverEvent:function(e){for(var n=[],t=[],r=e.length-1;0<=r;r--){var i=e[r];if(0<=t.indexOf(i))u.mhDebug&&L.log("encode hover skipping duplicate: ",i);else{var o=c.getSelectorExpression(i);if(n.push(o),t.push(i),t.length>=u.mhMaxListSize)break;u.mhDebug&&L.log("encoding hover selector: "+o,i)}}var a=n.join(" ");return u.mhDebug&&L.log("encoding total of ["+n.length+"] hovers: "+a),a},encodeKVMap:function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&v(n,t,e[t],!0);return n.join("*")},encodeNumber:l,encodeBoolean:function(e){return e?"1":"0"},encodeCoordinate:function(e){if(O.isNumber(e.x)&&O.isNumber(e.y)){var n=Math.round(e.x),t=Math.round(e.y);return l(n)+"_"+l(t)}L.log("Trying to encode coordinate with non-numbers x,y : ("+e.x+","+e.y+")")},encodeCoordinate64:function(e){return L.Base64.encode(n(e))},encodeString:function(e){return L.Base64.encode(e)},encodeHashCode:d}}(M,A,function(){return H},E,C,F),_e.prototype.add=function(e,n){return this._updates.push({ref:n,update:e}),this},Le.INITIAL_COMPRESSION_FACTOR=.25,Le.MINIMAL_COMPRESSION_FACTOR=.05,eventEncodingUtils={compress:function(e){return L.pako.gzip(e)},encodeTimestamp:function(e){var n=e.timestamp;return O.isNumber(n)||(L.log("Missing event timestamp",e),n=L.currentTimestamp()),U.encodeNumber(n)},encodeEventType:function(e){return k.encodeEventTypes?k.dictionary.encodeEventType(e):e},encodeExtraInfo:function(e){var n=e.extraInfo;if(O.isUndefined(n))return"";for(var t,r,i,o,a=[],u=ze.prototype.extraInfoAttrs,c=0;c<u.length;c++){var s=u[c],f=n[s.name];O.isUndefined(f)||(t=a,r=s.encodeName,i=s.encodeFunc(f),o=s.encodeCode,O.isString(i)&&t.push(r+"."+o+"_"+i))}return a.join("*")},encodeDebugInfo:function(e){var n=e.debugInfo;if(O.isUndefined(n))return"-";var t=function(e,n,t){O.isUndefined(t)||e.push(n+"_"+t)},r=[];return t(r,"s",n.severity),t(r,"c",n.code),t(r,"i",n.count),n.msg&&n.count<=3&&t(r,"m",U.encodeString(n.msg)),r.join("*")}},Ue.COMPRESSED_INDICATION_CHARSET="ISO-8859-15",Ue.MINIMAL_COMPRESSION_FACTOR=.05,Fe.currentRef=function(){return A.location.protocol+"//"+A.location.host+A.location.pathname},Be.prototype.track=function(e){var n=!this.current||this.current.ofSameSegment(e);return this.last=this.current,this.current=e,n},Be.prototype.getCurrent=function(){return this.current};var j,B,H={env:k,config:E,utils:L,_:O,sessionId:D,visitorId:D,debugHelper:(j=E,B=n,{visitLoadEvent:function(e){if(j.sendStateInfo){var n={};xe(n),Se(n);var t={ver:B,config:function(e){var n,t={};for(n in j)j.hasOwnProperty(n)&&/glassboxid|mask|ajax|iframe|bychance/gi.test(n)&&("object"==typeof j[n]?0<(j[n].length||0):e[n]!==j[n])&&(t[n]=j[n]);return t}(n)};e.setExtraInfo(ze.prototype.DETECTOR_CONFIG_ID,JSON.stringify(t))}},visitUnloadEvent:function(e){}}),page:{timing:{}},bindings:{registered:[],unsupportedEventTypes:[]},plugins:{},reports:{events:[],resources:[]},state:{loaded:!(Be.prototype.getLast=function(){return this.last||this.current}),clickStart:{},scrolling:{},unloading:!1,maxScrollReach:0,typableElementsLRUMap:new De(20),lastFocusData:{},mouseEnterReported:!1,hover:{hoverStartTimestamp:0,hoverElementList:[]},clsDebugCounter:0,lastSizes:{window:null,screen:null,dpr:M.devicePixelRatio}},touchDetected:!1,ajaxUrls:new De(20),historyManager:new ke(M,I,M.history),blackoutManager:new Ne(M,I,E.blackoutWhenLocationContains),debugInfoHandler:F,zoomType:{IN:1,OUT:2},version:"local_dev",segmentManager:new function(o,a){var e,u=!1,c=L.stripHash(o.location.href),s="",f={startedAt:L.currentTimestamp(),value:o.location.pathname,type:"path"};function r(e,n){var t="hash"===e?o.location.hash:o.location.pathname+o.location.hash,r=L.currentTimestamp(),i={type:e,hint:n,current:t,last:f.value,lastDwell:r-f.startedAt};f.startedAt=r,f.type=e,f.value=t,s=o.location.hash,c=L.stripHash(o.location.href),u=!0,a.emit("segmentChanged",i)}void 0!==ze&&(e=ze,ze=function(){e.apply(this,arguments),this.subPage=s,this.referrer=c}),a.on("navigation",function(e){var n;e.direction===ke.DirectionType.BACK?n="back":e.direction===ke.DirectionType.FORWARD&&(n="forward");var t="path";e.urlType===ke.UrlType.HASH_ONLY&&(t="hash"),r(t,n)}),a.on("init:loaded",function(){s=o.location.hash,c=L.stripHash(o.location.href),f.startedAt=L.currentTimestamp(),o.location.hash&&r("hash","load")}),this.createSegmentTracker=function(){return new Be},this.onUnload=function(){u&&a.emit("lastSegment",{last:f.value,lastDwell:L.currentTimestamp()-f.startedAt})}}(A,I),botDetector:new function(t,n,i){var o="bot.nh",r="bot.d",a={CLICKS_WITH_NO_MOUSE_MOVES:{code:"1",active:!0},NOT_TRUSTED_MOUSEEVENT:{code:"3",active:!0},INVALID_NAVIGATION_API_VALUES:{code:"4",active:!0},MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES:{code:"5",active:!0}},u={MANY_MOUSE_MOVES_BETWEEN_CLICKS:{code:"-1",active:!0}},c=!1,s=!1,f=null,l=null,d=0,v=100,h=0,p={robot:!1,human:!1},m=!1;function g(){e("mousemove",y),e("click",E),m=!1}function y(e){return c||(l=L.getCoordinate(e),d=L.currentTimestamp()),s&&h++,c=!0}function E(e){return e.type===k.mouseEvents.down&&function(e){if(e.type===k.mouseEvents.down){s=!0;var n,t=L.getCoordinate(e);null!==f?u.MANY_MOUSE_MOVES_BETWEEN_CLICKS.active&&!L.isSameCoordinates(t,f)?10<=h&&(n=u.MANY_MOUSE_MOVES_BETWEEN_CLICKS,L.log("Human Detected ["+n.code+"]"),p.human=!0,i.set(r,n.code),g()):a.CLICKS_WITH_NO_MOUSE_MOVES.active&&L.isCoordinatesDistLargerThan(t,f,10)&&0===h&&b(a.CLICKS_WITH_NO_MOUSE_MOVES):c&&function(e){if(a.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active){var n=L.getCoordinate(e);if(null!==l&&L.isSameCoordinates(n,l)&&L.currentTimestamp()-d<v){var t=i.get(o);if(O.isUndefined(t))i.set(o,1);else{var r=parseInt(t);isNaN(r)&&(L.log("Bad format of non human counter in the robot cookie: "+r),r=1),r++,i.set(o,r),b(a.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES),a.MOVE_AND_CLICK_SAME_COORDINATES_AND_TIMES.active=!1}}}}(e),h=0,f=t}}(e),n=e,a.NOT_TRUSTED_MOUSEEVENT.active&&"isTrusted"in n&&!1===n.isTrusted&&b(a.NOT_TRUSTED_MOUSEEVENT),!0;var n}function e(n,e){try{L.removeEventHandler(t.body,n,e)}catch(e){L.log("BotDetector failed to remove "+n+" listener. "+e.message(),e)}}function b(e){m&&(L.log("BotDetector has detected a bot with type: "+e.code),e.active=!1,i.set(r,e.code),p.robot=!0,g(),n.emit("botDetection",e.code))}this.init=function(){var e=i.get(r);e?L.log("Session was already Bot/Human classified with code: "+e):(m=!0,L.addEventHandler(t.body,"mousemove",y,!0),L.addEventHandler(t.body,"click",E,!0))},this.isActive=function(){return m},this.notifyMouseAction=E}(A,I,S),initialize:function(e){if(H.version=e,L.log("Initializing Detector... ("+k.setup+" setup) VERSION:"+H.version),H.setClientCookies(),void 0!==E.enabledByChance&&!Te(E.enabledByChance,S,"recording"))return k.disabled=!0,void L.log("recording is DISABLED (chances = "+E.enabledByChance+")");E.domRecordEnabled||void 0===E.domRecordEnabledByChance||Te(E.domRecordEnabledByChance,S,"dom")&&"function"==typeof E.enableDomConfig&&(E.enableDomConfig(),L.log("DOM recording ENABLED (chances = "+E.domRecordEnabledByChance+")"));try{if(void 0!==l){var n=s.validate(l,E);if(0<n.errors.length)return void console.error("[EyeView-1401]: Detector configuration validation failure. validation report:"+n);L.log("configuration fields validation report:"+n)}else L.log("Warning: configuration scheme not set, skipping configuration validation.")}catch(e){return void console.error("[EyeView-1402]: Error while validating Detector configuration:"+e+". Detector is DISABLED.")}try{H.checkSupportModeSession(),H.initializePageDetails(),H.registerPlugins(),I.on("clsDebug",H.saveClsDebugErrorEvent),I.on(Ne.EVENTS.BlackoutEnter,H.onBlackoutEnter),I.on(Ne.EVENTS.BlackoutLeave,H.onBlackoutLeave),void 0!==H.plugins.domRecordingPlugin&&H.plugins.domRecordingPlugin.isSemiDomActivated()&&H.addDomReadyEventHandler(),H.updateScrollReach(),H.saveDocumentLoadEvent(H.page.initializationTimestamp),L.log("Extracted page details for "+H.page.id+" at "+H.page.urlWithoutHash),H.registerPreLoadEvents(),E.SCIntegration&&I.on("3rdpartymap:scReport",H.saveThirdPartyMapEvent),I.on("thirdPartyMap",function(e){H.saveThirdPartyMapEvent({value:e})}),I.emit("init:preloaded");var t=M.document.readyState;L.log("readyState on initialization: "+t),A.body&&"complete"===t?H.onLoad():L.addEventHandler(M,"load",H.onLoad,!1)}catch(e){L.log("ERROR: while initializing detector. Exception: ",e.stack?e.stack:e.message),console.log("WARNING[EyeView-1302]: Failed initializing detector script - "+e.message),H.saveClsDebugErrorEvent("initialize",e)}},disable:function(){sessionStorage["gb.disabled"]=!0,console.log("Glassbox Detector has been DISABLED. Starting from next navigation (or refresh of current page), recording is suspended. To re-enable Glassbox Detector please invoke enable() method.")},onBlackoutEnter:function(e){var n=H.createEventObject("blackout",L.currentTimestamp(),null);n.value=e,H.saveEvent(n)},onBlackoutLeave:function(){H.savePageUpdate()},onLoad:function(){L.log("onLoad - finalizing detector initialization. location:"+M.location.href);var e=L.currentTimestamp();H.state.loaded||(L.time("onLoadInitialization"),H.documentEvent&&0<A.title.length&&(void 0===H.page.title||0===H.page.title.length)&&(H.page.title=H.getPageTitle(),H.documentEvent.setExtraInfo(ze.prototype.VISUAL_NAME,H.page.title)),E.botDetection&&!L.hasTouch()&&H.botDetector.init(),H.page.loadTimestamp=e,H.resolvePageLoadTime(H.page),E.reportValidationErrors&&I.on("formValidationError",H.saveValidationError),H.state.loaded=!0,I.emit("init:loaded"),H.registerPostLoadEvents(),H.plugins.domRecordingPlugin&&new hn(A,I),I.emit("init:post_binding"),L.timeEnd("onLoadInitialization"),L.log("onLoad - detector initialization completed. location:"+M.location.href))},registerPlugins:function(){var t=this;O.forOwn(H.plugins,function(e,n){e.initialize(I,t)&&L.log("Registered plugin: "+n)})},registerPreLoadEvents:function(){var e=function(){return H.state.unloading},n=[{type:"beforeunload",interception:H.interceptUnload,target:M,logicalName:"unload",filter:e},{type:"pagehide",interception:H.interceptUnload,target:M,logicalName:"unload",filter:e},{type:"resize",valueEncoding:U.encodeResize,filter:H.filterResize,interception:H.interceptResize,target:M},{type:H.getChangeEventType(),valueExtraction:H.extractElementValue,interception:H.interceptFocusLost,filter:H.filterNonChangableEventsElements,logicalName:"change",target:A},{type:"reset",target:A},{type:"submit",valueExtraction:H.extractElementSource,valueEncoding:U.encodeHashCode,target:A},{type:H.getFocusInEventType(),valueExtraction:H.extractElementValue,interception:H.interceptFocusIn,filter:H.filterNonTypableElements,target:A}];H.page.hasTouch?(n.push({type:"touchstart",interception:H.interceptClickStart,target:A}),n.push({type:L.isHybridAndroid()?"touchmove":"touchend",interception:H.interceptClickEnd,valueEncoding:U.encodeClickDetails,target:A})):(n.push({type:k.mouseEvents.down,interception:H.interceptClickStart,target:A,logicalName:"mousedown"}),n.push({type:k.mouseEvents.up,interception:H.interceptClickEnd,valueEncoding:U.encodeClickDetails,target:A,logicalName:"mouseup"})),"blur"!==H.getChangeEventType()&&n.push({preload:!0,type:"blur",valueExtraction:H.extractElementValue,interception:H.interceptBlur,filter:H.filterNonTypableElements,logicalName:"change",target:A}),E.recordMouseMoves&&n.push({type:"mousemove",valueExtraction:H.extractMouseMoveValue,valueEncoding:U.encodeMouseMove,encodeValue:!1,interception:H.interceptMouseMove,dependent:!0,dontSendElement:!0,target:A}),E.recordHovers&&n.push({type:"mouseover",encodeValue:!1,filter:H.filterHovers,interception:H.interceptMouseOver,valueEncoding:U.encodeHoverEvent,target:A}),E.recordScrolls&&n.push({type:"scroll",debounceBy:E.debounceScrolls,valueExtraction:H.extractScrollValue,valueEncoding:U.encodeCoordinate,filter:H.filterScrollElements,interception:H.interceptScroll,dependent:E.dependentScroll,target:A}),E.recordErrors&&n.push({type:"error",valueExtraction:H.extractErrorValue,interception:H.interceptError,target:M}),E.recordConsoleErrors&&function(e){if("object"==typeof console){var n,t=function(e,n){if("function"==typeof console[e]){var t=console[e];console[e]=function(){var e=Array.prototype.slice.call(arguments);t.apply(console,e),n(e)}}};for(n in e)t(n,e[n])}}({error:H.onConsoleError});var t=L.getMouseEnterTarget();t!==A&&t!==M||n.push({type:"mouseenter",interception:H.interceptMouseEnter,target:t}),H.shouldListenToKeyEvents()&&(n.push({type:"keydown",interception:H.interceptKeyboard,valueEncoding:U.encodeKeyEvent,dependent:!0,target:A}),n.push({type:"keypress",interception:H.interceptKeyboard,valueEncoding:U.encodeKeyEvent,dependent:!0,target:A})),E.domRecordEnabled&&(I.on("pageSnapshot:save",H.savePageSnapshotEvent),I.on("pageUpdate",H.savePageUpdate)),E.resourcesRecordEnabled&&I.on("saveResourceEvent",H.saveResourceDataEvent),E.resourcesRecordAllowCors&&I.on("saveCorsDeniedEvent",H.saveCorsDeniedDataEvent),E.clientAttributesEnabled&&I.on("clientAttribute",H.saveClientAttributeEvent),E.resourceTimingRecordEnabled&&Te(E.resourceTimingRecordEnabledByChance,S,"performanceRecord")&&I.on("waterfall",H.savePerformanceDataEvent),H.page.hasTimingAPI&&!E.recordAjaxCallsAnyway||(I.on("ajax:load",H.recordAjaxResource),I.on("ajax:error",H.recordAjaxResource)),I.on("ajax:loadend",H.saveAjaxRequestEvent),I.on("segmentChanged",H.saveSegmentChangedEvent),I.on("lastSegment",H.saveLastSegmentEvent),I.on("titleChanged",H.saveTitleChanged),I.on("botDetection",H.saveBotDetectionEvent),I.on("reporter:idle",H.saveIdleEvent),H.bindPageEvents(n)},saveIdleEvent:function(e){var n=L.currentTimestamp(),t=H.createEventObject("idle",n,null);t.value=n-e.idleBaseTime,t.binding={valueEncoding:U.encodeNumber},t.setExtraInfo(ze.prototype.TIME_SINCE_LAST_EVENT,n-e.latestEventTime),H.saveEvent(t)},saveBotDetectionEvent:function(e){var n=H.createEventObject("botDetection",L.currentTimestamp(),null);n.value=e,n.shouldEncodeValue=!1,H.saveEvent(n)},registerPostLoadEvents:function(){var e=[];H.state.mouseEnterReported||L.getMouseEnterTarget()!==A.body||e.push({type:"mouseenter",interception:H.interceptMouseEnter,target:A.body}),0<e.length&&H.bindPageEvents(e)},bindPageEvents:function(e){L.time("bindPageEvents"),O.forEach(e,function(e){H.registerEventBinding(e)}),L.log("Bound event types ("+H.bindings.registered.length+"): "+O.pluck(H.bindings.registered,"type")+(H.bindings.unsupportedEventTypes.length?" Unsupported event types: ["+H.bindings.unsupportedEventTypes.join(", ")+"].":"")),L.timeEnd("bindPageEvents")},registerEventBinding:function(n){var e=n.target||M.document.body;if(O.isUndefined(e)||null==e)L.log("Couldn't register '"+n.type+"' handler on a non-existing element.",n);else try{H.handleElementsEvents(e,n)}catch(e){L.log("Failed binding '"+n.type+"'. Error: "+e.message,e),M.console&&console.error(e)}},handleElementsEvents:function(e,n){var t=n.type;if(O.contains(k.eventTypes,t))if(L.isEventSupported(t)){var r=H.createHandler(n);L.addEventHandler(e,t,r,!0),H.bindings.registered.push({type:t,el:e,handler:r})}else H.bindings.unsupportedEventTypes.push(t)},createHandler:function(n){var e=function(e){if(be.bounceAll(e.type),H.handleDOMEvent(e,n),"beforeunload"!==e.type)return!0};if(0<(n.debounceBy||0)){var t=be[n.type];t?e=t(e,n.debounceBy).debouncedHandler:L.log("WARN: event de-bouncing for type '"+n.type+"' is not supported.")}return e},handleDOMEvent:function(n,e){try{if(n=n||M.event,!O.isUndefined(n._cls_handled)&&!0===n._cls_handled)return void L.log("WARN: handler already handled this event. skipping..",n);n._cls_handled=!0,L.time("handleDOMEvent_"+n.type);var t=L.extractElementFromEvent(n),r=L.getElementId(t);E.ignorableElementIds&&O.contains(E.ignorableElementIds,r)||H.handleEvent(n,t,e),L.timeEnd("handleDOMEvent_"+n.type)}catch(e){L.log("ERROR: while handling "+n.type+" DOM event ",n," Exception: ",e.stack?e.stack:e.message),H.saveClsDebugErrorEvent("handleDOMEvent",e,"event type="+n.type)}},handleEvent:function(e,n,t){if(!O.isFunction(t.filter)||!t.filter(n,e)){var r=L.currentTimestamp(),i=e.type;L.time("handleEvent_"+i);var o=H.createEventObject(i,r,n);o.domEvent=e;var a=!O.isUndefined(t.dontSendElement)&&!0===t.dontSendElement;if(o.selectorExpression=a?k.encoding.rootSelector:C.getSelectorExpression(n)||k.encoding.rootSelector,o.binding=t,O.isUndefined(t.encodeValue)||!1!==t.encodeValue||(o.shouldEncodeValue=!1),O.isUndefined(t.dependent)||!0!==t.dependent||(o.dependent=!0),H.extractValue(o,t),H.extractExternalId(o,n),H.interceptReport(o,t),E.reportVisualNames&&o.report&&!a){var u=H.extractVisualName(n);u&&o.setExtraInfo(ze.prototype.VISUAL_NAME,u)}H.autoMaskingSignaled&&(o.setExtraInfo(ze.prototype.AUTO_MASKING,!0),H.autoMaskingSignaled=!1),H.saveEvent(o),I.emit("event:"+o.type,o),L.timeEnd("handleEvent"+i)}},createEventObject:function(e,n,t){return new ze(e,n,t,H.page.id)},onDomReady:function(){A.addEventListener?A.removeEventListener("DOMContentLoaded",H.onDomReady,!1):A.detachEvent("onreadystatechange",H.onDomReady),I.emit("init:domready")},onAutoMaskingApplied:function(e){L.log("auto masking was applied on element: "+e.tagName+" [id="+e.id+"]"),H.autoMaskingSignaled=!0},addDomReadyEventHandler:function(){"complete"!==A.readyState&&(A.addEventListener?M.addEventListener("DOMContentLoaded",H.onDomReady,!1):A.attachEvent("onreadystatechange",H.onDomReady))},extractValue:function(n,e){try{if(!O.isUndefined(e.valueExtraction)){var t=e.valueExtraction(n.domEvent,n.element);O.isUndefined(t)||null==t||(n.value=t)}}catch(e){L.log("Failed extracting value for event "+n.type+" - "+e.name+": "+e.message,e),"clsdebug"!==n.type&&H.saveClsDebugErrorEvent("extractValue",e,"event type="+n.type)}},extractExternalId:function(e,n){if(n&&L.isElement(n)&&!O.isUndefined(E.externalIdAttr)&&O.isString(E.externalIdAttr)&&0<E.externalIdAttr.length){var t=L.getAttributeForElement(n,E.externalIdAttr);null!==t&&0<t.length&&e.setExtraInfo(ze.prototype.EXTERNAL_ID,t)}},interceptReport:function(n,e){if(!O.isUndefined(e.interception))try{n.report=e.interception(n)}catch(e){L.log("Failed intercepting "+n.type+" event: "+e.message,e,n),"clsdebug"!==n.type&&H.saveClsDebugErrorEvent("interceptReport",e,"event type="+n.type)}},addEvent:function(e){H.config.debugMode&&H.reports.events.push(e)},getFocusInEventType:function(){return L.isOldIE()?"focusin":"focus"},getChangeEventType:function(){return L.isOldIE()?"onfocusout"in A?"focusout":"blur":"change"},startFocusTiming:function(e){var n=L.currentTimestamp(),t=H.state.lastFocusData.startTime;H.state.lastFocusData={element:e,startTime:n,prevFocusStartTime:t}},endFocusTiming:function(e){if(H.state.lastFocusData.element===e){var n=L.currentTimestamp();H.state.lastFocusData.focusTime=n-H.state.lastFocusData.startTime}else L.trace("Cannot measure focus time because of element mismatch. ")},filterNonTypableElements:function(e,n){return null===e||(H.isChangebleElement(e)&&("focus"===n.type||"focusin"===n.type?H.startFocusTiming(e):"blur"===n.type&&H.endFocusTiming(e)),!H.isTypableElement(e))},filterNonChangableEventsElements:function(e,n){return null===e||null===n||(H.isChangebleElement(e)&&H.endFocusTiming(e),"change"!==n.type&&!H.isChangebleElement(e))},interceptFocusIn:function(e){return H.checkTypedContentHasChangedAndUpdate(e),!1},interceptFocusLost:function(e){return null!==e&&null!==e.element&&(H.state.lastFocusData.focusTime&&e.setExtraInfo(e.FOCUS_TIME_ATTR,H.state.lastFocusData.focusTime),!!H.isSelectableElement(e.element)||H.checkTypedContentHasChangedAndUpdate(e))},interceptBlur:function(e){return H.state.lastFocusData.focusTime&&e.setExtraInfo(e.FOCUS_TIME_ATTR,H.state.lastFocusData.focusTime),H.checkTypedContentHasChangedAndUpdate(e)},checkTypedContentHasChangedAndUpdate:function(e){var n="focus"===e.type||"focusin"===e.type,t="blur"===e.type||"focusout"===e.type,r=e.selectorExpression,i=e.value;if(null===i||O.isUndefined(i))return!1;var o={text:i,markAutoComplete:!1},a=H.state.typableElementsLRUMap.set(r,o),u=O.isUndefined(a);if(n&&!u&&a.text!==i&&0<=i.toLocaleLowerCase().indexOf(a.text.toLocaleLowerCase())&&(o.markAutoComplete=!0),t&&!u&&a.markAutoComplete){var c=H.state.lastFocusData.prevFocusStartTime;if(!O.isUndefined(c)&&O.isNumber(c)&&H.state.lastFocusData.element===e.element){var s=L.currentTimestamp()-c;e.setExtraInfo(e.FOCUS_TIME_ATTR,s)}else L.log("Unable to compute total auto-complete time"),e.setExtraInfo(e.FOCUS_TIME_ATTR,-1);return e.setExtraInfo(e.AUTO_COMPLETE_ATTR,!0),!0}return u||a.text!==i},isMouseEvent:function(e){return e===k.mouseEvents.down||e===k.mouseEvents.up},isTouchEvent:function(e){return"touchstart"===e||"touchend"===e||"touchmove"===e},interceptMouseEnter:function(e){if(H.state.mouseEnterReported)return!1;var n=L.getCoordinate(e.domEvent);return e.setExtraInfo(ze.prototype.COORDINATE_ATTR,n),H.removeEventBinding("mouseenter"),H.state.mouseEnterReported=!0,H.page.hasTouch&&!H.touchDetected&&L.isChromeDesktop()&&(H.switchTouchToMouse(),H.page.hasTouch=!1),!0},switchTouchToMouse:function(){L.log("Mouse Detected. Switch touch event to mouse events"),H.removeEventBinding("touchstart"),L.isHybridAndroid()?H.removeEventBinding("touchmove"):H.removeEventBinding("touchend");var e=[{type:k.mouseEvents.down,interception:H.interceptClickStart,target:A,logicalName:"mousedown"},{type:k.mouseEvents.up,interception:H.interceptClickEnd,valueEncoding:U.encodeClickDetails,target:A,logicalName:"mouseup"}];H.bindPageEvents(e)},filterHovers:function(n,e){try{if("undefined"==typeof jQuery||O.isUndefined(jQuery)||O.isUndefined(jQuery._data))return!0;for(var t=n,r=1,i=O.isNumber(E.mhDeepLevel)?E.mhDeepLevel:1;null!==t&&t!==A.body&&r<=i;){var o=jQuery._data(t,"events");if(o&&o.mouseover&&0<o.mouseover.length)return E.mhDebug&&L.log("++ Hover adding element(level-"+r+") "+(t.id?t.id:""),t),H.addHoverElement(t),!0;r++,t=t.parentElement}}catch(e){L.log("Exception while extracting hover information for element : ",n,e.message,e),H.saveClsDebugErrorEvent("filterHovers",e,"element="+(n?n.nodeName:"null"))}return!0},addHoverElement:function(e){H.state.hover.hoverElementList.length<E.mhMaxInMemeoryHovers?(H.state.hover.hoverElementList.push(e),H.state.hover.hoverStartTimestamp=L.currentTimestamp()):L.log("warn: exceed size of hover elements (>100). skipping..")},cleanHoverElements:function(){E.mhDebug&&L.log("Hover cleaning"),H.state.hover.hoverElementList=[],H.state.hover.hoverStartTimestamp=0},filterResize:function(){return L.isOldIE()},interceptResize:function(e){var n=L.getWindowSize(),t=L.getScreenSize(),r=!1;return null===n||null===H.state.lastSizes.window||H.state.lastSizes.window.width===n.width&&H.state.lastSizes.window.height===n.height||(H.state.lastSizes.window=n,r=!0),null===t||null===H.state.lastSizes.screen||H.state.lastSizes.screen.width===t.width&&H.state.lastSizes.screen.height===t.height||(H.state.lastSizes.screen=t,r=!0),M.devicePixelRatio!==H.state.lastSizes.dpr&&(M.devicePixelRatio>H.state.lastSizes.dpr?e.setExtraInfo(e.ZOOM,H.zoomType.IN):e.setExtraInfo(e.ZOOM,H.zoomType.OUT),H.state.lastSizes.dpr=M.devicePixelRatio),e.value=H.state.lastSizes,r},interceptMouseOver:function(e){return!1},interceptClickStart:function(e){if(H.botDetector.isActive()&&H.isMouseEvent(e.type)&&H.botDetector.notifyMouseAction(e.domEvent),H.isTouchEvent(e.type)&&(H.touchDetected=!0),E.recordHovers&&H.saveHoverEvent(),H.state.clickStart=H.createClickDetailsObject(e),e.setExtraInfo(ze.prototype.COORDINATE_ATTR,H.state.clickStart),!O.isUndefined(e.element)){var n=L.getElementXYCoordinates(e.element);n&&e.setExtraInfo(ze.prototype.SYNC_COORDINATE,n)}return L.isHybrid()&&e.addHybridActionDataItem("start",{x:H.state.clickStart.x,y:H.state.clickStart.y}),!0},interceptClickEnd:function(e){H.botDetector.isActive()&&H.isMouseEvent(e.type)&&H.botDetector.notifyMouseAction(e.domEvent);var n={start:H.state.clickStart,end:H.createClickDetailsObject(e)};if(!(O.isNumber(n.start.x)&&O.isNumber(n.start.y)))return L.log("Dragging event with no captured click start."),!1;var t=Math.abs(n.end.x-n.start.x)>E.minDragPixels||Math.abs(n.end.y-n.start.y)>E.minDragPixels;if(t){e.type="drag",n.duration=n.start.timestamp?e.timestamp-n.start.timestamp:-1,e.value=n;var r=L.getElementXYCoordinates(n.start.elementObj);r&&e.setExtraInfo(ze.prototype.SYNC_COORDINATE,r),L.isHybrid()&&(e.addHybridActionDataItem("start",{x:n.start.x,y:n.start.y}),e.addHybridActionDataItem("end",{x:n.end.x,y:n.end.y}))}return H.state.clickStart={},t},interceptError:function(e){return e.value&&0<e.value.length},interceptUnload:function(e){L.time("unload"),L.log("Unloading..."),H.state.unloading=!0,H.segmentManager.onUnload();var n=L.currentTimestamp();H.page.hasTimingAPI||(sessionStorage["gb.lastReferrer"]=U.encodeNumber(n)+"_"+L.Base64.encode(H.page.urlWithoutHash));var t=n-H.page.initializationTimestamp;return e.setExtraInfo(e.FOCUS_TIME_ATTR,t),e.setExtraInfo(e.SCROLL_REACH,Math.round(H.state.maxScrollReach)),H.debugHelper.visitUnloadEvent(e),L.timeEnd("unload"),e.timestamp=n,!0},updateScrollReach:function(){H.state.maxScrollReach=Math.max(H.state.maxScrollReach,L.getCurrentScrollReach())},interceptScroll:function(e){return"#document"===e.element.nodeName&&H.updateScrollReach(),!0},filterScrollElements:function(e,n){return!(null!=e&&"MARQUEE"!==e.nodeName)},interceptMouseMove:function(e){return e.lastSingleMoveTimestamp=e.timestamp,e.setExtraInfo(e.FOCUS_TIME_ATTR,0),!0},createClickDetailsObject:function(e){var n=L.getCoordinate(e.domEvent);return n.elementObj=e.element,n.el=e.selectorExpression,n.timestamp=e.timestamp,n},shouldListenToKeyEvents:function(){return E.recordEnterForInputs||H.recordAutoCompleteRelatedChars()},recordAutoCompleteRelatedChars:function(){return void 0===H.acCharsSupport&&(H.acCharsSupport=E.recordTypingAll||E.supportNativeAutoComplete||E.recordTypingForAttrs&&0<E.recordTypingForAttrs.length||E.recordTypingForClasses&&0<E.recordTypingForClasses.length||E.recordTypingForIDs&&0<E.recordTypingForIDs.length),H.acCharsSupport},resolveKeyData:function(e){var n=e.domEvent,t=e.element.value,r=e.element,i=n.keyCode||n.charCode;e.value={unicode:i};var o=L.isMaskedElement(r);return"keypress"===e.type?13!==i&&8!==i&&("0"!==n.charCode&&(o?e.value={unicode:42}:O.isUndefined(t)||null===t||(e.value.content=t+String.fromCharCode(i)),!0)):"keydown"===e.type&&(38===i||40===i||13===i?(o||(e.value.content=e.element.value),!0):8===i&&!O.isUndefined(t)&&null!==t&&!o&&(e.value.content=0<t.length?t.substring(0,t.length-1):"",!0))},interceptKeyboard:function(e){var n=e.element;if(!(n&&("INPUT"===n.nodeName||"BUTTON"===n.nodeName)))return!1;var t,r=13===(e.domEvent.keyCode||e.domEvent.charCode);if(e.shouldEncodeValue=!1,r&&E.recordEnterForInputs)return H.resolveKeyData(e);if(E.supportNativeAutoComplete&&(n.hasAttribute("autocomplete")||n.hasAttribute("aria-autocomplete")&&"none"!==n.getAttribute("aria-autocomplete")||n.hasAttribute("class")&&O.contains(n.getAttribute("class"),"autocomplete")))return H.resolveKeyData(e);if(E.recordTypingAll)return H.resolveKeyData(e);if(E.recordTypingForAttrs&&0<E.recordTypingForAttrs.length)for(t=0;t<E.recordTypingForAttrs.length;t++)if(n.hasAttribute(E.recordTypingForAttrs[t]))return H.resolveKeyData(e);if(n.hasAttribute("class")&&E.recordTypingForClasses&&0<E.recordTypingForClasses.length)for(t=0;t<E.recordTypingForClasses.length;t++)if(O.contains(n.getAttribute("class"),E.recordTypingForClasses[t]))return H.resolveKeyData(e);var i=L.getElementId(n);if(i&&E.recordTypingForIDs&&0<E.recordTypingForIDs.length)for(t=0;t<E.recordTypingForIDs.length;t++)if(i===E.recordTypingForIDs[t])return H.resolveKeyData(e);return!1},recordAjaxResource:function(e){H.addResource("ajax",e.url,e.timestamp)},addResource:function(e,n,t){var r=new qe(e,n,t);return H.reports.resources.push(r),I.emit("timingResource",r),r},saveEvent:function(e){if(!H.blackoutManager.isUnderBlackout()){var n=H.renameEventType(e);if(H.addEvent(e),F.setRegisteredDebugInfoOnEvent(e),E.debugMode&&(e.report||E.traceMode)){var t=e.type===n?e.type:e.type+"("+n+")",r=!O.isUndefined(e.selectorExpression)&&e.selectorExpression!==k.encoding.rootSelector&&"#document"!==e.selectorExpression;H.shouldLog(e.type)&&L.log("saving event: "+t+(r?" -> "+e.selectorExpression:"")+H.eventValueToString(e)+(e.report?"":" [not reported]"),e)}e.report&&I.emit("saveEvent",e)}},shouldLog:function(e){return"mousemove"===e?!E.suppressMouseMovesDebug||E.mmDebug:"scroll"!==e||E.scrollDebug},renameEventType:function(e){var n=e.type;return O.isUndefined(e.binding)||O.isUndefined(e.binding.logicalName)||"drag"===e.type||(e.type=e.binding.logicalName),n},eventValueToString:function(e){var n=" {V="+(e.value||"NONE");if(e.extraInfo)for(var t in e.extraInfo)e.extraInfo.hasOwnProperty(t)&&(n=n+","+t+"="+e.extraInfo[t]);return null===e.getDebugInfo()||O.isUndefined(e.getDebugInfo())||(n=n+",DI-"+e.getDebugInfo().code),n+="}"},saveDocumentLoadEvent:function(e){var n=H.createEventObject("document",e,null);n.value=H.page,n.binding={valueEncoding:U.encodePageDetails},n.shouldEncodeValue=!1,H.page.title=H.getPageTitle(),H.page.title&&n.setExtraInfo(ze.prototype.VISUAL_NAME,H.page.title),n.setExtraInfo(ze.prototype.WINDOW_DEPTH,ie.tryGetCurrentDepth(M)),n.setExtraInfo(ze.prototype.HISTORY_LENGTH,history.length),E.mobileHybridId&&n.setExtraInfo(ze.prototype.MOBILE_HYBRID_ID,E.mobileHybridId),E.debounceScrolls&&n.setExtraInfo(ze.prototype.SCROLL_DEBOUNCED,!0),H.documentEvent=n;var t=function(){H.saveEvent(n),I.emit("event:document")};this.debugHelper.visitLoadEvent(n);H.documentEventHook?H.documentEventHook(n,t):t()},savePageUpdate:function(){var e=H.createEventObject("pageUpdate",L.currentTimestamp(),null);H.saveEvent(e)},onConsoleError:function(e){var n=H.createEventObject("error",L.currentTimestamp(),null);n.value=e.join(" "),n.shouldEncodeValue=!0,H.saveEvent(n)},saveTitleChanged:function(){var e=H.createEventObject("titleChanged",L.currentTimestamp(),null);e.value=A.title,e.shouldEncodeValue=!0,H.saveEvent(e)},saveSegmentChangedEvent:function(e){var n=H.createEventObject("segmentChanged",L.currentTimestamp(),null);n.value=e,n.shouldEncodeValue=!1,n.binding={valueEncoding:U.encodeSegmentChanged},H.saveEvent(n),setTimeout(function(){H.savePageUpdate()},0)},saveLastSegmentEvent:function(e){var n=H.createEventObject("lastSegment",L.currentTimestamp(),null);n.value=e,n.shouldEncodeValue=!1,n.binding={valueEncoding:U.encodeSegmentChanged},H.saveEvent(n)},savePageSnapshotEvent:function(e){var n=H.useCurrentTimeForPagesnapshot?L.currentTimestamp():H.page.initializationTimestamp,t=H.createEventObject("pageSnapshot",n,null);t.value=e,t.binding={valueEncoding:U.encodePageSnapshotData},t.shouldEncodeValue=!1,H.saveEvent(t)},saveAjaxRequestEvent:function(e){var n=H.createEventObject("ajaxRequest",e.startedAt||L.currentTimestamp(),null);e.ajaxUrls=H.ajaxUrls,n.value=e,n.element=e.lastFocusedElement,n.selectorExpression=C.getSelectorExpression(e.lastFocusedElement)||k.encoding.rootSelector,n.binding={valueEncoding:U.encodeAjaxRequest},n.shouldEncodeValue=!1,H.saveEvent(n)},saveClsDebugErrorEvent:function(e,n,t){var r=H.formatClsDebugMessage(e,n,t);if(0!==r.length){var i=H.createEventObject("clsdebug",L.currentTimestamp(),null);i.value=r,H.saveEvent(i)}},formatClsDebugMessage:function(e,n,t){if(H.state.clsDebugCounter>=E.clsDebugMaxReports)return"";H.state.clsDebugCounter++;var r=n?n.stack?n.stack:n.name+": "+n.message:"";return"CLS Error in "+e+" "+(t?"{"+t+"} ":"")+(0<(r=L.truncateStr(r,E.clsDebugCharsLimit,!0)).length?": "+r:"")},eventSaver:function(t,r){return function(e){var n=H.createEventObject(t,L.currentTimestamp(),null);n.value=e,n.binding={valueEncoding:r},n.shouldEncodeValue=!1,H.saveEvent(n)}},saveValidationError:function(e){var n=H.createEventObject("formValidationError",L.currentTimestamp(),null);n.element=e.element,n.value=e.message,n.selectorExpression=e.selector,H.saveEvent(n)},saveHoverEvent:function(){var e=H.createEventObject("hover",H.state.hover.hoverStartTimestamp,null);0!==H.state.hover.hoverElementList.length?(E.mhDebug&&L.log("saving "+H.state.hover.hoverElementList.length+" hovers"),e.value=H.state.hover.hoverElementList,H.cleanHoverElements(),e.binding={valueEncoding:U.encodeHoverEvent},e.shouldEncodeValue=!1,H.saveEvent(e)):E.mhDebug&&L.log("no hovers to report")},saveCustomEvent:function(e){var n=H.createEventObject("custom",L.currentTimestamp(),null);n.value=e,!O.isUndefined(e.domEl)&&L.isDOMElement(e.domEl)&&(n.element=e.domEl,n.selectorExpression=C.getSelectorExpression(e.domEl)||k.encoding.rootSelector),n.binding={valueEncoding:U.encodeKeyValue},n.shouldEncodeValue=!1,H.saveEvent(n)},saveThirdPartyMapEvent:function(e){var n=H.createEventObject("thirdpartymap",L.currentTimestamp(),null);n.value=e.value,n.binding={valueEncoding:U.encodeKVMap},e.type&&n.setExtraInfo(ze.prototype.TP_INTEGRATION_TYPE,e.type),e.element&&(n.element=e.element,n.selectorExpression=C.getSelectorExpression(e.element)||k.encoding.rootSelector),n.shouldEncodeValue=!1,H.saveEvent(n)},saveResourceDataEvent:function(e){var n=H.createEventObject("resourceContent",L.currentTimestamp(),null);n.value=e,n.binding={valueEncoding:U.encodeResourceContent},n.shouldEncodeValue=!1,H.saveEvent(n)},saveCorsDeniedDataEvent:function(e){var n=H.createEventObject("corsDeniedResource",L.currentTimestamp(),null);n.value=e,H.saveEvent(n)},saveClientAttributeEvent:function(e){var n=H.createEventObject("clientAttribute",L.currentTimestamp(),null);n.value=e,n.binding={valueEncoding:U.encodeKeyValue},n.shouldEncodeValue=!1,H.saveEvent(n)},savePerformanceDataEvent:function(e){var n=H.createEventObject("waterfall",L.currentTimestamp(),null);n.value=e,n.binding={valueEncoding:U.encodeWaterfallTiming},n.shouldEncodeValue=!1,H.saveEvent(n)},initializePageDetails:function(){L.time("initializePageDetails");var e=H.page;e.initializationTimestamp=L.currentTimestamp(),e.id=L.uuid(),e.frame=M.self!=top,e.frame&&(e.referrerWithoutHash=L.getReferrerUrlWithoutHash());var n=L.getLocationUrlSplitByHash();e.url=n.url,e.urlWithoutHash=n.withoutHash,e.hash=n.hash,e.hasTouch=L.hasTouch(),e.hasTimingAPI=L.hasTimingAPI(),e.title=H.getPageTitle(),L.timeEnd("initializePageDetails")},getPageTitle:function(){return L.truncateStr(A.title,E.titleCharsLimit,!0)},resolvePageLoadTime:function(e){if(e.hasTimingAPI)H.acquirePerformanceTiming();else{var n=sessionStorage["gb.lastReferrer"];if(n){var t=A.referrer.replace(/#.*/,""),r=n.split("_"),i=L.Base64.decode(r[1]);if(t===i){var o=parseInt(r[0],36);e.timing.total=e.loadTimestamp-o,H.saveTimingEvent({page:e.timing})}else L.log("Referrer does not match referrer stored in timing cookie: "+t+" != "+i)}}},saveTimingEvent:function(e){var n=H.createEventObject("timing",L.currentTimestamp(),M.document);n.value=e,n.binding={valueEncoding:U.encodeTimings},H.page.title&&n.setExtraInfo(ze.prototype.VISUAL_NAME,H.page.title),H.saveEvent(n)},savePerformanceEvent:function(e){var n=H.createEventObject("performance",L.currentTimestamp(),M.document);M.performance&&M.performance.timing&&(n.value={perf:M.performance,browserTime:e},n.binding={valueEncoding:U.encodePerformanceTimings},H.page.title&&n.setExtraInfo(ze.prototype.VISUAL_NAME,H.page.title),n.shouldEncodeValue=!1,H.saveEvent(n))},acquirePerformanceTiming:function(){if(0===M.performance.timing.loadEventEnd)M.setTimeout(H.acquirePerformanceTiming,300);else{var e=L.currentTimestamp()-H.page.initializationTimestamp;H.savePerformanceEvent(e)}},setClientCookies:function(){var e=function(e,n,t){var r,i;if(t.visitorIdByQueryParam||t.sessionIdByQueryParam){var o=L.parseQuery(e.location.search.substring(1));r=o[t.sessionIdByQueryParam],i=o[t.visitorIdByQueryParam]}var a,u,c,s,f,l,d,v,h=(s=c=u=!1,(a=i)?a!==n.get(k.cookies.visitor)&&(L.log("using provided visitor ID value: "+a),s=c=!0):(a=n.get(k.cookies.visitor))||(c=u=!0,a=L.uuid()),c&&(n.set(k.cookies.visitor,a,L.dateFromNow(15768e7)),L.log("set cookie with visitor ID: "+a)),{isNew:u,visitorId:a,corsReset:s}),p=(f=h.isNew,v=d=!1,(l=r)?l!==n.get(k.cookies.session)&&(L.log("using provided session ID value: "+l),v=d=!0):(l=n.get(k.cookies.session))||(l=L.uuid()+":"+(f?"0":"1"),d=!0),d&&(n.set(k.cookies.session,l),L.log("Set cookie with session ID: "+l)),{sessionId:l,corsReset:v});return{sessionId:p.sessionId,visitorId:h.visitorId,corsReset:p.corsReset||h.corsReset}}(A,N,E);x.isCorsReporting()&&e.corsReset&&void 0!==$&&$.forceCorsReset(),this.visitorId=e.visitorId,this.sessionId=e.sessionId},registerPlugin:function(e,n){H.plugins[e]=n},removeEventBinding:function(e){for(var n=-1,t=0;t<H.bindings.registered.length;t++){var r=H.bindings.registered[t];r.type===e&&(L.removeEventHandler(r.el,e,r.handler),n=t)}0<=n&&H.bindings.registered.splice(n,1)},removeBindings:function(){O.forEach(H.bindings.registered,function(e){L.removeEventHandler(e.el,e.type,e.handler)}),H.bindings.registered=[],H.bindings.unsupportedEventTypes=[],L.log("Cleared detector bindings.")},getEncoder:function(){return U},supportModeOn:function(e){e=e||!1,H.applySupportMode(),e&&S.set("supportMode",!0)},isSupportModeSession:function(){return void 0!==N.get(k.cookies.supportMode)||S.get("supportMode")},checkSupportModeSession:function(){H.isSupportModeSession()&&H.applySupportMode()},applySupportMode:function(){E.reportAllOnUnload=!1}};qe.prototype.toString=function(){return this.url},Ve.prototype.toString=function(){return"("+this.x+","+this.y+")"};var q={inMemoryMovesCounter:0,notifyEventsFlush:function(){q.inMemoryMovesCounter=0},hasDomUpdate:function(e){return e.domSnapshot&&e.domSnapshot.domChanges},diluteEvents:function(e,n){var t=O.last(e);if(!O.isUndefined(t)){if("resize"===n.type)return"resize"===t.type&&q.removeEventToReport(e,t),!0;if("scroll"===n.type){if("scroll"===t.type||H.page.hasTouch&&"drag"===t.type)return n.timestamp-t.timestamp>E.minStallingScrollTime||(n.selectorExpression=t.selectorExpression,q.removeEventToReport(e,t),E.scrollDebug&&L.trace("Diluted "+t.type+" event:",t)),!0;if("mousemove"===t.type&&1===t.value.length&&2<=e.length){var r=e[e.length-2];if("scroll"===r.type){if(n.timestamp-r.timestamp>E.minStallingScrollTime)return!0;n.selectorExpression=r.selectorExpression,q.removeEventToReport(e,t),q.removeEventToReport(e,r),E.scrollDebug&&L.trace("Diluted scroll & mousemove event (mousewheel rolling)"),q.inMemoryMovesCounter--}}return!0}if("mousemove"===n.type&&"mousemove"===t.type){var i=E.reportByPost?3e3:E.mmMaxMovesInEventWithTimes,o=E.reportByPost?3e3:E.mmMaxMovesInEventNoTimes;return E.mmRecordTimes&&t.value.length>=i||!E.mmRecordTimes&&t.value.length>=o?(E.mmDebug&&L.log("Too much moves in an event: "+t.value.length+". Starting a new move event."),q.inMemoryMovesCounter++,!0):!O.isUndefined(E.mmMinStallingMoveTime)&&n.timestamp-t.lastSingleMoveTimestamp>E.mmMinStallingMoveTime?(E.mmDebug&&L.log("Identified mouse move stalling: "+(n.timestamp-t.lastSingleMoveTimestamp)+" ms. Starting a new move event."),q.inMemoryMovesCounter++,!0):q.checkExceededInMemoryMoves()?(E.mmDebug&&L.log("Exceeded in memory mouse moves ("+E.mmMaxInMemoryMoves+") ignoring..."),!1):(q.removeEventToReport(e,t),q.diluteMoveEvents(t,n)&&q.inMemoryMovesCounter++,!0)}}return"mousemove"===n.type&&q.inMemoryMovesCounter++,!0},removeEventToReport:function(e,n){q.hasDomUpdate(n)||e.splice(O.indexOf(e,n),1)},checkExceededInMemoryMoves:function(){var e=E.reportByPost?3e3:E.mmMaxInMemoryMoves;return q.inMemoryMovesCounter>=e},diluteMoveEvents:function(e,n){var t=O.last(e.value),r=n.value[0],i=n.timestamp-e.lastSingleMoveTimestamp,o=e.getExtraInfo(e.FOCUS_TIME_ATTR);return Math.abs(t.x-r.x)>E.mmDiluteMinPixels||Math.abs(t.y-r.y)>E.mmDiluteMinPixels?(o+=r.t=i,n.setExtraInfo(n.FOCUS_TIME_ATTR,o),n.timestamp=e.timestamp,e.value.push(r),n.value=e.value,E.mmDebug&&L.log("updated mousemove value"+n.value),!0):(n.setExtraInfo(n.FOCUS_TIME_ATTR,o),n.timestamp=e.timestamp,n.value=e.value,n.lastSingleMoveTimestamp=e.lastSingleMoveTimestamp,E.mmDebug&&L.log("Diluting mousemove less than "+E.mmDiluteMinPixels+" pixels: "+r),!1)},truncateEventsForUnload:function(e){for(var n=[],t=E.mmMaxMovesWithUnload,r=0,i=!1,o=0;o<e.length;o++){var a=e[o];if("mousemove"===a.type){if(r>=E.mmMaxMovesWithUnload){L.trace(E.mmMaxMovesWithUnload+" moves limit exceeded. dropping mousemove event from unload report... ("+r+" moves dropped)"),i=!0;continue}var u=a.value.length,c=q.truncateMouseMoveEvent(a,t-r);r+=c,c<u&&(i=!0)}"unload"===a.type&&i&&a.setExtraInfo(a.MOVES_TRUNCATED,!0),n.push(a)}return n},truncateMouseMoveEvent:function(e,n){var t=e.value.length;return t<n?t:(L.trace("truncating mousemove on unload ("+t+" > "+n+" moves)"),e.value=e.value.slice(0,n),n)}};H.checkElementChangebility=function(e){var n=e.nodeName,t=e.type,r=!1,i=!1;switch(n){case"SELECT":i=!0;break;case"TEXTAREA":r=!0;break;case"INPUT":if(null===t)break;switch(t){case"checkbox":case"radio":i=!0;break;case"text":case"password":case"number":case"file":case"url":case"search":case"email":case"date":case"time":case"tel":case"range":case"month":case"week":case"datetime":case"datetime-local":case"color":r=!0}}return{isTypable:r,isSelectable:i}},H.isTypableElement=function(e){return H.checkElementChangebility(e).isTypable},H.isSelectableElement=function(e){return H.checkElementChangebility(e).isSelectable},H.isChangebleElement=function(e){return H.isTypableElement(e)||H.isSelectableElement(e)},void 0!==H&&function(e,o){e=e||{};var a=L.immutableSet("password","text","number","file","url","search","email","date","time","tel","range","month","week","datetime","datetime-local","color","radio");e.extractElementValue=function(e,n){var t=n.nodeName;if("INPUT"===t){var r=n.type;if(a[r])return o.maskValue(n);if("checkbox"===r)return n.checked?"true":"false"}else{if("TEXTAREA"===t)return o.maskValue(n);if("SELECT"===t){var i=n.options;if(!O.isUndefined(i)&&"number"==typeof i.length&&0<i.length){if(!O.isUndefined(n.multiple)&&n.multiple)return"["+function(e){for(var n=[],t=0;t<e.length;t++){var r=e[t];r.selected&&n.push(o.maskValue(r,!0))}return n}(i).join(",")+"]";if(!O.isUndefined(n.selectedIndex)&&!O.isUndefined(i[n.selectedIndex]))return o.maskValue(i[n.selectedIndex],!0)}}}},e.extractElementSource=function(e,n){var t=n.src||n.href;return O.isUndefined(t)||null==t?void 0:t},e.extractLocationHash=function(e,n){return L.getLocationUrlSplitByHash().hash},e.extractScrollValue=function(e,n){if("#document"===n.nodeName){var t=L.getScrollTopLeft();return new Ve(t.left,t.top)}return new Ve(n.scrollLeft,n.scrollTop)},e.extractMouseMoveValue=function(e,n){return[L.getCoordinate(e)]},e.extractErrorValue=function(e,n){var t="";return"string"==typeof e.message&&(t+=e.message),"string"==typeof e.url?t+="; URL: "+e.url:"string"==typeof e.filename&&(t+="; FILE: "+e.filename),"number"==typeof e.lineno&&(t+="; L: "+e.lineno),"number"==typeof e.colno&&(t+="; C: "+e.colno),t}}(H,R),ze.prototype={toString:function(){return this.type},setExtraInfo:function(e,n){O.isUndefined(n)?L.log("Failed setting value for extra info attribute: "+e+". Value is undefined"):(O.isUndefined(this.extraInfo)&&(this.extraInfo={}),this.extraInfo[e]=n)},getExtraInfo:function(e){if(O.isUndefined(this.extraInfo))return null;var n=this.extraInfo[e];return void 0===n?null:n},setDebugInfo:function(e){O.isUndefined(this.debugInfo)&&(this.debugInfo={}),this.debugInfo=e},getDebugInfo:function(){return this.debugInfo},getSubPage:function(){return this.subPage},addHybridActionDataItem:function(e,n){O.isUndefined(n)?L.log("Failed setting value for hybrid action data item: "+e+". Value is undefined"):(O.isUndefined(this.hybridActionData)&&(this.hybridActionData={}),this.hybridActionData[e]=n)},getdHybridActionData:function(){return this.hybridActionData},ofSameSegment:function(e){return this.referrer===e.referrer&&this.subPage===e.subPage}},ze.prototype.FOCUS_TIME_ATTR="focusTime",ze.prototype.AUTO_COMPLETE_ATTR="autoComplete",ze.prototype.VISUAL_NAME="visualName",ze.prototype.WINDOW_DEPTH="windowDepth",ze.prototype.CONTAINER_ID="containerId",ze.prototype.PARENT_PAGE_ID="parentPageId",ze.prototype.HISTORY_LENGTH="historyLen",ze.prototype.TIME_SINCE_LAST_EVENT="timeSinceLastIdle",ze.prototype.COORDINATE_ATTR="coordinate",ze.prototype.SCROLL_REACH="scrollReach",ze.prototype.MOVES_TRUNCATED="truncated",ze.prototype.LOST_EVENTS_NUM="lostEvents",ze.prototype.TP_INTEGRATION_TYPE="tpIntegrationType",ze.prototype.EXTERNAL_ID="externalId",ze.prototype.SYNC_COORDINATE="syncCoordinates",ze.prototype.ZOOM="zoom",ze.prototype.MOBILE_HYBRID_ID="mobileHybridId",ze.prototype.DETECTOR_CONFIG_ID="detectorCfg",ze.prototype.AUTO_MASKING="autoMasking",ze.prototype.SCROLL_DEBOUNCED="scrollDebounced",ze.prototype.extraInfoAttrs=[{name:ze.prototype.FOCUS_TIME_ATTR,encodeName:"ft",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:ze.prototype.AUTO_COMPLETE_ATTR,encodeName:"ac",encodeFunc:U.encodeBoolean,encodeCode:k.dictionary.encodeEncodingType("cd_boolean")},{name:ze.prototype.VISUAL_NAME,encodeName:"vn",encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:ze.prototype.WINDOW_DEPTH,encodeName:ze.prototype.WINDOW_DEPTH,encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:ze.prototype.CONTAINER_ID,encodeName:ze.prototype.CONTAINER_ID,encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:ze.prototype.PARENT_PAGE_ID,encodeName:ze.prototype.PARENT_PAGE_ID,encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:ze.prototype.HISTORY_LENGTH,encodeName:ze.prototype.HISTORY_LENGTH,encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:ze.prototype.TIME_SINCE_LAST_EVENT,encodeName:"tl",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:ze.prototype.COORDINATE_ATTR,encodeName:"co",encodeFunc:U.encodeCoordinate64,encodeCode:k.dictionary.encodeEncodingType("cd_coordinate")},{name:ze.prototype.SCROLL_REACH,encodeName:"sr",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:ze.prototype.MOVES_TRUNCATED,encodeName:"tr",encodeFunc:U.encodeBoolean,encodeCode:k.dictionary.encodeEncodingType("cd_boolean")},{name:ze.prototype.LOST_EVENTS_NUM,encodeName:"le",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:ze.prototype.TP_INTEGRATION_TYPE,encodeName:"tp",encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:ze.prototype.EXTERNAL_ID,encodeName:"ei",encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:ze.prototype.SYNC_COORDINATE,encodeName:"sy",encodeFunc:U.encodeCoordinate64,encodeCode:k.dictionary.encodeEncodingType("cd_coordinate")},{name:ze.prototype.ZOOM,encodeName:"zo",encodeFunc:U.encodeNumber,encodeCode:k.dictionary.encodeEncodingType("cd_number")},{name:ze.prototype.MOBILE_HYBRID_ID,encodeName:ze.prototype.MOBILE_HYBRID_ID,encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:ze.prototype.DETECTOR_CONFIG_ID,encodeName:ze.prototype.DETECTOR_CONFIG_ID,encodeFunc:U.encodeString,encodeCode:k.dictionary.encodeEncodingType("cd_string")},{name:ze.prototype.AUTO_MASKING,encodeName:ze.prototype.AUTO_MASKING,encodeFunc:U.encodeBoolean,encodeCode:k.dictionary.encodeEncodingType("cd_boolean")},{name:ze.prototype.SCROLL_DEBOUNCED,encodeName:ze.prototype.SCROLL_DEBOUNCED,encodeFunc:U.encodeBoolean,encodeCode:k.dictionary.encodeEncodingType("cd_boolean")}],void 0!==H&&H.registerPlugin("thirdPartyMapInterceptor",new function(e,o,r){r=r||[];var a=function(){var e,n=!1,t={};for(e=0;e<r.length;e++)0<r[e].uriContainsTokens.length&&0<r[e].queryKeys.length&&(t[r[e].tagName]={uriContainsTokens:r[e].uriContainsTokens,queryKeys:L.immutableSet.apply(null,r[e].queryKeys)},n=!0);return n?t:D}(),n=!!a,u=0;function t(e){var n=L.extractElementFromEvent(e);if(n&&a[n.tagName]){var t=n.src||n.href||"",r=t.split("?")[1];if(r&&function(e,n){if(!e)return!1;for(var t=0;t<n.length;t++)if(0<=e.indexOf(n[t]))return!0;return!1}(t,a[n.tagName].uriContainsTokens)){var i=function(e,n){for(var t,r,i={},o=e.split("&"),a=!1,u=0;u<o.length;u++)if(2===(t=o[u].split("=")).length)try{if(!n[r=decodeURIComponent(t[0])])continue;i[r]=decodeURIComponent(t[1]),a=!0}catch(e){L.log("failed parsing 3rd-party query string key-value pair: "+o[u],e)}return a?i:null}(r,a[n.tagName].queryKeys);i&&(u++,L.trace("intercepted third party parameters map for url: "+t),o.emit("thirdPartyMap",i))}}}this.initialize=function(){n&&(L.log("3rd party map interception has started."),L.addEventHandler(e,"load",t,!0))},this.isActive=function(){return n},this.getInterceptedCount=function(){return u}}(A,I,[{tagName:"IMG",uriContainsTokens:E.reportImageURLContainList||[],queryKeys:E.reportImageKeyList||[]},{tagName:"SCRIPT",uriContainsTokens:E.reportScriptURLContainList||[],queryKeys:E.reportScriptKeyList||[]}]));var V,z={initialize:function(e){return!(!E.SCIntegration||void 0===E.SCIntegrationURLsContainList||void 0===E.SCIntegrationKeyList||0===E.SCIntegrationKeyList.length)&&(e.on("init:preloaded",z.intercept),L.log("Intercepting SiteCatalyst reports."),!0)},intercept:function(){var r=M.Image;M.Image=function(e,n){var t=new r(e,n);try{t.addEventListener("load",function(){try{if(t.src&&resourceHandler.isUrlToReport(t.src,E.SCIntegrationURLsContainList)){L.trace("Image thirdparty intercepted: "+t.src);var e=resourceHandler.parseToKVMap(t.src,E.SCIntegrationKeyList);if(e){var n=new Xe(e);I.emit("3rdpartymap:scReport",n)}}}catch(e){L.log("Error while checking image "+t.src+" for SC integration: "+e.message,e)}})}catch(e){L.log("Failed intercepting Image constructor for SC integration. "+e.message,e)}return t}}};if(Xe.prototype.toString=function(){return this.type+": "+this.data},H.registerPlugin("SCIntegration",z),void 0!==H&&function(e,n,t){e=e||{};var r,o,a,u,c=(t||{}).visualName,i=(t||{}).visualNameDebug||!1,s=function(e){return void 0===r&&(r=n()),!!r&&r.isDomMasked(e,ee.SELF_OR_ANY_PARENT,Z.TEXT)},f=(o=t.noIdSelectorsForClassNames||[],a=t.noIdSelectorsForIDs||[],u=t.noIdSelectorsForAttrs||[],function(e){if(0===o.length&&0===a.length&&0===u.length)return!0;var n,t=e.getAttribute("id");if(t)for(n=0;n<a.length;n++){var r=a[n];if(r&&0<=t.indexOf(r))return!1}var i=L.getClassList(e);for(n=0;n<o.length;n++)if(0<=O.indexOf(i,o[n]))return!1;for(n=0;n<u;n++)if(e.hasAttribute(u[n]))return!1;return!0});e.extractVisualName=function(e){var n=null;if(!e||!L.isElement(e))return n;if(O.contains(c.filterNamingByTagName,e.tagName.toLocaleLowerCase()))return n;var t="";return(n=L.getAttributeForElement(e,c.CLS_NAME_ATTR))&&(t="by cls_vname"),!n&&c.by.title&&(n=L.getAttributeForElement(e,"title"))&&(t="by title"),!n&&c.by.alt&&(n=L.getAttributeForElement(e,"alt"))&&(t="by alt"),!n&&c.by.ariaLabel&&(n=L.getAttributeForElement(e,"aria-label"))&&(t="by aria-label"),!n&&c.by.inlineText&&(n=function(e){var n=e.tagName.toLocaleLowerCase();if("td"===n)return null;var t=L.getAttributeForElement(e,"class");if(t&&O.contains(c.filterInlineTextByClassName,t))return null;var r,i=null;if(("span"===n||"div"===n)&&1===e.childElementCount&&(r=e.firstElementChild)&&"a"===r.tagName.toLocaleLowerCase()&&0===r.childElementCount){var o=r.innerText;o&&(o=L.trim(o)),i=o}if(!i&&O.contains(c.filterInlineTextByTagName,n)){var a=e.parentElement?e.parentElement.tagName.toLocaleLowerCase():"";if("a"!==a&&"button"!==a)return null}if(i||0!==e.childElementCount||(i=e.innerText)&&(i=L.trim(i)),i||1===e.childElementCount&&0===(r=e.firstElementChild).childElementCount&&(i=r.innerText)&&(i=L.trim(i)),i)try{s(e)&&(i=_.maskValueOf(i))}catch(e){i=""}return i||null}(e))&&(t="by #text"),!n&&c.by.placeholder&&(n=L.getAttributeForElement(e,"placeholder"))&&(t="by placeholder"),n||!c.by.inputConsts&&!c.by.inputButtonsValue||(n=function(e){var n;if("input"===e.tagName.toLocaleLowerCase()){var t=e.type.toLocaleLowerCase();if("button"!==t&&"submit"!==t&&"reset"!==t||!c.by.inputButtonsValue||(n=e.value),!n&&c.by.inputConsts)switch(t){case"password":n="Password";break;case"button":case"submit":case"image":n="Submit";break;case"file":n="Choose File";break;case"reset":n="Reset"}}return n&&(n=L.trim(n)),n||null}(e))&&(t="by input specific"),!n&&c.by.name&&(n=L.getAttributeForElement(e,"name"))&&(t="by name"),!n&&c.by.id&&f(e)&&(n=L.getAttributeForElement(e,"id"))&&(t="by id"),!n&&c.by.parent&&(n=function(e){if(!O.contains(c.elementListToCheckParent,e.tagName.toLocaleLowerCase()))return null;var n=null,t=e.parentElement;return!t||"a"!==t.tagName.toLocaleLowerCase()&&"button"!==t.tagName.toLocaleLowerCase()||(n=L.getAttributeForElement(t,"title")||L.getAttributeForElement(t,"alt")||L.getAttributeForElement(t,"aria-label")||L.getAttributeForElement(t,"name")||L.getAttributeForElement(t,"id")),n||null}(e))&&(t="by parent"),!n&&c.by.child&&(n=function(e){if(!O.contains(c.elementListToCheckChild,e.tagName.toLocaleLowerCase()))return null;var n;if(1===e.childElementCount){var t=e.firstElementChild;n=L.getAttributeForElement(t,"title")||L.getAttributeForElement(t,"alt")||L.getAttributeForElement(t,"aria-label")||L.getAttributeForElement(t,"name")||L.getAttributeForElement(t,"id")}return n||null}(e))&&(t="by child"),n&&n.length>c.chatLimit&&(n=n.substr(0,c.chatLimit).concat("...")),i&&L.trace("VISUAL NAME: (on "+e.tagName+" "+(e.type?e.type:"")+") "+t+" - "+n),n}}(H,function(){return H.plugins.domRecordingPlugin?H.plugins.domRecordingPlugin.getDomMasker():null},E),H.triggerCustomEvent=function(n,t,r){try{if(O.isUndefined(n)||!O.isString(n)||0===n.length||O.isUndefined(t))return void L.log("triggerCustomEvent: bad argument: eventName="+n+" eventValue="+t);var e={name:""+n,val:""+t,domEl:r};H.saveCustomEvent(e)}catch(e){L.log("triggerCustomEvent: error while triggering event with name="+n+" value="+t+"domElement="+r,e.stack?e.stack:e.message)}},new function(e,t,n,r,i,o){var a;function u(e){if(e)for(var n in e)"hash"!==n&&(o[n]=e[n])}if(e.detectorScript&&e.detectorScript.src&&o.configPath){!function(){var e,n=t.get("js.conf");if(n)try{e=r.decode(n),a=e.hash,u(e)}catch(e){L.log("failed parsing JSON of external configuration: "+e.message,e)}}();var c=L.extractOrigin(e.detectorScript.src);n(L.joinPath(c,o.configPath),function(e){var n;try{n=JSON.parse(e)}catch(e){return void L.log("Failed parsing external configuration JSON: "+e.message,e)}void 0!==a&&void 0!==n.hash&&a===n.hash||(t.set("js.conf",r.encode(n)),u(n),a=n.hash)},function(e){i.emit("clsDebug",e)})}}(k,new je(M.localStorage,{keysPrefix:k.Storage.UnboundKeyPrefix}),function(t,r,i){try{var o=P.createXMLHTTPObject(!0);o||i("Failed creating XHR object for fetching external configuration"),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=o.getResponseHeader("Content-Type");e&&-1!==e.indexOf("application/json")&&r(o.response)}else{var n="Failed getting external configuration for url : "+t+" status:"+o.status+"  "+o.statusText;i(n)}},o.open("GET",t,!0),o.onprogress=function(){},o.ontimeout=function(){},o.onerror=function(){},setTimeout(function(){try{o.send()}catch(e){L.log("Failed sending request to url "+t+": "+e.message,e)}},0)}catch(e){console.log("Failed getting external configuration for url: "+t+": "+e.message,e),i(e.message)}},new Sn(L.Base64),I,E),We.extractTLD=function(e){var n=e.split(".");return n.shift(),0<n.length?n.join("."):e},Ge.cfgBackwardComp=function(e){var n=!1;if(void 0===e.ajaxRecordMatadata&&void 0!==e.recordAjaxRequest&&(e.ajaxRecordMetadata=""+e.recordAjaxRequest,n=!0),void 0===e.ajaxRecordResponseBody){var t=[];e.ajaxCaptureFQDNOnly&&t.push("fqdn"),e.ajaxCaptureResponseContentWhenUrlMatches&&t.push("uriMatches("+e.ajaxCaptureResponseContentWhenUrlMatches+")"),void 0!==e.ajaxCaptureResponseOnStatusGreater&&-1!==e.ajaxCaptureResponseOnStatusGreater&&t.push("statusGte("+e.ajaxCaptureResponseOnStatusGreater+")"),0<t.length&&(e.ajaxRecordResponseBody=t.join(","),n=!0)}return void 0===e.ajaxRecordResponseHeaders&&void 0!==e.ajaxCaptureResponseHeaders&&(e.ajaxRecordResponseHeaders=""+e.ajaxCaptureResponseHeaders,n=!0),n},Ge.fixHeaders=function(e,n){var t=e.replace(/content-encoding:\sgzip/gi,"X-Glassbox-Orig-Content-Encoding: zip").replace(/transfer-encoding:\schunked/gi,"X-Glassbox-Orig-Transfer-Encoding: chunked");return n?t.replace(/content-length:/gi,"X-Glassbox-Orig-Content-Length:")+"Content-Length: "+n+"\r\n":t},Ge.hasGzipContentEncoding=function(e){return null!==/content-encoding:\sgzip/gi.exec(e)},Ge.isClsOwnAjax=function(e){return e.cls_own},Ge.captureContent=function(e,n){var t=null;return""===e.responseType||"text"===e.responseType?t=e.responseText:"json"===e.responseType&&(t=JSON.stringify(e.response)),t},Ge.supportAjaxOnProgressEvents=function(){return"onloadend"in new XMLHttpRequest},Ge.safeEncodeURI=function(n){try{return n===decodeURI(n)?encodeURI(n):n}catch(e){return encodeURI(n)}},Je.prototype.toString=function(){return this.method+" "+this.url+(this.status?" "+this.status:"")},void 0!==H&&void 0!==E&&E.interceptAjax)k.detectorScript&&k.detectorScript.src&&(V=L.extractHostname(k.detectorScript.src)),H.registerPlugin("ajaxInterceptor",new Ge(M,I,A.location.host,V,E,["adrum","dynatrace","appdynamics.com","tealeaf","/retail/discountinternet/portal/coex.asmx/keepalive","oauth/cc"]));Ke.READY_COOKIE="_cls_ready",Ke.CORS_READY_KEY="cors_ready",Ke.CORS_COOKIES=[k.cookies.session,k.cookies.visitor],Ke.STATE={INIT:0,HELPING:1,READY:2,GAVE_UP:3};var X,W,G,J,K,Q,Y,$=(X=x.isCorsReporting(),G=new Fe((W=E).reportAddUriParams,N),J=X&&!W.reportDisableCors?new Ke(S,N,W.reportURI,W.reportCorsTakeNativeCookies):D,K=!0,Q=function(e){K=e},Y=function(n,t,r,i,o){n=n||"",o=o||!1;var a=P.createXMLHTTPObject(!1,n);if(!a)return L.log("Failed creating an XMLHttpRequest object"),void Q(!0);a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){Q(!0);var e=a.getResponseHeader("Content-Type");e&&-1!==e.indexOf("application/json")&&I.emit("handleGatewayResponse",a.response)}else W.postRetry&&!o?(L.log("Failed POST data ("+t+"): "+a.status+"  "+a.statusText+" ...retrying..."),Y(n,t,r,i,!0)):(L.log("Failed "+(o?"again ":"")+"POST data ("+t+"): "+a.status+"  "+a.statusText+" . aborting. "),a.abort(),Q(!0))};try{a.open("POST",r,!0),a.onprogress=function(){},a.ontimeout=function(){},a.onerror=function(){},a.withCredentials=i,H.plugins.reporter&&H.plugins.reporter.beaconEncoder.visitXhr(a),setTimeout(function(){try{a.send(n)}catch(e){L.log("Failed sending (in) POST request ("+t+") to url "+r+": "+e.message,e),Q(!0)}},0)}catch(e){L.log("Failed sending POST request ("+t+") to url "+r+": "+e.message,e),Q(!0)}},{name:"POST",config:{maxReportSize:W.maxPostReportSize,maxReports:-1},gainLockToReport:function(){var e=K;return e&&Q(!1),e},freeLock:function(){Q(!0)},flushEvents:function(n,t,e){var r;e&&(r=e.pid,delete e.pid);var i=function(e,n,t){var r=G.apply(W.reportURI,e,n);if(t){var i,o=[];for(i in t)o.push(i+"="+t[i]);0<o.length&&(r+=(-1===r.indexOf("?")?"?":"&")+o.join("&"))}return r}(t,r,e);J?J.help(P.createXMLHTTPObject,function(e){Y(n,t,i,e)}):Y(n,t,i)},forceCorsReset:function(){J&&J.reset()}});Qe.loadAndClearReports=function(e){var n=e[Qe.KEY_NAME];if(delete e[Qe.KEY_NAME],n){var t,r=JSON.parse(n);for(t=0;t<r.length;t++)r[t].encoding===Qe.ENCODING_BASE64&&(r[t].e=Qe.toBytes(L.Base64.atob(r[t].e))),delete r[t].encoding;return r}return D},Qe.toBytes=function(e){var n,t=new Uint8Array(new ArrayBuffer(e.length));for(n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t},Qe.KEY_NAME="_cls_rpt",Qe.ENCODING_BASE64="b64",void 0!==H&&H.registerPlugin("reporter",new function(t,r,C,R,n,f){var l,d,i,o=[],v=0,h=-1,a=0,u=0,c=0,p={count:0,flushedBytes:0,estimatedBytes:{expected:0,actual:0},encodingErrors:[]};function s(e){w(),f.reportCreateSubSessionCookie&&(N.set(k.cookies.sub_session,L.uuid()),e.cookie=A.cookie),h=e.seq}function m(){try{var e,n=Qe.loadAndClearReports(M.sessionStorage);if(n)for(L.log("about to send "+n.length+" storage pending report(s)."),e=0;e<n.length;e++)l.flushEvents(n[e].e,n[e].sn,{pid:n[e].pid,storage:"true"})}catch(e){L.log("error: could not send pending storage reports. message:",e.message)}}function g(){m();var e=f.reportByPost?f.reportPostInterval:f.reportInterval;e&&!i&&(i=setInterval(x,e),L.log("Beacon: events will be reported in intervals of "+e+" ms."))}function y(e){q.diluteEvents(o,e)&&n(e)&&o.push(e),a=u=L.currentTimestamp()}function E(e){f.reportAllOnUnload&&x(!0)}function b(e){L.log("Beacon: unloading page, "+o.length+" events to report."),f.reportToStorageAfterUnload&&(void 0!==Qe&&void 0!==M.sessionStorage?(L.log("switching to StorageReporter, following 'unload' event"),l=new Qe(M.sessionStorage,d)):L.log("error: either StorageReporter or window.sessionStorage is undefined, cannot switch to storage reporting.")),0<o.length&&(f.reportAllOnUnload||!f.truncateEventsWithUnload||f.reportByPost||(o=q.truncateEventsForUnload(o)),S(!0))}function w(){x(!0)}function x(e){try{if(e&&0<o.length)return void S();if(o.length>c)return f.reportAllOnUnload?void(c=o.length):function(e,n){for(var t=n;t<e.length;t++)if(!e[t].dependent)return!1;return!0}(o,c)?void(c=o.length):void S();0<f.idleEventTimeInterval&&L.currentTimestamp()-a>=f.idleEventTimeInterval&&L.currentTimestamp()-u<f.maxTimeForIdleEvent&&(n=a,t.emit("reporter:idle",{idleBaseTime:u,latestEventTime:n}),a=L.currentTimestamp())}catch(e){L.log("ERROR: while reporting queued events. Exception: ",e.stack?e.stack:e.message)}var n}function S(e){if(l.gainLockToReport()||e){var n=o;o=[];try{!function(e,n){n=n||!1;var t,r=l.config.maxReports;if(!f.reportByPost&&n&&(r=f.maxReportsWithUnload),n&&f.domOmitAfterUnload)for(t=0;t<e.length;t++)delete e[t].domSnapshot;!function(e,n,t){var r,i=function(){c++;var e=-1!==t&&t<=c;return e},o=null;-1!==t&&1<e.length&&"unload"===e[e.length-1].type&&(o=e.pop());for(var a,u,c=0,s=[],f="",l=0,d=e[0].type,v=R(),h=0;h<e.length;h++){r=e[h],u=v.track(r);var p=r.type,m=d===p,g=O.isUndefined(r.selectorExpression)||null==r.selectorExpression?k.encoding.rootSelector:r.selectorExpression,y=g;if(k.repeatingElementSelector&&!O.isUndefined(k.repeatingElementSelector)&&(g===k.encoding.rootSelector?f="":(g===f&&(y=k.repeatingElementSelector),f=g)),a=T(r,y))if(O.contains(k.nobelEventTypes,r.type))0<s.length&&I(s,v.getLast()),I([a],v.getCurrent()),s=[],l=0,f="",d=p;else{var E=!(0!==s.length&&!m&&(O.contains(k.socialNobelEventTypes,r.type)||O.contains(k.socialNobelEventTypes,d))),b=a.length+(0===s.length?0:k.encoding.delimiters.events.length),w=-1===n||C.estimateBeaconSize(l+b)<n;if(u&&w&&E)l+=b,s.push(a);else{if(0<s.length){if(i()){if(null!==o){var x=e.length-h;L.log("Reached max number of reports allowed ("+t+"). Lost "+x+" events."),o.setExtraInfo(o.LOST_EVENTS_NUM,x),a=C.encodeEvent(o),s.push(a),I(s,v.getLast(),l)}return}I(s,v.getLast(),l),s=[],l=0}y===k.repeatingElementSelector&&(a=T(r,g)),-1!==n&&C.estimateBeaconSize(a.length)>n?(I([a],v.getCurrent()),f=""):(s.push(a),l+=a.length)}d=p}}if(0<s.length){if(null!==o){var S=C.encodeEvent(o);s.push(S)}I(s,v.getCurrent(),l)}}(e,l.config.maxReportSize,r)}(n,e)}catch(e){L.log("ERROR: while reporting events. Exception: ",e.stack?e.stack:e.message),l.freeLock()}c=0,q.notifyEventsFlush()}else L.log("reporter not ready yet. postponing "+o.length+" events reports.")}function T(n,e){try{return C.encodeEvent(n,e)}catch(e){L.log("ERROR: while encoding event: "+n.type+" . Exception: ",e.stack?e.stack:e.message),p.encodingErrors.push(e.message)}}function I(e,n,t){v++;var r,i,o,a,u,c,s=(r=n.referrer,i=n.subPage,o=e,a=v,C.encodeBeacon(k.beaconVersion,a,f.reportIncludeReferrer?r:D,d,i,-1!==h?h:D,o));l.flushEvents(s,v),u=s.length,c=t,p.count++,p.flushedBytes+=u,c&&(p.estimatedBytes.actual+=u,p.estimatedBytes.expected+=c,p.estimationRatio=p.estimatedBytes.expected/p.estimatedBytes.actual),L.trace("Beacon["+v+" payload-len:"+s.length+"]: "+l.name+" reported "+e.length+" events"+(0<n.subPage.length?" [on "+n.subPage+"]":""),e)}this.initialize=function(e,n){if(!O.isUndefined(f.reportURI)&&0!==f.reportURI.length)return L.log("Reporting using: "+(f.reportByPost?"POST":"GET")),L.log("Report Encoding: "+C.name),L.log("Report Compression: "+(f.reportCompress?"ENABLED":"DISABLED")+" supported by encoder:"+C.supportsCompression),l=r(),d=n.page.id,a=u=L.currentTimestamp(),c=0,t.on("init:loaded",g),t.on("saveEvent",y),t.on("event:document",E),t.on("event:unload",b),t.on("reportImmediately",w),t.on("pageSnapshot:report",s),!0;console.log("ERROR[EyeView-1401]: Detector script is missing configuration for 'reportURI'. Please add it.")},this.sendStoragePendingReports=m,this.beaconEncoder=C,this.stats=function(){return p}}(I,function(){return"undefined"==typeof httpgetReporter?$:E.reportByPost||E.domRecordEnabled?$:httpgetReporter},function(e,n,t){if("json"===t.reportEncoding)return new Ue(O,k,L,eventEncodingUtils,{reportDebugInfo:t.reportDebugInfo,compress:t.reportCompress,domCompress:t.domCompress,corsSafelisted:n&&t.reportCorsForceSafelistedHeaders});var r=/SamsungBrowser\/7/gi.test(e.userAgent);function i(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}return new Pe(O,k,L,eventEncodingUtils,{reportDebugInfo:t.reportDebugInfo,domCompress:t.domCompress,base64UriEncoder:r?function(e){return e.replace(/\+|=|\//gi,i)}:encodeURIComponent})}(navigator,x.isCorsReporting(),E),function(){return H.segmentManager.createSegmentTracker()},E.domRecordEnabled?function(n,t){var r=!1,i=-1,o=L.immutableSet.apply(null,k.snapshotApplicableEventType),a=L.immutableSet("pageUpdate","mousedown","touchstart","drag","keydown","unload");function u(){return n.plugins.domRecordingPlugin}return function(e){return-1!==t.domExpireSnapshotAfter&&"pageSnapshot"!==e.type&&-1!==i&&e.timestamp-i>t.domExpireSnapshotAfter&&(u().reset(),n.useCurrentTimeForPagesnapshot=!0),(r=r||a[e.type])&&o[e.type]&&(e.domSnapshot=u().getDomSnapshot()),"pageSnapshot"!==e.type&&(i=e.timestamp),!("pageUpdate"===e.type&&!e.domSnapshot)&&!u().getDomMasker().isDomMasked(e.element,ee.SELF_OR_ANY_PARENT,Z.OMIT)}}(H,E):function(){return!0},E)),Ye.prototype.isAttributeMasked=function(e,n){return!(!this._maskedAttributesTags[e.tagName]||!this._maskedAttributes[n])},Ye.prototype.isDomMasked=function(e,n){var t,r,i=Array.prototype.slice.call(arguments,2);for(t=0;t<i.length;t++)if((r=this._selectorsByMaskingType[i[t].name])&&n.follow(e,r))return!0;return!1},Ye.prototype.domMaskNode=function(e){var n,t,r,i,o,a=Array.prototype.slice.call(arguments,1);for(n=0;n<a.length;n++)if(i=a[n],o=this._selectorsByMaskingType[i.name])for(r=[],e.nodeType===Node.ELEMENT_NODE&&Ye.elementMatches.call(e,o)&&r.push(e),"function"==typeof e.querySelectorAll&&(r=Array.prototype.concat.apply(r,e.querySelectorAll(o))),t=0;t<r.length;t++)i.apply(r[t],this)},Ye.prototype.domMaskNodeForce=function(e){var n,t=Array.prototype.slice.call(arguments,1);for(n=0;n<t.length;n++)t[n].apply(e,this)};var Z={TEXT:{name:"TEXT",apply:function(e){Ye.maskTextContent(Ye.textNodesOf(e))}},ATTRIBUTE:{name:"ATTRIBUTE",apply:function(e,n){var t;if(n._maskedAttributesTags[e.tagName])for(t in n._maskedAttributes)if(n._maskedAttributes.hasOwnProperty(t)){var r=e.getAttribute(t);r&&e.setAttribute(t,_.maskValueOf(r))}}},VALUE_ATTRIBUTE:{name:"VALUE_ATTRIBUTE",apply:function(e){if(_.canBeValueMasked(e)){var n=e.getAttribute("value");n&&e.setAttribute("value",_.maskValueOf(n))}}},OMIT:{name:"OMIT",apply:function(e){e.parentNode&&e.parentNode.removeChild(e)}}},ee={SELF:{follow:function(e,n){return!(e.nodeType!==Node.ELEMENT_NODE||!Ye.elementMatches.call(e,n))}},SELF_OR_ANY_PARENT:{follow:function(e,n){for(var t=e;t&&t.nodeType===Node.ELEMENT_NODE;){if(Ye.elementMatches.call(t,n))return!0;t=t.parentNode}return!1}},SELF_OR_ANY_CHILD:{follow:function(e,n){return!(e.nodeType!==Node.ELEMENT_NODE||!Ye.elementMatches.call(e,n))||"function"==typeof e.querySelectorAll&&0<e.querySelectorAll(n).length}}};Ye.textNodesOf=function(e){if(e.nodeType===Node.TEXT_NODE)return[e];for(var n,t=[],r=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);n=r.nextNode();)t.push(n);return t},Ye.maskTextContent=function(e){var n,t,r,i;for(n=0;n<e.length;n++)e[n].textContent&&e[n].textContent.trim()&&(t=e[n].textContent.trim(),r=_.maskValueOf(t),t.length!==e[n].textContent.length&&(i=e[n].textContent.indexOf(t),r=e[n].textContent.substring(0,i)+r+e[n].textContent.substring(i+t.length)),e[n].textContent=r)},Ye.prepareWildCardSelector=function(e,n){return""===e[0]?"["+n+"$='"+e[1]+"']":""===e[1]?"["+n+"^='"+e[0]+"']":"["+n+"^='"+e[0]+"']["+n+"$='"+e[1]+"']"},Ye.elementMatches=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var n=(this.document||this.ownerDocument).querySelectorAll(e),t=n.length;0<=--t&&n.item(t)!==this;);return-1<t},$e.prototype.maskCookie=function(e){if(!e||!this._cookieMaskSet)return e;var n,t,r,i,o,a=e.split(";"),u=[];for(n=0;n<a.length;n++)-1!==(r=(t=a[n]).indexOf("="))?(i=t.substring(0,r).trim(),o=t.substring(r+1),u.push(i+"="+(o&&this._cookieMaskSet.hasOwnProperty(i)?_.maskValueOf(o):o))):u.push(t);return u.join("; ")};var ne,te,re,ie={MAX_DEPTH_THRESHOLD:20,tryGetCurrentDepth:function(e){var n=0,t=e;try{for(;t.parent!=t&&n<=this.MAX_DEPTH_THRESHOLD;)t=t.parent,n++}catch(e){return L.log("could not retrieve current window's depth (a CORS issue?). errorL"+e),-1}return n>this.MAX_DEPTH_THRESHOLD?(L.log("nested iframe level calculation exceeded maximal threshold ("+this.MAX_DEPTH_THRESHOLD+")."),-1):n},isCrossOriginFrame:function(e,n){try{if(!e.contentWindow)return!0;var t=e.getAttribute("src");if(!t)return!1;var r=L.extractOrigin(t);return!!r&&n!==r}catch(e){return!0}},isEmpty:function(e){return!e.contentDocument||!e.contentDocument.body.hasChildNodes()}};void 0!==H&&E.iframesRecordEnabled&&H.registerPlugin("iframes",(ne=new nn(M,E.iframesParentOrigin),te=new en(M),re=new rn(function(){return H.plugins.domRecordingPlugin},function(){return H.plugins.reporter},H.savePageUpdate.bind(H)),new un(M,I,new on(A,I),k.detectorScript?new Ze(A,E,k.detectorScript,e):D,new tn(M,ne,te,re),new an(A,H.page,ne,te,{containerIdAttribute:"gb_cid",mscTimeout:E.iframesHandshakeTimeout}),function(e,n){var t,r,i;function o(){i[n.containerIdKey]&&t.setExtraInfo(n.containerIdKey,i[n.containerIdKey]),i[n.parentPageIdKey]&&t.setExtraInfo(n.parentPageIdKey,i[n.parentPageIdKey]),r()}return n=n||{containerIdKey:"containerId",parentPageIdKey:"pageId"},e.documentEventHook=function(e,n){t=e,r=n,i&&o()},function(e,n){i={parentPageId:e,containerId:n},t&&r&&o()}}(H,{parentPageIdKey:ze.prototype.PARENT_PAGE_ID,containerIdKey:ze.prototype.CONTAINER_ID}),{autoInject:E.iframesAutoInject,storageOnUnload:E.reportToStorageAfterUnload}))),function(e,n){(("undefined"!==typeof L?L:{})||M||this).pako=function o(a,u,c){function s(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=u[t]={exports:{}};a[t][0].call(i.exports,function(e){var n=a[t][1][e];return s(n||e)},i,i.exports,o,a,u,c)}return u[t].exports}for(var f="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,n,t){"use strict";var a=e("./zlib/deflate"),u=e("./utils/common"),c=e("./utils/strings"),i=e("./zlib/messages"),o=e("./zlib/zstream"),s=Object.prototype.toString,f=0,l=-1,d=0,v=8;function h(e){if(!(this instanceof h))return new h(e);this.options=u.assign({level:l,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var n=this.options;n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var t=a.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==f)throw new Error(i[t]);if(n.header&&a.deflateSetHeader(this.strm,n.header),n.dictionary){var r;if(r="string"==typeof n.dictionary?c.string2buf(n.dictionary):"[object ArrayBuffer]"===s.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(t=a.deflateSetDictionary(this.strm,r))!==f)throw new Error(i[t]);this._dict_set=!0}}function r(e,n){var t=new h(n);if(t.push(e,!0),t.err)throw t.msg||i[t.err];return t.result}h.prototype.push=function(e,n){var t,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=n===~~n?n:!0===n?4:0,"string"==typeof e?i.input=c.string2buf(e):"[object ArrayBuffer]"===s.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new u.Buf8(o),i.next_out=0,i.avail_out=o),1!==(t=a.deflate(i,r))&&t!==f)return this.onEnd(t),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(c.buf2binstring(u.shrinkBuf(i.output,i.next_out))):this.onData(u.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==t);return 4===r?(t=a.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===f):2!==r||(this.onEnd(f),!(i.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=h,t.deflate=r,t.deflateRaw=function(e,n){return(n=n||{}).raw=!0,r(e,n)},t.gzip=function(e,n){return(n=n||{}).gzip=!0,r(e,n)}},{"./utils/common":2,"./utils/strings":3,"./zlib/deflate":6,"./zlib/messages":7,"./zlib/zstream":9}],2:[function(e,n,t){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var t=n.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}}return e},t.shrinkBuf=function(e,n){return e.length===n?e:e.subarray?e.subarray(0,n):(e.length=n,e)};var i={arraySet:function(e,n,t,r,i){if(n.subarray&&e.subarray)e.set(n.subarray(t,t+r),i);else for(var o=0;o<r;o++)e[i+o]=n[t+o]},flattenChunks:function(e){var n,t,r,i,o,a;for(n=r=0,t=e.length;n<t;n++)r+=e[n].length;for(a=new Uint8Array(r),n=i=0,t=e.length;n<t;n++)o=e[n],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,n,t,r,i){for(var o=0;o<r;o++)e[i+o]=n[t+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},{}],3:[function(e,n,t){"use strict";var c=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new c.Buf8(256),r=0;r<256;r++)s[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function f(e,n){if(n<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,c.shrinkBuf(e,n));for(var t="",r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t}s[254]=s[254]=1,t.string2buf=function(e){var n,t,r,i,o,a=e.length,u=0;for(i=0;i<a;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(r-56320),i++),u+=t<128?1:t<2048?2:t<65536?3:4;for(n=new c.Buf8(u),i=o=0;o<u;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(r-56320),i++),t<128?n[o++]=t:(t<2048?n[o++]=192|t>>>6:(t<65536?n[o++]=224|t>>>12:(n[o++]=240|t>>>18,n[o++]=128|t>>>12&63),n[o++]=128|t>>>6&63),n[o++]=128|63&t);return n},t.buf2binstring=function(e){return f(e,e.length)},t.binstring2buf=function(e){for(var n=new c.Buf8(e.length),t=0,r=n.length;t<r;t++)n[t]=e.charCodeAt(t);return n},t.buf2string=function(e,n){var t,r,i,o,a=n||e.length,u=new Array(2*a);for(t=r=0;t<a;)if((i=e[t++])<128)u[r++]=i;else if(4<(o=s[i]))u[r++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return f(u,r)},t.utf8border=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;0<=t&&128==(192&e[t]);)t--;return t<0?n:0===t?n:t+s[e[t]]>n?t:n}},{"./common":2}],4:[function(e,n,t){"use strict";n.exports=function(e,n,t,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==t;){for(t-=a=2e3<t?2e3:t;i=i+n[r++]|0,o=o+i|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],5:[function(e,n,t){"use strict";var u=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();n.exports=function(e,n,t,r){var i=u,o=r+t;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^n[a])];return-1^e}},{}],6:[function(e,n,t){"use strict";var s,l=e("../utils/common"),f=e("./trees"),d=e("./adler32"),v=e("./crc32"),r=e("./messages"),h=0,p=4,m=0,g=-2,c=-1,y=4,i=2,E=8,b=9,o=286,a=30,u=19,w=2*o+1,x=15,S=3,C=258,R=C+S+1,T=42,I=113,M=1,A=2,D=3,k=4;function N(e,n){return e.msg=r[n],n}function O(e){return(e<<1)-(4<e?9:0)}function L(e){for(var n=e.length;0<=--n;)e[n]=0}function _(e){var n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(l.arraySet(e.output,n.pending_buf,n.pending_out,t,e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,0===n.pending&&(n.pending_out=0))}function P(e,n){f._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,_(e.strm)}function U(e,n){e.pending_buf[e.pending++]=n}function F(e,n){e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n}function j(e,n,t,r){var i=e.avail_in;return r<i&&(i=r),0===i?0:(e.avail_in-=i,l.arraySet(n,e.input,e.next_in,i,t),1===e.state.wrap?e.adler=d(e.adler,n,i,t):2===e.state.wrap&&(e.adler=v(e.adler,n,i,t)),e.next_in+=i,e.total_in+=i,i)}function B(e,n){var t,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,u=e.nice_match,c=e.strstart>e.w_size-R?e.strstart-(e.w_size-R):0,s=e.window,f=e.w_mask,l=e.prev,d=e.strstart+C,v=s[o+a-1],h=s[o+a];e.prev_length>=e.good_match&&(i>>=2),u>e.lookahead&&(u=e.lookahead);do{if(s[(t=n)+a]===h&&s[t+a-1]===v&&s[t]===s[o]&&s[++t]===s[o+1]){o+=2,t++;do{}while(s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&s[++o]===s[++t]&&o<d);if(r=C-(d-o),o=d-C,a<r){if(e.match_start=n,u<=(a=r))break;v=s[o+a-1],h=s[o+a]}}}while((n=l[n&f])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead}function H(e){var n,t,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-R)){for(l.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=e.hash_size,n=t;r=e.head[--n],e.head[n]=a<=r?r-a:0,--t;);for(n=t=a;r=e.prev[--n],e.prev[n]=a<=r?r-a:0,--t;);i+=a}if(0===e.strm.avail_in)break;if(t=j(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=t,e.lookahead+e.insert>=S)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+S-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<S)););}while(e.lookahead<R&&0!==e.strm.avail_in)}function q(e,n){for(var t,r;;){if(e.lookahead<R){if(H(e),e.lookahead<R&&n===h)return M;if(0===e.lookahead)break}if(t=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-R&&(e.match_length=B(e,t)),e.match_length>=S)if(r=f._tr_tally(e,e.strstart-e.match_start,e.match_length-S),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=S){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=f._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(P(e,!1),0===e.strm.avail_out))return M}return e.insert=e.strstart<S-1?e.strstart:S-1,n===p?(P(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?M:A}function V(e,n){for(var t,r,i;;){if(e.lookahead<R){if(H(e),e.lookahead<R&&n===h)return M;if(0===e.lookahead)break}if(t=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=S-1,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-R&&(e.match_length=B(e,t),e.match_length<=5&&(1===e.strategy||e.match_length===S&&4096<e.strstart-e.match_start)&&(e.match_length=S-1)),e.prev_length>=S&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-S,r=f._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-S),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=S-1,e.strstart++,r&&(P(e,!1),0===e.strm.avail_out))return M}else if(e.match_available){if((r=f._tr_tally(e,0,e.window[e.strstart-1]))&&P(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return M}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=f._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<S-1?e.strstart:S-1,n===p?(P(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?M:A}function z(e,n,t,r,i){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=i}function X(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*w),this.dyn_dtree=new l.Buf16(2*(2*a+1)),this.bl_tree=new l.Buf16(2*(2*u+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(x+1),this.heap=new l.Buf16(2*o+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*o+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(e){var n;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=i,(n=e.state).pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?T:I,e.adler=2===n.wrap?0:1,n.last_flush=h,f._tr_init(n),m):N(e,g)}function G(e){var n,t=W(e);return t===m&&((n=e.state).window_size=2*n.w_size,L(n.head),n.max_lazy_match=s[n.level].max_lazy,n.good_match=s[n.level].good_length,n.nice_match=s[n.level].nice_length,n.max_chain_length=s[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=S-1,n.match_available=0,n.ins_h=0),t}function J(e,n,t,r,i,o){if(!e)return g;var a=1;if(n===c&&(n=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),i<1||b<i||t!==E||r<8||15<r||n<0||9<n||o<0||y<o)return N(e,g);8===r&&(r=9);var u=new X;return(e.state=u).strm=e,u.wrap=a,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+S-1)/S),u.window=new l.Buf8(2*u.w_size),u.head=new l.Buf16(u.hash_size),u.prev=new l.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new l.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=n,u.strategy=o,u.method=t,G(e)}s=[new z(0,0,0,0,function(e,n){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(H(e),0===e.lookahead&&n===h)return M;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+t;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,P(e,!1),0===e.strm.avail_out))return M;if(e.strstart-e.block_start>=e.w_size-R&&(P(e,!1),0===e.strm.avail_out))return M}return e.insert=0,n===p?(P(e,!0),0===e.strm.avail_out?D:k):(e.strstart>e.block_start&&(P(e,!1),e.strm.avail_out),M)}),new z(4,4,8,4,q),new z(4,5,16,8,q),new z(4,6,32,32,q),new z(4,4,16,16,V),new z(8,16,32,32,V),new z(8,16,128,128,V),new z(8,32,128,256,V),new z(32,128,258,1024,V),new z(32,258,258,4096,V)],t.deflateInit=function(e,n){return J(e,n,E,15,8,0)},t.deflateInit2=J,t.deflateReset=G,t.deflateResetKeep=W,t.deflateSetHeader=function(e,n){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=n,m):g},t.deflate=function(e,n){var t,r,i,o;if(!e||!e.state||5<n||n<0)return e?N(e,g):g;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&n!==p)return N(e,0===e.avail_out?-5:g);if(r.strm=e,t=r.last_flush,r.last_flush=n,r.status===T)if(2===r.wrap)e.adler=0,U(r,31),U(r,139),U(r,8),r.gzhead?(U(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),U(r,255&r.gzhead.time),U(r,r.gzhead.time>>8&255),U(r,r.gzhead.time>>16&255),U(r,r.gzhead.time>>24&255),U(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),U(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(U(r,255&r.gzhead.extra.length),U(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=v(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(U(r,0),U(r,0),U(r,0),U(r,0),U(r,0),U(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),U(r,3),r.status=I);else{var a=E+(r.w_bits-8<<4)<<8,u=-1;u=2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3,a|=u<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=I,F(r,a),0!==r.strstart&&(F(r,e.adler>>>16),F(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),_(e),i=r.pending,r.pending!==r.pending_buf_size));)U(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),_(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,U(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),_(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,U(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=v(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&_(e),r.pending+2<=r.pending_buf_size&&(U(r,255&e.adler),U(r,e.adler>>8&255),e.adler=0,r.status=I)):r.status=I),0!==r.pending){if(_(e),0===e.avail_out)return r.last_flush=-1,m}else if(0===e.avail_in&&O(n)<=O(t)&&n!==p)return N(e,-5);if(666===r.status&&0!==e.avail_in)return N(e,-5);if(0!==e.avail_in||0!==r.lookahead||n!==h&&666!==r.status){var c=2===r.strategy?function(e,n){for(var t;;){if(0===e.lookahead&&(H(e),0===e.lookahead)){if(n===h)return M;break}if(e.match_length=0,t=f._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(P(e,!1),0===e.strm.avail_out))return M}return e.insert=0,n===p?(P(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?M:A}(r,n):3===r.strategy?function(e,n){for(var t,r,i,o,a=e.window;;){if(e.lookahead<=C){if(H(e),e.lookahead<=C&&n===h)return M;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=S&&0<e.strstart&&(i=e.strstart-1,(r=a[i])===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+C;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=C-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=S?(t=f._tr_tally(e,1,e.match_length-S),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=f._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(P(e,!1),0===e.strm.avail_out))return M}return e.insert=0,n===p?(P(e,!0),0===e.strm.avail_out?D:k):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?M:A}(r,n):s[r.level].func(r,n);if(c!==D&&c!==k||(r.status=666),c===M||c===D)return 0===e.avail_out&&(r.last_flush=-1),m;if(c===A&&(1===n?f._tr_align(r):5!==n&&(f._tr_stored_block(r,0,0,!1),3===n&&(L(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),_(e),0===e.avail_out))return r.last_flush=-1,m}return n!==p?m:r.wrap<=0?1:(2===r.wrap?(U(r,255&e.adler),U(r,e.adler>>8&255),U(r,e.adler>>16&255),U(r,e.adler>>24&255),U(r,255&e.total_in),U(r,e.total_in>>8&255),U(r,e.total_in>>16&255),U(r,e.total_in>>24&255)):(F(r,e.adler>>>16),F(r,65535&e.adler)),_(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?m:1)},t.deflateEnd=function(e){var n;return e&&e.state?(n=e.state.status)!==T&&69!==n&&73!==n&&91!==n&&103!==n&&n!==I&&666!==n?N(e,g):(e.state=null,n===I?N(e,-3):m):g},t.deflateSetDictionary=function(e,n){var t,r,i,o,a,u,c,s,f=n.length;if(!e||!e.state)return g;if(t=e.state,2===(o=t.wrap)||1===o&&t.status!==T||t.lookahead)return g;for(1===o&&(e.adler=d(e.adler,n,f,0)),t.wrap=0,f>=t.w_size&&(0===o&&(L(t.head),t.strstart=0,t.block_start=0,t.insert=0),s=new l.Buf8(t.w_size),l.arraySet(s,n,f-t.w_size,t.w_size,0),n=s,f=t.w_size),a=e.avail_in,u=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=n,H(t);t.lookahead>=S;){for(r=t.strstart,i=t.lookahead-(S-1);t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+S-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,--i;);t.strstart=r,t.lookahead=S-1,H(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=S-1,t.match_available=0,e.next_in=u,e.input=c,e.avail_in=a,t.wrap=o,m},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":2,"./adler32":4,"./crc32":5,"./messages":7,"./trees":8}],7:[function(e,n,t){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],8:[function(e,n,t){"use strict";var c=e("../utils/common"),u=0,s=1;function r(e){for(var n=e.length;0<=--n;)e[n]=0}var f=0,a=29,l=256,d=l+1+a,v=30,h=19,m=2*d+1,g=15,i=16,p=7,y=256,E=16,b=17,w=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(d+2));r(T);var I=new Array(2*v);r(I);var M=new Array(512);r(M);var A=new Array(256);r(A);var D=new Array(a);r(D);var k,N,O,L=new Array(v);function _(e,n,t,r,i){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}function P(e){return e<256?M[e]:M[256+(e>>>7)]}function U(e,n){e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255}function F(e,n,t){e.bi_valid>i-t?(e.bi_buf|=n<<e.bi_valid&65535,U(e,e.bi_buf),e.bi_buf=n>>i-e.bi_valid,e.bi_valid+=t-i):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)}function j(e,n,t){F(e,t[2*n],t[2*n+1])}function B(e,n){for(var t=0;t|=1&e,e>>>=1,t<<=1,0<--n;);return t>>>1}function H(e,n,t){var r,i,o=new Array(g+1),a=0;for(r=1;r<=g;r++)o[r]=a=a+t[r-1]<<1;for(i=0;i<=n;i++){var u=e[2*i+1];0!==u&&(e[2*i]=B(o[u]++,u))}}function q(e){var n;for(n=0;n<d;n++)e.dyn_ltree[2*n]=0;for(n=0;n<v;n++)e.dyn_dtree[2*n]=0;for(n=0;n<h;n++)e.bl_tree[2*n]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function V(e){8<e.bi_valid?U(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function z(e,n,t,r){var i=2*n,o=2*t;return e[i]<e[o]||e[i]===e[o]&&r[n]<=r[t]}function X(e,n,t){for(var r=e.heap[t],i=t<<1;i<=e.heap_len&&(i<e.heap_len&&z(n,e.heap[i+1],e.heap[i],e.depth)&&i++,!z(n,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r}function W(e,n,t){var r,i,o,a,u=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],i=e.pending_buf[e.l_buf+u],u++,0===r?j(e,i,n):(o=A[i],j(e,o+l+1,n),0!==(a=x[o])&&(i-=D[o],F(e,i,a)),o=P(--r),j(e,o,t),0!==(a=S[o])&&(r-=L[o],F(e,r,a))),u<e.last_lit;);j(e,y,n)}function G(e,n){var t,r,i,o=n.dyn_tree,a=n.stat_desc.static_tree,u=n.stat_desc.has_stree,c=n.stat_desc.elems,s=-1;for(e.heap_len=0,e.heap_max=m,t=0;t<c;t++)0!==o[2*t]?(e.heap[++e.heap_len]=s=t,e.depth[t]=0):o[2*t+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=s<2?++s:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,u&&(e.static_len-=a[2*i+1]);for(n.max_code=s,t=e.heap_len>>1;1<=t;t--)X(e,o,t);for(i=c;t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],X(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,o[2*i]=o[2*t]+o[2*r],e.depth[i]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,o[2*t+1]=o[2*r+1]=i,e.heap[1]=i++,X(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,n){var t,r,i,o,a,u,c=n.dyn_tree,s=n.max_code,f=n.stat_desc.static_tree,l=n.stat_desc.has_stree,d=n.stat_desc.extra_bits,v=n.stat_desc.extra_base,h=n.stat_desc.max_length,p=0;for(o=0;o<=g;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<m;t++)r=e.heap[t],o=c[2*c[2*r+1]+1]+1,h<o&&(o=h,p++),c[2*r+1]=o,s<r||(e.bl_count[o]++,a=0,v<=r&&(a=d[r-v]),u=c[2*r],e.opt_len+=u*(o+a),l&&(e.static_len+=u*(f[2*r+1]+a)));if(0!==p){do{for(o=h-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[h]--,p-=2}while(0<p);for(o=h;0!==o;o--)for(r=e.bl_count[o];0!==r;)i=e.heap[--t],s<i||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,n),H(o,s,e.bl_count)}function J(e,n,t){var r,i,o=-1,a=n[1],u=0,c=7,s=4;for(0===a&&(c=138,s=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)i=a,a=n[2*(r+1)+1],++u<c&&i===a||(u<s?e.bl_tree[2*i]+=u:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*E]++):u<=10?e.bl_tree[2*b]++:e.bl_tree[2*w]++,o=i,(u=0)===a?(c=138,s=3):i===a?(c=6,s=3):(c=7,s=4))}function K(e,n,t){var r,i,o=-1,a=n[1],u=0,c=7,s=4;for(0===a&&(c=138,s=3),r=0;r<=t;r++)if(i=a,a=n[2*(r+1)+1],!(++u<c&&i===a)){if(u<s)for(;j(e,i,e.bl_tree),0!=--u;);else 0!==i?(i!==o&&(j(e,i,e.bl_tree),u--),j(e,E,e.bl_tree),F(e,u-3,2)):u<=10?(j(e,b,e.bl_tree),F(e,u-3,3)):(j(e,w,e.bl_tree),F(e,u-11,7));o=i,(u=0)===a?(c=138,s=3):i===a?(c=6,s=3):(c=7,s=4)}}r(L);var Q=!1;function Y(e,n,t,r){var i,o,a,u;F(e,(f<<1)+(r?1:0),3),o=n,a=t,u=!0,V(i=e),u&&(U(i,a),U(i,~a)),c.arraySet(i.pending_buf,i.window,o,a,i.pending),i.pending+=a}t._tr_init=function(e){Q||(function(){var e,n,t,r,i,o=new Array(g+1);for(r=t=0;r<a-1;r++)for(D[r]=t,e=0;e<1<<x[r];e++)A[t++]=r;for(A[t-1]=r,r=i=0;r<16;r++)for(L[r]=i,e=0;e<1<<S[r];e++)M[i++]=r;for(i>>=7;r<v;r++)for(L[r]=i<<7,e=0;e<1<<S[r]-7;e++)M[256+i++]=r;for(n=0;n<=g;n++)o[n]=0;for(e=0;e<=143;)T[2*e+1]=8,e++,o[8]++;for(;e<=255;)T[2*e+1]=9,e++,o[9]++;for(;e<=279;)T[2*e+1]=7,e++,o[7]++;for(;e<=287;)T[2*e+1]=8,e++,o[8]++;for(H(T,d+1,o),e=0;e<v;e++)I[2*e+1]=5,I[2*e]=B(e,5);k=new _(T,x,l+1,d,g),N=new _(I,S,0,v,g),O=new _(new Array(0),C,0,h,p)}(),Q=!0),e.l_desc=new o(e.dyn_ltree,k),e.d_desc=new o(e.dyn_dtree,N),e.bl_desc=new o(e.bl_tree,O),e.bi_buf=0,e.bi_valid=0,q(e)},t._tr_stored_block=Y,t._tr_flush_block=function(e,n,t,r){var i,o,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return u;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(n=32;n<l;n++)if(0!==e.dyn_ltree[2*n])return s;return u}(e)),G(e,e.l_desc),G(e,e.d_desc),a=function(e){var n;for(J(e,e.dyn_ltree,e.l_desc.max_code),J(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),n=h-1;3<=n&&0===e.bl_tree[2*R[n]+1];n--);return e.opt_len+=3*(n+1)+5+5+4,n}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=t+5,t+4<=i&&-1!==n?Y(e,n,t,r):4===e.strategy||o===i?(F(e,2+(r?1:0),3),W(e,T,I)):(F(e,4+(r?1:0),3),function(e,n,t,r){var i;for(F(e,n-257,5),F(e,t-1,5),F(e,r-4,4),i=0;i<r;i++)F(e,e.bl_tree[2*R[i]+1],3);K(e,e.dyn_ltree,n-1),K(e,e.dyn_dtree,t-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),W(e,e.dyn_ltree,e.dyn_dtree)),q(e),r&&V(e)},t._tr_tally=function(e,n,t){return e.pending_buf[e.d_buf+2*e.last_lit]=n>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&n,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===n?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(A[t]+l+1)]++,e.dyn_dtree[2*P(n)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){var n;F(e,2,3),j(e,y,T),16===(n=e).bi_valid?(U(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):8<=n.bi_valid&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)}},{"../utils/common":2}],9:[function(e,n,t){"use strict";n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[1])(1)}(),sn.IGNORABLE_TAGS=L.immutableSet("NOSCRIPT","SCRIPT"),ln.GB_ID_ATTRIBUTE_NAME="gbid",pn.DefaultOptions={addHeader:!(mn.prototype.toString=function(){return"seq:"+this.seq+"referrer"+this.referrer+"charset:"+this.charset+"cookie-len"+(this.cookie?this.cookie.length:0)+(20<this.html.length?"html length: "+this.html.length:"html: "+this.html)})},pn.CLS_COMMENT_PREFIX=" CLS_DISABLED ",pn.CLS_HEADER_PREFIX=" GlassBox synthetic page ",pn.HTML_SCHEMA_PREFIX="<!DOCTYPE HTML>\n",pn.AttributeUpdaters={value:function(e,n){e.setAttribute("value",n?n.maskValue(e):e.value)},checked:function(e){e.checked&&e.setAttribute("checked","")},selectedIndex:function(e){var n=e.selectedIndex,t=e.getElementsByTagName("option");t[n]&&t[n].setAttribute("selected","")}},En.prototype.selector=function(){return void 0===this._resolvedSelector&&(this._resolvedSelector=this.nodeCache.selectorFor(this.element,this._useId)),this._resolvedSelector},En.prototype.invalidateId=function(){this._useId=!1,this._resolvedSelector=D},wn.propertyForElement=function(e){if("SELECT"===e.tagName)return"selectedIndex";if("TEXTAREA"===e.tagName)return"value";if("INPUT"===e.tagName){var n=e.getAttribute("type")&&e.getAttribute("type").toLowerCase();return!n||"checkbox"!==n&&"radio"!==n?"value":"checked"}return D},wn.defaultValue=function(e,n){if("checked"===n)return e.hasAttribute("checked");if("selectedIndex"===n){var t=e.querySelector("option[selected]");return t?t.index:null!==e.querySelector("option")?0:-1}var r=e.getAttribute(n);return r||"value"!==n?r:""};var oe,ae,ue,ce,se,fe,le,de,ve,he,pe,me=(oe=new ln(function(e,n){if("HTML"===e.tagName)return"html";var t=C.getSelectorExpression(e,!1,{useId:n,identifyingAttribute:E.domIdentifyingAttribute});return null===t&&e===A.body&&(t="BODY"),t},E.domAssignGlassboxId),ae=new Ye({valueMaskingMode:E.maskingMode,valueMaskIds:E.maskList,valueMaskClasses:E.maskClassList,domMaskIds:E.domMaskContentById,domMaskClasses:E.domMaskContentByClass,domOmitIds:E.domMaskOmitById,domOmitClasses:E.domMaskOmitByClass,domMaskedAttributes:E.domMaskedAttributes,domMaskAttributesTags:E.domMaskAttributesByTag,domMaskSimpleSelector:E.domMaskSimpleSelector},He()),ue=R,ce=new function(e){var n=e.implementation.createHTMLDocument("clonner-doc");this.cloneNode=function(e){return n.importNode(e,!0)}}(A),se=new cn(!E.domKeepComments,["iframe","script","noscript"],null,E.domKeepScriptMatching),fe=new cn(!E.domKeepComments,["script","noscript"],{input:E.domIgnoredFormElements},E.domKeepScriptMatching),le=function(e,n){var t;for(t=0;t<n.length;t++)if(-1!==e.indexOf(n[t]))return!0;return!1}(A.location.href,E.domPartialWhenLocationContains||[]),de=function(e,n){H.saveClsDebugErrorEvent("domPlugin",n,e)},function(t,r,i,o,a){var u=!!r;a=a||{},de=de||function(){};var c=!1,s=!1,f=!1,l=0,d=0,e=0,n=function(){f=s=!1,l=0},v=function(){n(),h()},h=function(){if(!f&&!s)try{oe.introduceDocument(A),u&&r.start();var e=((n=o.take(d))&&(d++,t.emit("pageSnapshot:save",n),t.emit("pageSnapshot:report",n)),n);e?(t.emit("domTrackingStarted"),i.start(),s=!0,L.log("reporting full page snapshot and starting DOM mutations tracking. snapshotData:"+e)):3<=++l?(de("pageSnapshotError(3)",o.lastError),L.log("DOM recording is aborted: failed to retrieve page snapshot after 3 attempts."),f=!0):L.log("could not take page snapshot (is it too early?) attempt "+l+" of 3")}catch(e){de("startingError",e),L.log("error during DOM recording plugin starting. error: "+e)}var n;return s},p=function(e){if(!c)return D;var n;for(n=0;n<a.ajaxTriggers.length;n++)if(-1!==e.url.indexOf(a.ajaxTriggers[n]))return L.log("new dom-based page trigger by ajax. trigger uri:"+e.url),void v()},m=function(e){if(!c)return D;-1!==a.triggers.indexOf(e.selectorExpression)&&(L.log("new dom-based page trigger was clicked. selector:"+e.selectorExpression),v())},g=function(){u&&(r.start(),!c||s||f||void 0===a.onLoadTimeoutReport||-1===a.onLoadTimeoutReport||setTimeout(h,a.onLoadTimeoutReport))},y=function(){++e%a.updateOnWsCount==0&&(L.log("dispatching DOM update event. ws messages:"+e),t.emit("pageUpdate"))};return{initialize:function(e){return E.domRecordEnabled?(e.on("event:mousedown",m),e.on("ajax:send",p),e.on("init:loaded",g),u||L.log("WARNING: DOM changes are not tracked. DOM Observer is not supported by the browser."),-1!==a.updateOnWsCount&&new fn(M,y),a.compressionEnabled&&L.log("DOM snapshots compression ENABLED."),le&&L.log("DOM snapshots partial mode ENABLED (by location)."),c=!0):(L.log("DOM recording is disabled."),!1)},getDomSnapshot:function(){return c?f?D:h()&&u?i.getSnapshot():D:D},ensureStarted:h,isSemiDomActivated:function(){return!u},isStarted:function(){return s},reset:n,getObserverType:function(){return r.getName()},getDomMasker:function(){return ae},getNodeCache:function(){return oe}}}(I,((pe=new dn(M,I,A,sn)).supported()?!E.domIE11ForceMutationObserver&&pe.n()&&(pe=new vn(I,A,sn)):pe=E.semiDomEnabled?D:new vn(I,A,sn),pe),new yn({usingGlassboxIds:E.domAssignGlassboxId},(he=[{name:"DOM-mutations",tracker:new bn(I,oe),providers:le?[]:function(c,a,s,f,e){f=f||function(){return!1};var n=function(e,n){var t=e.attributes?Object.keys(e.attributes):[];if(t&&0<t.length&&!f(e.element)){var r,i,o={};for(r=0;r<t.length;r++)i=e.element.getAttribute(t[r]),"INPUT"===e.element.tagName&&"value"===t[r]?i="password"===e.element.getAttribute("type")?_.maskValueOf(i):a.maskValue(e.element):s.isAttributeMasked(e.element,t[r])&&(i=_.maskValueOf(i)),o[t[r]]={value:i,ordinal:e.attributes[t[r]]};L.ensureProperty(n,"domChanges",e.selector()).attributes=o}},t=function(e,n){if(void 0!==e.characterDataChild){var t=L.indexOfNode(e.element.childNodes,e.characterDataChild);if(0<=t){var r=e.characterDataChild;if(f(r))return;s&&s.isDomMasked(e.element,ee.SELF_OR_ANY_PARENT,Z.TEXT)&&(r=c.cloneNode(e.characterDataChild),s.domMaskNodeForce(r,Z.TEXT)),L.ensureProperty(n,"domChanges",e.selector()).characterData={value:r.textContent,child:t}}}},r=function(e,n){if(void 0!==e.childListOrdinal){if(s.isDomMasked(e.element,ee.SELF_OR_ANY_PARENT,Z.OMIT))return;var t,r,i,o=[],a=!1,u=s.isDomMasked(e.element,ee.SELF_OR_ANY_PARENT,Z.TEXT);for(t=0;t<e.element.childNodes.length;t++)r=e.element.childNodes.item(t),f(r)||s.isDomMasked(r,ee.SELF,Z.OMIT)||(u?(r=c.cloneNode(r),s.domMaskNodeForce(r,Z.TEXT)):(a=!1,s.isDomMasked(r,ee.SELF_OR_ANY_CHILD,Z.OMIT)&&(r=c.cloneNode(r),s.domMaskNode(r,Z.OMIT),a=!0),s.isDomMasked(r,ee.SELF_OR_ANY_CHILD,Z.TEXT,Z.VALUE_ATTRIBUTE,Z.ATTRIBUTE)&&(a||(r=c.cloneNode(r)),s.domMaskNode(r,Z.TEXT,Z.VALUE_ATTRIBUTE,Z.ATTRIBUTE))),(i=L.DOMElement2Str(r))&&o.push(i));L.ensureProperty(n,"domChanges",e.selector()).children={ordinal:e.childListOrdinal,childList:o}}};return{all:function(){return[n,t,r]}}}(ce,ue,ae,sn).all()},{name:"property",tracker:new wn(A,oe,E.domIgnoredFormElements),providers:gn(ue,{ignoredFormElement:E.domIgnoredFormElements}).all()}],E.domRecordCssRules&&he.push({name:"css",tracker:new xn(M,oe),providers:(ve=function(e,n){e.rules&&0<e.rules.length&&(L.ensureProperty(n,"cssRuleChanges").rules=e.rules)},{all:function(){return[ve]}}).all()}),he)),new pn(A,ce,ue,ae,new $e({cookieMask:E.maskCookies}),se,fe,{domRecordCssRules:E.domRecordCssRules}),{triggers:E.domNewPageTriggers,ajaxTriggers:E.domNewPageAjaxTriggers,onLoadTimeoutReport:E.domStartAfter,updateOnWsCount:E.domUpdateEveryWsMsgIn,compressionEnabled:E.domCompress}));void 0!==H&&H.registerPlugin("domRecordingPlugin",me);var ge,ye,Ee,be=(ge=A,ye=void 0!==E&&E.scrollDebug,{scroll:function(e,n){return Ee=function(a,u,c,s){var f,l,d=0,v=0;function h(){l&&(v++,l(),l=null,s&&console.log("SCROLL DEBUG: bounced invocation #"+v))}return{debouncedHandler:function(e){var n,t,r,i,o;clearTimeout(f),l=c.bind(this,e),(o=(i=e.target)===a?a.documentElement:i)._gb_scrollInfo||(o._gb_scrollInfo={lastScrollTop:o.scrollTop,lastVDelta:0}),t=(n=o).scrollTop-n._gb_scrollInfo.lastScrollTop,r=t*n._gb_scrollInfo.lastVDelta<0,n._gb_scrollInfo.lastVDelta=t,n._gb_scrollInfo.lastScrollTop=n.scrollTop,r?h():(f=setTimeout(h,u),d++,s&&d%20==0&&console.log("SCROLL DEBUG: de-bouncer - called:",v," of total:",d))},bounce:h}}(ge,n,e,ye)},bounceAll:function(e){Ee&&"scroll"!==e&&Ee.bounce()}});if(M.performance&&void 0!==M.performance.getEntriesByType&&void 0!==M.MutationObserver&&H.registerPlugin("resourceRecorderPlugin",new function(e,n,t){var r,i,o={};if(E.resourcesRecordEnabled&&void 0!==e.XMLHttpRequest){var a=new Rn(e,new je(e.localStorage,{keysPrefix:k.Storage.UnboundKeyPrefix}),Cn,n,t,(r=E.resourcesRecordAllowCors,i=E.resourceIgnoreWhenUrlContains,function(e){if(!L.startsWith(e,"http")||!r&&L.extractOrigin(e)!==M.location.origin)return!0;for(var n=0;n<i.length;n++)if(-1!==e.indexOf(i[n]))return!0;return!1}),{electProbability:E.resourcesRecordChance,electAmount:E.resourcesRecordCount,maxPendingResources:5,resourceRecordCssOnly:E.resourceRecordCssOnly},o);n.on("init:loaded",function(){setTimeout(a.fetchResources.bind(a),5e3)}),n.on("event:unload",a.electResources.bind(a))}if(E.resourceTimingRecordEnabled&&Te(E.resourceTimingRecordEnabledByChance,S,"performanceRecord")){var u=new Tn(e,I,[{type:"resource",properties:["name","startTime","requestStart","responseStart","responseEnd","duration","decodedBodySize","async"],filterBy:"initiatorType",validFilterValues:L.immutableSet("link","css","font","img","input","script")}]);n.on("init:loaded",u.reportMeasurements.bind(u))}this.initialize=function(){},this.startRecordingAll=function(){a?(console.log("Entering full resources recording mode."),a.recordAllResources()):console.log("Please allow resource recording first.")},this.stopRecordingAll=function(){a?(console.log("Exiting full resources recording mode."),a.stopRecordAllResources()):console.log("Please allow resource recording first.")},this.stats=function(){return o}}(M,I,new Sn(L.Base64))),E.reportValidationErrors&&H.registerPlugin("formValidationPlugin",new function(e,t,r,i){t.on("init:loaded",function(){if("undefined"!=typeof jQuery&&void 0!==jQuery.validator)new Mn(t,C).intercept();else{var n=new In(e,t,C,{domFormValidationClassErrors:i.domFormValidationClassErrors});t.on("event:mousedown",function(e){setTimeout(n.intercept.bind(n,e.element),r)})}}),this.initialize=function(){}}(M,I,500,{domFormValidationClassErrors:E.domFormValidationClassErrors})),E.clientAttributesEnabled&&void 0!==H){var we=H.plugins.domRecordingPlugin&&H.plugins.domRecordingPlugin.getDomMasker();we||(we={isDomMasked:function(){return!1}}),H.registerPlugin("attributePlugin",new function(e,n){e.on("newRemoteConfig",function(e){e.attributeRules&&n.processRules(e.attributeRules)}),this.initialize=function(){},this.stats=function(){return n.getStats()}}(I,new function(f,l,i,o,a,d){var v={},h=[],u=["name","pageUrl","selector","accessorMethod","accessor","maxLength"],p={masked:0,reported:0,configured:0,configurationLastUpdatedAt:0,badRules:0,evalRoundsCount:0,evalDurationTotalMsc:0,evalDurationAverageMsc:0};function r(e){for(var n=0;n<u.length;n++)if(!e[u[n]])return;if(a[e.accessorMethod]&&o.isValidSelector(e.selector)&&"number"==typeof e.maxLength){var t,r=e.pageUrl;e.pageHash&&(r+="#"+e.pageHash);try{t=new RegExp("^"+r.split("*").join(".*")+"$")}catch(e){return void L.log("Exception occurred during parsing regular expression. Error: "+e.message,e)}return new i(e,o,a,t)}}function c(e,n){try{for(var t,r,i,o,a=f.location.href,u={},c=0;c<h.length;c++)if(i=Date.now(),t=h[c].evaluate(e,a,n,u),o=Date.now(),p.evalDurationTotalMsc+=o-i,p.evalRoundsCount++,p.evalDurationAverageMsc=p.evalDurationTotalMsc/p.evalRoundsCount,r=h[c].getRuleName(),t&&t.val&&v[r]!==t.val){if(t.isMasked())p.masked++;else{var s=Math.min(h[c].getRuleMaxLength(),d.clientAttributeMaxLength);l.emit("clientAttribute",{name:r,val:t.val.substring(0,s)}),p.reported++}v[r]=t.val}}catch(e){L.log("Exception occurred during rule evaluation. Error: "+e.message,e)}}l.on("domMutation",function(e){var n="characterData"===e.type,t=!n&&"attribute"===e.type,r=n?e.target.parentElement:e.target;n||"childList"!==e.type||(n=1===e.addedNodes.length&&e.addedNodes[0].nodeType===Node.TEXT_NODE);c(r,n||t)}),this.processRules=function(e){v={},p.configurationLastUpdatedAt=L.currentTimestamp(),function(e){for(var n,t=0;t<e.length;t++)(n=r(e[t]))&&h.push(n);p.configured=e.length,p.badRules=e.length-h.length}(e),c(f.document,!1)},this.getStats=function(){return p}}(M,I,An,function(e){var r=e.createElement("div"),s=Element.prototype.matches||Element.prototype.msMatchesSelector,o=function(o){function a(e){return e.replace(/^[\s>]*|[\s>]*$/gi,"")}return function(e){for(var n,t=[],r=0,i=o.exec(e);null!==i;)i.index&&(n=a(e.substring(r,i.index)))&&t.push({selector:n,eqIndex:-1}),t.push({selector:a(i[1]),eqIndex:parseInt(i[2])}),r=i.index+i[0].length,i=o.exec(e);return r<e.length&&(n=a(e.substring(r)))&&t.push({selector:n,eqIndex:-1}),t}}(/([^>]*):eq\((\d+)\)/gi);function f(e,n,t,r,i){if("function"!=typeof e.querySelector)return[];if(-1!==n.eqIndex){if(1===r){var o=e.querySelectorAll(n.selector);return o[n.eqIndex]?[o[n.eqIndex]]:[]}var a,u=0;for(a=0;a<e.children.length;a++)if(s.call(e.children[a],n.selector)&&u++===n.eqIndex)return[e.children[a]];return[]}if(i&&t){var c=e.querySelector(n.selector);return c?[c]:[]}return Array.prototype.slice.call(e.querySelectorAll(n.selector))}function a(e,n,t){for(var r,i,o,a,u=n.length,c=[e];0<n.length;){for(r=n.shift(),o=[],i=0;i<c.length;i++){if(a=f(c[i],r,t,u,0===n.length),t&&0===r.length&&0<a.length)return[a[0]];o.push.apply(o,a)}c=o}return c}return{querySelector:function(e,n){return a(e,o(n),!0)[0]||null},querySelectorAll:function(e,n){return a(e,o(n),!1)},matches:function(e,n){var t,r,i=o(n);return 1===i.length&&-1===i[0].eqIndex?s&&s.call(e,n):-1!==(t=e.ownerDocument,r=n,a(t,o(r),!1)).indexOf(e)},isValidSelector:function(e){if(!e)return!1;try{var n,t=o(e);for(n=0;n<t.length;n++)f(r,t[0],!0,t.length,!0);return 0<t.length}catch(e){return!1}}}}(M.document),function(e,n,t){var r=L.immutableSet.apply(null,t.domMaskedAttributes),i=L.immutableSet.apply(null,t.domMaskAttributesByTag);function o(){return!("value"!==this.accessor||!e.isDomMasked(this.elem,ee.SELF,Z.ATTRIBUTE))||!!e.isDomMasked(this.elem,ee.SELF_OR_ANY_PARENT,Z.OMIT)||!(!r[this.accessor]||!i[this.elem.tagName.toLowerCase()])}function a(){return!!(n&&"value"===this.accessor&&n.isValueMasked(this.elem)||("innerText"===this.accessor||"textContent"===this.accessor)&&(e.isDomMasked(this.elem,ee.SELF_OR_ANY_CHILD,Z.TEXT)||e.isDomMasked(this.elem,ee.SELF_OR_ANY_PARENT,Z.TEXT))||"innerHTML"===this.accessor&&(e.isDomMasked(this.elem,ee.SELF_OR_ANY_CHILD,Z.TEXT,Z.ATTRIBUTE)||e.isDomMasked(this.elem,ee.SELF_OR_ANY_PARENT,Z.TEXT,Z.ATTRIBUTE))||"outerHTML"===this.accessor&&(e.isDomMasked(this.elem,ee.SELF_OR_ANY_CHILD,Z.TEXT,Z.ATTRIBUTE)||e.isDomMasked(this.elem,ee.SELF_OR_ANY_PARENT,Z.TEXT,Z.ATTRIBUTE))||e.isDomMasked(this.elem,ee.SELF_OR_ANY_PARENT,Z.OMIT))}function u(){return!!e.isDomMasked(this.elem,ee.SELF_OR_ANY_PARENT,Z.OMIT)}return{attribute:function(e,n){return{accessor:n,elem:e,val:e.getAttribute&&e.getAttribute(n),isMasked:o}},property:function(e,n){return{accessor:n,elem:e,val:""+(e[n]||""),isMasked:a}},constant:function(e,n){return{elem:e,val:n,isMasked:u}}}}(we,R,{domMaskedAttributes:E.domMaskedAttributes,domMaskAttributesByTag:E.domMaskAttributesByTag}),{clientAttributeMaxLength:E.clientAttributeMaxLength})))}An.prototype.matchPattern=function(e){return this._urlRegexp.test(e)},An.prototype.getRuleName=function(){return this._rule.name},An.prototype.getRuleMaxLength=function(){return this._rule.maxLength},An.prototype.evaluate=function(e,n,t,r){if(this.matchPattern(n)){var i=r[this._rule.selector];if(i||(t?this._elementResolver.matches(e,this._rule.selector)&&(i=e):i=this._elementResolver.querySelector(e,this._rule.selector)),i)return r[this._rule.selector]=i,this._accessors[this._rule.accessorMethod](i,this._rule.accessor)}},void 0!==H&&H.registerPlugin("gatewayPlugin",new function(e,i){e.on("handleGatewayResponse",function(e){var n;try{n=JSON.parse(e)}catch(e){return void L.log("Failed parsing JSON of response: "+e.message,e)}var t=n.appId;for(var r in n)i[r]&&i[r].handle(n[r],t)}),this.initialize=function(){}}(I,{configuration:new function(t,r,i){var o;t.on("init:loaded",function(){(o=function(){var e,n=i.get("app.conf");if(n)try{e=r.decode(n)}catch(e){L.log("Failed parsing JSON for configuration: "+e.message,e)}return e}()||{}).configuration&&t.emit("newRemoteConfig",o.configuration)}),this.handle=function(e,n){o&&(o.configuration&&o.configuration.hash!==e.hash||o.appId!==n)&&(i.set("app.conf",r.encode({configuration:e,appId:n})),o.configuration=e,o.appId=n,e&&t.emit("newRemoteConfig",e))}}(I,new Sn(L.Base64),new je(M.localStorage,{keysPrefix:k.Storage.BoundKeyPrefix})),commands:new function(){this.handle=function(e,n){}}})),M[e]=H,(M.Zone&&M.Zone.root&&"function"==typeof M.Zone.root.wrap?M.Zone.root.wrap(H.initialize):H.initialize).call(H,n)}function xe(e){e.configPath=D,e.debugMode=!1,e.traceMode=!1,e.suppressMouseMovesDebug=!0,e.reportByPost=!1,e.reportPreferSendBeaconAPI=!1,e.reportDisableCors=!1,e.timingMode=!1,e.useIdSelectors=!0,e.noIdSelectorsForClassNames=["skull_list"],e.noIdSelectorsForIDs=[],e.noIdSelectorsForAttrs=[],e.useNameInFormSelectors=!1,e.preferNamesInFormSelectors=!1,e.reportValidationErrors=!0,e.domFormValidationClassErrors=[],e.supportNativeAutoComplete=!1,e.recordEnterForInputs=!0,e.recordTypingAll=!1,e.recordTypingForAttrs=["bs-typeahead"],e.recordTypingForClasses=["tt-input"],e.recordTypingForIDs=[],e.ignorableElementIds=["cls_logger","cls_logger_tab"],e.idleEventTimeInterval=-1,e.maxTimeForIdleEvent=42e4,e.validationValueForRenderTime=2e4,e.titleCharsLimit=150,e.recordAjaxCallsAnyway=!1,e.ajaxDebug=!1,e.ajaxHashRecurrentUrls=!0,e.ajaxCaptureResponseHeaders=!1,e.ajaxCaptureFQDNOnly=!1,e.ajaxCaptureResponseContentWhenUrlMatches="",e.ajaxCaptureResponseOnStatusGreater=-1,e.reportVisualNames=!0,e.visualNameDebug=!1,e.visualName={chatLimit:40,CLS_NAME_ATTR:"cls_vname",filterNamingByTagName:["script","style"],by:{title:!0,alt:!0,ariaLabel:!0,inlineText:!0,placeholder:!0,inputConsts:!0,inputButtonsValue:!0,name:!0,id:!0,parent:!0,child:!0},elementListToCheckParent:["img","span","div"],elementListToCheckChild:["button"],filterInlineTextByTagName:["div","span","td"],filterInlineTextByClassName:[]},e.maskingMode=k.ValueMaskingMode.BlackList,e.maskList=[],e.maskClassList=[],e.maskCookies=[],e.cookieAssignFQDN=!1,e.recordErrors=!0,e.recordConsoleErrors=!0,e.minDragPixels=10,e.botDetection=!1,e.reportDebugInfo=!0,e.DOMBeaconImg=!1,e.reportAllOnUnload=!1,e.maxReportsWithUnload=4,e.truncateEventsWithUnload=!0,e.recordScrolls=!1,e.dependentScroll=!0,e.minStallingScrollTime=3e3,e.scrollDebug=!1,e.recordMouseMoves=!1,e.mmRecordTimes=!1,e.mmDiluteMinPixels=20,e.mmMaxMovesWithUnload=100,e.mmMaxMovesInEventNoTimes=180,e.mmMaxMovesInEventWithTimes=130,e.mmMinStallingMoveTime=1e4,e.mmMaxInMemoryMoves=600,e.mmDebug=!1,e.SCIntegration=!1,e.SCIntegrationURLsContainList=[],e.SCIntegrationKeyList=["pageName","v25","v11","v39"],e.externalIdAttr="id",e.recordHovers=!1,e.mhDeepLevel=2,e.mhMaxListSize=10,e.mhMaxInMemeoryHovers=100,e.mhDebug=!1,e.reportHybrid=!1,e.domRecordEnabled=!1,e.reportAllResourcesLoad=!1,e.ignoreReportResourcesByTagNames=[],e.reportExternalResources=!1,e.reportScriptURLContainList=[],e.reportScriptKeyList=[],e.reportImageURLContainList=[],e.reportImageKeyList=[],e.clsDebug=!0,e.clsDebugCharsLimit=1e3,e.clsDebugMaxReports=5,e.reportEncoding="formUrl",e.reportCompress=!1,e.reportAddUriParams=["clsjsv","_cls_s","_cls_v","pid","sn"],e.reportToStorageAfterUnload=!0,e.duplicateIdCheck=!1,e.blackoutWhenLocationContains=[],e.reportCorsForceSafelistedHeaders=!0,e.reportCorsTakeNativeCookies=[],e.reportIncludeReferrer=!0,e.reportCreateSubSessionCookie=!1,e.sessionIdByQueryParam="_cls_s",e.visitorIdByQueryParam="_cls_v",e.sendStateInfo=!0,e.debounceScrolls=500}function Se(e){e.maxReportSize=1900,e.reportInterval=3e3,e.reportByPost=!0,e.maxPostReportSize=15e4,e.reportPostInterval=1e4,e.postRetry=!1,e.interceptAjax=!0,e.ajaxHashRecurrentUrls=!1,e.ajaxRecordMetadata="always",e.domNewPageTriggers=[],e.domNewPageAjaxTriggers=[],e.domStartAfter=1e4,e.domExpireSnapshotAfter=114e4,e.domUpdateEveryWsMsgIn=-1,e.domCompress=!0,e.domRecordCssRules=!0,e.domRecordEnabled=!0,e.resourcesRecordEnabled=!1,e.resourceRecordCssOnly=!0,e.resourcesRecordCount=1,e.resourcesRecordChance=.5,e.resourcesRecordAllowCors=!0,e.resourceIgnoreWhenUrlContains=[],e.resourceTimingRecordEnabled=!1,e.resourceTimingRecordEnabledByChance=.01,e.clientAttributesEnabled=!1,e.clientAttributeMaxLength=30,e.semiDomEnabled=!0,e.domIgnoredFormElements=["__VIEWSTATE"],e.domMaskContentById=[],e.domMaskOmitByClass=[],e.domMaskOmitById=[],e.domMaskContentByClass=[],e.domMaskedAttributes=[],e.domMaskAttributesByTag=[],e.domMaskSimpleSelector=[],e.domPartialWhenLocationContains=[],e.domKeepComments=!1,e.domOmitAfterUnload=!1,e.domAssignGlassboxId=!1,e.domIE11ForceMutationObserver=!1,e.iframesRecordEnabled=!0,e.iframesAutoInject=!1,e.iframesHandshakeTimeout=2e3}function Ce(){var a=[];this.add=function(e,n,t,r,i,o){this[i.toLowerCase()]={type:e,nullable:n,parser:t,name:i,required:o,validator:r},o&&a.push(i)},this.requiredFieldsMask=function(){for(var e={},n=0;n<a.length;n++)e[a[n]]=!0;return e}}function Re(){this.errors=[],this.warnings=[]}function Te(e,n,t){if(void 0===e)return!1;var r,i=n.get(t+".bychance.enabled");return n.get(t+".bychance.prev_th")!==""+e&&(i=null),null===i?(r=Math.random()<e,n.set(t+".bychance.enabled",r),n.set(t+".bychance.prev_th",e)):r="true"===i,r}function Ie(e,a,n){function t(){return!1}function r(e,n,t){for(var r,i=[],o=0;o<e.length;o++)if(1===(i=e[o].split("*")).length)n.push(e[o]);else if(2===i.length)try{r=new RegExp("(^|\\s)"+i.join(".*")+"($|\\s)"),t.push(r)}catch(e){a.printErrorMsg("exception when creating a regular expression")}else a.printErrorMsg("more than one wildcard in string")}this._valueMaskIdsWithoutwildcards=[],this._valueMaskClassesWithoutwildcards=[],this._regexpValueMaskIds=[],this._regexpValueMaskClasses=[],this._options=e||{},this._options.valueMaskIds&&r(this._options.valueMaskIds,this._valueMaskIdsWithoutwildcards,this._regexpValueMaskIds),this._options.valueMaskClasses&&r(this._options.valueMaskClasses,this._valueMaskClassesWithoutwildcards,this._regexpValueMaskClasses),this._options.autoMaskPredicate=this._options.autoMaskPredicate||t,this._autoMaskingCallback=n||t}function Me(){this.readyState=XMLHttpRequest.UNSENT,this.status=D,this._url=D,this._contentType=D,this.cls_own=!0}function Ae(){this.readyState=XMLHttpRequest.UNSENT,this.status=D,this.xdr=new XDomainRequest,this.xdr.onprogress=function(){},this.xdr.ontimeout=function(){};var e=this;this.xdr.onload=function(){e.status=200,e.readyState=XMLHttpRequest.DONE,e.onreadystatechange&&e.onreadystatechange()},this.xdr.onerror=function(){e.status=400,e.readyState=XMLHttpRequest.DONE,e.onreadystatechange&&e.onreadystatechange()}}function De(e){this.size=0,this.limit=e,this._keymap={}}function ke(n,v,t){var h=[],p=[];var e,m=(e=n.location||n.document.location,function(){return e.href});function r(){var e=m()||"",n=h.length;if(0===n)return h.push(e),!1;if(h[n-1]===e)return!1;var t=h[h.length-1],r=g(t),i=g(e),o=ke.UrlType.FUlL_URL;2===r.length&&2===i.length&&r[0]===i[0]&&(o=ke.UrlType.HASH_ONLY);var a=null;2<=n&&h[n-2]===e?(h.pop(),p.push(t),a=ke.DirectionType.BACK):0<p.length&&p[p.length-1]===e?(p.pop(),h.push(e),a=ke.DirectionType.FORWARD):(h.push(e),p=[]);var u,c,s,f,l=o===ke.UrlType.FUlL_URL?e:i[1],d=o===ke.UrlType.FUlL_URL?t:r[1];return u=a,c=o,s=d,f=l,v.emit("navigation",{direction:u,urlType:c,fromUrl:s,toUrl:f}),!0}function g(e){var n=(e||"").split("#");return[n[0],n[1]||""]}function i(n){if("function"==typeof t[n]){var e=t[n];t[n]=function(){try{3<=arguments.length&&setTimeout(function(){r()},0)}catch(e){L.log("error while intercepting history."+n+" method. error:"+e)}return e.apply(t,[].slice.call(arguments))}}}try{i("pushState"),i("replaceState")}catch(e){L.log("failed hooking native history manipulation methods.",e)}v.on("init:loaded",function(){var e=void 0!==n.onpopstate?"popstate":"hashchange";L.addEventHandler(n,e,function(){r()}),r()}),this.printHistory=function(){var e;for(e=0;e<h.length;e++)console.log("  - "+e+" : "+h[e])}}function Ne(e,t,r){var i=r?function(e){var n;for(n=0;n<r.length;n++)if(-1!==e.indexOf(r[n]))return!0;return!1}:Ne.ALWAYS_FALSE,o=!1;function n(e){if(i(e)!==o){var n=!o;L.log((n?"ENTERING":"LEAVING")+" recording blackout for new location:"+e),t.emit(n?Ne.EVENTS.BlackoutEnter:Ne.EVENTS.BlackoutLeave,e),o=n}}this.isUnderBlackout=function(){return o},t.on("init:loaded",function(){n(e.location.href)}),t.on("navigation",function(){n(e.location.href)})}function Oe(e,n,t,r){this.severity=e,this.code=n,this.count=t,r&&(this.msg=r)}function Le(r,t){this.compressionRatio=Le.INITIAL_COMPRESSION_FACTOR,t||(t={compress:!0,forceBase64:!0});var n=t.compress||t.forceBase64?1.33:1,i=1,o=function(e,n){return(e?"1":"0")+(n?"1":"0")};this.newPayload=function(){return new _e},this.encode=t.compress?function(e){if(0==e._updates.length)return"";var n=L.arrayToJsonSafe(e._updates),t=L.Base64.bytesToBase64(r.compress(n));return function(e){this.compressionRatio=Math.max(e,Le.MINIMAL_COMPRESSION_FACTOR)}(t.length/n.length),o(!0,!0)+t}:function(e){if(0==e._updates.length)return"";var n=L.arrayToJsonSafe(e._updates);return o(!1,t.forceBase64)+(t.forceBase64?L.Base64.toBase64(n):n)},this.refForEvent=function(e){return""+i+++L.hashcode(e.type+e.timestamp)},this.estimatedDomUpdateSize=function(e){return(e?JSON.stringify(e).length:0)*n*(t.compress?this.compressionRatio:1)}}function _e(){this._updates=[]}function Pe(s,f,l,d,v){v||(v={});var h=v.base64UriEncoder||encodeURIComponent,p=new Le(d,{forceBase64:!0,compress:v.domCompress});this.name="FORM-URL",this.supportsCompression=!1,this.isCompressing=function(){return!1},this.visitXhr=function(e){e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},this.encodeSnapshotHtml=function(e){return v.domCompress?{encoded:l.Base64.bytesToBase64(d.compress(e)),plain:!1,compressed:!0}:{encoded:l.Base64.encode(e),plain:!1,compressed:!1}},this.estimateBeaconSize=function(e){return e},this.encodeEvent=function(e,n){var t=f.encoding.delimiters.eventParts,r=d.encodeTimestamp(e),i=d.encodeEventType(e.type),o=s.isUndefined(e.binding)||s.isUndefined(e.binding.valueEncoding)?e.value:e.binding.valueEncoding(e.value);void 0===n&&(n=s.isUndefined(e.selectorExpression)||null==e.selectorExpression?f.encoding.rootSelector:e.selectorExpression);var a=r+t+i+t+n;s.isString(o)&&0<o.length?a+=t+(e.shouldEncodeValue?f.encoding.valueEncodedPrefix:f.encoding.valueNotEncodedPrefix)+(e.shouldEncodeValue?l.Base64.encode(o):o):a+=t+"-";s.isUndefined(e.extraInfo)?a+=t+"-":a+=t+d.encodeExtraInfo(e);v.reportDebugInfo&&!s.isUndefined(e.debugInfo)?a+=t+d.encodeDebugInfo(e):a+=t+"-";var u="";e.domSnapshot&&(u=p.refForEvent(e),a+=t+f.encoding.domSnapshotRefPrefix+u),l.trace("encoding ("+e.type+") "+(s.contains(["webSocketFrame","resourceContent","pageSnapshot"],e.type)?r+t+i+t+"{event string is too long}":a)+(0<e.getSubPage().length?" [on "+e.getSubPage()+"]":""));var c={event:encodeURIComponent(a),domUpdate:e.domSnapshot,domUpdateRef:u};return c.length=c.event.length+p.estimatedDomUpdateSize(e.domSnapshot),c},this.encodeBeacon=function(e,n,t,r,i,o,a){var u,c=[],s=p.newPayload();for(u=0;u<a.length;u++)c.push(a[u].event),a[u].domUpdate&&s.add(a[u].domUpdate,a[u].domUpdateRef);return"v="+e+(void 0!==t?"&r="+encodeURIComponent(t):"")+"&sn="+n+"&p="+r+(void 0!==i?"&sp="+encodeURIComponent(i):"")+(void 0!==o?"&pssn="+o:"")+"&e="+c.join(f.encoding.delimiters.events)+"&dom="+h(p.encode(s))}}function Ue(a,u,v,h,p){p||(p={});var m=.25,g=new Le(h,{forceBase64:!1,compress:!p.compress&&p.domCompress});this.name="JSON",this.supportsCompression=!0,this.isCompressing=function(){return!0},this.visitXhr=function(e){p.corsSafelisted?e.setRequestHeader("Content-Type","text/plain"+(p.compress?"; charset="+Ue.COMPRESSED_INDICATION_CHARSET:"")):(e.setRequestHeader("Content-Type","application/json"),p.compress&&e.setRequestHeader("Content-Encoding","gzip"))},this.encodeSnapshotHtml=function(e){return!p.compress&&p.domCompress?{encoded:v.Base64.bytesToBase64(h.compress(e)),plain:!1,compressed:!0}:{encoded:e,plain:!0,compressed:!1}},this.estimateBeaconSize=function(e){return p.compress?e*m:e},this.encodeEvent=function(e,n){var t={timestamp:h.encodeTimestamp(e),type:""+h.encodeEventType(e.type)};void 0===n&&(n=a.isUndefined(e.selectorExpression)||null==e.selectorExpression?u.encoding.rootSelector:e.selectorExpression),t.selector=n;var r=a.isUndefined(e.binding)||a.isUndefined(e.binding.valueEncoding)?e.value:e.binding.valueEncoding(e.value);if(a.isString(r)&&0<r.length){var i=e.shouldEncodeValue?u.encoding.valueEncodedPrefix:u.encoding.valueNotEncodedPrefix;r=e.shouldEncodeValue?v.Base64.encode(r):r,t.value=i+r}else t.value="-";a.isUndefined(e.extraInfo)?t.extraInfo="-":t.extraInfo=h.encodeExtraInfo(e),p.reportDebugInfo&&!a.isUndefined(e.debugInfo)?t.debugInfo=h.encodeDebugInfo(e):t.debugInfo="-";var o="";return e.domSnapshot?(o=g.refForEvent(e),t.domSnapshot=u.encoding.domSnapshotRefPrefix+o):t.domSnapshot="-",v.trace("json encoding ("+e.type+") "+t.timestamp+";"+t.type+" {event string is too long}"+(0<e.getSubPage().length?" [on "+e.getSubPage()+"]":"")),function(e){var n,t=0;for(n in e.event)"string"==typeof e.event[n]&&(t+=n.length+e.event[n].length+6);return e.length=t+2+g.estimatedDomUpdateSize(e.domUpdate),e}({event:t,domUpdate:e.domSnapshot,domUpdateRef:o})},this.encodeBeacon=function(e,n,t,r,i,o,a){var u,c=[],s=g.newPayload();for(u=0;u<a.length;u++)c.push(a[u].event),a[u].domUpdate&&s.add(a[u].domUpdate,a[u].domUpdateRef);var f={ver:e,sn:n,pageId:r,events:c,dom:g.encode(s)};t&&(f.referrer=t),void 0!==i&&0<i.length&&(f.subPage=i),void 0!==o&&(f.pssn=o);var l=JSON.stringify(f);if(p.compress){var d=h.compress(l);return m=Math.max(d.length/l.length,Ue.MINIMAL_COMPRESSION_FACTOR),v.log("applying json compression. before:"+l.length+" after:"+d.length+" (ratio:"+m+")"),d}return l}}function Fe(e,o){var n,r=L.immutableSet.apply(null,e);function a(e,n){return e+"="+n}function t(e,n,t){t&&r[n]&&e.push(a(n,t))}if(e&&0!==e.length){function u(e){var n=[];return t(n,"clsjsv",encodeURIComponent(H.version)),t(n,"_cls_s",o.get(k.cookies.session)),t(n,"_cls_v",o.get(k.cookies.visitor)),t(n,"pid",e),n.join("&")}var c=function(){return n||(n=u(H.page.id)),n},s=r.sn,f=r.ref,l=r._cls_subs;this.apply=function(e,n,t){var r=t?u(t):c();if(!(r||s||l||f))return e;var i=[];return f&&i.push("ref="+encodeURIComponent(Fe.currentRef())),r&&i.push(r),l&&o.get(k.cookies.sub_session)&&i.push(a("_cls_subs",o.get(k.cookies.sub_session))),s&&n&&i.push(a("sn",n)),0<i.length?e+(-1!==e.indexOf("?")?"&":"?")+i.join("&"):e}}else this.apply=function(e,n,t){return e}}function je(t,n){function r(e){return n.keysPrefix+e}t=t||{},this.get=function(e){try{return t[r(e)]}catch(e){return D}},this.set=function(e,n){try{return t[r(e)]=n}catch(e){return D}},this.remove=function(e){try{return delete t[r(e)]}catch(e){return D}}}function Be(){this.current=null,this.last=null}function He(){return{validateSelector:function(n){try{return A.querySelector(n),!0}catch(e){return this.printErrorMsg("selector not valid"),void 0!==H&&setTimeout(function(){H.saveClsDebugErrorEvent("maskingConfiguration",D,n)},0),!1}},printErrorMsg:function(e){console.error("[EyeView-403]: Error while processing masking configuration. Sensitive data might be recorded, verify detector masking configuration. Error cause: "+e)}}}function qe(e,n,t){this.url=n,this.timestamp=t,this.type=e}function Ve(e,n){this.x=e,this.y=n}function ze(e,n,t,r){this.pageId=r,this.timestamp=n,this.type=e,this.element=t,this.report=!0,this.shouldEncodeValue=!0,this.dependent=!1,this.subPage=M.location.hash,this.referrer=L.stripHash(M.location.href)}function Xe(e){this.value=e}function We(t){var r=We.extractTLD(t),o={always:function(){return function(){return!0}},never:function(){return function(){return!1}},fqdn:function(){return function(e){var n=L.extractHostname(e.interception.url);return!n||n===t}},tld:function(){return function(e){var n=L.extractHostname(e.interception.url);return!n||We.extractTLD(n)===r}},statusgte:function(e){if(!e)throw new SyntaxError("illegal ajax predicate format: missing expected argument 'status'.");var n=parseInt(e);return function(e){return e.status>=n}},urimatches:function(e){if(!e)throw new SyntaxError("illegal ajax predicate format: missing expected argument 'pattern'.");var n=new RegExp(e);return function(e){return null!==n.exec(e.interception.url)}},and:function(e){if(!e)throw new SyntaxError("illegal ajax predicate format: missing expected argument 'inner arguments'.");var t=n(e);return function(e){var n;for(n=0;n<t.length;n++)if(!t[n](e))return!1;return!0}},or:function(e){if(!e)throw new SyntaxError("illegal ajax predicate format: missing expected argument 'inner arguments'.");var t=n(e);return function(e){var n;for(n=0;n<t.length;n++)if(t[n](e))return!0;return!1}}};function a(e){var n=e.indexOf("(");if(-1<n){var t,r=-1,i=1;for(t=n+1;t<e.length;t++)if("("===e.charAt(t)&&i++,")"===e.charAt(t)&&0==--i){r=t;break}if(-1===r)throw new SyntaxError("illegal ajax predicate format: missing argument closing ')'");return[L.trim(e.substring(0,n).toLowerCase()),L.trim(e.substring(n+1,r))]}return[e.toLowerCase()]}function n(e){var n,t,r=[],i=(e||"").split(",");for(n=0;n<i.length;n++){if(t=a(L.trim(i[n])),!o[t[0]])throw new SyntaxError("illegal ajax predicate format: unknown predicate type '"+t[0]+"'.");r.push(o[t[0]](t[1]))}return r}o.true=o.always,o.false=o.never,this.create=function(e){if(!e)return o.never();var n=a(e);if(!o[n[0]])throw new SyntaxError("illegal ajax predicate format: unknown predicate type '"+n[0]+"'.");return o[n[0]](n[1])}}function Ge(e,f,n,i,o,a){var l=o.ajaxDebug,t=function(){return!1},r=t,d=t,v=t,h=t,p=t;function u(e){f.emit("ajax:load",new Je(this,L.currentTimestamp())),l&&L.trace("AJAX load intercepted",this)}function c(e){f.emit("ajax:error",new Je(this,L.currentTimestamp())),l&&L.trace("AJAX error intercepted",this)}function s(e){l&&L.trace("AJAX onLoadstart intercepted",this),this.interception?(this.interception.startTime=L.currentTimestamp(),this.interception.lastFocusedElement=A.activeElement):L.trace("AJAX onLoadstart - missing cls xhr interception data")}function m(e){if(l&&L.trace("AJAX onLoadend intercepted",this),this.interception){var i=this,o=L.currentTimestamp(),a=v(i),u=a||d(i),c=p(i),s=c||h(i);if(!(s||u||r(i)))return!1;setTimeout(function(){var e=i.getAllResponseHeaders(),n=a&&Ge.hasGzipContentEncoding(e),t=a?Ge.captureContent(i,n):null,r=new Je(i,i.interception.startTime,o,s&&i.interception.requestHeaders?i.interception.requestHeaders.join("\r\n"):null,c?i.interception.requestContent:null,u?Ge.fixHeaders(e,t?t.length:D):null,t,n);r.lastFocusedElement=i.interception.lastFocusedElement,r.status=i.status,r.statusText=i.statusText,f.emit("ajax:loadend",r)},0)}else L.trace("AJAX onLoadend - missing cls xhr interception data for url: "+(this.responseURL||""))}function g(){var t=XMLHttpRequest.prototype.open,r=XMLHttpRequest.prototype.send,n=XMLHttpRequest.prototype.setRequestHeader;t&&r?(e.XMLHttpRequest.prototype.open=function(){var n,e=this;try{(function(e,n){if(Ge.isClsOwnAjax(e))return!1;if(0<=n.indexOf(o.reportURI))return!1;if(i&&0<=n.indexOf(i))return!1;var t,r=n.toLowerCase();for(t=0;t<a.length;t++)if(0<=r.indexOf(a[t]))return!1;return!0})(e,n="object"==typeof arguments[1]?arguments[1].toString():arguments[1])&&(e.interception={uuid:L.uuid(),requestHeaders:[],method:arguments[0],url:n,async:arguments[2]},e.addEventListener("load",u,!1),e.addEventListener("error",c,!1),e.addEventListener("loadstart",s,!1),e.addEventListener("loadend",m,!1),f.emit("ajax:open",new Je(e,L.currentTimestamp())),l&&L.trace("AJAX open intercepted",e))}catch(e){L.log("Exception occurred when intercepting ajax 'open' for url: "+n+" Error: "+e.message,e)}t.apply(this,arguments)},e.XMLHttpRequest.prototype.send=function(){if(this.interception)try{var e=arguments[0],n=new Je(this,L.currentTimestamp());0<arguments.length&&(this.interception.requestContent=e,n.data=e),f.emit("ajax:send",n),l&&L.trace("AJAX send intercepted",this)}catch(e){L.log("Exception occurred when intercepting ajax 'send'. Error: "+e.message,e)}r.apply(this,arguments)},e.XMLHttpRequest.prototype.setRequestHeader=function(){var e=this;if(e.interception)try{e.interception&&e.interception.requestHeaders&&e.interception.requestHeaders.push(arguments[0]+": "+arguments[1]),l&&L.trace("AJAX 'setRequestHeader' intercepted",e)}catch(e){L.log("Exception occurred when intercepting ajax 'setRequestHeader'. Error: "+e.message,e)}n.apply(this,arguments)}):L.log("WARNING: cannot intercept ajax, XMLHttpRequest prototype was altered (other, earlier loaded, 3rd party js?).")}this.initialize=function(){try{Ge.cfgBackwardComp(o)&&L.log("Warning: using deprecated ajax configuration modifiers.");var e=new We(n);o.ajaxRecordMetadata&&(r=e.create(o.ajaxRecordMetadata)),o.ajaxRecordResponseHeaders&&(d=e.create(o.ajaxRecordResponseHeaders)),o.ajaxRecordResponseBody&&(v=e.create(o.ajaxRecordResponseBody)),o.ajaxRecordRequestHeaders&&(h=e.create(o.ajaxRecordRequestHeaders)),o.ajaxRecordRequestBody&&(p=e.create(o.ajaxRecordRequestBody))}catch(e){return L.log("Error while parsing Ajax predicates from configuration. interception disabled. error:"+e),!1}return Ge.supportAjaxOnProgressEvents()?(f.on("init:preloaded",g),L.log("Intercepting AJAX calls."),!0):(L.log("Ajax interception not supported."),!1)}}function Je(e,n,t,r,i,o,a,u){try{if(!e.interception)return void(debugMode&&L.trace("AjaxCall - missing cls xhr interception data for url: "+(e.responseURL||"")));this.xhr=e,this.startedAt=n,this.endedAt=t,this.interception=e.interception,this.url=Ge.safeEncodeURI(e.interception.url),this.method=e.interception.method,this.requestHeaders=r||null,this.requestContent="string"==typeof i?i:null,this.responseHeaders=o,this.responseContent=a,this.responseCompressed=u}catch(e){console.log("Error in AjaxCall construction: "+e)}}function Ke(r,i,o,a){o=o||"",a=a||[];var u=i.get(Ke.READY_COOKIE)?Ke.STATE.READY:r.get(Ke.CORS_READY_KEY)?Ke.STATE.READY:Ke.STATE.INIT,c=0,s=[],f=function(e){e?(u=Ke.STATE.READY,r.set(Ke.CORS_READY_KEY,!0)):3==++c&&(u=Ke.STATE.GAVE_UP);var n=s;s=[];for(var t=0;t<n.length;t++)n[t](e)},l=function(e,n){var t,r;for(t=0;t<e.length;t++)(r=i.get(e[t]))&&n.push(e[t]+"="+encodeURIComponent(r))};this.help=function(e,n){if(u===Ke.STATE.READY)return n(!0);if(u===Ke.STATE.GAVE_UP)return n(!1);var t=[];if(l(Ke.CORS_COOKIES,t),l(a,t),s.push(n),0<t.length){if(u===Ke.STATE.HELPING)return;u=Ke.STATE.HELPING;var r=o+"?"+t.join("&"),i=e();i.onreadystatechange=function(){4===i.readyState&&(200===i.status?f(!0):(L.log("failed to execute CORS support request. statusCode:"+i.status),f(!1)))},i.open("GET",r,!0),i.withCredentials=!0,i.send()}else L.log("ERROR: could not retain cls cookies (was the TLD configured and detected correctly?)"),f(!1)},this.reset=function(){i.set(Ke.READY_COOKIE,""),u=Ke.STATE.INIT,c=0}}function Qe(t,a){this.config={maxReportSize:-1,maxReports:-1},this.gainLockToReport=function(){return!0},this.freeLock=function(){},this.flushEvents=function(e,n){try{t[Qe.KEY_NAME]=function(e,n,t,r){var i,o;if("object"==typeof n)i=L.Base64.bytesToBase64(n),o=Qe.ENCODING_BASE64;else{if("string"!=typeof n)throw"cannot report to storage: unsupported input type: "+typeof n;i=n,o="plain"}return(e=e?JSON.parse(e):[]).push({ts:t,pid:a,sn:r,encoding:o,e:i}),L.arrayToJsonSafe(e)}(t[Qe.KEY_NAME],e,L.currentTimestamp(),n)}catch(e){L.log("error: could not flush client events into storage. "+e.message),delete t[Qe.KEY_NAME]}}}function Ye(e,s){function n(e,n,t,r){var i,o,a=[],u=[];if(t)for(i=0;i<t.length;i++)u.push(t[i]);if(e)for(i=0;i<e.length;i++)1===(a=(o=CSS.escape(e[i])).split("\\*")).length?u.push("#"+o):2===a.length?u.push(Ye.prepareWildCardSelector(a,"id")):s.printErrorMsg("more than one wildcard in id list");if(n)for(i=0;i<n.length;i++)1===(a=(o=CSS.escape(n[i])).split("\\*")).length?u.push("."+o):2===a.length?u.push(Ye.prepareWildCardSelector(a,"class")):s.printErrorMsg("more than one wildcard in class list");if(0===u.length)return null;if(r)return u.map(function(e){var n=e.split("][");return 2===n.length?":not("+n[0]+"]):not(["+n[1]+")":":not("+e+")"}).join("");var c=u.join(",");return s.validateSelector(c)?c:null}e=e||{},this._maskedAttributes=L.immutableSet.apply(null,e.domMaskedAttributes),this._maskedAttributesTags=L.immutableSet.apply(null,(e.domMaskAttributesTags||[]).map(function(e){return e.toUpperCase()})),this._selectorsByMaskingType={},this._selectorsByMaskingType[Z.TEXT.name]=n(e.domMaskIds,e.domMaskClasses,e.domMaskSimpleSelector),this._selectorsByMaskingType[Z.OMIT.name]=n(e.domOmitIds,e.domOmitClasses),this._selectorsByMaskingType[Z.VALUE_ATTRIBUTE.name]="input"+n(e.valueMaskIds,["cls_mask"].concat(e.valueMaskClasses||[]),!1,k.ValueMaskingMode.WhiteList===e.valueMaskingMode),this._selectorsByMaskingType[Z.ATTRIBUTE.name]=function(e,n){if(0===e.length||0===n.length)return null;var t,r,i=[];for(t=0;t<n.length;t++)for(r=0;r<e.length;r++)i.push(n[t]+"["+e[r]+"]");return i.join(",")}(e.domMaskedAttributes||[],e.domMaskAttributesTags||[])}function $e(e){this._cookieMaskSet=e&&e.cookieMask?L.immutableSet.apply(null,e.cookieMask):null}function Ze(n,e,t,r,i){var o,a,u,c=t.getAttribute("id"),s=(o=c,a=L.toAbsoluteUrl(t.getAttribute("src")),function(e){var n=e.createElement("script");return n.setAttribute("type","text/javascript"),o&&n.setAttribute("id",o),n.setAttribute("src",a),n.setAttribute("data-clsautoinjected","true"),n}),f=(u=e,function(){var e=L.shallowExtend(u,{});return e.reportToStorageAfterUnload=!0,e.iframesParentOrigin=n.location.origin,e});var l=function(n){return!((e=n).contentDocument&&"complete"===e.contentDocument.readyState&&e.contentDocument.body.hasChildNodes()&&!function(e){if(void 0!==e[r])return L.log("iframe detector injection skipped since the iframe already contains Glassbox detector."),!1;var n=e.document;return c&&n.querySelector("script[id='"+c+"']")?(L.log("iframe detector injection skipped since the iframe already contains Glassbox detector."),!1):(e._cls_config=f(e),n.head.appendChild(s(n)),i&&setTimeout(function(){i(e)},0),!0)}(n.contentWindow))&&(n.addEventListener("load",function e(){try{n.removeEventListener("load",e),function(e){try{return e.contentWindow.location.href,!0}catch(e){return!1}}(n)&&l(n)}catch(e){L.log("error during iframe injection after 'load' event. error:"+e)}}),!0);var e};this.inject=function(e){try{return l(e)}catch(e){L.log("error during iframe auto-injection (is cross origin frame?). error:"+e)}return!1}}function en(e){var r={};function n(e){var n=e.data.message,t=r[n];t&&(e.stopImmediatePropagation(),t(e.source,e.data.value,e.origin))}e.addEventListener("message",n),this.onMessage=function(e,n){r[e]=n},this.revoke=function(){e.removeEventListener("message",n)}}function nn(e,i){i=i||"*",this.send=function(e,n,t,r){r=r||i,e.postMessage({message:n,value:t},r)}}function tn(o,i,e,a,u){u=u||{mscThrottle:300};var c={};function s(e,n){if(n.propagate){var t,r=o.document.getElementsByTagName("iframe");for(t=0;t<r.length;t++)e!==r[t].contentWindow&&i.send(r[t].contentWindow,"frame:notification",{type:n.type,propagate:!0})}n.bubble&&o.parent!==o&&i.send(o.parent,"frame:notification",{type:n.type,bubble:!0,propagate:!0})}e.onMessage("frame:notification",function(e,n){var t,r,i;L.log("received iframe notification. type:"+n.type+" href:"+o.location.href),t=n.type,r=L.currentTimestamp(),(i=c[t])&&r-i<u.mscThrottle||(c[t]=r,0)?L.log("iframe notification dispatching aborted (throttled) . type:"+n.type+" href:"+o.location.href):(a[n.type]&&a[n.type](),s(e,n))}),this.notify=function(e,n,t){i.send(e,"frame:notification",{type:n},t)},this.notifyAll=function(e){s(D,{type:e,propagate:!0,bubble:!0})}}function rn(e,n,t){this.unload=function(){n().sendStoragePendingReports()},this.domTrackingStarted=function(){e().ensureStarted()},this.pageUpdate=function(){t()}}function on(t,i){function o(e){i.emit("frame:detected",e)}function r(e){var n;if("childList"===e.type){var t,r=[];for(t=0;t<e.addedNodes.length;t++)"IFRAME"===e.addedNodes[t].tagName?r.push(e.addedNodes[t]):"function"==typeof e.addedNodes[t].getElementsByTagName&&Array.prototype.push.apply(r,e.addedNodes[t].getElementsByTagName("iframe"));for(t=0;t<r.length;t++)o(r[t]);n=0<r.length,r.length&&L.log(r.length+" iframes were detected during DOM update.")}else"attributes"===e.type&&"IFRAME"===e.actualTarget.tagName&&(n="IFRAME"===e.actualTarget.tagName||"function"==typeof e.actualTarget.getElementsByTagName&&0<e.actualTarget.getElementsByTagName("iframe").length);n&&i.emit("frame:domChange")}this.start=function(){var e,n=t.getElementsByTagName("iframe");for(e=0;e<n.length;e++)o(n[e]);L.log(n.length+" iframes were detected during document's initial scan."),i.on("domMutation",r)}}function an(s,f,l,e,d){d=d||{containerIdAttribute:"gb_cid",mscTimeout:d.mscTimeout||2e3};var n,o,v,a,h=(n=100,function(){return""+n++});this.perform=function(e,n,t){L.log("performing iframes handshake: sending CLIENT hello. pageId:"+f.id),o=n,l.send(e,"child:hello",{pageId:f.id}),-1!==d.mscTimeout&&(a=setTimeout(t,d.mscTimeout))},this.setParentCallback=function(e){v=e},e.onMessage("child:hello",function(e,n,t){L.log("received CHILD hello, pageId:"+n.pageId);var r,i,o=s.getElementsByTagName("iframe");for(r=0;r<o.length;r++)if(e===o[r].contentWindow){i=o[r];break}if(!i)return L.log("could not complete iframe handshake: child frame could not be found. pageId:"+n.pageId+" origin:"+t),void(v&&v());var a,u,c=((u=(a=i).getAttribute(d.containerIdAttribute))||(u=h(),a.setAttribute(d.containerIdAttribute,u)),u);v&&v(c,n.pageId),l.send(i.contentWindow,"parent:hello",{containerId:c,parentPageId:f.id},t)}),e.onMessage("parent:hello",function(e,n,t){a&&clearTimeout(a);var r=n.containerId,i=n.parentPageId;L.log("received PARENT hello. containerId:"+r+" parentPageId:"+i),o&&o(i,r,t),o=D})}function un(r,e,n,t,i,o,a,u){u=u||{};var c,s,f={detected:0,injected:0,injectionFailed:0,handshakesWithChildren:{success:0,error:0},handshakeWithParent:{startedAt:-1,completedAt:-1,timeout:!1}},l=r.top!==r;function d(){i.notifyAll("pageUpdate")}function v(e,n,t){c={pageId:e,containerId:n,origin:t},f.handshakeWithParent.completedAt=L.currentTimestamp(),f.handshakeWithParent.info=c,a(e,n),L.log("handshake completed. containerId:"+n+" parentId:"+e+" path:"+r.location.pathname)}function h(){L.log("iframes handshake failure: timeout while waiting for PARENT hello."),f.handshakeWithParent.timeout=!0,a()}function p(e){c&&i.notify(r.parent,e,c.origin)}o.setParentCallback(function(e,n){f.handshakesWithChildren.success+=e?1:0,f.handshakesWithChildren.error+=e?0:1}),this.initialize=function(){l||a()},this.stats=function(){return f},this.handshakeCompleted=function(){return!!c},e.on("saveEvent",function(e){s&&"pageUpdate"!==e.type&&-1!==k.snapshotApplicableEventType.indexOf(e.type)&&d()}),e.on("frame:detected",function(e){u.autoInject&&!ie.isCrossOriginFrame(e,r.location.origin)&&(t&&t.inject(e)?(L.log("a newly detected iframe was successfully injected."),f.injected++):f.injectionFailed++),f.detected++}),e.on("frame:domChange",d),e.on("init:loaded",function(){n.start(),l&&(f.handshakeWithParent.startedAt=L.currentTimestamp(),o.perform(r.parent,v,h))}),e.on("domTrackingStarted",function(){s=!0,p("domTrackingStarted")}),u.storageOnUnload&&e.on("event:unload",p.bind(null,"unload"))}function cn(i,o,a,u){u=u&&new RegExp(u);var c=function(e){var n,t=[],r=e.getElementsByTagName("script");for(n=0;n<r.length;n++)u.exec(r[n].innerText)||t.push(r[n]);return t};this.sanitize=function(e){var n,t,r=[];if(i&&Array.prototype.push.apply(r,function(e){var n=[];if(e.ownerDocument)for(var t,r=e.ownerDocument.createNodeIterator(e,NodeFilter.SHOW_COMMENT,null,!0);t=r.nextNode();)n.push(t);return n}(e)),o&&"function"==typeof e.getElementsByTagName)for(n=0;n<o.length;n++)u&&"script"===o[n]?Array.prototype.push.apply(r,c(e)):Array.prototype.push.apply(r,e.getElementsByTagName(o[n]));if(a&&"function"==typeof e.querySelector)for(t in a)for(n=0;n<a[t].length;n++)e.querySelector(t+"#"+a[t][n])&&r.push(e.querySelector(t+"#"+a[t][n]));!function(e){var n;for(n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])}(r),L.log("sanitation of DOM element completed. removedNodes:"+r.length)}}function sn(e){return e instanceof Comment||(!("IFRAME"!==e.tagName||!e.parentNode||"HEAD"!==e.parentNode.tagName)||sn.IGNORABLE_TAGS.hasOwnProperty(e.nodeName))}function fn(e,r){if(e.WebSocket){var i=e.WebSocket,n=function(e,n){
// #preserve native
var t=n?new i(e,n):new i(e);try{t.addEventListener("message",r)}catch(e){L.log("failed intercepting WebSocket constructor: "+e.message,e)}return t};(n.prototype=i.prototype).constructor=i,n.CONNECTING=0,n.OPEN=1,n.CLOSING=2,n.CLOSED=3,e.WebSocket=n}else L.log("WebSocket interface is not supported by the browser.")}function ln(r,i){var e,t=(e=0,function(){return++e}),o=function(e){var n=e[ln.GB_ID_ATTRIBUTE_NAME];return n||(n=t(),e[ln.GB_ID_ATTRIBUTE_NAME]=n,i&&"function"==typeof e.setAttribute&&e.setAttribute(ln.GB_ID_ATTRIBUTE_NAME,n)),n};this.usingGlassboxIds=i,this.idOf=function(e,n){return n?e[ln.GB_ID_ATTRIBUTE_NAME]:o(e)},this.selectorFor=function(e,n){return i?(t=o(e),"["+ln.GB_ID_ATTRIBUTE_NAME+"='"+t+"']"):r(e,n);var t},this.introduceDocument=function(e){if(i&&!e._gb_scanned){for(var n,t=e.createNodeIterator(e.documentElement,NodeFilter.SHOW_ELEMENT,null,!0);n=t.nextNode();)o(n);e._gb_scanned=!0}}}function dn(t,r,i,o){var e,n=!1,a=null;"undefined"!=typeof MutationObserver?a=MutationObserver:"undefined"!=typeof WebKitMutationObserver&&(a=WebKitMutationObserver);var u=function(e){for(var n=0;n<e.length;n++)if(!o(e.item(n)))return!1;return!0},c=function(e){var n=e.target;if("attributes"===e.type){if(e.attributeName===ln.GB_ID_ATTRIBUTE_NAME)return}else"characterData"===e.type&&n instanceof CharacterData&&(n=n.parentNode||n);if(!o(n)){if("childList"===e.type){for(var t=0;t<e.removedNodes.length;t++)delete e.removedNodes.item(t)[ln.GB_ID_ATTRIBUTE_NAME];if(u(e.addedNodes)&&u(e.removedNodes))return}e.actualTarget=n,r.emit("domMutation",e)}},s={attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1};this.getName=function(){return"MutationObserver based"},this.supported=function(){return null!==a},this.start=function(){if(!n){if(!e){if(!a)throw new Error("cannot start DomObserver: native interface not supported by the browser.");e=new a(function(e){e.forEach(c)})}e.observe(i,s),n=!0}},this.isActive=function(){return n},this.n=function(){if(a&&t.navigator.userAgent.match(/Trident\/(\d+)/)){var e=new a(function(e){});e.observe(i,{childList:!0,subtree:!0});var n=(new DOMParser).parseFromString("<?xml version='1.0' encoding='UTF-8'?><test><![CDATA[-5153879911146088898:4982669000430465522]]></test>","text/xml");return e.disconnect(),1<n.firstChild.childNodes.length}return!1}}function vn(u,n,c){var t=!1,r=function(e){var n,t,r,i=[],o=[],a=e.type;if("DOMNodeInserted"===e.type)n="childList",(t=e.target.parentNode)&&i.push(e.target);else if("DOMNodeRemoved"===e.type)delete e.target[ln.GB_ID_ATTRIBUTE_NAME],n="childList",(t=e.target.parentNode)&&o.push(e.target);else if("DOMCharacterDataModified"===e.type)n="characterData",t=e.target;else{if("DOMAttrModified"!==e.type)return;if(e.attrName===ln.GB_ID_ATTRIBUTE_NAME)return;n="attributes",t=e.target,r=e.attrName}c(t)||t&&u.emit("domMutation",{origType:a,type:n,actualTarget:t,attributeName:r,addedNodes:i,removedNodes:o})};this.getName=function(){return"DOM events based"},this.supported=function(){return"undefined"!=typeof MutationEvent},this.start=function(){var e;t||((e=n).addEventListener("DOMNodeInserted",function(e){r(e)},!1),e.addEventListener("DOMCharacterDataModified",function(e){r(e)},!1),e.addEventListener("DOMNodeRemoved",function(e){r(e)},!1),e.addEventListener("DOMAttrModified",function(e){r(e)},!1),t=!0)},this.isActive=function(){return t}}function hn(n,t){var r;t.on("init:loaded",function(){r=n.title}),t.on("domMutation",function(){var e;e=!r||r===n.title,r=n.title,e||setTimeout(function(){t.emit("titleChanged")},0)})}function pn(l,d,u,v,h,p,m,g){g=L.shallowExtend(pn.DefaultOptions,g);var y=function(e,n,t){var r,i,o,a=e.getElementsByTagName(n);for(r=0;r<a.length;r++)for(o=a[r],i=0;i<t.length;i++)pn.AttributeUpdaters[t[i]](o,u)};this.take=function(e){if(null===l.body)return D;var n,t,r,i=L.currentTimestamp();try{var o=d.cloneNode(l.documentElement),a=o.querySelector("head"),u=o.querySelector("body");p&&a&&p.sanitize(a),m&&u&&m.sanitize(u),y(o,"input",["value","checked"]),y(o,"select",["selectedIndex"]),g.addHeader&&(n=o,t=e,r=pn.CLS_HEADER_PREFIX+"[createdAt:"+L.currentTimestamp()+" seq:"+t+"] ",n.head.insertBefore(n.createComment(r),n.head.childNodes[0])),v&&v.domMaskNode(o,Z.OMIT,Z.TEXT,Z.VALUE_ATTRIBUTE,Z.ATTRIBUTE),g.domRecordCssRules&&function(e,n){for(var t,r,i,o=n.getElementsByTagName("style"),a=e.getElementsByTagName("style"),u=0;u<o.length;u++)if(i=o[u].textContent||"",o[u].sheet.gb_css_rules)a[u].textContent=i+o[u].sheet.gb_css_rules;else if(!i){t=o[u].sheet.cssRules,r="";for(var c=0;c<t.length;c++)"string"==typeof t[c].cssText&&(r+=t[c].cssText);a[u]&&(a[u].textContent=r)}}(o,l);var c=pn.HTML_SCHEMA_PREFIX+o.outerHTML,s=h?h.maskCookie(l.cookie):l.cookie;return new mn(c,l.referrer,e,s,l.characterSet)}catch(e){return L.log("could not obtain page snapshot. error: "+e),this.lastError=e,D}finally{var f=L.currentTimestamp();L.log("full page snapshot capturing took:"+(f-i)+"msc")}}}function mn(e,n,t,r,i){this.html=e,this.referrer=n,this.seq=t,this.charset=i,this.cookie=r}function gn(f,l){var d=L.immutableSet("checkbox","radio"),v={INPUT:"inputs",SELECT:"selects",TEXTAREA:"textareas"},e=function(e,n){var t,r,i,o;if(!function(e){if(!l||void 0===l.ignoredFormElement)return!1;var n=L.getElementId(e);return!!n&&O.contains(l.ignoredFormElement,n)}(e.element)&&(e.properties&&0<e.properties.length)){var a,u,c=v[e.element.tagName],s={};if(c){for(a=0;a<e.properties.length;a++)i=e.element,o=e.properties[a],s[u="SELECT"===i.tagName?"selectedIndex":"INPUT"===i.tagName&&d[i.getAttribute("type")||""]?"checked":o]=(t=e.element,r=u,f&&"value"===r?f.maskValue(t):t[r]);L.ensureProperty(n,c)[e.selector()]=s}}};return{all:function(){return[e]}}}function yn(c,s){c=c||{},s=s||[];var f=0;function l(e,n,t){if(n.removed)return!1;var r;for(r=0;r<e.length;r++)e[r](n,t);return!0}this.getSnapshot=function(){var e,n,t,r,i,o,a={timestamp:f++,propertiesMode:"modifiedOnly",selectors:c.usingGlassboxIds?"gb":"native"},u=0;for(e=0;e<s.length;e++){for(n in o=0,t=(i=s[e]).tracker.track())r=t[n],l(i.providers,r,a)&&o++;u+=o,L.log(o+" change entries of type "+i.name+" were processed and assigned to DOM update.")}return 0===u&&(a=D),a},this.start=function(){var e;for(e=0;e<s.length;e++)s[e].tracker.start();L.log("dom mutation accumulation started.")}}function En(e,n){this.element=e,this.nodeCache=n,this._useId=!0,this._resolvedSelector=D}function bn(e,a){var u={},c=0;function r(e){var n,t,r=0;if("function"==typeof e.element.contains)for(n in u)u[n].removed||(t=u[n].element)!==e.element&&e.element.contains(t)&&(u[n].removed=!0,r++);return r}function i(e){for(var n,t,r=e.element.parentNode;r;){if(t=u[a.idOf(r,!0)])for(n=0;n<t.length;n++)if(void 0!==t[n].childListOrdinal)return e.removed=!0,t[n]=e.childListOrdinal,1;r=r.parentNode}return 0}function n(e){var n,t,r,i=c++,o=(n=e.actualTarget,t=a.idOf(n),(r=u[t])||(r=new En(n,a),u[t]=r),r);"characterData"===e.type?o.characterDataChild=e.target:"childList"===e.type?(o.childListOrdinal=i,o.characterDataChild=D):"attributes"===e.type&&(o.attributes||(o.attributes={}),o.attributes[e.attributeName]=i,"id"===e.attributeName&&o.invalidateId())}this.start=function(){e.on("domMutation",n),L.log("DOM mutation tracking started.")},this.track=function(){var e=u,n=function(){var e,n,t=0;for(e in u)(n=u[e]).removed||(L.isAttachedToDOM(n.element)?void 0!==n.childListOrdinal&&(t+=i(n),t+=n.removed?0:r(n)):(t++,n.removed=!0));return t}();return L.log("DOM changes log was compacted by "+n+" entries."),c=0,u={},e}}function wn(u,c,s){var f=!0,l={};s=L.immutableSet.apply(null,s||[]);var d=function(e,n,t){var r=wn.propertyForElement(e);if(r){var i=(l[n]||{})[r],o=e[r];(f?o!==wn.defaultValue(e,r):i!==o)&&(t[n]||(t[n]=new En(e,c),t[n].properties=[]),t[n].properties.push(r));var a={};a[r]=o,l[n]=a}};this.start=function(){L.log("DOM elements properties tracking started.")},this.track=function(){var e,n,t,r,i={},o={},a=u.querySelectorAll("input,select,textarea");for(e=0;e<a.length;e++)(t=a[e]).id&&s[t.id]||"hidden"===t.getAttribute("type")||(n=c.idOf(a[e]),d(a[e],n,i),o[n]=!0);for(r in l)o[r]||delete l[r];return f=!1,i}}function xn(e,r){var n,i,t,o,a=[],u={};n=e.CSSStyleSheet.prototype,i=n.insertRule,n.insertRule=function(){var e=i.apply(this,arguments);try{var n=arguments[0];this.gb_css_rules?this.gb_css_rules+=n:this.gb_css_rules=n;var t=r.idOf(this.ownerNode);u[t]||(u[t]=new En(this.ownerNode,r)),a.push({selector:t,type:"added",rule:n,index:e})}catch(e){L.log("Exception occurred during CSS insertRule interception. Error: "+e.message,e)}return e},L.log("CSS rule insertion tracking started."),t=e.CSSStyleSheet.prototype,o=t.deleteRule,t.deleteRule=function(){try{var e=arguments[0];if(this.cssRules[e]!==D){var n=r.idOf(this.ownerNode);u[n]||(u[n]=new En(this.ownerNode,r)),a.push({selector:n,type:"deleted",index:e})}}catch(e){L.log("Exception occurred during CSS deleteRule interception. Error: "+e.message,e)}return o.apply(this,arguments)},L.log("CSS rule deletion tracking started."),this.start=function(){},this.track=function(){!function(){for(var e,n,t=0;t<a.length;t++)e=a[t].selector,n=u[e].selector(),a[t].selector=n}();var e={};return a.length&&(e.cssRules={rules:a}),a=[],u={},e}}function Sn(n){this.encode=function(e){return e.constructor===Array?n.encode(L.arrayToJsonSafe(e)):n.encode(JSON.stringify(e))},this.decode=function(e){return JSON.parse(n.decode(e))}}function Cn(n,t,r){var i={url:n};try{var o=new XMLHttpRequest;return!!o&&(o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=o.getResponseHeader("Content-Type");i.type=e,i.content=L.pako.gzip(o.response),t(i)}else 0===o.status?r(i.url):(L.log("Failed getting resource data by Ajax for url : "+n+" status:"+o.status+"  "+o.statusText),i.error="status: "+o.statusText+" ("+o.status+")",t(i))},o.cls_own=!0,o.open("GET",n,!0),o.responseType="arraybuffer",o.send(),!0)}catch(e){return console.log("Failed getting resource data by Ajax for url: "+n+": "+e.message,e),!1}}function Rn(u,c,t,n,s,f,l,r){var e,d;function v(){var e,n=c.get("res.pending");if(c.remove("res.pending"),n)try{e=s.decode(n)}catch(e){L.log("Failed parsing JSON for pending resources: "+e.message,e)}return e}function i(e){r.countRecorded++,n.emit("saveResourceEvent",e)}function o(e){r.countCorsDenied++,n.emit("saveCorsDeniedEvent",e)}(e=r||{}).countRecorded=0,e.countCorsDenied=0,e.recordingAll=!!c.get("res.all"),r=e,d=l.resourceRecordCssOnly?L.immutableSet("link","css"):L.immutableSet("link","css","font","img","input"),this.fetchResources=function(){var e=v();if(e)for(var n=0;n<e.length;n++)if(!t(e[n],i,o)){L.log("Failed executing an XHR request for fetching a resource. Breaking the fetch loop.");break}},this.electResources=function(){var e,n=l.electAmount,t=l.maxPendingResources;if(c.get("res.all")&&(e=!0,n=Number.MAX_VALUE,t=Number.MAX_VALUE),e=e||Math.random()<l.electProbability){var r=u.performance.getEntriesByType("resource");r=function(e){for(var n=[],t=0;t<e.length;t++){var r=e[t];f(r.name)||d[e[t].initiatorType]&&n.push(r)}return n}(r);for(var i,o=v()||[],a=0;a<n&&0<r.length&&!(o.length>=t);a++)i=Math.floor(Math.random()*r.length),o.push(r[i].name),r.splice(i,1);c.set("res.pending",s.encode(o))}},this.recordAllResources=function(){c.set("res.all","true")},this.stopRecordAllResources=function(){c.remove("res.all")}}function Tn(f,t,r){function l(e,n,t){for(var r={},i=0;i<n.length;i++)e[n[i]]!==D&&(r[n[i]]=e[n[i]]);return r}function i(e,n,t,r,i){var o,a,u=[],c=f.performance.getEntriesByType(n);if(u=r&&i?c.filter(function(e){return i[e[r]]!==D}):c,"resource"===n){var s=function(){for(var e={},n=f.document.getElementsByTagName("script"),t=0;t<n.length;t++)n[t].src&&(e[n[t].src]=n[t].async?1:0);return e}();for(o=0;o<u.length;o++)"script"===(a=u[o]).initiatorType&&(a.async=s[a.name]?1:0)}for(e[n]=[],o=0;o<u.length;o++)e[n].push(l(u[o],t))}this.reportMeasurements=function(){for(var e={},n=0;n<r.length;n++)i(e,r[n].type,r[n].properties,r[n].filterBy,r[n].validFilterValues);t.emit("waterfall",e)}}function In(e,r,i,o){var n=["INPUT","SELECT","TEXTAREA"],a=n.join(),u=L.immutableSet.apply(L,n);function c(e,n){for(var t,r=[],i="."+n,o=e.querySelectorAll(i),a=0;a<o.length;a++)"hidden"!==(t=o[a].getAttribute("type"))&&"button"!==t&&r.push(o[a]);return r}function s(e,n){for(var t,r=0,i=[];r<e.length;)if(e[r+1]&&u[e[r].tagName]&&f(e[r]))(t=d(e[r+1]))&&i.push({elem:e[r],msg:l(t)}),r+=2;else if(e[r+1]&&u[e[r+1].tagName]&&f(e[r+1]))(t=d(e[r]))&&i.push({elem:e[r+1],msg:l(t)}),r+=2;else{if(t=l(d(e[r]))){var o=e[r].querySelector(a)||e[r].parentElement.querySelector(a);(o&&f(o)||!o)&&i.push({elem:o||n,msg:t})}r++}return i}function f(e){return e.gb_lastInputVal===D||e.gb_lastInputVal!==e.value?(e.gb_lastInputVal=e.value,!0):(e.gb_lastInputVal=e.value,!1)}function l(e){var n=e.split(".");return(2<n.length?n[0]+"."+n[1]+".":e).substring(0,200)}function d(e){var n;if(!e.childNodes.length)return"";for(var t=e.childNodes.length-1;0<=t;t--)if(n=(n=e.childNodes[t].textContent).trim())return n;return e.textContent.trim()}function v(e){for(var n,t=0;t<e.length;t++)n=i.getSelectorExpression(e[t].elem)||k.encoding.rootSelector,r.emit("formValidationError",{element:e[t].elem,message:e[t].msg,selector:n})}this.intercept=function(e){var n;try{if(n=function(e){for(;e;){if("FORM"===e.tagName)return e;e=e.parentElement}return null}(e))for(var t=0;t<o.domFormValidationClassErrors.length;t++)v(s(c(n,o.domFormValidationClassErrors[t]),n))}catch(e){L.log("exception occurred during form validation interception. Error: "+e.message,e)}}}function Mn(s,f){this.showErrorsLRU=new De(20),this.intercept=function(){L.log("Intercepting jQuery Validator errors.");var c=jQuery.validator.prototype.showErrors;jQuery.validator.prototype.showErrors=function(e){try{if(this.errorList&&0<this.errorList.length)for(var n=0;n<this.errorList.length;n++){var t=this.errorList[n].element,r=this.errorList[n].message,i="SAME - NOT REPORTING",o=f.getSelectorExpression(t)||k.encoding.rootSelector,a=this.showErrorsLRU.set(o,r);if(null===a||O.isUndefined(a))i="NEW";else if(a!==r)i="UPDATE";else if(a===r){var u=this.errorsFor(t);u&&0<u.length&&!O.isUndefined(u[0].innerHTML)&&(u[0].innerHTML===r&&jQuery(u[0]).is(":visible")||(i="SHOW"))}"NEW"!==i&&"UPDATE"!==i&&"SHOW"!==i||s.emit("formValidationError",{element:t,message:0<r.length?r:"NONE",selector:o})}}catch(e){L.log("Failed intercepting showErrors for validation error report. "+e.message,e)}c.call(this,e)}}}function An(e,n,t,r){this._elementResolver=n,this._accessors=t,this._rule=e,this._urlRegexp=r}}("_detector",window,document,"5.6.196B7");
;
$(document).ready(function () {
    $("#keyboardNav").click(function () {
       // $(".scroll-benefits").replaceWith($('<button>' + $(".scroll-benefits").value + '</button>'));
        $("body").removeClass("invert-color grayscale");
        $("body").removeClass("grayscale");
        $("body").addClass("keyboard-nav");
    })
    
    $("#sr").click(function () {
        $("body").addClass("sr");
    })
    $("#invert").click(function () {
        $("body").removeClass("grayscale");
        $("body").addClass("invert-color");
    }
    )
    $("#grayscale").click(function () {
        $("body").removeClass("invert-color");
        $("body").addClass("grayscale");
    }
    )
    
});;
/**
 * Multiple Selection Component for Bootstrap
 * Check nicolasbize.github.io/magicsuggest/ for latest updates.
 *
 * Author:       Nicolas Bize
 * Created:      Feb 8th 2013
 * Last Updated: Oct 16th 2014
 * Version:      2.1.4
 * Licence:      MagicSuggest is licenced under MIT licence (http://opensource.org/licenses/MIT)
 */
(function($)
{
    "use strict";
    var MagicSuggest = function(element, options)
    {
        var ms = this;

        /**
         * Initializes the MagicSuggest component
         */
        var defaults = {
            /**********  CONFIGURATION PROPERTIES ************/
            /**
             * Restricts or allows the user to validate typed entries.
             * Defaults to true.
             */
            allowFreeEntries: true,

            /**
             * Restricts or allows the user to add the same entry more than once
             * Defaults to false.
             */
            allowDuplicates: false,

            /**
             * Additional config object passed to each $.ajax call
             */
            ajaxConfig: {},

            /**
             * If a single suggestion comes out, it is preselected.
             */
            autoSelect: true,

            /**
             * Auto select the first matching item with multiple items shown
             */
            selectFirst: false,

            /**
             * Allow customization of query parameter
             */
            queryParam: 'query',

            /**
             * A function triggered just before the ajax request is sent, similar to jQuery
             */
            beforeSend: function(){ },

            /**
             * A custom CSS class to apply to the field's underlying element.
             */
            cls: '',

            /**
             * JSON Data source used to populate the combo box. 3 options are available here:
             * No Data Source (default)
             *    When left null, the combo box will not suggest anything. It can still enable the user to enter
             *    multiple entries if allowFreeEntries is * set to true (default).
             * Static Source
             *    You can pass an array of JSON objects, an array of strings or even a single CSV string as the
             *    data source.For ex. data: [* {id:0,name:"Paris"}, {id: 1, name: "New York"}]
             *    You can also pass any json object with the results property containing the json array.
             * Url
             *     You can pass the url from which the component will fetch its JSON data.Data will be fetched
             *     using a POST ajax request that will * include the entered text as 'query' parameter. The results
             *     fetched from the server can be:
             *     - an array of JSON objects (ex: [{id:...,name:...},{...}])
             *     - a string containing an array of JSON objects ready to be parsed (ex: "[{id:...,name:...},{...}]")
             *     - a JSON object whose data will be contained in the results property
             *      (ex: {results: [{id:...,name:...},{...}]
             * Function
             *     You can pass a function which returns an array of JSON objects  (ex: [{id:...,name:...},{...}])
             *     The function can return the JSON data or it can use the first argument as function to handle the data.
             *     Only one (callback function or return value) is needed for the function to succeed.
             *     See the following example:
             *     function (response) { var myjson = [{name: 'test', id: 1}]; response(myjson); return myjson; }
             */
            data: null,

            /**
             * Additional parameters to the ajax call
             */
            dataUrlParams: {},

            /**
             * Start the component in a disabled state.
             */
            disabled: false,

            /**
             * Name of JSON object property that defines the disabled behaviour
             */
            disabledField: null,

            /**
             * Name of JSON object property displayed in the combo list
             */
            displayField: 'name',

            /**
             * Set to false if you only want mouse interaction. In that case the combo will
             * automatically expand on focus.
             */
            editable: true,

            /**
             * Set starting state for combo.
             */
            expanded: false,

            /**
             * Automatically expands combo on focus.
             */
            expandOnFocus: false,

            /**
             * JSON property by which the list should be grouped
             */
            groupBy: null,

            /**
             * Set to true to hide the trigger on the right
             */
            hideTrigger: false,

            /**
             * Set to true to highlight search input within displayed suggestions
             */
            highlight: true,

            /**
             * A custom ID for this component
             */
            id: null,

            /**
             * A class that is added to the info message appearing on the top-right part of the component
             */
            infoMsgCls: '',

            /**
             * Additional parameters passed out to the INPUT tag. Enables usage of AngularJS's custom tags for ex.
             */
            inputCfg: {},

            /**
             * The class that is applied to show that the field is invalid
             */
            invalidCls: 'ms-inv',

            /**
             * Set to true to filter data results according to case. Useless if the data is fetched remotely
             */
            matchCase: false,

            /**
             * Once expanded, the combo's height will take as much room as the # of available results.
             *    In case there are too many results displayed, this will fix the drop down height.
             */
            maxDropHeight: 290,

            /**
             * Defines how long the user free entry can be. Set to null for no limit.
             */
            maxEntryLength: null,

            /**
             * A function that defines the helper text when the max entry length has been surpassed.
             */
            maxEntryRenderer: function(v) {
                return 'Please reduce your entry by ' + v + ' character' + (v > 1 ? 's':'');
            },

            /**
             * The maximum number of results displayed in the combo drop down at once.
             */
            maxSuggestions: null,

            /**
             * The maximum number of items the user can select if multiple selection is allowed.
             *    Set to null to remove the limit.
             */
            maxSelection: 10,

            /**
             * A function that defines the helper text when the max selection amount has been reached. The function has a single
             *    parameter which is the number of selected elements.
             */
            maxSelectionRenderer: function(v) {
                return 'You cannot choose more than ' + v + ' item' + (v > 1 ? 's':'');
            },

            /**
             * The method used by the ajax request.
             */
            method: 'POST',

            /**
             * The minimum number of characters the user must type before the combo expands and offers suggestions.
             */
            minChars: 0,

            /**
             * A function that defines the helper text when not enough letters are set. The function has a single
             *    parameter which is the difference between the required amount of letters and the current one.
             */
            minCharsRenderer: function(v) {
                return 'Please type ' + v + ' more character' + (v > 1 ? 's':'');
            },

            /**
             * Whether or not sorting / filtering should be done remotely or locally.
             * Use either 'local' or 'remote'
             */
            mode: 'local',

            /**
             * The name used as a form element.
             */
            name: null,

            /**
             * The text displayed when there are no suggestions.
             */
            noSuggestionText: 'No suggestions',

            /**
             * The default placeholder text when nothing has been entered
             */
            placeholder: 'Type or click here',

            /**
             * A function used to define how the items will be presented in the combo
             */
            renderer: null,

            /**
             * Whether or not this field should be required
             */
            required: false,

            /**
             * Set to true to render selection as a delimited string
             */
            resultAsString: false,

            /**
             * Text delimiter to use in a delimited string.
             */
            resultAsStringDelimiter: ',',

            /**
             * Name of JSON object property that represents the list of suggested objects
             */
            resultsField: 'results',

            /**
             * A custom CSS class to add to a selected item
             */
            selectionCls: '',

            /**
             * An optional element replacement in which the selection is rendered
             */
            selectionContainer: null,

            /**
             * Where the selected items will be displayed. Only 'right', 'bottom' and 'inner' are valid values
             */
            selectionPosition: 'inner',

            /**
             * A function used to define how the items will be presented in the tag list
             */
            selectionRenderer: null,

            /**
             * Set to true to stack the selectioned items when positioned on the bottom
             *    Requires the selectionPosition to be set to 'bottom'
             */
            selectionStacked: false,

            /**
             * Direction used for sorting. Only 'asc' and 'desc' are valid values
             */
            sortDir: 'asc',

            /**
             * name of JSON object property for local result sorting.
             *    Leave null if you do not wish the results to be ordered or if they are already ordered remotely.
             */
            sortOrder: null,

            /**
             * If set to true, suggestions will have to start by user input (and not simply contain it as a substring)
             */
            strictSuggest: false,

            /**
             * Custom style added to the component container.
             */
            style: '',

            /**
             * If set to true, the combo will expand / collapse when clicked upon
             */
            toggleOnClick: false,


            /**
             * Amount (in ms) between keyboard registers.
             */
            typeDelay: 400,

            /**
             * If set to true, tab won't blur the component but will be registered as the ENTER key
             */
            useTabKey: false,

            /**
             * If set to true, using comma will validate the user's choice
             */
            useCommaKey: true,


            /**
             * Determines whether or not the results will be displayed with a zebra table style
             */
            useZebraStyle: false,

            /**
             * initial value for the field
             */
            value: null,

            /**
             * name of JSON object property that represents its underlying value
             */
            valueField: 'id',

            /**
             * regular expression to validate the values against
             */
            vregex: null,

            /**
             * type to validate against
             */
            vtype: null
        };

        var conf = $.extend({},options);
        var cfg = $.extend(true, {}, defaults, conf);

        /**********  PUBLIC METHODS ************/
        /**
         * Add one or multiple json items to the current selection
         * @param items - json object or array of json objects
         * @param isSilent - (optional) set to true to suppress 'selectionchange' event from being triggered
         */
        this.addToSelection = function(items, isSilent)
        {
            if (!cfg.maxSelection || _selection.length < cfg.maxSelection) {
                if (!$.isArray(items)) {
                    items = [items];
                }
                var valuechanged = false;
                $.each(items, function(index, json) {
                    if (cfg.allowDuplicates || $.inArray(json[cfg.valueField], ms.getValue()) === -1) {
                        _selection.push(json);
                        valuechanged = true;
                    }
                });
                if(valuechanged === true) {
                    self._renderSelection();
                    this.empty();
                    if (isSilent !== true) {
                        $(this).trigger('selectionchange', [this, this.getSelection()]);
                    }
                }
            }
            this.input.attr('placeholder', (cfg.selectionPosition === 'inner' && this.getValue().length > 0) ? '' : cfg.placeholder);
        };

        /**
         * Clears the current selection
         * @param isSilent - (optional) set to true to suppress 'selectionchange' event from being triggered
         */
        this.clear = function(isSilent)
        {
            this.removeFromSelection(_selection.slice(0), isSilent); // clone array to avoid concurrency issues
        };

        /**
         * Collapse the drop down part of the combo
         */
        this.collapse = function()
        {
            if (cfg.expanded === true) {
                this.combobox.detach();
                cfg.expanded = false;
                $(this).trigger('collapse', [this]);
            }
        };

        /**
         * Set the component in a disabled state.
         */
        this.disable = function()
        {
            this.container.addClass('ms-ctn-disabled');
            cfg.disabled = true;
            ms.input.attr('disabled', true);
        };

        /**
         * Empties out the combo user text
         */
        this.empty = function(){
            this.input.val('');
        };

        /**
         * Set the component in a enable state.
         */
        this.enable = function()
        {
            this.container.removeClass('ms-ctn-disabled');
            cfg.disabled = false;
            ms.input.attr('disabled', false);
        };

        /**
         * Expand the drop drown part of the combo.
         */
        this.expand = function()
        {
            if (!cfg.expanded && (this.input.val().length >= cfg.minChars || this.combobox.children().length > 0)) {
                this.combobox.appendTo(this.container);
                self._processSuggestions();
                cfg.expanded = true;
                $(this).trigger('expand', [this]);
            }
        };

        /**
         * Retrieve component enabled status
         */
        this.isDisabled = function()
        {
            return cfg.disabled;
        };

        /**
         * Checks whether the field is valid or not
         * @return {boolean}
         */
        this.isValid = function()
        {
            var valid = cfg.required === false || _selection.length > 0;
            if(cfg.vtype || cfg.vregex){
                $.each(_selection, function(index, item){
                    valid = valid && self._validateSingleItem(item[cfg.valueField]);
                });
            }
            return valid;
        };

        /**
         * Gets the data params for current ajax request
         */
        this.getDataUrlParams = function()
        {
            return cfg.dataUrlParams;
        };

        /**
         * Gets the name given to the form input
         */
        this.getName = function()
        {
            return cfg.name;
        };

        /**
         * Retrieve an array of selected json objects
         * @return {Array}
         */
        this.getSelection = function()
        {
            return _selection;
        };

        /**
         * Retrieve the current text entered by the user
         */
        this.getRawValue = function(){
            return ms.input.val();
        };

        /**
         * Retrieve an array of selected values
         */
        this.getValue = function()
        {
            return $.map(_selection, function(o) {
                return o[cfg.valueField];
            });
        };

        /**
         * Remove one or multiples json items from the current selection
         * @param items - json object or array of json objects
         * @param isSilent - (optional) set to true to suppress 'selectionchange' event from being triggered
         */
        this.removeFromSelection = function(items, isSilent)
        {
            if (!$.isArray(items)) {
                items = [items];
            }
            var valuechanged = false;
            $.each(items, function(index, json) {
                var i = $.inArray(json[cfg.valueField], ms.getValue());
                if (i > -1) {
                    _selection.splice(i, 1);
                    valuechanged = true;
                }
            });
            if (valuechanged === true) {
                self._renderSelection();
                if(isSilent !== true){
                    $(this).trigger('selectionchange', [this, this.getSelection()]);
                }
                if(cfg.expandOnFocus){
                    ms.expand();
                }
                if(cfg.expanded) {
                    self._processSuggestions();
                }
            }
            this.input.attr('placeholder', (cfg.selectionPosition === 'inner' && this.getValue().length > 0) ? '' : cfg.placeholder);
        };

        /**
         * Get current data
         */
        this.getData = function(){
            return _cbData;
        };

        /**
         * Set up some combo data after it has been rendered
         * @param data
         */
        this.setData = function(data){
            cfg.data = data;
            self._processSuggestions();
        };

        /**
         * Sets the name for the input field so it can be fetched in the form
         * @param name
         */
        this.setName = function(name){
            cfg.name = name;
            if(name){
                cfg.name += name.indexOf('[]') > 0 ? '' : '[]';
            }
            if(ms._valueContainer){
                $.each(ms._valueContainer.children(), function(i, el){
                    el.name = cfg.name;
                });
            }
        };

        /**
         * Sets the current selection with the JSON items provided
         * @param items
         */
        this.setSelection = function(items){
            this.clear();
            this.addToSelection(items);
        };

        /**
         * Sets a value for the combo box. Value must be an array of values with data type matching valueField one.
         * @param data
         */
        this.setValue = function(values)
        {
            var items = [];

            $.each(values, function(index, value) {
                // first try to see if we have the full objects from our data set
                var found = false;
                $.each(_cbData, function(i,item){
                    if(item[cfg.valueField] == value){
                        items.push(item);
                        found = true;
                        return false;
                    }
                });
                if(!found){
                    if(typeof(value) === 'object'){
                        items.push(value);
                    } else {
                        var json = {};
                        json[cfg.valueField] = value;
                        json[cfg.displayField] = value;
                        items.push(json);
                    }
                }
            });
            if(items.length > 0) {
                this.addToSelection(items);
            }
        };

        /**
         * Sets data params for subsequent ajax requests
         * @param params
         */
        this.setDataUrlParams = function(params)
        {
            cfg.dataUrlParams = $.extend({},params);
        };

        /**********  PRIVATE ************/
        var _selection = [],      // selected objects
            _comboItemHeight = 0, // height for each combo item.
            _timer,
            _hasFocus = false,
            _groups = null,
            _cbData = [],
            _ctrlDown = false,
            KEYCODES = {
                BACKSPACE: 8,
                TAB: 9,
                ENTER: 13,
                CTRL: 17,
                ESC: 27,
                SPACE: 32,
                UPARROW: 38,
                DOWNARROW: 40,
                COMMA: 188
            };

        var self = {

            /**
             * Empties the result container and refills it with the array of json results in input
             * @private
             */
            _displaySuggestions: function(data) {
                ms.combobox.show();
                ms.combobox.empty();

                var resHeight = 0, // total height taken by displayed results.
                    nbGroups = 0;

                if(_groups === null) {
                    self._renderComboItems(data);
                    resHeight = _comboItemHeight * data.length;
                }
                else {
                    for(var grpName in _groups) {
                        nbGroups += 1;
                        $('<div/>', {
                            'class': 'ms-res-group',
                            html: grpName
                        }).appendTo(ms.combobox);
                        self._renderComboItems(_groups[grpName].items, true);
                    }
                    var _groupItemHeight = ms.combobox.find('.ms-res-group').outerHeight();
                    if(_groupItemHeight !== null) {
                      var tmpResHeight = nbGroups * _groupItemHeight;
                      resHeight = (_comboItemHeight * data.length) + tmpResHeight;
                    } else {
                      resHeight = _comboItemHeight * (data.length + nbGroups);
                    }
                }

                if(resHeight < ms.combobox.height() || resHeight <= cfg.maxDropHeight) {
                    ms.combobox.height(resHeight);
                }
                else if(resHeight >= ms.combobox.height() && resHeight > cfg.maxDropHeight) {
                    ms.combobox.height(cfg.maxDropHeight);
                }

                if(data.length === 1 && cfg.autoSelect === true) {
                    ms.combobox.children().filter(':not(.ms-res-item-disabled):last').addClass('ms-res-item-active');
                }

                if (cfg.selectFirst === true) {
                    ms.combobox.children().filter(':not(.ms-res-item-disabled):first').addClass('ms-res-item-active');
                }

                if(data.length === 0 && ms.getRawValue() !== "") {
                    var noSuggestionText = cfg.noSuggestionText.replace(/\{\{.*\}\}/, ms.input.val());
                    self._updateHelper(noSuggestionText);
                    ms.collapse();
                }

                // When free entry is off, add invalid class to input if no data matches
                if(cfg.allowFreeEntries === false) {
                  if(data.length === 0) {
                      $(ms.input).addClass(cfg.invalidCls);
                      ms.combobox.hide();
                  } else {
                    $(ms.input).removeClass(cfg.invalidCls);
                  }
                }
            },

            /**
             * Returns an array of json objects from an array of strings.
             * @private
             */
            _getEntriesFromStringArray: function(data) {
                var json = [];
                $.each(data, function(index, s) {
                    var entry = {};
                    entry[cfg.displayField] = entry[cfg.valueField] = $.trim(s);
                    json.push(entry);
                });
                return json;
            },

            /**
             * Replaces html with highlighted html according to case
             * @param html
             * @private
             */
            _highlightSuggestion: function(html) {
                var q = ms.input.val();

                //escape special regex characters
                var specialCharacters = ['^', '$', '*', '+', '?', '.', '(', ')', ':', '!', '|', '{', '}', '[', ']'];

                $.each(specialCharacters, function (index, value) {
                    q = q.replace(value, "\\" + value);
                })

                if(q.length === 0) {
                    return html; // nothing entered as input
                }

                var glob = cfg.matchCase === true ? 'g' : 'gi';
                return html.replace(new RegExp('(' + q + ')(?!([^<]+)?>)', glob), '<em>$1</em>');
            },

            /**
             * Moves the selected cursor amongst the list item
             * @param dir - 'up' or 'down'
             * @private
             */
            _moveSelectedRow: function(dir) {
                if(!cfg.expanded) {
                    ms.expand();
                }
                var list, start, active, scrollPos;
                list = ms.combobox.find(".ms-res-item:not(.ms-res-item-disabled)");
                if(dir === 'down') {
                    start = list.eq(0);
                }
                else {
                    start = list.filter(':last');
                }
                active = ms.combobox.find('.ms-res-item-active:not(.ms-res-item-disabled):first');
                if(active.length > 0) {
                    if(dir === 'down') {
                        start = active.nextAll('.ms-res-item:not(.ms-res-item-disabled)').first();
                        if(start.length === 0) {
                            start = list.eq(0);
                        }
                        scrollPos = ms.combobox.scrollTop();
                        ms.combobox.scrollTop(0);
                        if(start[0].offsetTop + start.outerHeight() > ms.combobox.height()) {
                            ms.combobox.scrollTop(scrollPos + _comboItemHeight);
                        }
                    }
                    else {
                        start = active.prevAll('.ms-res-item:not(.ms-res-item-disabled)').first();
                        if(start.length === 0) {
                            start = list.filter(':last');
                            ms.combobox.scrollTop(_comboItemHeight * list.length);
                        }
                        if(start[0].offsetTop < ms.combobox.scrollTop()) {
                            ms.combobox.scrollTop(ms.combobox.scrollTop() - _comboItemHeight);
                        }
                    }
                }
                list.removeClass("ms-res-item-active");
                start.addClass("ms-res-item-active");
            },

            /**
             * According to given data and query, sort and add suggestions in their container
             * @private
             */
            _processSuggestions: function(source) {
                var json = null, data = source || cfg.data;
                if(data !== null) {
                    if(typeof(data) === 'function'){
                        data = data.call(ms, ms.getRawValue());
                    }
                    if(typeof(data) === 'string') { // get results from ajax
                        $(ms).trigger('beforeload', [ms]);
                        var queryParams = {}
                        queryParams[cfg.queryParam] = ms.input.val();
                        var params = $.extend(queryParams, cfg.dataUrlParams);
                        $.ajax($.extend({
                            type: cfg.method,
                            url: data,
                            data: params,
                            beforeSend: cfg.beforeSend,
                            success: function(asyncData){
                                json = typeof(asyncData) === 'string' ? JSON.parse(asyncData) : asyncData;
                                self._processSuggestions(json);
                                $(ms).trigger('load', [ms, json]);
                                if(self._asyncValues){
                                    ms.setValue(typeof(self._asyncValues) === 'string' ? JSON.parse(self._asyncValues) : self._asyncValues);
                                    self._renderSelection();
                                    delete(self._asyncValues);
                                }
                            },
                            error: function(){
                                throw("Could not reach server");
                            }
                        }, cfg.ajaxConfig));
                        return;
                    } else { // results from local array
                        if(data.length > 0 && typeof(data[0]) === 'string') { // results from array of strings
                            _cbData = self._getEntriesFromStringArray(data);
                        } else { // regular json array or json object with results property
                            _cbData = data[cfg.resultsField] || data;
                        }
                    }
                    var sortedData = cfg.mode === 'remote' ? _cbData : self._sortAndTrim(_cbData);
                    self._displaySuggestions(self._group(sortedData));

                }
            },

            /**
             * Render the component to the given input DOM element
             * @private
             */
            _render: function(el) {
                ms.setName(cfg.name);  // make sure the form name is correct
                // holds the main div, will relay the focus events to the contained input element.
                ms.container = $('<div/>', {
                    'class': 'ms-ctn form-control ' + (cfg.resultAsString ? 'ms-as-string ' : '') + cfg.cls +
                        ($(el).hasClass('input-lg') ? ' input-lg' : '') +
                        ($(el).hasClass('input-sm') ? ' input-sm' : '') +
                        (cfg.disabled === true ? ' ms-ctn-disabled' : '') +
                        (cfg.editable === true ? '' : ' ms-ctn-readonly') +
                        (cfg.hideTrigger === false ? '' : ' ms-no-trigger'),
                    style: cfg.style,
                    id: cfg.id
                });
                ms.container.on('focus', $.proxy(handlers._onFocus, this));
                ms.container.on('blur', $.proxy(handlers._onBlur, this));
                ms.container.on('keydown', $.proxy(handlers._onKeyDown, this));
                ms.container.on('keyup', $.proxy(handlers._onKeyUp, this));

                // holds the input field
                ms.input = $('<input/>', $.extend({
                    type: 'text',
                    'class': cfg.editable === true ? '' : ' ms-input-readonly',
                    readonly: !cfg.editable,
                    placeholder: cfg.placeholder,
                    disabled: cfg.disabled
                }, cfg.inputCfg));

                ms.input.on('focus', $.proxy(handlers._onInputFocus, this));
                ms.input.on('click', $.proxy(handlers._onInputClick, this));

                // holds the suggestions. will always be placed on focus
                ms.combobox = $('<div/>', {
                    'class': 'ms-res-ctn dropdown-menu'
                }).height(cfg.maxDropHeight);

                // bind the onclick and mouseover using delegated events (needs jQuery >= 1.7)
                ms.combobox.on('click', 'div.ms-res-item', $.proxy(handlers._onComboItemSelected, this));
                ms.combobox.on('mouseover', 'div.ms-res-item', $.proxy(handlers._onComboItemMouseOver, this));

                if(cfg.selectionContainer){
                    ms.selectionContainer = cfg.selectionContainer;
                    $(ms.selectionContainer).addClass('ms-sel-ctn');
                } else {
                    ms.selectionContainer = $('<div/>', {
                        'class': 'ms-sel-ctn'
                    });
                }
                ms.selectionContainer.on('click', $.proxy(handlers._onFocus, this));

                if(cfg.selectionPosition === 'inner' && !cfg.selectionContainer) {
                    ms.selectionContainer.append(ms.input);
                }
                else {
                    ms.container.append(ms.input);
                }

                ms.helper = $('<span/>', {
                    'class': 'ms-helper ' + cfg.infoMsgCls
                });
                self._updateHelper();
                ms.container.append(ms.helper);


                // Render the whole thing
                $(el).replaceWith(ms.container);

                if(!cfg.selectionContainer){
                    switch(cfg.selectionPosition) {
                        case 'bottom':
                            ms.selectionContainer.insertAfter(ms.container);
                            if(cfg.selectionStacked === true) {
                                ms.selectionContainer.width(ms.container.width());
                                ms.selectionContainer.addClass('ms-stacked');
                            }
                            break;
                        case 'right':
                            ms.selectionContainer.insertAfter(ms.container);
                            ms.container.css('float', 'left');
                            break;
                        default:
                            ms.container.append(ms.selectionContainer);
                            break;
                    }
                }


                // holds the trigger on the right side
                if(cfg.hideTrigger === false) {
                    ms.trigger = $('<div/>', {
                        'class': 'ms-trigger',
                        html: '<div class="ms-trigger-ico"></div>'
                    });
                    ms.trigger.on('click', $.proxy(handlers._onTriggerClick, this));
                    ms.container.append(ms.trigger);
                }

                $(window).on('resize', $.proxy(handlers._onWindowResized, this));

                // do not perform an initial call if we are using ajax unless we have initial values
                if(cfg.value !== null || cfg.data !== null){
                    if(typeof(cfg.data) === 'string'){
                        self._asyncValues = cfg.value;
                        self._processSuggestions();
                    } else {
                        self._processSuggestions();
                        if(cfg.value !== null){
                            ms.setValue(cfg.value);
                            self._renderSelection();
                        }
                    }

                }

                $("body").on('click', function(e) {
                    if(ms.container.hasClass('ms-ctn-focus') &&
                        ms.container.has(e.target).length === 0 &&
                        e.target.className.indexOf('ms-res-item') < 0 &&
                        e.target.className.indexOf('ms-close-btn') < 0 &&
                        ms.container[0] !== e.target) {
                        handlers._onBlur();
                    }
                });

                if(cfg.expanded === true) {
                    cfg.expanded = false;
                    ms.expand();
                }
            },

            /**
             * Renders each element within the combo box
             * @private
             */
            _renderComboItems: function(items, isGrouped) {
                var ref = this, html = '';
                $.each(items, function(index, value) {
                    var displayed = cfg.renderer !== null ? cfg.renderer.call(ref, value) : value[cfg.displayField];
                    var disabled = cfg.disabledField !== null && value[cfg.disabledField] === true;
                    var resultItemEl = $('<div/>', {
                        'class': 'ms-res-item ' + (isGrouped ? 'ms-res-item-grouped ':'') +
                            (disabled ? 'ms-res-item-disabled ':'') +
                            (index % 2 === 1 && cfg.useZebraStyle === true ? 'ms-res-odd' : ''),
                        html: cfg.highlight === true ? self._highlightSuggestion(displayed) : displayed,
                        'data-json': JSON.stringify(value)
                    });
                    html += $('<div/>').append(resultItemEl).html();
                });
                ms.combobox.append(html);
                _comboItemHeight = ms.combobox.find('.ms-res-item:first').outerHeight();
            },

            /**
             * Renders the selected items into their container.
             * @private
             */
            _renderSelection: function() {
                var ref = this, w = 0, inputOffset = 0, items = [],
                    asText = cfg.resultAsString === true && !_hasFocus;

                ms.selectionContainer.find('.ms-sel-item').remove();
                if(ms._valueContainer !== undefined) {
                    ms._valueContainer.remove();
                }

                $.each(_selection, function(index, value){

                    var selectedItemEl, delItemEl,
                        selectedItemHtml = cfg.selectionRenderer !== null ? cfg.selectionRenderer.call(ref, value) : value[cfg.displayField];

                    var validCls = self._validateSingleItem(value[cfg.displayField]) ? '' : ' ms-sel-invalid';

                    // tag representing selected value
                    if(asText === true) {
                        selectedItemEl = $('<div/>', {
                            'class': 'ms-sel-item ms-sel-text ' + cfg.selectionCls + validCls,
                            html: selectedItemHtml + (index === (_selection.length - 1) ? '' : cfg.resultAsStringDelimiter)
                        }).data('json', value);
                    }
                    else {
                        selectedItemEl = $('<div/>', {
                            'class': 'ms-sel-item ' + cfg.selectionCls + validCls,
                            html: selectedItemHtml
                        }).data('json', value);

                        if(cfg.disabled === false){
                            // small cross img
                            delItemEl = $('<span/>', {
                                'class': 'ms-close-btn'
                            }).data('json', value).appendTo(selectedItemEl);

                            delItemEl.on('click', $.proxy(handlers._onTagTriggerClick, ref));
                        }
                    }

                    items.push(selectedItemEl);
                });
                ms.selectionContainer.prepend(items);

                // store the values, behaviour of multiple select
                ms._valueContainer = $('<div/>', {
                    style: 'display: none;'
                });
                $.each(ms.getValue(), function(i, val){
                    var el = $('<input/>', {
                        type: 'hidden',
                        name: cfg.name,
                        value: val
                    });
                    el.appendTo(ms._valueContainer);
                });
                ms._valueContainer.appendTo(ms.selectionContainer);

                if(cfg.selectionPosition === 'inner' && !cfg.selectionContainer) {
                    ms.input.width(0);
                    inputOffset = ms.input.offset().left - ms.selectionContainer.offset().left;
                    w = ms.container.width() - inputOffset - 42;
                    ms.input.width(w);
                }

                if(_selection.length === cfg.maxSelection){
                    self._updateHelper(cfg.maxSelectionRenderer.call(this, _selection.length));
                } else {
                    ms.helper.hide();
                }
            },

            /**
             * Select an item either through keyboard or mouse
             * @param item
             * @private
             */
            _selectItem: function(item) {
                if(cfg.maxSelection === 1){
                    _selection = [];
                }
                ms.addToSelection(item.data('json'));
                item.removeClass('ms-res-item-active');
                if(cfg.expandOnFocus === false || _selection.length === cfg.maxSelection){
                    ms.collapse();
                }
                if(!_hasFocus){
                    ms.input.trigger('focus');
                } else if(_hasFocus && (cfg.expandOnFocus || _ctrlDown)){
                    self._processSuggestions();
                    if(_ctrlDown){
                        ms.expand();
                    }
                }
            },

            /**
             * Sorts the results and cut them down to max # of displayed results at once
             * @private
             */
            _sortAndTrim: function(data) {
                var q = ms.getRawValue(),
                    filtered = [],
                    newSuggestions = [],
                    selectedValues = ms.getValue();
                // filter the data according to given input
                if(q.length > 0) {
                    $.each(data, function(index, obj) {
                        var name = obj[cfg.displayField];
                        if((cfg.matchCase === true && name.indexOf(q) > -1) ||
                            (cfg.matchCase === false && name.toLowerCase().indexOf(q.toLowerCase()) > -1)) {
                            if(cfg.strictSuggest === false || name.toLowerCase().indexOf(q.toLowerCase()) === 0) {
                                filtered.push(obj);
                            }
                        }
                    });
                }
                else {
                    filtered = data;
                }
                // take out the ones that have already been selected
                $.each(filtered, function(index, obj) {
                    if (cfg.allowDuplicates || $.inArray(obj[cfg.valueField], selectedValues) === -1) {
                        newSuggestions.push(obj);
                    }
                });
                // sort the data
                if(cfg.sortOrder !== null) {
                    newSuggestions.sort(function(a,b) {
                        if(a[cfg.sortOrder] < b[cfg.sortOrder]) {
                            return cfg.sortDir === 'asc' ? -1 : 1;
                        }
                        if(a[cfg.sortOrder] > b[cfg.sortOrder]) {
                            return cfg.sortDir === 'asc' ? 1 : -1;
                        }
                        return 0;
                    });
                }
                // trim it down
                if(cfg.maxSuggestions && cfg.maxSuggestions > 0) {
                    newSuggestions = newSuggestions.slice(0, cfg.maxSuggestions);
                }
                return newSuggestions;

            },

            _group: function(data){
                // build groups
                if(cfg.groupBy !== null) {
                    _groups = {};

                    $.each(data, function(index, value) {
                        var props = cfg.groupBy.indexOf('.') > -1 ? cfg.groupBy.split('.') : cfg.groupBy;
                        var prop = value[cfg.groupBy];
                        if(typeof(props) != 'string'){
                            prop = value;
                            while(props.length > 0){
                                prop = prop[props.shift()];
                            }
                        }
                        if(_groups[prop] === undefined) {
                            _groups[prop] = {title: prop, items: [value]};
                        }
                        else {
                            _groups[prop].items.push(value);
                        }
                    });
                }
                return data;
            },

            /**
             * Update the helper text
             * @private
             */
            _updateHelper: function(html) {
                ms.helper.html(html);
                if(!ms.helper.is(":visible")) {
                    ms.helper.fadeIn();
                }
            },

            /**
             * Validate an item against vtype or vregex
             * @private
             */
            _validateSingleItem: function(value){
                if(cfg.vregex !== null && cfg.vregex instanceof RegExp){
                    return cfg.vregex.test(value);
                } else if(cfg.vtype !== null) {
                    switch(cfg.vtype){
                        case 'alpha':
                        return (/^[a-zA-Z_]+$/).test(value);
                        case 'alphanum':
                        return (/^[a-zA-Z0-9_]+$/).test(value);
                        case 'email':
                        return (/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/).test(value);
                        case 'url':
                        return (/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i).test(value);
                        case 'ipaddress':
                        return (/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/).test(value);
                    }
                }
                return true;
            }
        };

        var handlers = {
            /**
             * Triggered when blurring out of the component
             * @private
             */
            _onBlur: function() {
                ms.container.removeClass('ms-ctn-focus');
                ms.collapse();
                _hasFocus = false;
                if(ms.getRawValue() !== '' && cfg.allowFreeEntries === true){
                    var obj = {};
                    obj[cfg.displayField] = obj[cfg.valueField] = $.trim(ms.getRawValue());
                    ms.addToSelection(obj);
                }
                self._renderSelection();

                if(ms.isValid() === false) {
                    ms.container.addClass(cfg.invalidCls);
                }

                else if(ms.input.val() !== '' && cfg.allowFreeEntries === false) {
                    ms.empty();
                    self._updateHelper('');
                }

                $(ms).trigger('blur', [ms]);
            },

            /**
             * Triggered when hovering an element in the combo
             * @param e
             * @private
             */
            _onComboItemMouseOver: function(e) {
                var target = $(e.currentTarget);
                if(!target.hasClass('ms-res-item-disabled')){
                    ms.combobox.children().removeClass('ms-res-item-active');
                    target.addClass('ms-res-item-active');
                }
            },

            /**
             * Triggered when an item is chosen from the list
             * @param e
             * @private
             */
            _onComboItemSelected: function(e) {
                var target = $(e.currentTarget);
                if(!target.hasClass('ms-res-item-disabled')){
                    self._selectItem($(e.currentTarget));
                }
            },

            /**
             * Triggered when focusing on the container div. Will focus on the input field instead.
             * @private
             */
            _onFocus: function() {
                ms.input.trigger('focus');
            },

            /**
             * Triggered when clicking on the input text field
             * @private
             */
            _onInputClick: function(){
                if (ms.isDisabled() === false && _hasFocus) {
                    if (cfg.toggleOnClick === true) {
                        if (cfg.expanded){
                            ms.collapse();
                        } else {
                            ms.expand();
                        }
                    }
                }
            },

            /**
             * Triggered when focusing on the input text field.
             * @private
             */
            _onInputFocus: function() {
                if(ms.isDisabled() === false && !_hasFocus) {
                    _hasFocus = true;
                    ms.container.addClass('ms-ctn-focus');
                    ms.container.removeClass(cfg.invalidCls);

                    var curLength = ms.getRawValue().length;
                    if(cfg.expandOnFocus === true){
                        ms.expand();
                    }

                    if(_selection.length === cfg.maxSelection) {
                        self._updateHelper(cfg.maxSelectionRenderer.call(this, _selection.length));
                    } else if(curLength < cfg.minChars) {
                        self._updateHelper(cfg.minCharsRenderer.call(this, cfg.minChars - curLength));
                    }

                    self._renderSelection();
                    $(ms).trigger('focus', [ms]);
                }
            },

            /**
             * Triggered when the user presses a key while the component has focus
             * This is where we want to handle all keys that don't require the user input field
             * since it hasn't registered the key hit yet
             * @param e keyEvent
             * @private
             */
            _onKeyDown: function(e) {
                // check how tab should be handled
                var active = ms.combobox.find('.ms-res-item-active:not(.ms-res-item-disabled):first'),
                    freeInput = ms.input.val();
                $(ms).trigger('keydown', [ms, e]);

                if(e.keyCode === KEYCODES.TAB && (cfg.useTabKey === false ||
                    (cfg.useTabKey === true && active.length === 0 && ms.input.val().length === 0))) {
                    handlers._onBlur();
                    return;
                }
                switch(e.keyCode) {
                    case KEYCODES.BACKSPACE:
                        if(freeInput.length === 0 && ms.getSelection().length > 0 && cfg.selectionPosition === 'inner') {
                            _selection.pop();
                            self._renderSelection();
                            $(ms).trigger('selectionchange', [ms, ms.getSelection()]);
                            ms.input.attr('placeholder', (cfg.selectionPosition === 'inner' && ms.getValue().length > 0) ? '' : cfg.placeholder);
                            ms.input.trigger('focus');
                            e.preventDefault();
                        }
                        break;
                    case KEYCODES.TAB:
                    case KEYCODES.ESC:
                        e.preventDefault();
                        break;
                    case KEYCODES.ENTER:
                        if(freeInput !== '' || cfg.expanded){
                            e.preventDefault();
                        }
                        break;
                    case KEYCODES.COMMA:
                        if(cfg.useCommaKey === true){
                            e.preventDefault();
                        }
                        break;
                    case KEYCODES.CTRL:
                        _ctrlDown = true;
                        break;
                    case KEYCODES.DOWNARROW:
                        e.preventDefault();
                        self._moveSelectedRow("down");
                        break;
                    case KEYCODES.UPARROW:
                        e.preventDefault();
                        self._moveSelectedRow("up");
                        break;
                    default:
                        if(_selection.length === cfg.maxSelection) {
                            e.preventDefault();
                        }
                        break;
                }
            },

            /**
             * Triggered when a key is released while the component has focus
             * @param e
             * @private
             */
            _onKeyUp: function(e) {
                var freeInput = ms.getRawValue(),
                    inputValid = $.trim(ms.input.val()).length > 0 &&
                        (!cfg.maxEntryLength || $.trim(ms.input.val()).length <= cfg.maxEntryLength),
                    selected,
                    obj = {};

                $(ms).trigger('keyup', [ms, e]);

                clearTimeout(_timer);

                // collapse if escape, but keep focus.
                if(e.keyCode === KEYCODES.ESC && cfg.expanded) {
                    ms.combobox.hide();
                }
                // ignore a bunch of keys
                if((e.keyCode === KEYCODES.TAB && cfg.useTabKey === false) || (e.keyCode > KEYCODES.ENTER && e.keyCode < KEYCODES.SPACE)) {
                    if(e.keyCode === KEYCODES.CTRL){
                        _ctrlDown = false;
                    }
                    return;
                }
                switch(e.keyCode) {
                    case KEYCODES.UPARROW:
                    case KEYCODES.DOWNARROW:
                    e.preventDefault();
                    break;
                    case KEYCODES.ENTER:
                    case KEYCODES.TAB:
                    case KEYCODES.COMMA:
                    if(e.keyCode !== KEYCODES.COMMA || cfg.useCommaKey === true) {
                        e.preventDefault();
                        if(cfg.expanded === true){ // if a selection is performed, select it and reset field
                            selected = ms.combobox.find('.ms-res-item-active:not(.ms-res-item-disabled):first');
                            if(selected.length > 0) {
                                self._selectItem(selected);
                                return;
                            }
                        }
                        // if no selection or if freetext entered and free entries allowed, add new obj to selection
                        if(inputValid === true && cfg.allowFreeEntries === true) {
                            obj[cfg.displayField] = obj[cfg.valueField] = $.trim(freeInput);
                            ms.addToSelection(obj);
                            ms.collapse(); // reset combo suggestions
                            ms.input.trigger('focus');
                        }
                        break;
                    }
                    default:
                        if(_selection.length === cfg.maxSelection){
                            self._updateHelper(cfg.maxSelectionRenderer.call(this, _selection.length));
                        }
                        else {
                            if(freeInput.length < cfg.minChars) {
                                self._updateHelper(cfg.minCharsRenderer.call(this, cfg.minChars - freeInput.length));
                                if(cfg.expanded === true) {
                                    ms.collapse();
                                }
                            }
                            else if(cfg.maxEntryLength && freeInput.length > cfg.maxEntryLength) {
                                self._updateHelper(cfg.maxEntryRenderer.call(this, freeInput.length - cfg.maxEntryLength));
                                if(cfg.expanded === true) {
                                    ms.collapse();
                                }
                            }
                            else {
                                ms.helper.hide();
                                if(cfg.minChars <= freeInput.length){
                                    _timer = setTimeout(function() {
                                        if(cfg.expanded === true) {
                                            self._processSuggestions();
                                        } else {
                                            ms.expand();
                                        }
                                    }, cfg.typeDelay);
                                }
                            }
                        }
                        break;
                }
            },

            /**
             * Triggered when clicking upon cross for deletion
             * @param e
             * @private
             */
            _onTagTriggerClick: function(e) {
                ms.removeFromSelection($(e.currentTarget).data('json'));
            },

            /**
             * Triggered when clicking on the small trigger in the right
             * @private
             */
            _onTriggerClick: function() {
                if(ms.isDisabled() === false && !(cfg.expandOnFocus === true && _selection.length === cfg.maxSelection)) {
                    $(ms).trigger('triggerclick', [ms]);
                    if(cfg.expanded === true) {
                        ms.collapse();
                    } else {
                        var curLength = ms.getRawValue().length;
                        if(curLength >= cfg.minChars){
                            ms.input.trigger('focus');
                            ms.expand();
                        } else {
                            self._updateHelper(cfg.minCharsRenderer.call(this, cfg.minChars - curLength));
                        }
                    }
                }
            },

            /**
             * Triggered when the browser window is resized
             * @private
             */
            _onWindowResized: function() {
                self._renderSelection();
            }
        };

        // startup point
        if(element !== null) {
            self._render(element);
        }
    };

    $.fn.magicSuggest = function(options) {
        var obj = $(this);

        if(obj.length === 1 && obj.data('magicSuggest')) {
            return obj.data('magicSuggest');
        }

        obj.each(function(i) {
            // assume $(this) is an element
            var cntr = $(this);

            // Return early if this element already has a plugin instance
            if(cntr.data('magicSuggest')){
                return;
            }

            if(this.nodeName.toLowerCase() === 'select'){ // rendering from select
                options.data = [];
                options.value = [];
                $.each(this.children, function(index, child){
                    if(child.nodeName && child.nodeName.toLowerCase() === 'option'){
                        options.data.push({id: child.value, name: child.text});
                        if($(child).attr('selected')){
                            options.value.push(child.value);
                        }
                    }
                });
            }

            var def = {};
            // set values from DOM container element
            $.each(this.attributes, function(i, att){
                def[att.name] = att.name === 'value' && att.value !== '' ? JSON.parse(att.value) : att.value;
            });

            var field = new MagicSuggest(this, $.extend([], $.fn.magicSuggest.defaults, options, def));
            cntr.data('magicSuggest', field);
            field.container.data('magicSuggest', field);
        });

        if(obj.length === 1) {
            return obj.data('magicSuggest');
        }
        return obj;
    };

   $.fn.magicSuggest.defaults = {};
})(jQuery);
;
function ajax(url, method, payload, callback, errorCb) {

    var date = new Date();
    var ticks = date.getTime();
    if (url.indexOf('?') !== -1)
        ticks = "&ticks=" + ticks;
    else
        ticks = "?ticks=" + ticks;
    $.ajax({
        beforeSend: function (xhr) { xhr.setRequestHeader('Content-Type', 'application/json'); },
        url: url,
        xhrFields: {
            withCredentials: true
        },
        type: "POST",
        data: payload,
        success: function (data) {
            callback(data);
        },
        error: function (xhr, textStatus, errorThrown) {
            errorCb ? errorCb() : generalError()
        }
    });
}

function generalError() {

    $(".benefit-failed-msg").html(window.epi.Layout.GeneralContent["generalServiceError"]);
    $(".isracardLoader").css("display", "none");
    if ($(".loginTitle")[0]) $("#loginFormBtn").css("display", "block");
    if ($(".signupSubTitle")[0]) $("#signupFormBtn").css("display", "block");
    if ($(".myCouponTitle").first().css("display") == "block") {
        $(".personal-area").css("display", "none");

    }
    if ($("#disconnectModal").css("display") == "block") {
        $(".logInForm").css("display", "none");
        $(".modal-backdrop")[0].classList.remove("show");
    }
    if ($("#closeButtomRightBtn")[0]) {
        $(".cancel_btn").css("display", "block");
        $(".send-code").css("display", "block");

    }

    return $("#error-msg-Modal").modal('show');


}

function shiftSelectedItem() {
    $(".userDetails").html(window.epi.UserDetails.CardNumberSuffix)
    var categoryName = undefined;
    if ($(".breadcrumbs li:nth-child(2)").find('a').html() != undefined)
        categoryName = $(".breadcrumbs li:nth-child(2)").find('a').html();
    else categoryName = window.epi.CurrentPage.MetaTitle;
    var catList = [];
    var catIndex = 0;
    $('.m-slider .col-sm-4').each(function (index, element) {
        if ($(this).text() == categoryName)
            catIndex = index;
        var categoryItem = $(this);
        catList.push(categoryItem);
    });
    var slicedArr = catList.slice(catIndex);
    var splicedArr = catList.splice(0, catIndex)
    var newList = slicedArr.concat(splicedArr);
    $('.m-slider').html(newList);
    if (window.epi.Layout.SiteIdentifier == "a") {
        $(".m-slider").find('a:contains("' + categoryName.split(/"/)[0] + '")').closest('div').css("border-bottom", "3px solid");
        $(".m-slider").find('a:contains("' + categoryName.split(/"/)[0] + '")').closest('a').css("color", "black");
        $(".desktop-menu ul li").find('a:contains("' + categoryName.split(/"/)[0] + '")').closest('li').css("border-bottom", "3px solid");
        $(".desktop-menu ul li").find('a:contains("' + categoryName.split(/"/)[0] + '")').closest('a').css("color", "black");

    }
    else {
        $(".m-slider").find('a:contains("' + categoryName + '")').closest('a').css("color", "#2e74a6");
        $(".m-slider").find('a:contains("' + categoryName + '")').closest('div').css("border-bottom", "3px solid #4275a4");
        $(".desktop-menu ul li").find('a:contains("' + categoryName + '")').closest('li').css("border-bottom", "3px solid #4275a4");
    }



}


function validateId(num) {
    var counter = 0;
    var tz = new String(num);
    for (i = 0; i < 8; i++) {
        x = (((i % 2) + 1) * tz.charAt(i));
        if (x > 9) {
            x = x.toString();
            x = parseInt(x.charAt(0)) + parseInt(x.charAt(1))
        }
        counter += x;
    }
    if ((counter + parseInt(tz.charAt(8))) % 10 == 0)
        return true;
    return false;
}

function fetchInput(data) {
    var form_data = data.split('&');
    var input = {};
    $.each(form_data, function (key, value) {
        var data = value.split('=');
        input[data[0]] = decodeURIComponent(data[1]);
    });
    return input;
}

function formatDates(date) {
    var date = new Date(date);
    return (((date.getDate() > 9) ? date.getDate() : ('0' + date.getDate())) + '/' + ((date.getMonth() > 8) ? (date.getMonth() + 1) : ('0' + (date.getMonth() + 1))) + '/' + date.getFullYear());

}


function childBenefitFriendlyError() {
    return $("#error-msg-Modal").modal('show');
}

function PushGACode(keyValuePairs, event) {
    var gaData = {};
    Object.keys(keyValuePairs).forEach(function (key) {
        gaData[key] = keyValuePairs[key]
    });
    gaData.event = event;
    dataLayer.push(gaData);

}


function checkVendorRouting() {
    if (window.location.href.split("?").length > 1 || localStorage.getItem("Vendor") != null) {

        Object.entries(window.epi.Layout.VendorBannerItemsList).map(
            function (key, index) {
                debugger
                if (((key[1].VendorName == window.location.href.split("=")[1]) || key[1].VendorName == localStorage.getItem("Vendor")) && (key[1].DisplayBanner == true)) {
                    if (localStorage.getItem("Vendor") == null) {
                        localStorage.setItem("Vendor", key[1].VendorName);
                    }

                    $(".blueGrad").css("backgroundImage", "linear-gradient(to left," + key[1].BunnerColor + "," + key[1].BunnerColor + ")");
                    $(".blueHeader").css("backgroundImage", "url(" + window.location.origin + key[1].BunnerIcon + ")");
                    $(".m-logo").css("backgroundImage", "url(" + window.location.origin + key[1].BunnerMobileIcon + ")");
                    $(".m-logo").css("left", "2%");
                    $(".blueHeader a").attr("href", key[1].VendorReturnedUrl);
                    $(".m-logo a").attr("href", key[1].VendorReturnedUrl);
                    return;
                }

            }
        );

    }

}

$(document).ready(function () {
    

    $(".userDetails").html(window.epi.UserDetails.CardNumberSuffix);


});






;
var BenefitPageHandler = function () {

    $('#downloadBenefit').on('hidden.bs.modal', function (e) {
        location.reload();
    })

    var lockAcquireBenefit = false;

    this.drawChildBenefitPopup = function (chilldBenefitList, isEntitledToChildBenefits) {
        if (!isEntitledToChildBenefits) {
            $("#invokeChildBenefitsPopup").attr("entitled", "false");

        }
        else {
            var top1 = 15;
            var top2 = 20;
            if (chilldBenefitList.length > 1) {
                $(".container-radio input").prop("checked", false);
                $(".acquire_child_btn").css("background-image", "linear-gradient(to left, rgb(190, 190, 190), rgb(190, 190, 190))")

            }
            for (var i = 0; i < chilldBenefitList.length; i++)// do not change to foreach || ()=> (explorer)
            {
                if (chilldBenefitList[i].OutOfStock || $(".container-radio:nth-child(" + (i + 1) + ") .childBenefitExpired").length > 0) {
                    $(".container-radio:nth-child(" + (i + 1) + ") .childBenefitName").css("opacity", "0.5");
                    $(".container-radio:nth-child(" + (i + 1) + ") input").prop("checked", false);
                    $(".container-radio:nth-child(" + (i + 1) + ") input").prop("disabled", true);
                    $(".container-radio:nth-child(" + (i + 1) + ") .checkmark-radio").css("cursor", "default");
                    $(".container-radio:nth-child(" + (i + 1) + ") .checkmark-radio").hover(function () { $(this).css("background-color", "white") });
                    if (chilldBenefitList[i].OutOfStock) $(".container-radio:nth-child(" + (i + 1) + ") .childBenefitName").html($(".container-radio:nth-child(" + (i + 1) + ") .childBenefitName").html() + "   <span class='childBenefitError'> </span>   ");
                    else $(".container-radio:nth-child(" + (i + 1) + ") .childBenefitName").html($(".container-radio:nth-child(" + (i + 1) + ") .childBenefitName").html() + "   <span class='childBenefitError'> </span>   ");
                }

                $(".childBenefitName")[i].style.top = top1 + "px";
                $(".checkmark-radio")[i].style.top = top2 + "px";
                top1 = top1 + 80;
                top2 = top2 + 80;

            }

        }


    }


    this.populateBenefitsStrips = function () {
        if ($(".bonus-benefit").html() == "") $(".bonus-benefit").html(window.epi.Layout.GeneralContent["bonusStripTxt"]);
        if ($(".premium-benefit").html() == "") $(".premium-benefit").html(window.epi.Layout.GeneralContent["premiumText"]);
        if ($(".out-msg").html() == " ") $(".out-msg").html(window.epi.Layout.GeneralContent["outOfStock"]);
        if ($(".limit-benefit-amex").html() == "  ") $(".limit-benefit-amex").html(window.epi.Layout.GeneralContent["limitedBenefit"]);
        if ($(".out-msg-daily").html() == "   ") $(".out-msg-daily").html(window.epi.Layout.GeneralContent["outOfStockDaily"]);

    }

    this.gaChildBenefitPopup = function () {
        var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();
        var subCategory = $(".benefit-info").find("h5").html();
        var bonusOrRewards = $(".bonus").length == 0 ? 'rewards' : 'bonus';
        var card = $(".regular").length == 0 ? 'premium' : 'regular';
        if ($(".checkmark-radio").length > 1){
            PushGACode({
                'BenefitIntermeiatePopUpCategory': mainCategory,
                'BenefitIntermeiatePopUpSubCategory': subCategory,
                'BenefitIntermeiatePopUpOption': bonusOrRewards,
                "BenefitIntermeiatePopUpCard": card,
                'BenefitIntermeiatePopUprewardsBonusName': $(".benefit-info").find("h1").html(),

            }, 'BenefitIntermaiateRewardsBonusPopUp');

        }
        else {
            PushGACode({
                'BenefitIntermeiatePopUpCategory': mainCategory,
                'BenefitIntermeiatePopUpSubCategory': subCategory,
                'BenefitIntermeiatePopU': card,
                'BenefitIntermeiatePopUp': $(".benefit-info").find("h1").html(),

            }, 'BenefitIntermaiateOnlyRewardsPopUp');

        }

    }



    this.gaCancelChildBenefitPopup = function () {
        $(".black-screen").css("display", "none");
        var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();
        var subCategory = $(".benefit-info").find("h5").html();
        var card = $(".regular").length == 0 ? 'premium' : 'regular';
        var bonusOrRewards = $(".bonus").length == 0 ? 'rewards' : 'bonus';
        if ($(".checkmark-radio").length > 1) {
            PushGACode({
                'CancelBenefitIntermeiatePopUpCategory': mainCategory,
                'CancelBenefitIntermeiatePopUpSubCategory': subCategory,
                'CancelBenefitIntermeiatePopUpOption': bonusOrRewards,
                "CancelBenefitIntermeiatePopUpCard": card,
                'BenefitIntermeiatePopUpName': $(".benefit-info").find("h1").html(),

            }, 'CancelBenefitIntermeiateRewardsBonusPopUp');

        }
        else {
            PushGACode({
                'CancelBenefitIntermeiatePopUpCategory': mainCategory,
                'CancelBenefitIntermeiatePopUpSubCategory': subCategory,
                "CancelBenefitIntermeiatePopUpCard": card,
                'BenefitIntermeiatePopUpName': $(".benefit-info").find("h1").html(),

            }, 'CancelBenefitIntermeiateOnlyRewardsPopUp');

        }


    }




    this.AcquireChildBenefit = function (e) {
        $(".black-screen").css("display", "none");
        var staticCouponNumber = $('input[name=radio]:checked').first().attr("staticcoupon");
        if (staticCouponNumber) {
            $(".benefit-popup-code").html(window.epi.Layout.GeneralContent["benefitCodeSuccessPopoUp"] + "    " + staticCouponNumber);
        }
        else {
            $(".benefit-popup-code").html(window.epi.Layout.GeneralContent["benefitCodeSuccessPopoUp"]);

        }
        benefitPageHandler.gaAcquireChilDBenefit();
        $("#closeUpperLeftBtn").click();
        benefitPageHandler.acquireBenefit($('input[name=radio]:checked').first().attr("id"), $('input[name=radio]:checked').first().attr("link"));
    }

    this.gaAcquireChilDBenefit = function () {
        var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();
        var subCategory = $(".benefit-info").find("h5").html();
        var card = $(".regular").length == 0 ? 'premium' : 'regular';
        var bonusOrRewards = $(".bonus").length == 0 ? 'rewards' : 'bonus';
        if ($(".checkmark-radio").length > 1) {
            PushGACode({
                'ContinueBenefitIntermeiatePopUpCategory': mainCategory,
                'ContinueBenefitIntermeiatePopUpSubCategory': subCategory,
                "ContinueBenefitIntermeiatePopUpCard": card,
                "ContinueBenefitIntermeiatePopUpCardOption": bonusOrRewards,

                'ContinueBenefitIntermeiatePopUpName': $(".benefit-info").find("h1").html(),

            }, 'ContinueBenefitIntermeiateRewardsBonusPopUp');

        }
        else {
            PushGACode({
                'ContinueBenefitIntermeiatePopUpCategory': mainCategory,
                'ContinueBenefitIntermeiatePopUpSubCategory': subCategory,
                "ContinueBenefitIntermeiatePopUpCard": card,
                'ContinueBenefitIntermeiatePopUpName': $(".benefit-info").find("h1").html(),

            }, 'ContinueBenefitIntermeiateOnlyRewardsPopUp');


        }


    }



    this.invokeAcquireBenefit = function (benefitId) {
        var benefitPgeId = undefined;

        if (localStorage["benefit-id"] == "*") {
            benefitPgeId = $(".benfit-page-id").html();
        }
        else {
            benefitPgeId = localStorage["benefit-id"];
        }
        ajax(window.epi.Layout.ServiceDomain + "/BenefitInformation/AcquireBenefitWeb",
            "POST",
            JSON.stringify({
                BenefitId: benefitPgeId,
                DeviceId: "123",
                Source: 1,
                SiteIdentifier: window.epi.Layout.SiteIdentifier,
                Guid: ""
            }),
            function (data) {
                benefitPageHandler.acquireBenefit_callback(data)
            }, function () { generalError() }
        );
    }

    this.formatNumberWithCommas = function (num) {
        while (/(\d+)(\d{3})/.test(num.toString())) {
            num = num.toString().replace(/(\d+)(\d{3})/, '$1' + ',' + '$2');
        }
        $(".remainingCoupons").html(num);

    }


    this.saveBenefitInfo = function (destLink, benefitId) {
        if (!window.epi.Layout.IsLoggedIn) {
            localStorage.setItem("benefit-id", benefitId);
            localStorage.setItem("return-url", destLink);
        }
    }

    this.refreshChildBenefitsPopup = function () {
        if ($(".childBenefitName").length > 1) {
            $(".container-radio input").prop("checked", false);
            $(".acquire_child_btn").css("background-image", "linear-gradient(to left, rgb(190, 190, 190), rgb(190, 190, 190))")

        }
        else {
            $(".container-radio input").prop("checked", true);
            $(".acquire_child_btn").css("background-image", "linear-gradient(to left, #006fcf, #006fcf)");

        }

    }
    this.removeActionZone = function () {
        if (($(".location-icon").length == 0) && ($(".websiteIcon").length == 0) && ($(".phone-icon").length == 0)) {
            $(".action-zone").css("border-top", "0px solid white");
            $(".action-zone").css("border-bottom", "0px solid white");
        }
    }

    this.invokeChildBenefitPopup = function (benefitId) {
        if (!window.epi.Layout.IsLoggedIn) {
            localStorage.setItem("invoke-child-benefit-popup", "true");
            localStorage.setItem("benefit-id", benefitId);
            localStorage.setItem("return-url", window.location.href);
            window.location.href = window.epi.Layout.LoginUrl;

        }

        else {
            $(".black-screen").css("display", "block");

            if ($("#invokeChildBenefitsPopup").attr("entitled") == "false") {
                localStorage.setItem("acquire-failed", "true");
                var bCatName = window.epi.CurrentPage.BenefitDetails.Category.Name;
                var bName = window.epi.CurrentPage.BenefitDetails.Name;
                benefitPageHandler.acquireFailedGa($(".breadcrumbs li:nth-child(2)").find('a').html(), bCatName, bName);
                $(".benefit-failed-msg").html(window.epi.Layout.GeneralContent.childBenefitFriendlyError);
                $("#error-msg-Modal").modal('show');

            }
            else {

                if (($(".childBenefitName").length == 0) || ($(".childBenefitError").length == $(".childBenefitName").length)) {
                    $(".benefit-failed-msg").html(window.epi.Layout.GeneralContent.childBenefitUnavailable);
                    $("#error-msg-Modal").modal('show');
                }
                else {

                    benefitPageHandler.refreshChildBenefitsPopup();
                    $("#childBenefitsPopup").modal("show");

                }

            }


        }
    }


    this.acquireBenefit = function (benefitId, destPage) {
        if (!window.epi.Layout.IsLoggedIn) {
            localStorage.setItem("invoke-acquire", "true");
            localStorage.setItem("benefit-id", benefitId);
            localStorage.setItem("return-url", window.location.href);
            window.location.href = window.epi.Layout.LoginUrl;
        }
        else {
            if (lockAcquireBenefit == false) {
                lockAcquireBenefit = true;
                ajax(window.epi.Layout.ServiceDomain + "/BenefitInformation/AcquireBenefitWeb",
                    "POST",
                    JSON.stringify({
                        BenefitId: benefitId,
                        DeviceId: "123",
                        Source: 1,
                        SiteIdentifier: window.epi.Layout.SiteIdentifier,
                        Guid: ""
                    }), function (data) {
                        benefitPageHandler.acquireBenefit_callback(data)
                    }, function () { generalError() });
            }
        }
    }

    this.acquireBenefit_callback = function (response) {
        var bCatName = window.epi.CurrentPage.BenefitDetails.Category.Name;
        var bCatId = window.epi.CurrentPage.BenefitDetails.BenefitId;
        var bName = window.epi.CurrentPage.BenefitDetails.Name;
        if (response.isSuccess) {
            $(".mobileBenefitName").html(response.data.mobileBenefitName);
            $(".mobileDescription").html(response.data.mobileBenefitDescription);
            $(".benefit-info .mobile-btn-bg").css("position", "static");
            eloquaHandler("BenefitDownloadLogin", bCatId, bCatName);
            lockAcquireBenefit = false;
            localStorage.setItem("no-personal-coupons", undefined);
            $("#downloadBenefit").modal('show');
            if ($(".benefit-popup-code").html().replace(window.epi.Layout.GeneralContent["benefitCodeSuccessPopoUp"], "").trim().length == 0) {
                $(".benefit-popup-code").html(window.epi.Layout.GeneralContent["benefitCodeSuccessPopoUp"] + " " + response.data.confirmationNumber);
            }
            var expiredDate = formatDates(response.data.executionValidityDate)
            $(".expired-benefit").html(window.epi.Layout.GeneralContent["expiredBenefitPopupSuccess"] + " " + expiredDate);
            var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();
            var type = undefined;
            if ((window.epi.CurrentPage.BenefitDetails.BonusBenefitDesc == window.epi.CurrentPage.BenefitDetails.PremiumBenefitDesc) == (window.epi.CurrentPage.BenefitDetails.RegularBenefitDesc == null)) type = "regular";
            else {
                if (window.epi.CurrentPage.BenefitDetails.BonusBenefitDesc != null) type = "bonus";//premium and bonos are both membership rewards
                else type = "membership-Rewards";
            }
            PushGACode({
                'DownloadBenefitSuccessCategory': mainCategory,
                'DownloadBenefitSuccessSubCategory': bCatName,
                'BenefitType': type,
                'DownloadBenefitSuccessName': bName
            }, 'DownloadBenefitSuccess');
            //if (window.epi.Layout.SiteIdentifier== "a")
            //{
            //    $.get("/Static/html/HtmlTemplate/fb-pixel-amex.html", function (response) {
            //        template = response;
            //        $(".success-download-benefit-modal").after(template);
            //    });

            //}

        }
        else {
            lockAcquireBenefit = false;
            localStorage.setItem("acquire-failed", "true");
            if (response.errors[0].errorCode == 530) {
                $("#error-msg-Modal-extend .benefit-failed-sub-msg-txt").html(response.errors[0].message);
                $("#error-msg-Modal-extend .benefit-failed-sub-msg-link").html(window.epi.Layout.GeneralContent.error530PopupMessageLinkText);
                $("#error-msg-Modal-extend .benefit-failed-sub-msg-link").wrap(function () {
                    var link = $('<a/>');
                    link.attr('href', window.epi.Layout.GeneralContent.error530PopupMessageLink);
                    return link;
                });
            }
            else {
                $(".benefit-failed-msg").html(response.errors[0].message);
            }
                   
            benefitPageHandler.acquireFailedGa($(".breadcrumbs li:nth-child(2)").find('a').html(), bCatName, bName);
            if (response.errors[0].errorCode == 530) {
                $("#error-msg-Modal-extend").modal('show');
            }
            else {
                $("#error-msg-Modal").modal('show');

            }
        }
    }

    this.copyLink = function () {
        var link = window.location.href;
        var $temp = $("<input>");
        $("body").append($temp);
        $temp.val(link).select();
        document.execCommand("copy");
        $temp.remove();
    }


    this.acquireFailedGa = function (mainCategory, bCatNamesubCategory, bName) {
        var type = undefined;
        if ($(".bonus").length == $(".premium").length == $(".regular").length == 0) type = "regular";
        else {
            if ($(".bonus").length != 0) type = "bonus";
            else type = "membership-Rewards";
        }
        PushGACode({ 'DownloadBenefitFailCategory': mainCategory, 'DownloadBenefitFailSubCategory': bCatNamesubCategory, 'BenefitType': type, 'DownloadBenefitFailName': bName }, 'DownloadBenefitFail');

    }

    this.applyRedirect = function (address) {
        window.location.href = " http://maps.apple.com/?daddr=" + address.replace(" ", "+");
    }

    this.googleMapsRedirect = function (address) {
        window.location.href = "https://maps.google.com/?q=" + address.replace(" ", "%20");
    }

    this.wazeRedirect = function (address) {
        window.location.href = "https://www.waze.com/ul?q=" + address.replace(" ", "%20");
    }

    this.bannerArrowClick = function () {
        PushGACode({}, 'CarouselSwipe');
    }

    this.categoryCarouselBenefitClick = function (e, categoryCarouselName, categoryCarouselBenefitName) {
        var mainCategory = e.parentElement.parentElement.previousElementSibling.getElementsByTagName("h2")[0].innerHTML;
        PushGACode({
            'CategoryCarouselName': mainCategory,
            'SubCategoryCarouselName': categoryCarouselBenefitName,
            'CategoryCarouselBenefitName': categoryCarouselName
        }, 'CategoryCarouselBenefitClick');
    }

    this.benefitArrowSwipe = function (benefitArrowSwipeCategory, benefitArrowSwipeName, arrowDirection) {
        var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();
        PushGACode({
            'BenefitArrowSwipeCategory': mainCategory,
            'BenefitArrowSwipeSubCategory': benefitArrowSwipeCategory,
            'BenefitArrowSwipeName': benefitArrowSwipeName,
            'ArrowDirection': arrowDirection
        }, 'BenefitArrowSwipe');

    }

    this.benefitShare = function (benefitShareCategory, benefitShareName) {
        var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();
        PushGACode({ 'BenefitShareCategory': mainCategory, 'BenefitShareSubCategory': benefitShareCategory, 'BenefitShareName': benefitShareName }, 'BenefitShare');
        if ($(".share-container").attr("aria-expanded") == "false") {
            $(".share-container").attr("aria-expanded", "true");
        }
        else {
            $(".share-container").attr("aria-expanded", "false");
        }
    }


    this.disableChildBenefitBtn = function (e) {
        if ($(e).next().find(".childBenefitError").length == 0)
            $(".acquire_child_btn").css("background-image", "linear-gradient(to left, #006fcf, #006fcf)");

    }

    this.downloadBenefitClick = function (downloadBenefitClickCategory, downloadBenefitClickSubCategory, bonus, points, premium, downloadBenefitClickName) {
        var isUserLoggedIn = window.epi.Layout.IsLoggedIn ? 'Yes' : 'No';
        var type = undefined;
        if (bonus == premium == points == 0) type = "regular";
        else {
            if (bonus > premium || points) type = "bonus";//premium and bonos are both membership rewards
            else type = "membership-Rewards";
        }
        var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();
        PushGACode({
            'DownloadBenefitClickCategory': mainCategory,
            'DownloadBenefitClickSubCategory': downloadBenefitClickCategory,
            "BenefitType": type,
            'DownloadBenefitClickName': downloadBenefitClickName,
            'DownloadBenefitClickLogin': isUserLoggedIn,
        }, 'DownloadBenefitClick');
    }


    this.businessInfoBenefitButtonClick = function (businessInfoBenefitName, businessInfoBenefitCategory, businessInfoBenefitButtonClickName) {
        PushGACode({
            'BusinessInfoBenefitCategory': $(".breadcrumbs li:nth-child(2)").find('a').html(),
            'BusinessInfoBenefitSubCategory': businessInfoBenefitCategory,
            'BusinessInfoBenefitName': businessInfoBenefitName,
            'BusinessInfoBenefitButtonClickName': businessInfoBenefitButtonClickName
        }, 'BusinessInfoIcons');


    }

    this.termsAndConditionsCollapseClick = function (collapseClickCategory, CollapseClickName) {
        //$("#conditions").toggleClass('show');
        PushGACode({
            'CollapseClickCategory': $(".breadcrumbs li:nth-child(2)").find('a').html(),
            'CollapseClickSubCategory': collapseClickCategory,
            'CollapseClickName': CollapseClickName
        }, 'TermsAndConditionsCollapseClick');
    }

    this.howToEnjoyTheBenefitReadMore = function (readMoreClickCategory, readMoreClickName, e) {
        $("#benefitExecutionText").toggleClass('show');
        var event = e.classList.contains("collapsed") ? 'HowToEnjoyTheBenefitReadMore' : 'HowToEnjoyTheBenefitReadMoreCollapseClose';
        PushGACode({
            'ReadMoreClickCategory': $(".breadcrumbs li:nth-child(2)").find('a').html(),
            'ReadMoreClickSubCategory': readMoreClickCategory,
            'ReadMoreClickName': readMoreClickName
        }, event);
    }

    this.businessDetailsReadMore = function (readMoreClickCategory, readMoreClickName, e) {
        var event = e.classList.contains("collapsed") ? 'BusinessDetailsReadMore' : 'BusinessDetailsReadMoreCollapseClose';

        PushGACode({
            'readMoreClickCategory': $(".breadcrumbs li:nth-child(2)").find('a').html(),
            'ReadMoreClickSubCategory': readMoreClickCategory,
            'readMoreClickName': readMoreClickName
        }, event);
    }

    //this.navigation = function (adress, e) {
    //    $(".nav-apps-menu").toggleClass("show");
    //}

    this.navigation = function (adress, e) {
        if /* if we're on iOS, open in Apple Maps  */
            ((navigator.platform.indexOf("iPhone") != -1) ||
            (navigator.platform.indexOf("iPod") != -1) ||
            (navigator.platform.indexOf("iPad") != -1)) {
            $(".nav-apps-menu").toggleClass("show");
        }
        else {
            var a = document.getElementById('navigationA'); //or grab it by tagname etc
            // a.href = "geo:?q=" + adress.replace(' ', '+')
            window.location = "geo:?q=" + adress.replace(' ', '+');
        }

    }



    this.accessibleCrousel = function () {
        $(".benefit-carousel").addClass("sr-carousel");
        $(".carousel-item").removeClass("carousel-item");
    }
}

$(document).ready(function () {
    $(function () {
        if (document.getElementById('navigationA') != null) {
            $('[data-toggle="tooltip"]').tooltip();
            var navigationEl = document.getElementById('navigationA');
            if /* if we're on iOS, open in Apple Maps */
                ((navigator.platform.indexOf("iPhone") != -1) ||
                (navigator.platform.indexOf("iPod") != -1) ||
                (navigator.platform.indexOf("iPad") != -1)) {
                document.getElementById('navigationA').removeAttribute("href");
            }
            else {
                document.getElementById('navigationA').removeAttribute("onclick");
            }
        }

    });
    $('#linkCopied').hide;
    createHrefShareLink('share-facebook', "https://www.facebook.com/sharer/sharer.php?u=");
    createHrefShareLink('share-whatsapp', "https://api.whatsapp.com/send?text=");

    function getMeta(propertyName) {
        var metas = document.getElementsByTagName('meta');

        for (var i = 0; i < metas.length; i++) {
            if (metas[i].getAttribute('property') === propertyName) {
                return metas[i].getAttribute('content');
            }
        }

        return '';
    }
    $(".share-container").click(function () {
        var name = window.epi.CurrentPage.BenefitDetails.MobileBenefitName;
        var BenefitDescription = window.epi.CurrentPage.BenefitDetails.MobileDescription;
        if (navigator.share === undefined) {
            $(".share-menu").toggleClass("active")
        }
        else {
            var url = document.location.href;
            var canonicalElement = document.querySelector('link[rel=canonical]');
            if (canonicalElement !== null) {
                url = canonicalElement.href;
            }
            if (navigator.share) {
                navigator.share({
                    title: getMeta('og:title'),
                    url: getMeta('og:url')
                })
            }
            else {
                $(".share-menu").toggleClass("active");
            }
        }
    });

    function createHrefShareLink(id, url) {
        if (document.getElementById(id) != null) {
            document.getElementById(id).href = url + window.location.href;
            document.getElementById(id).target = "_blank"
        }
    }


});













;
var CategoryHandler = function() {

    this.selectCategory = function (categoryId, categoryName){

        $("#filteredCategory").html(categoryName);
        if (categoryName == "") {
            $(".category-item").show();
        }
        else {
            $(".category-item").hide();
            $("." + categoryId).show();
        }

        var maincategory = $(".categoryPageTitle").html();
             PushGACode({
            'SubCategoryClickCategoryName': maincategory,
            'SubCategoryClickName': categoryName
             }, 'SubCategoryClick');

    }
  

    this.featuredClick = function (categoryText, BenefitClickName, featuredClick) {
        var mainCategory = $(".categoryPageTitle").html();
        PushGACode({ 'CategoryText': mainCategory, 'SubCategoryText': categoryText, 'FeaturedClickName': BenefitClickName, 'FeaturedClick': featuredClick }, 'FeaturedClick');
        event.stopPropagation();
    }

    this.benefitClick = function (categoryText, BenefitClickName, isPersonalBenefit) {
        var maincategory = $(".categoryPageTitle").html();
        var eName = isPersonalBenefit === "False" ? "BenefitClick" : "PersonalBenefitClick";
        if (isPersonalBenefit)
        {
            PushGACode({ 'PersonalBenefitCategoryText': maincategory, 'PersonalBenefitSubCategoryText': categoryText, 'PersonalBenefitBenefitClickName': BenefitClickName }, eName);

        }
        else {
            PushGACode({ 'CategoryText': maincategory, 'SubCategoryText': categoryText, 'BenefitClickName': BenefitClickName }, eName);

        }
    }
    this.personalCategoryLogIn = function (categoryName) {
        PushGACode({}, categoryName + 'LogIn');
    }

    this.eligibilityForPersonalCategory = function (btnTxt) {   
        PushGACode({
            'BtnText': btnTxt,
        }, 'IneligibilityForBenefitPersonalBenefit');
    }
};
var ServiceCaller = function () {
    this.call = function (url, type, withCredentials, payload) {
        return $.ajax({
            url: url,
            xhrFields: {
                withCredentials: withCredentials
            },
            type: type,
            data: JSON.stringify(payload),
            beforeSend: function (xhr) { xhr.setRequestHeader('Content-Type', 'application/json'); },
        });
    }
};
var timerId = null, timeout = 30, eloquaCustomerGUID;

function WaitUntilCustomerGUIDIsRetrieved() {
    if (!!timerId) {
        if (timeout == 0)
            return;
        if (typeof this.GetElqCustomerGUID == "function") {
            eloquaCustomerGUID = this.GetElqCustomerGUID();
            window.localStorage.setItem("eloquaCustomerGUID", eloquaCustomerGUID);

            var GUID = new RegExp('[\?&]' + 'GUID' + '=([^&#]*)').exec(window.location.href);
            if (GUID && GUID[1]) {
                var eloquaProp = {};
                eloquaProp.formName = 'EmailConvert_digital';
                clientGuid = GUID[1];
                clientGuid.length == 32 && pushEloqua(eloquaProp.formName);
            }
            _elqQ.push(['elqDataLookup', escape('87c97a25cb6d440e8d59a7e7d391f79e'), '<elqCustomerGUID1>' + eloquaCustomerGUID + '</elqCustomerGUID1>']);

            return
        }
        typeof _elqQ == "object" && _elqQ.push(["elqGetCustomerGUID"]);
        timeout -= 1
    }
    timerId = setTimeout("WaitUntilCustomerGUIDIsRetrieved()", 500);
    return
} 

$(document).ready(function () {
    if (window.location.href.indexOf('?GUID=') > -1) {
        catName = window.epi.CurrentPage.BenefitDetails.Category.Name;
        bCode = window.epi.CurrentPage.BenefitDetails.BenefitId;
        setTimeout(function () {
            eloquaHandler("EmailConvert", catName, bCode);
        }, 5000)
        
    }

    window.onload = WaitUntilCustomerGUIDIsRetrieved;
    setTimeout(function () {
        try {
            _elqQ.push(['elqGetCustomerGUID']);
        } catch (e) {

        }
    }, 200);
});


function getUserGuid(CountryCode, IdNumber, formName, idCode, requestedUrl ) {
    if (!idCode) { idCode = "1"; }
    $.ajax({
        url: proxyUrl,
        type: 'POST',
        data: { reqName: "GetCustomerGuid", id: IdNumber, countryCode: CountryCode, identityCode: idCode },
        headers: {
            "__RequestVerificationToken": Token
        },
        success: function (response) {
            var parsedJson = JSON.parse(response);
            if (parsedJson["Header"] && (parsedJson["Header"]["Status"] == "1") && (parsedJson["GetCustomerGuidBean"] != undefined) && (parsedJson["GetCustomerGuidBean"]["customerGUID"].length > 0)) {
                clientGuid = parsedJson["GetCustomerGuidBean"]["customerGUID"];
                pushEloqua(formName, requestedUrl);
            }
        },
        error: function () {
        }
    });

}

function eloquaHandler(eventName, categoryName, benefitCode, cGuid) {
    var customerGuid;
    var url = window.location.origin + window.location.pathname;
    var benefitIp = "192.118.12.195";
  
    if (typeof this.GetElqCustomerGUID == "function")
    {
        customerGuid = GetElqCustomerGUID();
    }
   
    switch (eventName){
        case "EmailConvert":
            var guid = window.location.href.split('?GUID=')[1];
            eloquaFromMailCall(eventName, customerGuid, url, guid, benefitIp, categoryName, benefitCode)
            break
        case "BenefitsLogin":
            eloquaLoginOrRegisterCall(eventName, customerGuid, url, cGuid, benefitIp)
            break
        case "sendSearchBarDataToEloqua":
            eloquaSearchDataCall(customerGuid, window.epi.UserDetails.CustomerGuid, categoryName,url)
            break
        case "BenefitDownloadLogin":
            eloquaDownloadCall(eventName, customerGuid, url, window.epi.UserDetails.CustomerGuid, benefitIp, categoryName, benefitCode)
            break
        case "BenefitRegister": 
            eloquaLoginOrRegisterCall(eventName, customerGuid, url, cGuid, benefitIp)
            break
    }
}

function eloquaSearchDataCall(elqCustomerGuid, customerGuid, searchValue, url) {
    data = {
        elqFormName: "GetSearchBarData",
        elqSiteID: "1749017430",
        Search_URL: url,
        customerID1: customerGuid,
        elqCustomerGUID: elqCustomerGuid,
        Search_Value: searchValue,
        Search_Date: formatDate(),
        elqCookieWrite:0
       }
    eloquaCall(data);


}

function formatDate() {
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
    var yyyy = today.getFullYear();
    var day = mm + '/' + dd + '/' + yyyy;

    var hours = today.getHours();
    var minutes = today.getMinutes();
    var ampm = hours >= 12 ? 'PM' : 'AM';
    hours = hours % 12;
    hours = hours ? hours : 12; // the hour '0' should be '12'
    minutes = minutes < 10 ? '0' + minutes : minutes;
    var strTime = hours + ':' + minutes + ':00' + ' ' + ampm;
    return day + " " + strTime;


}

function eloquaFromMailCall(eName, elqCustomerGuid, url, urlGuid, benefitIp, categoryName, benefitCode) {
    data = {
        elqFormName: "ConvertByAuthenticationBenefits",
        elqSiteID: "1749017430",
        elqCookieWrite: "0",
        convertSourceForm1: eName,
        elqCustomerGUID: elqCustomerGuid,
        convertSourceFormURL1: url,
        customerID1: urlGuid,
        convertSourceFormIP1: benefitIp,
        convertReIatedItem1: benefitCode,
        convertRelatedCategory1: categoryName
    }
    eloquaCall(data);
}
   

function eloquaLoginOrRegisterCall(eName, elqCustomerGuid, url, customerGuid, benefitIp) {
    data = {
        elqFormName: "ConvertByAuthenticationBenefits",
        elqSiteID: "1749017430",
        elqCookieWrite: "0",
        convertSourceForm1: eName,
        elqCustomerGUID: elqCustomerGuid,
        convertSourceFormURL1: url,
        customerID1: customerGuid,
        convertSourceFormIP1: benefitIp
    }
    eloquaCall(data);
}

function eloquaDownloadCall(eName, elqCustomerGuid, url, customerGuid, benefitIp, categoryName, benefitCode) {
    data = {
        elqFormName: "ConvertByAuthenticationBenefits",
        elqSiteID: "1749017430",
        elqCookieWrite: "0",
        convertSourceForm1: eName,
        elqCustomerGUID: elqCustomerGuid,
        convertSourceFormURL1: url,
        customerID1: customerGuid,
        convertSourceFormIP1: benefitIp,
        convertReIatedItem1: benefitCode,
        convertRelatedCategory1: categoryName
    }
    eloquaCall(data);
}

function eloquaCall(elqCallData) {
    $.ajax({
        url: 'https://s1749017430.t.eloqua.com/e/f2',
        type: 'POST',
        data: elqCallData,
        success: function (response) {
            
        },
        error: function () {
        }
    });
}
;
var LayoutHandler = function () {

    this.closeLoginForm = function ()
    {
        $(".modal fade show").css("display", "none");
        $(".modal-backdrop fade show").css("display", "none");
    }

    this.choosePersonalCategory = function ()
    {
        $(".personalCategoryConnection").css("display", "none");
        $(".logInMask").css("display", "block");
    }

   

    this.openMobileMenu = function () {
        if (window.epi.Layout.SiteIdentifier=="i")
        {
            $("a.nav-link").css("color", "black");
        }
        else {
            $("a.nav-link").css("color", "#006fcf");
        }
        $(".blueNavbar").css("display", "block");
        $("#mobileMenuBtn").css("display", "none");
        $(".blueNavbar").css("background-color", "white");
        $(".blueNavbar").css("width", "73%");
        $(".blueNavbar").css("height", "480px");
        $(".blueNavbar").css("position", "absolute");
        $(".blueNavbar").css("z-index", "9999");
        $(".blueNavbar").css("top", "0");
        $(".blueNavbar").css("right", "0");
        $(".blueNavbar li a").css("margin-right", "28px");
        $(".blueNavbar li").css("text-align", "right");
        $(".blueNavbar li").css("padding-top", "0px");
        $("a").removeClass("headerItemLink");
        $("nav .navbar-nav li").css("height", "35px");
        $(".nav-link").css("display", "block");
        if (window.epi.Layout.SiteIdentifier == "i") {
            $("a").css("color", "black", "important");
        }
        else {
            $("a").css("color", "#006fcf", "important");
        }
       
        $(".collapse").css("display", "block");
    };


    this.closeMobileMenu = function () {
        $(".collapse").css("display", "none");
         $("#mobileMenuBtn").css("display", "block");
    }

 
    this.activateItemMenu = function (e) {
        PushGACode({ 'HeaderClickItem': e.innerText }, 'HeaderClick');
        if (window.innerWidth < 500)
        {
            $(".blueNavbar").find(".activeMenuLink").removeClass("activeMenuLink");
            $(".blueNavbar").find(".activeHrefMenuLink").removeClass("activeHrefMenuLink");
            if ($(e).find('span')[0] == undefined)
            {
                if (window.epi.Layout.SiteIdentifier == "i") {
                    $('.myBenefit a div').css("background-image", "url('/Content/Images/UserIcon13.svg')")
                }
                else {
                    $('.myBenefit a div').css("background-image", "url('/Content/Images/blueOk.svg')")
                }
              
                $(".iconPersonal").css("width", "17px");
                $(".iconPersonal").css("height", "17px");
            }
            else
                $('.myBenefit a div').css("background-image", "url('/Content/Images/personalAreaIcon.png')")
            $(e.firstElementChild).addClass("activeHrefMenuLink");
            $(e).addClass("activeMenuLink");
        }
    }

   
};
var LoginHandler = function () {
    var recaptcha = null;
    var proceed = false;
    var cGuid;

    this.showLabel = function (e) {
        proceed = false;
        if (e.id === "IdNumber") {
            $('.loginIdOk').css("display", "none");
            $(".errorInvalidId").css("display", "none");
        }
        else {
            $(".error6digits").css("display", "none");
            $('.login6digitsOk').css("display", "none");
        }
        if (e.value === "")
            e.labels[0].classList.add("loginLabel");
        else {
            if (e.labels !== undefined) {
                e.labels[0].classList.remove("loginLabel");
                e.classList.remove("noBorder");
                e.classList.add("noBorderBlue");

            }

        }
    }

    this.validateIdNumber = function (e) {
        loginHandler.showLabel(e);
        var idNumber = $('form').find('[name ="IdNumber"]').val();
        if ((idNumber.length === 9) && (validateId(idNumber))) {
            proceed = true;
            $("#IdNumber").removeClass("focus-error");
            $('.loginIdOk').css("display", "block");
            $("#IdNumber").css("border-bottom", "1px solid #707070");
        }

    }

    this.onblurIdNumber = function (e) {
        loginHandler.showLabel(e);
        var idNumber = $('form').find('[name ="IdNumber"]').val();
        if (idNumber.length > 9 || !validateId(idNumber)) {
            proceed = false;
            $(".errorInvalidId").css("display", "block");
            $("#IdNumber").addClass("focus-error");
            $("#IdNumber").css("border-bottom", "1px solid #b42c01");
        }
        else {
            proceed = true;
            $("#IdNumber").removeClass("focus-error");
            $('.loginIdOk').css("display", "block");
            $("#IdNumber").css("border-bottom", "1px solid #707070");
            loginHandler.getCustomerGuid($(".loginInput").val(), "212");
        }

    }

    this.onblur6digits = function (e) {
        loginHandler.showLabel(e);
        var card6digits = $('form').find('[name ="CardNumberSuffix"]').val();
        if (card6digits.length !== 6) {
            proceed = false;
            $(".error6digits").css("display", "block");
            $('.login6digitsOk').css("display", "none");
            $('#CardNumberSuffix').addClass("focus-error");
            $("#CardNumberSuffix").css("border-bottom", "1px solid #b42c01");
        }
        else {
            $('.login6digitsOk').css("display", "block");
            $(".error6digits").css("display", "none");
            $('#CardNumberSuffix').removeClass("focus-error");
            $("#CardNumberSuffix").css("border-bottom", "1px solid #707070");
            proceed = true;
        }

    }

    this.validatLogin6digits = function (e) {
        loginHandler.showLabel(e);
        var card6digits = $('form').find('[name ="CardNumberSuffix"]').val();
        if (card6digits.length === 6) {
            $('.login6digitsOk').css("display", "block");
            $(".error6digits").css("display", "none");
            $('#CardNumberSuffix').removeClass("focus-error");
            $("#CardNumberSuffix").css("border-bottom", "1px solid #707070");
            proceed = true;

        }

    }

    this.closeCancelPoints = function (e) {
        var cancelBenefitCategory = localStorage.getItem('benefitCategoryName');
        var cancelBenefitName = localStorage.getItem('benefitName');
        PushGACode({
            'CancelBenefitCategory': cancelBenefitCategory,
            'CancelBenefitName': cancelBenefitName,
            'CancelBenefitButtonName': e.id
        }, "CancelRewardsBenefitPopupButton");


    };

    this.closeLogin = function (e) {
        var closeEvent;
        closeEvent = e.id === "closeUpperLeftBtn" ? "DownloadBenefitFailXBtnClick" : "DownloadBenefitFailCloseClick";
        $('#form').trigger('reset');
        $(".logInMask").css("display", "none");
        $(".errorInvalidId").css("display", "none");
        $(".error6digits").css("display", "none");
        $(".modal")[0].classList.remove("show");
        $(".modal-backdrop")[0].classList.remove("show");
        $("#error-msg-Modal").modal('hide');
        $("#loginFormBtn").focus();
        if (localStorage["acquire-failed"] === "true") {
            localStorage["acquire-failed"] === null;
            var type = undefined;
            if ((window.epi.CurrentPage.BenefitDetails.BonusBenefitDesc === window.epi.CurrentPage.BenefitDetails.PremiumBenefitDesc) === (window.epi.CurrentPage.BenefitDetails.RegularBenefitDesc === null)) type = "regular";
            else {
                if (window.epi.CurrentPage.BenefitDetails.BonusBenefitDesc !== null) type = "bonus";//premium and bonos are both membership rewards
                else type = "membership-Rewards";
            }
            var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();

            PushGACode({
                'DownloadBenefitFailCategory': mainCategory,
                'DownloadBenefitFailSubCategory': $(".benefit-info").find("h5").html(),
                'BenefitType': type,
                'DownloadBenefitFailName': ""

            }, closeEvent);


        }

    };

    this.closeModal = function () {
        $(".loginError").css("display", "none");
        $(".loginError").css("height", "0vw");
        $("#loginForm").css("display", "block");
        $(".loginErrorText").html("");
        $(".loginHeaderRight").html("");
        $('.loginIdOk').css("display", "none");
        $('.login6digitsOk').css("display", "none");
        $(".loginInput").val("");
        $("label")[0].classList.add("loginLabel");
        $("label")[1].classList.add("loginLabel");
    };

    this.closeLoginFailed = function () {
        $(".loginFailed").css("display", "none");
        $("#loginForm").css("display", "block");
        $(".loginHeaderRight").html("");
        $('.loginIdOk').css("display", "none");
        $('.login6digitsOk').css("display", "none");
        $("label")[0].classList.remove("loginSmall");
    }

    this.submitLogin_callback = function (res, idNumber) {
        $(".isracardLoader").css("display", "none");
        $("#loginFormBtn").css("display", "block");
        if (res.isSuccess) {
            PushGACode({}, "LogInSuccess");

            //-------PrivacyInfrastructure--------------------------------     
            PrivacyInfrastructure(idNumber);
            //---------------------------------------

            if (localStorage.getItem("return-url") !== null)
                window.location.href = localStorage.getItem("return-url");
            else
                window.location.href = '/';
        }
        else {
            PushGACode({}, "LogInFail");
            if (res.errors[0].errorCode == "31005")
                return window.location.href = window.epi.Layout.SignupUrl;
            $(".benefit-failed-msg").html(res.errors[0].message);
            $("#error-msg-Modal").modal('show');
            $("#closeUpperLeftBtn").focus();
            if (res.data !== null) {
                if (res.data.showRecaptcha)
                    recaptcha.loadCaptcha();
            }
        }
    };



    this.getCustomerGuid = function (idNumber, countryCode) {
        ajax(window.epi.Layout.ServiceDomain + "/User/GetCustomerEloquaGuid",
            "POST",
            JSON.stringify({
                "id": idNumber,
                "countryCode": countryCode,
                SiteIdentifier: window.epi.Layout.SiteIdentifier
            }), function (res) {
                cGuid = res.isSuccess === true ? res.data.userGuid : "";
            }, function () {

            });
    };



    this.setRecaptcha = function (siteKey) {
        recaptcha = new RecaptchaHandler(siteKey);
        recaptcha.loadCaptcha();
    };

    this.submitLogin = async function (data) {
        if (proceed) {
            var recaptchaResponse = "";

            PushGACode({}, "LogInClick");
            $(".isracardLoader").css("display", "block");
            $("#loginFormBtn").css("display", "none");

            if (recaptcha !== null) {
                await recaptcha.updateRecaptchaV3Token();
                recaptchaResponse = window.recaptchaV3Token;
            }
            $(".isracardLoader").css("display", "block");
            $("#loginFormBtn").css("display", "none");

            var loginDict = fetchInput(data);

            ajax(window.epi.Layout.ServiceDomain + "/User/Login",
                "POST",
                JSON.stringify({
                    DeviceId: "123",
                    "CardNumberSuffix": loginDict["CardNumberSuffix"],
                    "IdNumber": loginDict["IdNumber"],
                    SiteIdentifier: loginDict["SiteIdentifier"],
                    IdType: '1',
                    RecaptchaResponse: recaptchaResponse,
                    CustomerGuid: cGuid,
                }), function (data) {
                    eloquaHandler("BenefitsLogin", '', '', cGuid);
                    loginHandler.submitLogin_callback(data, loginDict["IdNumber"]);
                }, function () { generalError() }
            );



        } else {

            $(".focus-error").focus();
        }
    };

    var PrivacyInfrastructure = function (idNumber) {
        var eloqua = "0";
        var appnexusId = "0";
        var permutiveid = "0";
        var site = window.epi.Layout.SiteIdentifier;


        if (window.localStorage["eloquaCustomerGUID"] !== undefined) {
            eloqua = window.localStorage["eloquaCustomerGUID"];
        }
        if (window.localStorage["appnexus-id"] !== undefined) {
            appnexusId = window.localStorage["appnexus-id"];
        }
        if (window.localStorage["permutive-id"] !== undefined) {
            permutiveid = window.localStorage["permutive-id"];
        }

        console.log('aid:', appnexusId);
        console.log('pid:', permutiveid);
        console.log('eid:', eloqua);

        var runWebApi = function () {
            $.ajax({
                url: "/PrivacySafeInfrastructure/PrivacySafeInfrastructure",
                type: "POST",
                data: {
                    appnexusId: appnexusId,
                    permutiveid: permutiveid,
                    eloqua: eloqua,
                    isLogged: true,
                    id: idNumber,
                    site: site
                },
                dataType: "json",
                success: function (res) {
                    console.log('out', res);
                },
                error: function (xmlHttpRequest, textStatus, errorThrown) {
                    console.log('error', xmlHttpRequest, textStatus, errorThrown);
                }
            });
        }

        runWebApi();
    }

    this.downloadBenefitFailXBtnClick = function (downloadBenefitFailCategory, downloadBenefitFailName) {
        PushGACode({
            'downloadBenefitFailCategory': downloadBenefitFailCategory,
            'downloadBenefitFailName': downloadBenefitFailName
        },
            'DownloadBenefitFailXBtnClick');
    };



};;
var PartialPagesHandler = function () {

    this.searchResultTimeout = null;

    this.toggleReadMoreBtn = function (e) {
        if ($(".benefit-execution").has(".show")) {
            if (e.innerHTML == "")
                $(e).html(" ")
            else
                $(e).html("");
        }
        else
            $(e).html(" ");
    }


    this.carouselCategoryItemClickHandler = function (categoryName, redirectUrl) {
        PushGACode({ 'CategoryClickName': categoryName }, 'CategoryClick');
        location.href = redirectUrl;
    }

    this.mainBenefitClick = function ( bannerStaticName, redirectUrl) {
        PushGACode({ 'BannerStaticName': bannerStaticName }, 'BannerStaticClick');
        location.href = redirectUrl;
    }

    this.mainBenefitDownloadClick = function (bannerStaticName) {
        PushGACode({ 'bannerStaticName': bannerStaticName }, 'BannerStaticBenefitDownloadBtnClick');
    }

    this.RecommendedCarouselBannerClick = function (benefitName) {
        PushGACode({ 'CategoryClickName': 'Recommended', 'CarouselClickName': benefitName }, 'CategoryCarouselClick');
       


    }


    this.carouselBannerClick = function (categoryName, bannerStaticName, redirectUrl) {
        PushGACode({ 'CarouselClickName': categoryName}, 'CarouselClick');
        location.href = redirectUrl;
    }

    this.carouselBannerDownloadBtnClick = function (categoryName, bannerStaticName) {
        PushGACode({ 'CarouselClickName': categoryName }, 'CarouselBenefitDownloadBtnClick');
        event.stopPropagation();
    }

    this.categoryIconClick = function (redirectUrl, categoryName) {
        PushGACode({ 'CategoryIcon': categoryName }, 'CategoryIconClick');
        location.href = redirectUrl;
    }

    this.categoryTextClick = function (redirectUrl, categoryName) {
        PushGACode({ 'CategoryText': categoryName }, 'CategoryTextClick');
        location.href = redirectUrl;
    }

    this.recommendedArrowClick = function () {
        PushGACode({}, 'RecommendedArrowClick');
    }

    this.downloadBenefitSuccessButtonClick = function (downloadBenefitSuccessButtonClickCategory, downloadBenefitSuccessButtonClickBenefitName, downloadBenefitSuccessButtonClickName) {
        var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();
        PushGACode({
            'DownloadBenefitSuccessButtonClickCategory': mainCategory,
            'DownloadBenefitSuccessButtonClickSubCategory': downloadBenefitSuccessButtonClickCategory,
            'DownloadBenefitSuccessButtonClickBenefitName': downloadBenefitSuccessButtonClickBenefitName,
            'DownloadBenefitSuccessButtonClickName': downloadBenefitSuccessButtonClickName
        }, 'DownloadBenefitSuccessButtonClick');
    }

    this.howToEnjoyTheBenefitDropDownOpen = function (downloadBenefitSuccessButtonClickCategory, downloadBenefitSuccessButtonClickBenefitName, e) {
    var mainCategory = $(".breadcrumbs li:nth-child(2)").find('a').html();
        var event = e.attributes['aria-expanded'].value === 'false' ? 'HowToEnjoyTheBenefitDropDownOpen' : 'HowToEnjoyTheBenefitDropDownClose';
        PushGACode({
            'DownloadBenefitSuccessButtonClickCategory': mainCategory,
             'DownloadBenefitSuccessButtonClickSubCategory': downloadBenefitSuccessButtonClickCategory,
            'DownloadBenefitSuccessButtonClickBenefitName': downloadBenefitSuccessButtonClickBenefitName
        }, event);
    }

    this.subTitleMenuOptionClick = function (subMenuItemName) {
        PushGACode({ 'SubMenuItemName': subMenuItemName }, 'NavBarClick');
    }

    this.accessibleCrousel = function (subMenuItemName) {
        $(".home-carousel").addClass("sr-carousel");
        $(".carousel-item").css("background-image", "none");
        $(".carousel-control-prev").remove();
        $(".carousel-control-next").remove();
        $(".carousel-item").removeClass("carousel-item");
    }

    this.searchDropdownClick = function () {
        if (!$(".dropdown-menu").hasClass("show"))
        {
            $(".dropdown-menu").addClass("show");
            $(".search-dd").addClass("show");
        }
           
       
    }

    this.searchDropdownBlur = function () {
        document.getElementById('searchFilterResualt').innerHTML = "";
            $(".dropdown-menu").removeClass("show");
            $('#dropdownSearchButton').val('');
    }
    this.searchIconClick = function () { 
        if ($(".dropdown-menu").hasClass("show"))
        $(".dropdown-menu").removeClass("show");
        localStorage.setItem("search-query", $('#dropdownSearchButton').val());
        eloquaHandler("sendSearchBarDataToEloqua", $('#dropdownSearchButton').val());
        if ($('#dropdownSearchButton').val().length > 0) {
            PushGACode({ 'Search_Term': $('#dropdownSearchButton').val() }, 'Search_Result_Pageview');
            return location.href = window.epi.Layout.SearchUrl;

        }

        
    }
    this.inputSearchIconClick = function () {
        localStorage.setItem("search-query", "");
        $('#dropdownSearchButton').val('');
        $('#img-search').show();
        $('#img-clear-search').hide();
        document.getElementById('searchFilterResualt').innerHTML = "";
        this.searchDropdownClick();
    };
    this.searchInputChange = function (searchQuery, benefitList, showForAllRes)
    {
 
        this.ChangeSearchIcon(searchQuery.length >= 1);
        if (searchQuery.length == 1)  PushGACode({}, 'Search_Type');
        filterBenefitList = benefitList.filter(IsContiunsValue(searchQuery));
        document.getElementById('searchFilterResualt').innerHTML = "";

        document.getElementById('search-dd-results').innerHTML = "";
        clearTimeout(this.searchResultTimeout);
        this.searchResultTimeout = setTimeout(function () {
            document.getElementById('search-dd-results').innerHTML = filterBenefitList.length > 0 ? " " + filterBenefitList.length + " " : "  ";
            $('#dropdownSearchButton').attr('aria-expanded', filterBenefitList.length > 0 ? 'true' : 'false');
        }, 100);
        
        for (var i = 0; i < filterBenefitList.length; i++) {
            if (i === 4) {
                if (showForAllRes) {                   
                    var searchItemAllRes = CreateSearchAllResItem(filterBenefitList[i], searchQuery);
                    document.getElementById('searchFilterResualt').appendChild(searchItemAllRes);
                }
                break;
            }
            else {            
                var searchItem = CreateSearchItem(filterBenefitList[i]);
                document.getElementById('searchFilterResualt').appendChild(searchItem);
            }
        }
    };
    this.ChangeSearchIcon = function (searchIconAble) {
       
        if (searchIconAble) {
          
            $("#searchIcon").attr("src", window.epi.Layout.GeneralContent["searchIconEnable"].toString());
            $("#dropdownSearchButton").addClass("main-color");
          
        }
        else {
            $("#searchIcon").attr("src", window.epi.Layout.GeneralContent["searchIconDisEnable"].toString());
            $("#dropdownSearchButton").removeClass("main-color");
            
        }  
     
    };
    CreateSearchAllResItem = function (item, searchQuery) {
        var element = document.createElement("button");
        element.innerHTML = window.epi.Layout.GeneralContent["allResultText"];// "  ";
        element.className = "dropdown-item all-results";
        element.onclick = (function (Link, userInput, e) {
            localStorage.setItem("search-query", userInput);

            return location.href = Link;
        }).bind(item, window.epi.Layout.SearchUrl, searchQuery);  
        return element;
    };
    CreateSearchItem = function (item)
    {
            
        var element = document.createElement("button");
        element.setAttribute("class", "dropdown-item");
        element.innerHTML = item.Name;
        element.onclick = (function (link, id, e) {
            PushGACode({ 'Result_Text': item.Name }, 'Search_Result_Click');
            eloquaHandler("sendSearchBarDataToEloqua", item.Name);
            benefitPageHandler.saveBenefitInfo(link, id);
            return location.href = link;
        }).bind(item, item.LinkUrl, item.Id);
        return element;
    };
    IsContiunsValue = function (searchQuery) {
        return function (benefit) {
            if (searchQuery.trim().length > 0)
                return benefit.Name.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0;
            return false;
        };
    };
    this.setFilterBenefitsSearchPage = function (allBenefits) {
        var searchQuery = localStorage["search-query"];
        $('#dropdownSearchButton').val(searchQuery);
        filterBenefitList = allBenefits.filter(IsContiunsValue(searchQuery));

        for (var i = 0; i < filterBenefitList.length; i++) {
            $("#" + filterBenefitList[i].LinkUrl.replace(/\//g, '').replace('.', '')).show();
        }
        if (filterBenefitList.length === 0) {  
            PushGACode({ 'Search_Term': searchQuery }, 'Search_NoResult_Click');
            $('#searchNotFound').show();
        }
        else {
            $('#messageResultAmount').html
                (textResultNumber.replace('{resultAmount}', filterBenefitList.length).replace('{searchQuery}', searchQuery));        
           
        }
        if (searchQuery.trim().length > 0) {
            $('#img-search').hide();
            $('#img-clear-search').show();
        }
    };
  
    
    
};
var PersonalAreaHandler = function () {
    var currentIndex = 0;
    var isIdenticalCards = undefined;
    var savedCardList = [];

    this.populatePersonalArea = function () {
        $(".clubLinkInfo").css("display", "none");
        $(".userDetails").html(window.epi.UserDetails.CardNumberSuffix);
        ajax(window.epi.Layout.ServiceDomain + "/PersonalArea/GetCouponsAndBonusesWeb",
            "POST", JSON.stringify({
                SiteIdentifier: window.epi.Layout.SiteIdentifier,
                Source: 2,
                DeviceId: "123"
            }),
            function (data) { personalAreaHandler.populatePersonalArea_callback(data) },
            function () { generalError() }
        );

    }
   
    
    this.GetCouponsSum = function(res) {
         var totalCoupons = 0
         for (var card = 0; card <res.data.couponsAndBonusesByCard.length; card++) {
             if (res.data.couponsAndBonusesByCard[card] != null)
             {
               totalCoupons = totalCoupons + res.data.couponsAndBonusesByCard[card].coupons.length;
             }
          }
             return totalCoupons;
    }


    function CardsArrayConatinsItem(res, targetcard) {
        for (var card = 0; card < res.data.couponsAndBonusesByCard.length; card++) {
            if (res.data.couponsAndBonusesByCard[card].cardNumberSuffix == targetcard) return true
        }
        return false
    }

    this.getRelevantCard = function (res) {
        var relevantCard = undefined;
        if ($("#dropdownMenuButton").html().trim() == "") {
            if (CardsArrayConatinsItem(res, window.epi.UserDetails.CardNumberSuffix))
            {
                relevantCard = window.epi.UserDetails.CardNumberSuffix;

            }//cards with (ispremium == false) &&  (coupons.count()==0) are not retrieved
            else {
                relevantCard = res.data.couponsAndBonusesByCard[0].cardNumberSuffix;

            }

        }
        
        else
            relevantCard = $("#dropdownMenuButton").html();
        return relevantCard;

    
    }


    

    function calculateDaysToExpaired(couponExpDate) {
        var today = new Date();
        var exp = new Date(couponExpDate.split('/')[1] + '/' + couponExpDate.split('/')[0] + '/' + couponExpDate.split('/')[2]);
        var diff = Math.abs(today - exp);
        var daysDiff = Math.ceil(diff / (1000 * 60 * 60 * 24));
        return daysDiff;
      
    }

    this.populateBonusSectionAndClubLink = function (res, relevantCard) {
        if (res.data.couponsAndBonusesByCard != null) {
            $(".clubLinkSubHeader").html("");
            $(".primiumToUse").html(window.epi.CurrentPage.PageData["premiumToUseText"]);
            if (isIdenticalCards) {
                var bonus = res.data.couponsAndBonusesByCard[currentIndex].bonusAmountRemaining;
                return $(".bonusToUse").html(bonus);

            }
            else {
                for (var card = 0; card < res.data.couponsAndBonusesByCard.length; card++) {
                    if (res.data.couponsAndBonusesByCard[card].cardNumberSuffix == relevantCard) {
                    
                        if (res.data.couponsAndBonusesByCard[card].cardsClubs != null && res.data.couponsAndBonusesByCard[card].cardsClubs[0].isHasLink == "true") {
                            $(".clubLinkInfo").css("display", "flex");
                            $(".clubLinkInfo").css("margin", "auto");
                            $(".clubLinkSubHeader").html(epi.CurrentPage.PageData.clubLinkSubHeader + res.data.couponsAndBonusesByCard[card].cardsClubs[0].nemanutName);
                            $(".clubLink").attr("href", res.data.couponsAndBonusesByCard[card].cardsClubs[0].nemanutLink);
                            $(".clubLink").attr("vendor", res.data.couponsAndBonusesByCard[card].cardsClubs[0].nemanutName);
                            
                             
                    }
                    else {
                            $(".clubLinkInfo").css("display", "none");

                    }
                        if (res.data.couponsAndBonusesByCard[card].isPremium != false) {
                            $(".bonus-sec").css("display", "inline");

                            //if ($(".points-sec").css("border-right") != "1px solid rgba(0, 0, 0, 0.21)")
                            //{
                            //    $(".points-sec").css("border-right", "1px solid rgba(0, 0, 0, 0.21)");
                            //}
                            
                            $(".preImg").css("display", "inline");
                            var bonus = res.data.couponsAndBonusesByCard[card].bonusAmountRemaining;
                            return $(".bonusToUse").html(bonus);

                        }
                        else {
                            $(".bonus-sec").css("display", "none");
                            $(".bonusToUse").html("");
                            $(".primiumToUse").html("");
                            $(".preImg").css("display", "none");
                            

                        }
                    }
                }

            }


        }


    }


    this.populatePointsSection = function (res, relevantCard) {
        if (res.data.couponsAndBonusesByCard != null ) {
            if ((isIdenticalCards) && (res.data.couponsAndBonusesByCard[currentIndex].pointBalanceAmount != null)) {
                var points = res.data.couponsAndBonusesByCard[currentIndex].pointBalanceAmount;
                return personalAreaHandler.formatPointsNumberWithCommas(points);

            }
            else {
                for (var card = 0; card < res.data.couponsAndBonusesByCard.length; card++) {
                    if (res.data.couponsAndBonusesByCard[card].cardNumberSuffix == relevantCard) {
                        if (res.data.couponsAndBonusesByCard[card].isHasPoints) {
                            $(".points-sec").css("display", "inline");
                         
                            if (res.data.couponsAndBonusesByCard[card].isPremium == false)
                            {
                                $(".points-sec").css("border-left", "0px solid rgba(0, 0, 0, 0.21)");
                            }
                            else {
                                $(".points-sec").css("border-left", "1px solid rgba(0, 0, 0, 0.21)");

                            }
                            var points = res.data.couponsAndBonusesByCard[card].pointBalanceAmount;
                            return personalAreaHandler.formatPointsNumberWithCommas(points);
                           
                        }
                        else {
                            $(".points-sec").css("display", "none");
                            
                        }
                    }
                }

            }


        }


    }



    this.CheckCardsIdentity = function (res) {
        var cards = [];
        for (var card = 0; card < res.data.couponsAndBonusesByCard.length; card++) {
            cards.push(res.data.couponsAndBonusesByCard[card].cardNumberSuffix);
        }
        var hist = {};
         cards.map(function (a) {
            if (a in hist)
            {
                isIdenticalCards = true; return;
            }
            else {
                 hist[a] = 1;
            } 
             
        });
       }
   
    this.populatePersonalArea_callback = function (res) {
        $(".dropdown-menu").removeClass("show");
        if (res.isSuccess) {
             var couponAmounts = 0;
            localStorage.setItem("no-personal-coupons", undefined);
            $.get("/Static/html/HtmlTemplate/couponTemplate.html", function (response) {
                template = response;
                var relevantCard = personalAreaHandler.getRelevantCard(res);
                if (res.data.couponsAndBonusesByCard.length > 1)
                {
                    personalAreaHandler.CheckCardsIdentity(res);
                }
                personalAreaHandler.populateBonusSectionAndClubLink(res, relevantCard);
                if (window.epi.Layout.SiteIdentifier == "a")
                {
                    personalAreaHandler.populatePointsSection(res, relevantCard);
                }
              
                var totalCoupons = personalAreaHandler.GetCouponsSum(res);
                if (res.data != null && res.data.couponsAndBonusesByCard.length > 0) {
                    if (totalCoupons > 0) {
                       
                        $(".myCouponTitle").html(window.epi.CurrentPage.PageData["myBenefitsTitle"]);
                        if ($("#dropdownMenuButton").html().trim() == "") {
                           personalAreaHandler.populateInfoSection(res, relevantCard);
                        }
                        var couponsByCard = personalAreaHandler.getRelevantCoupons(res);
                        $(".single-coupon").remove();
                        if (couponsByCard.length > 0) {
                            $(".cancelCardText").html(window.epi.CurrentPage.PageData["cancelCardText"]);
                            $(".deleteExpirdCoupons").html(window.epi.CurrentPage.PageData["deleteExpiredCoupons"]);
                            $(".noCouponsInOneCard").html("");
                            for (var coupon = 0; coupon < couponsByCard.length; coupon++) {
                                setTimeout(drowCupons(res, couponsByCard, relevantCard, coupon), 0);
                            }
                            
                        }
                        else {
                         
                            $(".cancelCardText").html(" ");
                            $(".deleteExpirdCoupons").html(" ");
                            if (relevantCard == window.epi.UserDetails.CardNumberSuffix)
                            {
                               localStorage.setItem("no-personal-coupons", true);
                                personalAreaHandler.displayPersonalAreaPage();

                            }
                            else {
                                $(".cancelCardText").html("");
                                $(".noCouponsInOneCard").html(window.epi.CurrentPage.PageData["noCouponsInThisCard"]);

                            }
                            
                        }
                        personalAreaHandler.displayPersonalAreaPage()

                    }
                    else {
                     
                        $(".cancelCardText").html("");
                        if ($("#dropdownMenuButton").html().trim() == "") {
                            personalAreaHandler.populateInfoSection(res, relevantCard);
                        }
                        var cardObj = res.data.couponsAndBonusesByCard.filter(r => r.cardNumberSuffix == relevantCard);
                        if ((cardObj[0].cardsClubs != null && cardObj[0].cardsClubs[0].returnCode != "21") || cardObj[0].cardsClubs== null ) {
                            localStorage.setItem("no-personal-coupons", true);
                        }
                        
                        personalAreaHandler.displayPersonalAreaPage();

                    }

                }
                else {

                    $(".oneCard").css("display", "inline");
                    $(".oneCard").html(window.epi.UserDetails.CardNumberSuffix)
                    $(".moreThanOneCard").css("display", "none");
                    personalAreaHandler.displayPersonalAreaPage();
                }
            });


        }
        else {
            if (res.errors[0].errorCode == "998")
            {
                return window.location.href = window.epi.Layout.LoginUrl;

            }
            else {
                $(".personal-area").css("display", "none");
                $(".cancelCardText").html("");
                $(".benefit-failed-msg").html(res.errors[0].message);
                $("#error-msg-Modal").modal('show');

            }
            

        }
    }

    function drowCupons(res, couponsByCard, relevantCard, coupon ) {
      
        var expiredDate = couponsByCard[coupon].redemptionExpiryDate;
        var daysToExpired = calculateDaysToExpaired(expiredDate);
        
        $(".personal-benefits").html($(".personal-benefits").html() + template);
        var cardNumberSuffix = relevantCard;
        var benefitName = couponsByCard[coupon].mobileBenefitName;
        if (benefitName.length > 60)
        {
            benefitName = couponsByCard[coupon].mobileBenefitName.substring(0, 55) + "...";
        }
        var benefitCategoryName = couponsByCard[coupon].categoryName;
        var orderNumber = undefined;
        if (couponsByCard[coupon].staticCouponNumber)//check if null || empty 
        {
            orderNumber = couponsByCard[coupon].staticCouponNumber;
        }
        else {
            orderNumber = couponsByCard[coupon].orderNumber;
        }
        var pageId = couponsByCard[coupon].benefitPageId;
        var lobbyImg = couponsByCard[coupon].lobbyImage;
        $(".single-benefit-details").attr("card", cardNumberSuffix);
        $(".col-lg-6").attr("id", cardNumberSuffix);
        $(".card_num").attr("id", cardNumberSuffix);
        var pagedata = window.epi.CurrentPage.PageData;
        $(".benefit-failed-title-coupon").html(pagedata["cancelCouponMsg"]);
        $(".cancel_btn").html(pagedata["cancelCouponConfirmationBtnText"]);
        $(".send-code").html(pagedata["sendCouponSmsBtnText"]);
        var counter = coupon + 1;

        //$(".personal-benefits .single-coupon:nth-child(" + counter + ") .cancel-btn").attr("test", "accessibility");


        if (couponsByCard[coupon].orderStatus == "8") {
            $(".personal-benefits .single-coupon:nth-child(" + counter + ") .cancel-btn").css("display", "none");
            $(".personal-benefits .single-coupon:nth-child(" + counter + ") .sms-btn").css("display", "none");
            $(".personal-benefits .single-coupon:nth-child(" + counter + ") .benefit-expired").css("display", "block"); 
            $(".personal-benefits .single-coupon:nth-child(" + counter + ") .exp-msg").html(window.epi.CurrentPage.PageData["couponUsedText"]);
        }
        if (daysToExpired < 7) {
            $(".personal-benefits .single-coupon:nth-child(" + counter + ") .expiaration-alert").html(window.epi.CurrentPage.PageData["expiredDescTest"] + expiredDate);
            $(".personal-benefits .single-coupon:nth-child(" + counter + ") .benefit-expiaration").css("display", "none");
        }
        else {
            $(".personal-benefits .single-coupon:nth-child(" + counter + ") .benefit-expiaration").html(window.epi.CurrentPage.PageData["expiredLabel"]  + " " + expiredDate);

        }
        if ((window.epi.Layout.SiteIdentifier == "a") && (couponsByCard[coupon].pointQuantity != "0"))
        {
            $(".personal-benefits .single-coupon:nth-child(" + counter + ")").attr("points", couponsByCard[coupon].pointQuantity);
          
        }
        $(".personal-benefits .single-coupon:nth-child(" + counter + ") .cancel-btn").attr("data-target", "#" + couponsByCard[coupon].orderNumber);
        $(".personal-benefits .single-coupon:nth-child(" + counter + ") .benefit-img").attr("alt", "");
        $(".personal-benefits .single-coupon:nth-child(" + counter + ") .benefit-img").attr("src", lobbyImg);
        $(".personal-benefits .single-coupon:nth-child(" + counter + ") .fade").attr("id", couponsByCard[coupon].orderNumber);
       
        $(".personal-benefits .single-coupon:nth-child(" + counter + ") #order-number").attr("id", couponsByCard[coupon].orderNumber);
        $(".personal-benefits .single-coupon:nth-child(" + counter + ")").attr("order", couponsByCard[coupon].orderNumber);
        $(".personal-benefits .single-coupon:nth-child(" + counter + ")").attr("pageId", pageId);
        $(".personal-benefits .single-coupon:nth-child(" + counter + ")").attr("expired", expiredDate);
        $(".personal-benefits .single-coupon:nth-child(" + counter + ") .benefit-name").html(benefitName);
        $(".personal-benefits .single-coupon:nth-child(" + counter + ") .benefit-category-holder").val(benefitCategoryName);

        $(".personal-benefits .single-coupon:nth-child(" + counter + ") .benefit-code").html(window.epi.CurrentPage.PageData["benefitCouponCodeText"] + " " + orderNumber);
        $(".closeCouponBtn").html(window.epi.CurrentPage.PageData["cancelCouponCloseBtnText"]);
        $(".cancel-btn").html(window.epi.CurrentPage.PageData["cuoponCancelBenefitBtn"]);
       
    }

    this.getRelevantCoupons = function(res) {
        var relevantCoupons = [];
        var relevantCard = personalAreaHandler.getRelevantCard(res);
        if (isIdenticalCards)
        {
            if (res.data.couponsAndBonusesByCard[currentIndex].coupons != null) {
                for (var coupon = 0; coupon < res.data.couponsAndBonusesByCard[currentIndex].coupons.length; coupon++) {
                    relevantCoupons.push(res.data.couponsAndBonusesByCard[currentIndex].coupons[coupon]);
                }
            }
        }

         else {
            for (var card = 0; card < res.data.couponsAndBonusesByCard.length; card++) {
                if (res.data.couponsAndBonusesByCard[card].cardNumberSuffix == relevantCard) {
                   
                    if (res.data.couponsAndBonusesByCard[card].coupons != null) {
                        for (var coupon = 0; coupon < res.data.couponsAndBonusesByCard[card].coupons.length; coupon++) {
                            relevantCoupons.push(res.data.couponsAndBonusesByCard[card].coupons[coupon]);
                        }
                    }
                    
                }
            }

        }
        
        return relevantCoupons;
    }

    this.tooltipPersonalZone = function () {
        if (window.innerWidth >= 800)
        {
            $(".desktopTooltip" + '[data-toggle=popover]').popover('show');
        }
        else {
            $(".mobileTooltip" + '[data-toggle=popover]').popover('show');
        }

        PushGACode({
        }, 'TooltipPersonalZone');
    }

    this.populateInfoSection = function (res, relevantCard) {
        var pagedata = window.epi.CurrentPage.PageData;
        $(".primiumTooltip").attr("data-content", pagedata["toolTipText"])
        this.savedCardList = res.data.couponsAndBonusesByCard;
           if (res.data.couponsAndBonusesByCard.length > 1) {
            $(".info_title").html(pagedata["switchCardText"]);
            $(".bonusToUse").css("margin-right", "4%");
            $(".oneCard").css("display", "none");
            $(".mobileSwitch").html(relevantCard);
            $(".moreThanOneCard").css("display", "inline");
            $("#dropdownMenuButton").html(relevantCard);
            var $dropDown = $(".dropdown-menu");
            $(".dropdown-menu").html("");
               $.each(res.data.couponsAndBonusesByCard, function (index) {
                   $(".dropdown-menu").append($('<a id="card-select-' + index + '" class="dropdown-item" ' + 'href="#"' + 'aria-label="' + (this.cardNumberSuffix + '   ') + '" onclick= "personalAreaHandler.selectCard(this);"' + '>' + this.cardNumberSuffix + '</a>'));
                   $("#cards-select-list").append($('<option value="' + this.cardNumberSuffix + '" aria-label="' + (this.cardNumberSuffix + '   ') + '">' + this.cardNumberSuffix + '</option>'));
               });
               $("#cards-select-list").show();
               $("#cards-select-list").val(relevantCard);
        }
           else {
            $("#cards-select-list").hide();
            $(".bonusToUse").css("margin-right", "1%");
            $(".oneCard").css("display", "inline");
            $(".oneCard").html(relevantCard)
            $(".moreThanOneCard").css("display", "none");
            var pagedata = window.epi.CurrentPage.PageData;
            $(".info_title").html(pagedata["cardConnectionText"]);
        }
    }

    this.displayPersonalAreaPage = function () {
        if (localStorage["no-personal-coupons"] == "true") {
            $(".noCouponsInOneCard").html("");
          $(".noCouponsDiv").css("display", "block");
        }
        else {
           $(".noCouponsDiv").css("display", "none");
        }
    }

    this.redirectToSrcPage = function (src) {
        window.location.href = src;
    }

    this.redirectToPersonalPage = function (location, source) {
        localStorage["return-url"] = null;
        localStorage["benefit-id"] = null;

        if (!window.epi.Layout.IsLoggedIn) {
            localStorage.setItem("return-url", location);
            if (source == "myBenefit")
                 window.location.href = window.epi.Layout.LoginUrl;
            else
                 window.location.href = location;
        }
        else
             window.location.href = location;
    }

    this.cancelCoupon = function (e) {
        var cancelBenefitCategory = localStorage.getItem('benefitCategoryName');
        var cancelBenefitName = localStorage.getItem('benefitName');
        var CancelBenefitButtonClickName = "";
        if (e.id.indexOf("close") == -1)
        {
            if ((window.epi.Layout.SiteIdentifier == "a") && ($(e).parentsUntil(".personal-benefits").last().attr("points") != undefined))
            {
               
                PushGACode({
                    'CancelBenefitCategory': cancelBenefitCategory,
                    'CancelBenefitName': cancelBenefitName
                }, 'CancelRewardsBenefitPopupExplanation');

                $("#" + e.id).modal('hide');
                $(".modal-backdrop").removeClass("show");
                $(".modal-backdrop").css("display", "none");
                $("#cancel-points-modal").modal('show');
            }
            else {
                $(e)[0].nextElementSibling.style.display = "block"
                $(".cancel_btn").css("display", "none");
                CancelBenefitButtonClickName = '';
                var couponToCancel = $("#dropdownMenuButton").html().trim() == "" ? $(".oneCard").html() : $("#dropdownMenuButton").html().trim()
                ajax(window.epi.Layout.ServiceDomain + "/PersonalArea/CancelCouponWeb",
                    "POST",
                    JSON.stringify({
                        SiteIdentifier: window.epi.Layout.SiteIdentifier,
                        Guid: "",
                        DeviceId: "123",
                        Source: "2",
                        OrderNumber: e.id,
                        CardLast4Digits: couponToCancel
                    }), function (data) {
                        cancelCoupon_callback(data, e.id)
                    },
                    function () { generalError() }
                );

            }
           
         
        }

        else {
            CancelBenefitButtonClickName = e.id === 'closeButtomRightBtn' ?'':'X';

        }

        PushGACode({
            'CancelBenefitCategory': cancelBenefitCategory,
            'CancelBenefitName': cancelBenefitName,
            'CancelBenefitButtonClickName': CancelBenefitButtonClickName
        }, 'CancelBenefitPopup');
        
    }

    function cancelCoupon_callback(response, couponNum) {
        $(".isracardLoader").css("display", "none");
        $(".cancel_btn").css("display", "block");
        $("#" + couponNum).modal('hide');
        $(".modal-backdrop").removeClass("show");
        $(".modal-backdrop").css("display", "none");
        if (response.isSuccess) {
            $("[order=" + couponNum + "]").first().remove();
            $(".single-benefit-details").addClass("shake-element");
            $(".modal-open").css("overflow", "scroll");
            personalAreaHandler.populatePersonalArea();
        }
        else {
            $(".benefit-failed-msg-coupon").html(response.errors[0].message);
            $("#error-msg-Modal").modal('show');
        }
    }


    this.sendCouponCodeSms = function (e) {
      
        $(e)[0].style.display = "none"
        $(e)[0].nextElementSibling.style.display = "block"

        var order = $(e).parentsUntil(".personal-benefits").last().attr("order");
        var card = $(e).parentsUntil(".single-coupon").last().attr("card");
        var pageId = $(e).parentsUntil(".personal-benefits").last().attr("pageid");
        var expiryDate = $(e).parentsUntil(".personal-benefits").last().attr("expired");


        var cardElement = $(e).parent().parent().parent()[0];
        var benefitNAme = $(cardElement).find(".benefit-name")[0].innerText;
        var benefitCategoryName = $(cardElement).find(".benefit-category-holder")[0].value;
        var categoryId = $($(cardElement).find(".benefit-code")[0]).text().split(":")[1];
        this.sendBenefitPasswordViaSms(benefitCategoryName, benefitNAme);

        eloquaHandler("BenefitDownloadLogin", categoryId, benefitCategoryName);

        ajax(window.epi.Layout.ServiceDomain + "/PersonalArea/ResendSMSWeb",
            "POST",
            JSON.stringify({
                SiteIdentifier: window.epi.Layout.SiteIdentifier, Guid: "",
                DeviceId: "123", Source: "2",
                OrderNumber: order, CardLast4Digits: card,
                BenefitPageId: pageId, RedemptionExpiryDate:expiryDate
            }), function (data) { personalAreaHandler.sendCouponCodeSms_callback(data, e) },
            function () {
              
                generalError()
            }

        );

    }

    this.sendCouponCodeSms_callback = function(response, e)
    {
        $(".isracardLoader").css("display", "none");
        $(".send-code").css("display", "inline-block");
      
        if (response.isSuccess) {
            setTimeout(function () { e.innerText = window.epi.CurrentPage.PageData["sendCouponSmsBtnText"] }, 1000);
                 $(e).removeClass("btn-blue");
                 $(e).addClass("color-btn");
                $(e).html(window.epi.CurrentPage.PageData["sendCouponSmsSuccessMsg"]);
                 return;

            }
             else {
                
                 $(".benefit-failed-msg").html(response.errors[0].message);
                 return $("#error-msg-Modal").modal('show');


        }
    }

    this.selectCard = function (e) {
        $("#dropdownMenuButton").html("");
        $("#dropdownMenuButton").html($(e).html());
        $(".mobileSwitch").html("");
        $(".mobileSwitch").html($(e).html());
        $(".dropdown-menu").removeClass("show");
        currentIndex = e.id;
          personalAreaHandler.populatePersonalArea();
        
    };

    this.selectCardFromSelect = function () {
                var selectedCardValue = $('#cards-select-list').val();
                var selectedCardIndex = this.savedCardList.findIndex(card => card.cardNumberSuffix == selectedCardValue);
                $("#dropdownMenuButton").html("");
                $("#dropdownMenuButton").html($('#card-select-' + selectedCardIndex).html());
                $(".mobileSwitch").html("");
                $(".mobileSwitch").html($('#card-select-' + selectedCardIndex).html());
                $(".dropdown-menu").removeClass("show");
                currentIndex = selectedCardIndex;
                personalAreaHandler.populatePersonalArea();
        };

    this.routeVendorSiteGa = function (e) {
        PushGACode({
            'event': 'ClickOnMeemanut',
            'parameter1': e.attributes['vendor'].value,
            'user_action': 'ClickOnMeemanut',
        });

    }
    this.cancelLogout = function () {
        $(".black-screen").css("display", "none");

    }



    this.logOut = function (logOutGaEvent) {
        $(".black-screen").css("display", "none");
        if ($(".noPersonalBenefits").length == 0)
        {
            PushGACode({}, logOutGaEvent);
        }
        else {
            PushGACode({}, "LogOutPopupYesPersonalBenefit");
        }
        localStorage.clear();
        $("#dropdownMenuButton").html("");
        $("#cards-select-list").html("");
        ajax(window.epi.Layout.ServiceDomain + "/User/Logout",
            "POST",
            JSON.stringify({
                SiteIdentifier: window.epi.Layout.SiteIdentifier
            }), function (data) {
                personalAreaHandler.logOut_callback(data)
            },
            function () { generalError() }
        );
    };




    this.dropDownChangeCardPersonalZone = function () {
        PushGACode({}, 'DropDownChangeCardPersonalZone');
    }

    this.toAllBenefitsPersonalZone = function () {
        PushGACode({}, 'ToAllBenefitsPersonalZone');
    }

    this.logOut_callback = function(response, e) {
        if (response.isSuccess)
            document.location.href = window.epi.Layout.LoginUrl;

    }

    this.cancelBenefit = function (cancelBenefitCategory, cancelBenefitName) {
        PushGACode({
            'CancelBenefitCategory': cancelBenefitCategory,
            'CancelBenefitName': cancelBenefitName
        }, 'CancelBenefit');
    }

    this.sendBenefitPasswordViaSms = function (sendBenefitPasswordViaSmsBenefitCategory, sendBenefitPasswordViaSmsBenefitName) {
        PushGACode({
            'SendBenefitPasswordViaSmsBenefitCategory': sendBenefitPasswordViaSmsBenefitCategory,
            'SendBenefitPasswordViaSmsBenefitName': sendBenefitPasswordViaSmsBenefitName
        }, 'SendBenefitPasswordViaSms');
    }

    this.downloadBenefitFailClose = function (downloadBenefitFailCategory, downloadBenefitFailName, e) {
        var event = e.classList.contains("loginHeaderClose") ? "DownloadBenefitFailXBtnClick" : "DownloadBenefitFailCloseClick";
        PushGACode({
            'DownloadBenefitFailCategory': downloadBenefitFailCategory,
            'DownloadBenefitFailName': downloadBenefitFailName
        }, event);
    }

    this.cancelBenefitPopup = function (cancelBenefitCategory, cancelBenefitName, e) {
        var btnName;
        if (e.classList.contains('btn-blue'))
            btnName = '';
        else if (e.classList.contains('loginHeaderClose'))
            btnName = 'X';
        else if (e.classList.contains('closeCouponBtn'))
            btnName = '';
        PushGACode({
            'CancelBenefitCategory': cancelBenefitCategory,
            'CancelBenefitName': cancelBenefitName,
            'CancelBenefitButtonClickName': btnName
        }, 'CancelBenefitPopup');
    }

    this.cancelCouponInfo = function (e) {
    
        var cardElement = $(e).parent().parent().parent()[0];
        var benefitNAme = $(cardElement).find(".benefit-name")[0].innerText;
        var benefitCategoryName = $(cardElement).find(".benefit-category-holder")[0].value;
        localStorage.setItem('benefitName', benefitNAme);
        localStorage.setItem('benefitCategoryName', benefitCategoryName);
        PushGACode({
            'CancelBenefitCategory': benefitCategoryName,
            'CancelBenefitName': benefitNAme
        }, 'CancelBenefit');

    }

    this.cardReplacementLogOutClick = function () {
        $(".black-screen").css("display", "block");
        if ($(".noPersonalBenefits").length == 0)
        {
            PushGACode({}, 'CardReplacementLogOutClick');
            personalAreaHandler.logoutPopUpViewGa();
        }
        else {
            PushGACode({}, 'CardReplacementLogOutClickPersonalBenefit');
            personalAreaHandler.logoutPopUpViewGa();

        }

    }
    this.logoutPopUpViewGa = function () {
        if ($(".noPersonalBenefits").length == 0)
        {
            PushGACode({}, 'LogOutPopupView');
        }
        else {
            PushGACode({}, 'LogOutPopupViewPersonalBenefit');

        }
        
    }

    this.toAllCupons = function () {
        PushGACode({}, 'ToAllBenefitsPersonalZone');

    }

    this.formatPointsNumberWithCommas = function (num) {
        while (/(\d+)(\d{3})/.test(num.toString())) {
            num = num.toString().replace(/(\d+)(\d{3})/, '$1' + ',' + '$2');
        }
       $(".pointsToUse").html(num + "   Membership Rewards");
       
    }
   
}




;

var RecaptchaHandler = function (sitekey) {

    this.SiteKey = sitekey;
    this.IsInit = false;
    this.RecaptchaResponse = '';
    this.isLoaded = false;

    //integration
    this.loadCaptcha = function () {
        if (!this.IsInit) {
            this.getRecaptchScripts();
            this.IsInit = true;
        }
    };
    this.getRecaptchScripts = function () {
        $('head').append('<script type="text/javascript" src="https://www.google.com/recaptcha/api.js?onload=executeRecaptchaV3&render=6LfAsykgAAAAAGw_mcjhXhwtUki7YBUXR4vRn6vn"></script>');
    };

    this.updateRecaptchaV3Token = async function () {
        try {
            const token = await grecaptcha.execute(this.SiteKey, { action: 'submit' });
            window.recaptchaV3Token = token;
        } catch (e) {
            console.log(e);
        }
    };

    //token validation
    this.isValid = function () {
        if (!this.RecaptchaResponse || this.RecaptchaResponse.length === "") {
            console.log('reCAPTCHA v3 response is migging or empty');
            return false;
        }
        return true;
    };

};

//token response
function executeRecaptchaV3() {
    grecaptcha.ready(function () {
        grecaptcha.execute("6LfAsykgAAAAAGw_mcjhXhwtUki7YBUXR4vRn6vn", { action: 'login' }).then(function (token) {
            window.recaptchaV3Token = token;
            this.isLoaded = true;
        });
    });
};
var SignupHandler = function () {
    var cGuid;
    var proceedSignup = false;
    var letters = /^[a-z\u0590-\u05fe]+$/i;;
    var phone = /^([0-9]{10})|(\([0-9]{3}\)\s+[0-9]{3}\-[0-9]{4})  /;
    var testEmail = /^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;
    var recaptcha = null;

   
    
    this.validateAllLettets= function(input) {
        return letters.test(input);
    }

    this.validateUserPhone = function(input) {
        return input.length == 10 && phone.test(input);
    }

    this.validateMail = function(input) {
        return testEmail.test(input);
    }


    this.signUpValidateRouthProgram = function (e) {
        if (e != undefined) {
            signupHandler.signUpShowLabel(e);
        }
        var RouthProgram = $('form').find('[name ="AgreeToRouthProgram"]').val();
        if ($(".isMandatoryRouth").css("background-color") == "rgb(255, 255, 255)") {
            $(".errorPrivacyRouth").css("display", "block");
            $("#AgreeToRouthProgram").addClass("focus-error");

        }
        else {
            $(".errorPrivacyRouth").css("display", "none");
            $("#AgreeToRouthProgram").removeClass("focus-error");

        } 

    }

    this.signUpValidatePrivacy = function (e) {
        if (e != undefined)
        {
            signupHandler.signUpShowLabel(e);
        }
        var privacy = $('form').find('[name ="AgreeToPrivacySettings"]').val();
        if ($(".isMandatoryPrivacy").css("background-color") == "rgb(255, 255, 255)")
        {
            $(".errorPrivacy").css("display", "block");
            $("#AgreeToPrivacySettings").addClass("focus-error");
            

        }
        else {
            $(".errorPrivacy").css("display", "none");
            $("#AgreeToPrivacySettings").removeClass("focus-error");

        } 
        
       

    }

    this.signUpShowLabel = function (e) {
        if (e.id == "IdNumber") {
            $('.signupIdOk').css("display", "none");
            $(".errorInvalidId").css("display", "none");
        }
        else if (e.id == "CardNumberSuffix") {
            $(".error6digits").css("display", "none");
            $('.signup6digitsOk').css("display", "none");
        }
        else if (e.id == "Name") {
            $(".errorPname").css("display", "none");
            $('.signupPNameOk').css("display", "none");
        }
        else if (e.id == "FNmae") {
            $(".errorFname").css("display", "none");
            $('.signupFNameOk').css("display", "none");
        }
        else if (e.id == "signupMail") {
            $(".erroremail").css("display", "none");
            $('.signupMailOk').css("display", "none");
        }
        else if (e.id == "signupPhone") {
            $(".errorPhone").css("display", "none");
            $('.signupPhoneOk').css("display", "none");
        }
        else if (e.id == "AgreeToPrivacySettings")
        {
            $(".errorPrivacy").css("display", "none");
        }
        else if (e.id == "AgreeToRouthProgram") {
            $(".errorPrivacyRouth").css("display", "none");
        }
        if (e.value == "")
            $(e).prev().first().addClass("loginLabel");

        if ((e.value != "") && ($(e).prev().first().hasClass("loginLabel"))) {
            $(e).prev().first().removeClass("loginLabel");
            e.classList.remove("noBorder");
            e.classList.add("noBorderBlue");

        }
    }


    this.onblurIdNumber = function (e) {
        loginHandler.showLabel(e);
        var idNumber = $('form').find('[name ="IdNumber"]').val();
        if (idNumber.length > 9 || !validateId(idNumber)) {
            proceed = false;
            $(".errorInvalidId").css("display", "block");
            $("#IdNumber").addClass("focus-error");
            $("#IdNumber").css("border-bottom", "1px solid #b42c01");
        }
        else {
            proceed = true;
            $("#IdNumber").removeClass("focus-error");
            $('.loginIdOk').css("display", "block");
            $("#IdNumber").css("border-bottom", "1px solid #707070");
        }

    }

    this.onblur6digits = function (e) {
        signupHandler.signUpShowLabel(e);
        var card6Digits = $('form').find('[name ="CardNumberSuffix"]').val();
        if (card6Digits.length != 6) {
            $(".error6digits").css("display", "block");
            $("#CardNumberSuffix").addClass("focus-error");
            $("#CardNumberSuffix").css("border-bottom", "1px solid #b42c01");

        }

        else {
            $('.signup6digitsOk').css("display", "block");
            $("#CardNumberSuffix").removeClass("focus-error");
            $("#CardNumberSuffix").css("border-bottom", "1px solid #707070");

        }

    }


    this.signUpValidateId = function (e) {
        signupHandler.signUpShowLabel(e);
        var idnumber = $('form').find('[name ="IdNumber"]').val();
        if ((idnumber.length == 9) && (validateId(idnumber)))
        {
            $('.signupIdOk').css("display", "block");
            $("#IdNumber").removeClass("focus-error");
            $("#IdNumber").css("border-bottom", "1px solid #707070");

        }
            
    }   

    this.validate6Digits = function (e) {
        signupHandler.signUpShowLabel(e);
        var card6Digits = $('form').find('[name ="CardNumberSuffix"]').val();
        if (card6Digits.length == 6)
        {
            $('.signup6digitsOk').css("display", "block");
            $("#CardNumberSuffix").removeClass("focus-error");
            $("#CardNumberSuffix").css("border-bottom", "1px solid #707070");

        }
            
    }


    this.onblurName = function (e) {
        signupHandler.signUpShowLabel(e);
        var name = $('form').find('[name ="Name"]').val();
        if ((name.length < 2) || (!signupHandler.validateAllLettets(name))) {
            $(".errorPname").css("display", "block");
            $("#Name").addClass("focus-error");
            $("#Name").css("border-bottom", "1px solid #b42c01");

        }

        else {
            $('.signupPNameOk').css("display", "block");
            $("#Name").removeClass("focus-error");
            $("#Name").css("border-bottom", "1px solid #707070");

        }


    }

    this.onblurFName = function (e) {
        signupHandler.signUpShowLabel(e);
        var name = $('form').find('[name ="FName"]').val();
        if ((name.length < 2) || (!signupHandler.validateAllLettets(name))) {
            proceedSignup = false;
            $(".errorFname").css("display", "block");
            $('.signupFNameOk').css("display", "none");
            $("#FName").addClass("focus-error");
            $("#FName").css("border-bottom", "1px solid #b42c01");
        }
        else {
            $('.signupFNameOk').css("display", "block");
            $(".errorFname").css("display", "none");
            $("#FName").removeClass("focus-error");
            $("#FName").css("border-bottom", "1px solid #707070");
            proceedSignup = true;
        }
    }

    this.validateName = function (e) {
        signupHandler.signUpShowLabel(e);
        var name = $('form').find('[name ="Name"]').val();
       
        if ((name.length == 2 ) && (signupHandler.validateAllLettets(name)))
        {
            $('.signupPNameOk').css("display", "block");
            $("#Name").removeClass("focus-error");
            $("#Name").css("border-bottom", "1px solid #707070");

        }
            
    }

    this.validateLastName = function (e) {
        signupHandler.signUpShowLabel(e);
        var name = $('form').find('[name ="FName"]').val();
            if ((name.length == 2) && (signupHandler.validateAllLettets(name))) {
            $('.signupFNameOk').css("display", "block");
            $(".errorFname").css("display", "none");
            $("#FName").removeClass("focus-error");
            $("#FName").css("border-bottom", "1px solid #707070");
            proceedSignup = true;
        }
    }

    this.validateEmail = function (e) {
        signupHandler.signUpShowLabel(e);
        var email = $('form').find('[name ="signupMail"]').val();
       
        if (signupHandler.validateMail(email))
        {
            $('.signupMailOk').css("display", "block");
            $("#signupMail").removeClass("focus-error");
            $("#signupMail").css("border-bottom", "1px solid #707070");

        }
            
    }

    this.onblurEmail = function(e){
        signupHandler.signUpShowLabel(e);
        var email = $('form').find('[name ="signupMail"]').val();
        if (!signupHandler.validateMail(email)) {
            $(".erroremail").css("display", "block");
            $("#signupMail").addClass("focus-error");
            $("#signupMail").css("border-bottom", "1px solid #b42c01");

        }
        else {
            $('.signupMailOk').css("display", "block");
            $("#signupMail").removeClass("focus-error");
            $("#signupMail").css("border-bottom", "1px solid #707070");

        }
    
    }

    this.validatePhone = function (e) {
        signupHandler.signUpShowLabel(e);
        var phone = $('form').find('[name ="signupPhone"]').val();
        if (signupHandler.validateUserPhone(phone))
        {
            $('.signupPhoneOk').css("display", "block");
            $("#signupPhone").removeClass("focus-error");
            $("#signupPhone").css("border-bottom", "1px solid #707070");

        }
           
    }

    this.onblurPhone = function (e) {
        signupHandler.signUpShowLabel(e);
        var phone = $('form').find('[name ="signupPhone"]').val();
        if (!signupHandler.validateUserPhone(phone)) {
            $(".errorPhone").css("display", "block");
            $("#signupPhone").addClass("focus-error");
            $("#signupPhone").css("border-bottom", "1px solid #b42c01");

        }
        else {
            $('.signupPhoneOk').css("display", "block");
            $("#signupPhone").removeClass("focus-error");
            $("#signupPhone").css("border-bottom", "1px solid #707070");

        }

    };

    this.setRecaptcha = function (siteKey) {
        recaptcha = new RecaptchaHandler(siteKey);
        recaptcha.loadCaptcha();
    };

    this.submitSignUp = async function (data) {
       
        proceedSignup = signupHandler.checkSignupForm();
        if (proceedSignup) {
            var recaptchaResponse = "";

            if (recaptcha !== null) {
                await recaptcha.updateRecaptchaV3Token();
                recaptchaResponse = window.recaptchaV3Token;
            }
             $(".isracardLoader").css("display", "block");
            $("#signupFormBtn").css("display", "none");


            var signupDict = fetchInput(data);
           
            ajax(window.epi.Layout.ServiceDomain + "/User/SignUpWeb",
                "POST",
                JSON.stringify({
                    "IdNumber": signupDict["IdNumber"],
                    "DeviceId": "123123",
                    "CellPhonePrefix": signupDict["signupPhone"].slice(0, 3),
                    "CellPhone": signupDict["signupPhone"].slice(3),
                    "Email": signupDict["signupMail"],
                    "CardNumberSuffix": signupDict["CardNumberSuffix"],
                    "BirthDate": "2017-08-01",
                    "FirstName": signupDict["Name"],
                    "LastName": signupDict["FName"],
                    "Gender": 0,
                    "RecaptchaResponse": recaptchaResponse,
                    "AgreeToReceiveMessages": signupDict["AgreeToReceiveMessages"] == "on" ? 1 : 0, "AgreeToPrivacySettings": signupDict["AgreeToPrivacySettings"] == "on" ? 1 : 0,
                    "AgreeToDailyDeal": signupDict["AgreeToDailyDeal"] == "on" ? 1 : 0,
                    "SiteIdentifier": window.epi.Layout.SiteIdentifier,
                    "DailyDealRegister": window.epi.Layout.SiteIdentifier=="a"? 0 : 1
                }), function (data) {
                    signupHandler.submitSignUp_callback(data)
                }, function () { generalError() }
            );
        }
        else {
            $(".focus-error").focus();
        }
    }


    this.userRegistrationEloquaEvent = function (idNumber, countryCode) {
        ajax(window.epi.Layout.ServiceDomain + "/User/GetCustomerEloquaGuid",
            "POST",
            JSON.stringify({
                "id": idNumber,
                "countryCode": countryCode,
                SiteIdentifier: window.epi.Layout.SiteIdentifier
            }), function (res) {
                cGuid = res.isSuccess === true ? res.data.userGuid : "";
                eloquaHandler("BenefitRegister", '', '', cGuid);
            }, function () { generalError() }
        );
    }

    this.submitSignUp_callback = function (response) {
        $(".isracardLoader").css("display", "none");
        $("#signupFormBtn").css("display", "block");
        if (response.isSuccess) {
            signupHandler.userRegistrationEloquaEvent($("#IdNumber").val(), "212");
            signupHandler.transparentLogin();

            }
        else {
            $(".benefit-failed-msg").html(response.errors[0].message);
            $("#error-msg-Modal").modal('show');
        }
    }

    this.eloquaEvent = function () {
        loginHandler.getCustomerGuid($(".loginInput").val(), "212");
        
    }

    this.transparentLogin = async function () {
        var recaptchaResponse = "";

        if (recaptcha !== null) {
            await recaptcha.updateRecaptchaV3Token();
            recaptchaResponse = window.recaptchaV3Token;
        }

        ajax(window.epi.Layout.ServiceDomain + "/User/Login",
            "POST",
            JSON.stringify({
                DeviceId: "123",
                "CardNumberSuffix": $('form').find('[name ="CardNumberSuffix"]').val(),
                "IdNumber": $('form').find('[name ="IdNumber"]').val(),
                SiteIdentifier: window.epi.Layout.SiteIdentifier,
                "RecaptchaResponse": recaptchaResponse,
                IdType: '1'
            }), function (data) {
                loginHandler.submitLogin_callback(data,0)
            }, function () { generalError() }
        );
    }

    this.checkSignupForm = function() {
        var counter = 0;
        $('span[class*=Ok]').each(function (index, value) {
            if (this.style.display == "block")
                counter++;
            else {
                this.nextElementSibling.style.display = "block";
            }
        });
        if (counter == 6 && ($(".isMandatoryPrivacy").css("background-color") != "rgb(255, 255, 255)") && ($(".isMandatoryRouth").css("background-color") != "rgb(255, 255, 255)")) {
            return true;
        }
        else {
            this.signUpValidatePrivacy();
            this.signUpValidateRouthProgram();
        }
           
    }







};
